<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>html+css+js</title>
    <link href="/2022/09/14/html-css-js/"/>
    <url>/2022/09/14/html-css-js/</url>
    
    <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="æ•´ä½“æ¡†æ¶"><a href="#æ•´ä½“æ¡†æ¶" class="headerlink" title="æ•´ä½“æ¡†æ¶"></a>æ•´ä½“æ¡†æ¶</h2><p>æ–‡ä»¶ç±»å‹</p><p>â€‹    htmlï¼ˆæŒ‡å®šè¯­è¨€ï¼‰</p><p>â€‹        headï¼ˆåˆ¶å®šå­—ç¬¦é›†ï¼‰</p><p>â€‹        body</p><p>â€‹    /html</p><p>å…ƒæ•°æ®<code>&lt;meta&gt;</code>æè¿°æ•°æ®çš„æ•°æ®</p><h2 id="å¸¸ç”¨ç»“æ„"><a href="#å¸¸ç”¨ç»“æ„" class="headerlink" title="å¸¸ç”¨ç»“æ„"></a>å¸¸ç”¨ç»“æ„</h2><h3 id="1-lt-p-gt-æ®µè½"><a href="#1-lt-p-gt-æ®µè½" class="headerlink" title="1. &lt;p&gt;æ®µè½"></a>1. <code>&lt;p&gt;</code>æ®µè½</h3><h3 id="2-åˆ—è¡¨"><a href="#2-åˆ—è¡¨" class="headerlink" title="2. åˆ—è¡¨"></a>2. åˆ—è¡¨</h3><p>â€‹    æœ‰åºåˆ—è¡¨<code>&lt;ol&gt;</code></p><p>â€‹    æ— åºåˆ—è¡¨<code>&lt;ul&gt;</code></p><p>â€‹        åˆ—è¡¨<code>&lt;li&gt;</code></p><h3 id="3-å›¾ç‰‡-lt-img-attribute-gt"><a href="#3-å›¾ç‰‡-lt-img-attribute-gt" class="headerlink" title="3. å›¾ç‰‡&lt;img {$attribute} /&gt;"></a>3. å›¾ç‰‡<code>&lt;img &#123;$attribute&#125; /&gt;</code></h3><p>ä»–ä¸åŒ…å«ä»»ä½•ç»“æ„ï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹åº”çš„ç»“æŸæ ‡ç­¾ç¬¦å·</p><p>src æ¥æº</p><p>alt è¡¨è¿°å›¾ç‰‡</p><p>width å®½åº¦</p><p>height é«˜åº¦</p><p>transform: scale({å€æ•°});</p><h3 id="4-é”šå…ƒç´ -lt-a-gt"><a href="#4-é”šå…ƒç´ -lt-a-gt" class="headerlink" title="4. é”šå…ƒç´ &lt;a&gt;"></a>4. é”šå…ƒç´ <code>&lt;a&gt;</code></h3><p>å¯ä»¥æ’å…¥åœ¨pä¸­çš„å…ƒç´ ï¼Œæ¯”å¦‚è¶…é“¾æ¥</p><p>é€šå¸¸<strong>aå…ƒç´ </strong>ä¸æ·»åŠ targetå±æ€§æ—¶æ˜¯åœ¨å½“å‰é¡µé¢åŠ è½½é“¾æ¥ã€‚å½“æˆ‘ä»¬éœ€è¦æ¯æ¬¡éƒ½åœ¨æ–°é€‰é¡¹å¡åŠ è½½é“¾æ¥æ—¶ï¼Œåˆ™ä¼šåœ¨<strong>å…ƒç´ </strong>ä¸Šæ·»åŠ <strong>target=â€_blankâ€</strong> å…³é”®å­—å†™æ³•ï¼Œä¹Ÿæ˜¯å¤§å®¶ç»å¸¸ä½¿ç”¨çš„æ–¹æ³•ã€‚</p><h3 id="5-æ®µè½æ ¼å¼"><a href="#5-æ®µè½æ ¼å¼" class="headerlink" title="5. æ®µè½æ ¼å¼"></a>5. æ®µè½æ ¼å¼</h3><figure class="highlight html"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>æ–‡ç« å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>å¯¼èˆª<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>æ–‡ç« æ­£æ–‡<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç»Ÿä¸€ç”¨<code>&lt;div&gt;&lt;/div&gt;</code>æ¥è¡¨ç¤ºï¼Œä¸ä»£è¡¨æ„ä¹‰ï¼Œå•çº¯çš„æ˜¯ä¸€ä¸ªç›’å­ï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä»¨å°±æ˜¯è¯­ä¹‰html</p><p><code>&lt;asides&gt;&lt;/asides&gt;</code>æ ‡ç­¾å¸¸ç”¨æ¥å†™è¡¥å……ä¿¡æ¯</p><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>INLINEå†…è”CSS, INTERNALå†…éƒ¨CSS, EXTERNALå¤–éƒ¨CSS</p><p>åœ¨htmlçš„headä¸­ï¼Œé€šè¿‡linkæ¥è¿æ¥cssæ–‡ä»¶</p><p><code>&lt;span&gt;</code>ä¸€ä¸ªæ™®é€šçš„å†…è”æ–‡å­—æ ‡ç­¾</p><p>relå±æ€§ï¼Œ<strong>æè¿°çš„æ˜¯å½“å‰é¡µé¢ä¸hrefæ‰€æŒ‡å®šæ–‡æ¡£çš„å…³ç³»</strong></p><h2 id="CSSçš„ç”¨æ³•"><a href="#CSSçš„ç”¨æ³•" class="headerlink" title="CSSçš„ç”¨æ³•"></a>CSSçš„ç”¨æ³•</h2><h3 id="1-å†…è”CSS"><a href="#1-å†…è”CSS" class="headerlink" title="1. å†…è”CSS"></a>1. å†…è”CSS</h3><p>å°±æ˜¯ç›´æ¥å†™åœ¨htmlå†…éƒ¨</p><h3 id="2-å†…éƒ¨CSS"><a href="#2-å†…éƒ¨CSS" class="headerlink" title="2. å†…éƒ¨CSS"></a>2. å†…éƒ¨CSS</h3><h3 id="3-å¤–éƒ¨CSS"><a href="#3-å¤–éƒ¨CSS" class="headerlink" title="3. å¤–éƒ¨CSS"></a>3. å¤–éƒ¨CSS</h3><p>lié»˜è®¤å­—ä½“æ˜¯16</p><h2 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><h3 id="åˆ—è¡¨é€‰æ‹©å™¨"><a href="#åˆ—è¡¨é€‰æ‹©å™¨" class="headerlink" title="åˆ—è¡¨é€‰æ‹©å™¨"></a>åˆ—è¡¨é€‰æ‹©å™¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h1</span>,<br><span class="hljs-selector-tag">h2</span>,<br><span class="hljs-selector-tag">h3</span>,<br><span class="hljs-selector-tag">h4</span>,<br><span class="hljs-selector-tag">p</span>,<br><span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: sans-serif;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å•ä¸€é€‰æ‹©å™¨"><a href="#å•ä¸€é€‰æ‹©å™¨" class="headerlink" title="å•ä¸€é€‰æ‹©å™¨"></a>å•ä¸€é€‰æ‹©å™¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åä»£é€‰æ‹©å™¨"><a href="#åä»£é€‰æ‹©å™¨" class="headerlink" title="åä»£é€‰æ‹©å™¨"></a>åä»£é€‰æ‹©å™¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">footer</span> <span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="idå’Œclass"><a href="#idå’Œclass" class="headerlink" title="idå’Œclass"></a>idå’Œclass</h2><p>idä¸å¯ä»¥é‡å¤å‘½åï¼Œä½†classå¯ä»¥é‡å¤å‘½åã€‚</p><p>æˆ‘ä»¬ä¸€èˆ¬åªç”¨classå¾ˆå°‘ç”¨idï¼Œè¦ä¸ºæœªæ¥ç€æƒ³ã€‚</p><h2 id="é¢œè‰²æ¨¡å¼"><a href="#é¢œè‰²æ¨¡å¼" class="headerlink" title="é¢œè‰²æ¨¡å¼"></a>é¢œè‰²æ¨¡å¼</h2><h3 id="RGB-RGBA-NOTATION"><a href="#RGB-RGBA-NOTATION" class="headerlink" title="RGB/RGBA NOTATION"></a>RGB/RGBA NOTATION</h3><p>rbgaå°±æ˜¯å¸¦æœ‰é€æ˜åº¦ï¼Œå¤šäº†ä¸€ä¸ªçº¬åº¦</p><h3 id="HEXADECIMAL-NOTATION"><a href="#HEXADECIMAL-NOTATION" class="headerlink" title="HEXADECIMAL NOTATION"></a>HEXADECIMAL NOTATION</h3><p>0 to ff çš„ï¼ˆå³0 to 255ï¼‰çš„æ•°å€¼æ ‡å‡†è‰²</p><h1 id="00-ff-ff-ä¸‰ä½è¡¨ç¤ºçš„ä¹Ÿæ˜¯rgbçš„ä¸‰è‰²çš„0-255"><a href="#00-ff-ff-ä¸‰ä½è¡¨ç¤ºçš„ä¹Ÿæ˜¯rgbçš„ä¸‰è‰²çš„0-255" class="headerlink" title="00 ff ff ä¸‰ä½è¡¨ç¤ºçš„ä¹Ÿæ˜¯rgbçš„ä¸‰è‰²çš„0-255"></a>00 ff ff ä¸‰ä½è¡¨ç¤ºçš„ä¹Ÿæ˜¯rgbçš„ä¸‰è‰²çš„0-255</h1><p>border: 5px solid #1098ad; ã€ç²—ç»†ã€æ ·å¼ã€é¢œè‰²ã€‘ä¹Ÿåˆ†ä¸ºtopï¼Œbottomç­‰ç­‰</p><p>ä¼ªç±»</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:first</span>-child &#123;<br>  <span class="hljs-attribute">font-weight</span>: bold;<br>&#125; <br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ˜¯ä»1å¼€å§‹è®¡æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨oddè¿™æ ·çš„å…³é”®å­—</span><br><span class="hljs-comment">*/</span><br><span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) &#123; <br>  <span class="hljs-attribute">color</span>:red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é’ˆå¯¹-lt-a-gt-é”šå…ƒç´ çš„ä¸€äº›css"><a href="#é’ˆå¯¹-lt-a-gt-é”šå…ƒç´ çš„ä¸€äº›css" class="headerlink" title="é’ˆå¯¹&lt;a&gt;é”šå…ƒç´ çš„ä¸€äº›css"></a>é’ˆå¯¹<code>&lt;a&gt;</code>é”šå…ƒç´ çš„ä¸€äº›css</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* è¶…é“¾æ¥é™æ€é¢œè‰² */</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1098ad</span>;<br>  <span class="hljs-attribute">text-decoration</span>: none;<br>&#125;<br><br><span class="hljs-comment">/* ç‚¹å‡»ä¹‹åçš„é¢œè‰² */</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1098ad</span>;<br>&#125;<br><br><span class="hljs-comment">/* é¼ æ ‡æ‚¬åœçš„é¢œè‰² */</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: orangered;<br>  <span class="hljs-attribute">font-weight</span>: bold;<br>  <span class="hljs-attribute">text-decoration</span>: underline orangered;<br>&#125;<br><br><span class="hljs-comment">/* æ¿€æ´»åçš„é¢œè‰²ï¼ˆé¼ æ ‡ç‚¹å‡»ä½†ä¸ç¡®å®šçš„æ—¶å€™ï¼‰ */</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: black;<br>  <span class="hljs-attribute">font-style</span>: italic;<br>&#125;<br></code></pre></td></tr></table></figure><p>å£è¯€LVHA</p><h2 id="CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"><a href="#CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§" class="headerlink" title="CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"></a>CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§</h2><p>åŒçº§åˆ«ä¸‹ï¼Œæœ€åä¸€ä¸ªé€‰æ‹©å™¨ä½œä¸ºcode applies</p><h3 id="æœ€æœ€é«˜çº§-ï¼important-å…³é”®å­—"><a href="#æœ€æœ€é«˜çº§-ï¼important-å…³é”®å­—" class="headerlink" title="æœ€æœ€é«˜çº§ - ï¼important å…³é”®å­—"></a>æœ€æœ€é«˜çº§ - ï¼important å…³é”®å­—</h3><h3 id="æœ€é«˜çº§-å†…æ•›æ ·å¼"><a href="#æœ€é«˜çº§-å†…æ•›æ ·å¼" class="headerlink" title="æœ€é«˜çº§ - å†…æ•›æ ·å¼"></a>æœ€é«˜çº§ - å†…æ•›æ ·å¼</h3><h3 id="é«˜çº§-ID-é€‰æ‹©å™¨"><a href="#é«˜çº§-ID-é€‰æ‹©å™¨" class="headerlink" title="é«˜çº§ - ID é€‰æ‹©å™¨"></a>é«˜çº§ - ID é€‰æ‹©å™¨</h3><h3 id="ä¸­çº§-ç»§æ‰¿-é€‰æ‹©å™¨-or-ä¼ªç»§æ‰¿-é€‰æ‹©å™¨"><a href="#ä¸­çº§-ç»§æ‰¿-é€‰æ‹©å™¨-or-ä¼ªç»§æ‰¿-é€‰æ‹©å™¨" class="headerlink" title="ä¸­çº§ - ç»§æ‰¿ é€‰æ‹©å™¨ or ä¼ªç»§æ‰¿ é€‰æ‹©å™¨"></a>ä¸­çº§ - ç»§æ‰¿ é€‰æ‹©å™¨ or ä¼ªç»§æ‰¿ é€‰æ‹©å™¨</h3><h3 id="ä½çº§-å…ƒç´ -é€‰æ‹©å™¨"><a href="#ä½çº§-å…ƒç´ -é€‰æ‹©å™¨" class="headerlink" title="ä½çº§ - å…ƒç´  é€‰æ‹©å™¨"></a>ä½çº§ - å…ƒç´  é€‰æ‹©å™¨</h3><h3 id="æœ€ä½çº§-é€šç”¨-é€‰æ‹©å™¨"><a href="#æœ€ä½çº§-é€šç”¨-é€‰æ‹©å™¨" class="headerlink" title="æœ€ä½çº§ - é€šç”¨ é€‰æ‹©å™¨"></a>æœ€ä½çº§ - é€šç”¨ é€‰æ‹©å™¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure><p>selector specificityæ˜¾ç¤ºä¼˜å…ˆçº§</p><h2 id="CSS-BOX-MODEL"><a href="#CSS-BOX-MODEL" class="headerlink" title="CSS BOX MODEL"></a>CSS BOX MODEL</h2><p><a href="https://www.w3schools.com/css/css_boxmodel.asp">https://www.w3schools.com/css/css_boxmodel.asp</a></p><h3 id="Margins-amp-paddings"><a href="#Margins-amp-paddings" class="headerlink" title="Margins &amp; paddings"></a>Margins &amp; paddings</h3><p>è¿™ä¿©ä¸æ˜¯æ–‡æœ¬å±æ€§ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿè¿›è¡Œç»§æ‰¿ã€‚æƒ³è¦å…¨å±€çš„è¯å°±è¦ç”¨é€šç”¨é€‰æ‹©å™¨ã€‚</p><p>å½“æœ‰ä¸¤ä¸ªç›¸å åŠ çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸Šå’Œä¸‹ï¼Œä»–ä»¬ä¼šå–å¤§çš„é‚£ä¸ªä½œä¸ºé—´è·ã€‚ï¼ˆæŠ˜å è¾¹è·ï¼Œè¾¹è·å¡Œé™·ï¼‰</p><p><strong>å—çº§å…ƒç´ ä¼šå æ®çˆ¶å…ƒç´ å®½åº¦çš„100%</strong></p><h3 id="å—çº§å…ƒç´ -å¯ä»¥åˆ›é€ å‚ç›´ç©ºé—´-BLOCK-LEVEL-BOXES"><a href="#å—çº§å…ƒç´ -å¯ä»¥åˆ›é€ å‚ç›´ç©ºé—´-BLOCK-LEVEL-BOXES" class="headerlink" title="å—çº§å…ƒç´ (å¯ä»¥åˆ›é€ å‚ç›´ç©ºé—´) BLOCK-LEVEL BOXES"></a>å—çº§å…ƒç´ (å¯ä»¥åˆ›é€ å‚ç›´ç©ºé—´) BLOCK-LEVEL BOXES</h3><p><strong>display:block</strong></p><p>body, main, header, footer, section, nav, aside, div, h1-h6, p, ul, ol, li, etc.</p><h3 id="å†…è”å—å…ƒç´ -INLINE-BLOCK-BOXES"><a href="#å†…è”å—å…ƒç´ -INLINE-BLOCK-BOXES" class="headerlink" title="å†…è”å—å…ƒç´  INLINE-BLOCK BOXES"></a>å†…è”å—å…ƒç´  INLINE-BLOCK BOXES</h3><p><strong>display: inline-block</strong></p><p>Img</p><p>åªå ç”¨è‡ªå·±åº”è¯¥å ç”¨çš„ç©ºé—´ï¼Œè€Œä¸æœ‰ä»»ä½•çš„æ¢è¡Œç¬¦ã€‚æˆ‘ä»¬å°±æ˜¯æ²¡æœ‰æ¢è¡Œç¬¦ï¼Œä½†æ˜¯å¯ä»¥ç”¨marginæ¥å¢åŠ å‚ç›´ç©ºé—´ã€‚</p><h3 id="å†…è”å…ƒç´ -ä¸åˆ›é€ ä»»ä½•å‚ç›´ç©ºé—´-INLINE-LEVEL-BOXES"><a href="#å†…è”å…ƒç´ -ä¸åˆ›é€ ä»»ä½•å‚ç›´ç©ºé—´-INLINE-LEVEL-BOXES" class="headerlink" title="å†…è”å…ƒç´ (ä¸åˆ›é€ ä»»ä½•å‚ç›´ç©ºé—´) INLINE-LEVEL BOXES"></a>å†…è”å…ƒç´ (ä¸åˆ›é€ ä»»ä½•å‚ç›´ç©ºé—´) INLINE-LEVEL BOXES</h3><p><strong>display:inline</strong></p><p>a, img,  strong, em, button, etc.</p><h2 id="å®šä½æ¨¡å¼"><a href="#å®šä½æ¨¡å¼" class="headerlink" title="å®šä½æ¨¡å¼"></a>å®šä½æ¨¡å¼</h2><h3 id="å¸¸è§„å¸ƒå±€-NORMAL-FLOW"><a href="#å¸¸è§„å¸ƒå±€-NORMAL-FLOW" class="headerlink" title="å¸¸è§„å¸ƒå±€ NORMAL FLOW"></a>å¸¸è§„å¸ƒå±€ NORMAL FLOW</h3><p>default positioning</p><p>positionï¼šrelative</p><h3 id="ç»å¯¹ä½ç½®-ABSOLUTE-POSITIONING"><a href="#ç»å¯¹ä½ç½®-ABSOLUTE-POSITIONING" class="headerlink" title="ç»å¯¹ä½ç½® ABSOLUTE POSITIONING"></a>ç»å¯¹ä½ç½® ABSOLUTE POSITIONING</h3><p>ä»–æ˜¯åœ¨å¯¹åº”çš„å¸ƒå±€å—é‡Œé¢çš„ç»å¯¹ä½ç½®ã€‚</p><h2 id="ä¼ªç±»å’Œä¼ªå…ƒç´ "><a href="#ä¼ªç±»å’Œä¼ªå…ƒç´ " class="headerlink" title="ä¼ªç±»å’Œä¼ªå…ƒç´ "></a>ä¼ªç±»å’Œä¼ªå…ƒç´ </h2><p>ä¼ªç±» :</p><p>ä¼ªå…ƒç´  ::</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h3</span> + <span class="hljs-selector-tag">p</span> :: first-line &#123;<br>  <span class="hljs-comment">/* ä»…ä»…æ˜¯h3çš„pçš„ç¬¬ä¸€è¡Œ */</span><br>&#125;<br></code></pre></td></tr></table></figure><p>:after ä¼ªå…ƒç´ åœ¨å…ƒç´ ä¹‹åæ·»åŠ å†…å®¹ã€‚</p><p>è¿™ä¸ªä¼ªå…ƒç´ å…è®¸åˆ›ä½œäººå‘˜åœ¨å…ƒç´ å†…å®¹çš„æœ€åé¢æ’å…¥ç”Ÿæˆå†…å®¹ã€‚é»˜è®¤åœ°ï¼Œè¿™ä¸ªä¼ªå…ƒç´ æ˜¯è¡Œå†…å…ƒç´ ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨å±æ€§ display æ”¹å˜è¿™ä¸€ç‚¹ã€‚</p><h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><h3 id="FLOAT-LAYOUTS"><a href="#FLOAT-LAYOUTS" class="headerlink" title="FLOAT LAYOUTS"></a>FLOAT LAYOUTS</h3><p>loremè¾“å…¥å¯ä»¥äº§ç”Ÿç›²æ–‡ï¼Œéšæœºæ–‡å­—ã€‚</p><p>å°±æ˜¯è®©å…¶åœ¨å¯¹åº”çš„çˆ¶ç±»é‡Œé¢é£˜æ¥é£˜å»ã€‚</p><p>clearfix hack</p><p>è§£å†³floaté€ æˆçš„csså¡Œé™·çš„æ–¹æ³•ï¼šå¢åŠ ä¸€ä¸ªclearfixï¼ˆå°±è¿™ä¹ˆå«ï¼‰åœ¨ç±»çš„åå­—ä¸­</p><p><strong>ä¸€ä¸ªæ ‡ç­¾å†…å¯ä»¥æºå¸¦å¤šä¸ªç±»å</strong></p><p>ç±»åæŒ‡çš„æ˜¯ class çš„å±æ€§å€¼ã€‚</p><p>ä¸€ä¸ªæ ‡ç­¾å†…å¯ä»¥æºå¸¦å¤šä¸ªç±»åï¼ŒæŒ‡çš„æ˜¯ class çš„å±æ€§å€¼å¯ä»¥æœ‰å¤šä¸ªï¼Œæ¯ä¸€ä¸ªå±æ€§å€¼ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><p>ä¾‹å­ï¼š</p><p>&lt;æ ‡ç­¾å class = â€å€¼1 å€¼2 å€¼3â€&gt;&lt;/æ ‡ç­¾å&gt;</p><p>å¤šä¸ªç±»åçš„ä¼˜ç‚¹ï¼š</p><p>1.å‡å°‘ css çš„ä»£ç é‡</p><p>2.å¤šä¸ªç±»åçš„æ ·å¼ä¼šå åŠ åˆ°å½“å‰å…ƒç´ ä¸Šé¢</p><p>åœ¨clearfix::afteråŠ å…¥ä¸€ä¸ªç©ºå…ƒç´ ï¼Œä½†æ˜¯æœ¬èº«ä»–æ˜¯inlineçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠå‡çº§æˆblockçº§åˆ«ã€‚è¿™æ ·å°±èµ‹äºˆä»–å†…å®¹ã€‚æœ¬èº«floatå·²ç»æ¼‚æµ®èµ·æ¥äº†ã€‚</p><p><strong>floatéƒ½æ˜¯åœ¨paddingé‡Œé¢floatï¼</strong></p><p>å…¶floatçš„å…ƒç´ ä¸Šä¸‹å·¦å³éƒ½ä¼šè¢«floatæ‰€å½±å“å¦‚æœæ˜¯åœ¨åŒä¸€ä¸ªçˆ¶å¸ƒå±€é‡Œé¢çš„è¯</p><h3 id="FLEXBOX"><a href="#FLEXBOX" class="headerlink" title="FLEXBOX"></a>FLEXBOX</h3><p><strong>ğŸŒŸbox-sizing</strong>ï¼šborder-boxè®¾å®šä¸ºç›´æ¥å°±æ˜¯ç›’å­çš„å¤§å°ï¼Œä¸å†æ˜¯height+paddingçš„å¤§å°ã€‚å˜æˆäº†çº¯heightçš„å¤§å°ã€‚æ­¤æ¨¡å¼ä¸‹æˆ‘ä»¬çš„paddingå°±ä¸æ˜¯å¡«å……çš„æ¦‚å¿µäº†ï¼Œè€Œæ˜¯æŒ¤å‹æ¶ˆå»å¤šå°‘ç›’å­çš„ç©ºé—´ã€‚</p><p>å°±æ˜¯boxé‡Œé¢çš„å…ƒç´ ï¼Œé€šè¿‡flexæ¥æ“ä½œã€‚è§£å†³å‚ç›´å±…ä¸­ï¼Œè¿˜æœ‰å¹¶æ’åŒé«˜ã€‚</p><p>åˆä¸€ä¸ªmain axis å’Œä¸€ä¸ª cross axisï¼ˆå¯¹é½ç”¨çš„ï¼‰</p><h4 id="FLEX-CONTAINER"><a href="#FLEX-CONTAINER" class="headerlink" title="FLEX CONTAINER"></a>FLEX CONTAINER</h4><ul><li>gap: 0 | { length }</li><li>justify-content: flex-start | flex-end | center | space-between | space around | space-evenly  <strong>é€šè¿‡æ¨ªè½´æ’åˆ—å…ƒç´ </strong></li><li>align-items: stretch | flex-start | flex-end | center | baseline <strong>é€šè¿‡çºµè½´æ’åˆ—å…ƒç´ </strong></li><li>flex-direction: row | row-reverse | column | column-reverse</li><li>flex-wrap: nowrap | wrap | wrap-reverse</li><li>align-content: stretch | flex-start | flex-end | center | space-between | space-around</li><li>flex-direction: colæ˜¯æ¨ªç€çš„ä¸€æ’æ’ï¼Œrowæ˜¯çºµå‘ä¸€åˆ—åˆ—ï¼Œæ§åˆ¶çš„æ˜¯ä¸»è½´çš„æ–¹å‘ã€‚æ¨ªè½´cross axisä¹Ÿå˜äº†ï¼Œå¯¼è‡´justifyä¹Ÿå˜äº†æ–¹å‘ï¼Œå› ä¸ºjustifyæ˜¯æ ¹æ®ä¸»è½´èµ°çš„ã€‚</li></ul><h4 id="FLEX-ITEMS"><a href="#FLEX-ITEMS" class="headerlink" title="FLEX ITEMS"></a>FLEX ITEMS</h4><ul><li>align-self: auto | stretch | flex-start | flex-end | center | baseline</li><li>flex-grow: 0 | { integer } <strong>1ä¸ºå¼€å¯ï¼Œè‡ªåŠ¨å¡«å……å‰©ä½™ç©ºé—´ï¼Œå¦‚æœæœ‰çš„è¯</strong>(å¸¸ç”¨äºæŒ‰æ¯”ä¾‹å¡«å……)</li><li>flex-shrink: 1 | { integer } <strong>1ä¸ºå¼€å¯ï¼Œ flex å…ƒç´ ä»…åœ¨é»˜è®¤å®½åº¦ä¹‹å’Œå¤§äºå®¹å™¨çš„æ—¶å€™æ‰ä¼šå‘ç”Ÿæ”¶ç¼©ï¼Œå…¶æ”¶ç¼©çš„å¤§å°æ˜¯ä¾æ®flex-shrink çš„å€¼</strong></li><li>flex-basis: auto | { length } <strong>å¹¶éä¸¥æ ¼å®½åº¦ï¼Œåœ¨ä¸è¶…è¿‡çš„æƒ…å†µä¸‹æ˜¯è®¾ç½®çš„å¤§å°</strong></li><li>flex: 0 1 auto | { int } { int } { len } <strong>ç¬¬ä¸€ä¸ªæ˜¯flex-grow ç¬¬äºŒä¸ªæ˜¯flex-shrink ç¬¬ä¸‰ä¸ªæ˜¯flex-basis</strong></li><li>order: 0 | { integer } <strong>é»˜è®¤åˆå§‹éƒ½ä¸º0</strong></li></ul><h3 id="CSS-GRID-cssç½‘æ ¼"><a href="#CSS-GRID-cssç½‘æ ¼" class="headerlink" title="CSS GRID(cssç½‘æ ¼)"></a>CSS GRID(cssç½‘æ ¼)</h3><h4 id="åˆ¶è¡¨"><a href="#åˆ¶è¡¨" class="headerlink" title="åˆ¶è¡¨"></a>åˆ¶è¡¨</h4><p>é€‚åˆå¤§å¸ƒå±€çš„</p><p>1Då¸ƒå±€ç”¨flex box</p><p>2Då¸ƒå±€ç”¨GRID </p><p>frå•ä½ä¸æ˜¯px</p><p>å¦‚æœæœ‰ä¸€ä¸ªæ˜¾å¼çš„å›ºå®šå€¼ï¼Œé‚£ä¹ˆfrå°±æ˜¯ä»¥è¿™ä¸ªä¸ºå•ä½1fr</p><p><img src="https://www.w3schools.com/css/grid_gaps.png" alt="img"></p><p>æœ‰éšå¼è¡Œå’Œæ˜¾å¼è¡Œ </p><p>gridçº¿æ˜¯ä»1å¼€å§‹çš„ æœ€åæ˜¯-1</p><p>è‡ªåŠ¨æ’ç‰ˆç”Ÿæˆæ–°çš„è¡Œ</p><p>Display:gird</p><p>Grid-template-columns(or rows)</p><p>grid-template-columns: 1fr 300px; è¿™æ ·frå°±ä¼šå¡«å……å‰©ä½™ç©ºé—´è€Œä¸”frå˜æˆå•ä½ã€‚</p><p>åº”è¯¥æ˜¯blockçš„éƒ½æ˜¯å¯ä»¥å½“ä½œç‹¬ç«‹çš„ä¸€ä¸ªceil</p><h4 id="æ’ç‰ˆ"><a href="#æ’ç‰ˆ" class="headerlink" title="æ’ç‰ˆ"></a>æ’ç‰ˆ</h4><p><strong>æ•´ä½“å…ƒç´ </strong></p><p>æ°´å¹³justify-contentï¼šcenter</p><p>çºµå‘align-contentï¼šcenter</p><p><strong>æ‰¹é‡ç®¡ç†ä¸ªä½“å…ƒç´ </strong></p><p>æ°´å¹³justify-itemsï¼šcenter</p><p>çºµå‘align-itemsï¼šcenter</p><p><strong>ç‹¬è‡ªç®¡ç†ä¸ªä½“å…ƒç´ </strong></p><p>æ°´å¹³justify-selfï¼šcenter</p><p>çºµå‘align-selfï¼šcenter</p><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">table</span>&gt;è¡¨<br>      &lt;<span class="hljs-selector-tag">thead</span>&gt; è¡¨å¤´<br>        &lt;<span class="hljs-selector-tag">tr</span>&gt;è¡¨è¡Œ<br>          &lt;<span class="hljs-selector-tag">td</span>&gt;è¡¨åˆ—å<br></code></pre></td></tr></table></figure><h1 id="è®¾è®¡ä¹ æƒ¯"><a href="#è®¾è®¡ä¹ æƒ¯" class="headerlink" title="è®¾è®¡ä¹ æƒ¯"></a>è®¾è®¡ä¹ æƒ¯</h1><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><p>ç”¨16pxåˆ°32pxçš„å¤§å° æ­£æ–‡</p><p>é•¿æ–‡æœ¬å°è¯•ç”¨20pxæˆ–è€…æ›´å¤§</p><p>weightä¸ä½äº400</p><p>å°†è°·æ­Œå­—ä½“æ”¾åœ¨cssæ–‡ä»¶çš„å‰é¢é€‰ 400ã€500ã€700</p><h2 id="å­è¡Œæ•°"><a href="#å­è¡Œæ•°" class="headerlink" title="å­è¡Œæ•°"></a>å­è¡Œæ•°</h2><h2 id="å›¾æ ‡"><a href="#å›¾æ ‡" class="headerlink" title="å›¾æ ‡"></a>å›¾æ ‡</h2><p>strokeï¼šå›¾æ ‡çš„è¾¹</p><p>fillï¼šå¡«å……è‰²</p><h2 id="é˜´å½±"><a href="#é˜´å½±" class="headerlink" title="é˜´å½±"></a>é˜´å½±</h2><p>Box-shadow: <code>offset-x | offset-y | blur-radius | spread-radius | color</code></p><p>å…ƒç´  â€”&gt; ç»„ä»¶ â€”&gt; å¸ƒå±€ â€”&gt; ç½‘é¡µ</p><h2 id="æ‰“å¼€ç»„ä»¶"><a href="#æ‰“å¼€ç»„ä»¶" class="headerlink" title="æ‰“å¼€ç»„ä»¶"></a>æ‰“å¼€ç»„ä»¶</h2><p>æˆ‘ä»¬å…ˆå†™å¥½æ‰€æœ‰äººæ‰“å¼€çš„ï¼Œç„¶åå…³é—­å®ƒï¼Œç„¶åå†åŠ ä¸Šä¸€ä¸ªopenåï¼Œå†™å¥½opençš„æ ·å¼ï¼Œä»¥åè°è¦openå°±å‘½åè°ã€‚</p><p>topæŒ‡çš„æ˜¯æ•´ä¸ªçˆ¶å®¹å™¨çš„å¯¹åº”å…ƒç´ çš„èµ·ç‚¹ã€‚</p><p>transformæçš„æ˜¯å…ƒç´ çš„çš„é«˜åº¦</p><p>æ‰€ä»¥æƒ³è®©ä¸€ä¸ªå…ƒç´ åœ¨å…¶çˆ¶å…ƒç´ çš„ä½ç½®å±…ä¸­å°±è¦ topï¼š50% æ­é… transformï¼štranslateï¼ˆ0ï¼Œ-50%ï¼‰</p><p><code>&amp;nbsp;</code>none breaking space</p>]]></content>
    
    
    <categories>
      
      <category>Front-End Engineer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Front-End Engineer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop</title>
    <link href="/2022/09/05/CodeTop/"/>
    <url>/2022/09/05/CodeTop/</url>
    
    <content type="html"><![CDATA[<h1 id="EASY"><a href="#EASY" class="headerlink" title="EASY"></a>EASY</h1><h2 id="206-åè½¬é“¾è¡¨"><a href="#206-åè½¬é“¾è¡¨" class="headerlink" title="206. åè½¬é“¾è¡¨"></a>206. åè½¬é“¾è¡¨</h2><p>Given the <code>head</code> of a singly linked list, reverse the list, and return <em>the reversed list</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(head *ListNode)</span></span> *ListNode &#123;<br>    <span class="hljs-keyword">return</span> help(<span class="hljs-literal">nil</span>, head)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">help</span><span class="hljs-params">(pre, cur *ListNode)</span></span> *ListNode &#123;<br>    <span class="hljs-keyword">if</span> cur == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> pre<br>    &#125;<br>    next := cur.Next<br>    cur.Next = pre<br>    <span class="hljs-keyword">return</span> help(cur, next)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="207-æœ€å¤§å­åºå’Œ"><a href="#207-æœ€å¤§å­åºå’Œ" class="headerlink" title="207. æœ€å¤§å­åºå’Œ"></a>207. æœ€å¤§å­åºå’Œ</h2><p>Given an integer array <code>nums</code>, find the contiguous subarray (containing at least one number) which has the largest sum and return <em>its sum</em>.</p><p>A <strong>subarray</strong> is a <strong>contiguous</strong> part of an array.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxSubArray</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    n := <span class="hljs-built_in">len</span>(nums)<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>    dp[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>]<br>    mx := nums[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; n; i++ &#123;<br>        dp[i] = max(dp[i<span class="hljs-number">-1</span>]+nums[i], nums[i])<br>        <span class="hljs-keyword">if</span> dp[i] &gt; mx &#123;<br>            mx = dp[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> mx<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>dp[i]åªæœ‰ä¸¤ä¸ªæ–¹å‘å¯ä»¥æ¨å‡ºæ¥ï¼š</p><ul><li>dp[i - 1] + nums[i]ï¼Œå³ï¼šnums[i]åŠ å…¥å½“å‰è¿ç»­å­åºåˆ—å’Œ</li><li>nums[i]ï¼Œå³ï¼šä»å¤´å¼€å§‹è®¡ç®—å½“å‰è¿ç»­å­åºåˆ—å’Œ</li></ul><h2 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a>1. ä¸¤æ•°ä¹‹å’Œ</h2><p>Given an array of integers <code>nums</code> and an integer <code>target</code>, return <em>indices of the two numbers such that they add up to <code>target</code></em>.</p><p>You may assume that each input would have <strong><em>exactly\</em> one solution</strong>, and you may not use the <em>same</em> element twice.</p><p>You can return the answer in any order.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// ä½¿ç”¨mapæ–¹å¼è§£é¢˜ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">twoSum</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span>)<br>    <span class="hljs-keyword">for</span> index, val := <span class="hljs-keyword">range</span> nums &#123;<br>        <span class="hljs-keyword">if</span> preIndex, exist := m[target-val]; exist &#123;<br>            <span class="hljs-keyword">return</span> []<span class="hljs-type">int</span>&#123;preIndex, index&#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            m[val] = index<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="415-å­—ç¬¦ä¸²ç›¸åŠ "><a href="#415-å­—ç¬¦ä¸²ç›¸åŠ " class="headerlink" title="415. å­—ç¬¦ä¸²ç›¸åŠ "></a>415. å­—ç¬¦ä¸²ç›¸åŠ </h2><p>Given two non-negative integers, <code>num1</code> and <code>num2</code> represented as string, return <em>the sum of</em> <code>num1</code> <em>and</em> <code>num2</code> <em>as a string</em>.</p><p>You must solve the problem without using any built-in library for handling large integers (such as <code>BigInteger</code>). You must also not convert the inputs to integers directly.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addStrings</span><span class="hljs-params">(String num1, String num2)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(); <span class="hljs-comment">// è¿”å›ç»“æœ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> num1.length() - <span class="hljs-number">1</span>; <span class="hljs-comment">// æ ‡è®°éå†åˆ° num1 çš„ä½ç½®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> num2.length() - <span class="hljs-number">1</span>; <span class="hljs-comment">// æ ‡è®°éå†åˆ° num2 çš„ä½ç½®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">carry</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// è¿›ä½</span><br>        <span class="hljs-keyword">while</span> (p1 &gt;= <span class="hljs-number">0</span> || p2 &gt;= <span class="hljs-number">0</span> || carry != <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// num1 æ²¡éå†å®Œï¼Œæˆ– num2 æ²¡éå†å®Œï¼Œæˆ–è¿›ä½ä¸ä¸º 0</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">digit1</span> <span class="hljs-operator">=</span> p1 &gt;= <span class="hljs-number">0</span> ? num1.charAt(p1) - <span class="hljs-string">&#x27;0&#x27;</span> : <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰ num1 çš„å–å€¼</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">digit2</span> <span class="hljs-operator">=</span> p2 &gt;= <span class="hljs-number">0</span> ? num2.charAt(p2) - <span class="hljs-string">&#x27;0&#x27;</span> : <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰ num2 çš„å–å€¼</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">add</span> <span class="hljs-operator">=</span> digit1 + digit2 + carry; <span class="hljs-comment">// å½“å‰ä½ç½®ç›¸åŠ çš„ç»“æœ</span><br>            carry = add &gt;= <span class="hljs-number">10</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>; <span class="hljs-comment">// æ˜¯å¦æœ‰è¿›ä½</span><br>            add = add &gt;= <span class="hljs-number">10</span> ? add - <span class="hljs-number">10</span> : add; <span class="hljs-comment">// å»é™¤è¿›ä½åç•™ä¸‹çš„æ•°å­—</span><br>            res.append(add); <span class="hljs-comment">// æŠŠå»é™¤è¿›ä½åç•™ä¸‹çš„æ•°å­—æ‹¼æ¥åˆ°ç»“æœä¸­</span><br>            p1 --; <span class="hljs-comment">// éå†åˆ° num1 çš„ä½ç½®å‘å·¦ç§»åŠ¨</span><br>            p2 --; <span class="hljs-comment">// éå†åˆ° num2 çš„ä½ç½®å‘å·¦ç§»åŠ¨</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> res.reverse().toString(); <span class="hljs-comment">// æŠŠç»“æœåè½¬å¹¶è¿”å›</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>ã€Œ<strong>æ±‚åŠ æ³•</strong>ã€ç³»åˆ—é¢˜ç›®éƒ½ä¸éš¾ï¼Œå…¶å®å°±æ˜¯ <strong>ã€Œåˆ—ç«–å¼ã€</strong> è®¡ç®—ã€‚</li><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<ol><li>whileå¾ªç¯ç»“æŸæ¡ä»¶ï¼›</li><li>éå†ä¸¤ä¸ªã€ŒåŠ æ•°ã€ä¸è¦è¶Šç•Œï¼›</li><li>è¿›ä½ã€‚</li><li>æœ€åçš„ç»“æœéœ€è¦ç¿»è½¬</li></ol></li></ol><h2 id="121-æœ€ä½³æ—¶é—´ä¹°å–è‚¡ç¥¨"><a href="#121-æœ€ä½³æ—¶é—´ä¹°å–è‚¡ç¥¨" class="headerlink" title="121. æœ€ä½³æ—¶é—´ä¹°å–è‚¡ç¥¨"></a>121. æœ€ä½³æ—¶é—´ä¹°å–è‚¡ç¥¨</h2><p>You are given an array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day.</p><p>You want to maximize your profit by choosing a <strong>single day</strong> to buy one stock and choosing a <strong>different day in the future</strong> to sell that stock.</p><p>Return <em>the maximum profit you can achieve from this transaction</em>. If you cannot achieve any profit, return <code>0</code>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// è´ªå¿ƒ</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    low := math.MaxInt32<br>    rlt := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> prices&#123;<br>        low = min(low, prices[i])<br>        rlt = max(rlt, prices[i]-low)<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> rlt<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>length:=<span class="hljs-built_in">len</span>(prices)<br><span class="hljs-keyword">if</span> length==<span class="hljs-number">0</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>dp:=<span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>,length)<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;length;i++&#123;<br>dp[i]=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">2</span>)<br>&#125;<br><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=-prices[<span class="hljs-number">0</span>]<br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;length;i++&#123;<br>dp[i][<span class="hljs-number">0</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>],-prices[i])<br>dp[i][<span class="hljs-number">1</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]+prices[i])<br>&#125;<br><span class="hljs-keyword">return</span> dp[length<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a <br>    &#125;<br>    <span class="hljs-keyword">return</span> b <br>&#125;<br></code></pre></td></tr></table></figure><p>è´ªå¿ƒå°±æ˜¯æ‰¾æœ€å°çš„åšå·®</p><p>dpçš„æ–¹æ³•å°±æ˜¯ç”¨ä¸¤ä¸ªçŠ¶æ€ï¼Œä¹°å’Œå–ï¼Œåˆ†åˆ«åšæ¨å¯¼ï¼Œå› ä¸ºå–å‡ºçŠ¶æ€æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼ˆå‰ä¸€å¤©å–å‡ºå’Œä¸€ç›´æ²¡ä¹°è¿‡ï¼‰</p><p>å¦‚æœç¬¬iå¤©æŒæœ‰è‚¡ç¥¨å³dp[i] [0]ï¼Œ é‚£ä¹ˆå¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥</p><ul><li>ç¬¬i-1å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [0]</li><li>ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯ä¹°å…¥ä»Šå¤©çš„è‚¡ç¥¨åæ‰€å¾—ç°é‡‘å³ï¼š-prices[i]</li></ul><p>é‚£ä¹ˆdp[i] [0]åº”è¯¥é€‰æ‰€å¾—ç°é‡‘æœ€å¤§çš„ï¼Œæ‰€ä»¥dp[i] [0] = max(dp[i - 1] [0], -prices[i]);</p><p>å¦‚æœç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨å³dp[i] [1]ï¼Œ ä¹Ÿå¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥</p><ul><li>ç¬¬i-1å¤©å°±ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [1]</li><li>ç¬¬iå¤©å–å‡ºè‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æŒ‰ç…§ä»Šå¤©è‚¡ç¥¨ä½³ä»·æ ¼å–å‡ºåæ‰€å¾—ç°é‡‘å³ï¼šprices[i] + dp[i - 1] [0]</li></ul><p>ç»†èŠ‚ï¼šæ³¨æ„æœ€åæ˜¯ç”¨å–å‡ºçš„æœ€åä¸€å¤©ä½œä¸ºç»“æœï¼Œå› ä¸ºå–å‡ºä¸€å®šæœ‰æ›´å¤šçš„é’±ã€‚</p><h2 id="704-äºŒåˆ†æŸ¥æ‰¾"><a href="#704-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="704. äºŒåˆ†æŸ¥æ‰¾"></a>704. äºŒåˆ†æŸ¥æ‰¾</h2><p>Given an array of integers <code>nums</code> which is sorted in ascending order, and an integer <code>target</code>, write a function to search <code>target</code> in <code>nums</code>. If <code>target</code>exists, then return its index. Otherwise, return <code>-1</code>.</p><p>You must write an algorithm with <code>O(log n)</code> runtime complexity.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">search</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    l, r := <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span><br>    <span class="hljs-keyword">for</span> l &lt;= r &#123;<br>        mid := l + (r-l)&gt;&gt;<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> nums[mid] == target &#123;<br>            <span class="hljs-keyword">return</span> mid<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> nums[mid] &gt; target &#123;<br>            r = mid<span class="hljs-number">-1</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            l = mid+<span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="94-äºŒå‰æ ‘ä¸­åºéå†"><a href="#94-äºŒå‰æ ‘ä¸­åºéå†" class="headerlink" title="94. äºŒå‰æ ‘ä¸­åºéå†"></a>94. äºŒå‰æ ‘ä¸­åºéå†</h2><p>Given the <code>root</code> of a binary tree, return <em>the inorder traversal of its nodesâ€™ values</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inorderTraversal</span><span class="hljs-params">(root *TreeNode)</span></span> []<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">// LNR</span><br>    res := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>)<br>    scan(root, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scan</span><span class="hljs-params">(root *TreeNode, res *[]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> <br>    &#125;<br>    <br>    scan(root.Left, res)<br>    *res = <span class="hljs-built_in">append</span>(*res, root.Val)<br>    scan(root.Right, res)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h2><p>Given the <code>root</code> of a binary tree, return <em>its maximum depth</em>.</p><p>A binary treeâ€™s <strong>maximum depth</strong> is the number of nodes along the longest path from the root node down to the farthest leaf node.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    &#125;<br>    max := <span class="hljs-number">0</span><br>    depth := <span class="hljs-number">1</span><br>    dfs(root, depth, &amp;max)<br>    <span class="hljs-keyword">return</span> max<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode, depth <span class="hljs-type">int</span>, max *<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">if</span> depth &gt; *max &#123;<br>            *max = depth<br>        &#125;<br>        <span class="hljs-keyword">return</span> <br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>        depth += <span class="hljs-number">1</span><br>        dfs(root.Left, depth, max)<br>        depth -= <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>        depth += <span class="hljs-number">1</span><br>        dfs(root.Right, depth, max)<br>        depth -= <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬éœ€è¦çŸ¥é“æ‰€æœ‰åˆ†æ”¯æœ«ç«¯çš„ç»“æœï¼Œæ‰€ä»¥é‡‡ç”¨dfs+å›æº¯çš„æ‰‹æ³•è·å–æ‰€æœ‰æœ«æçš„ç»“æœã€‚</p><h2 id="509-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#509-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="509. æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>509. æ–æ³¢é‚£å¥‘æ•°åˆ—</h2><p>The <strong>Fibonacci numbers</strong>, commonly denoted <code>F(n)</code> form a sequence, called the <strong>Fibonacci sequence</strong>, such that each number is the sum of the two preceding ones, starting from <code>0</code> and <code>1</code>. That is,</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">F(<span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, F(<span class="hljs-number">1</span>) = <span class="hljs-number">1</span><br>F(n) = F(n - <span class="hljs-number">1</span>) + F(n - <span class="hljs-number">2</span>), <span class="hljs-keyword">for</span> n &gt; <span class="hljs-number">1.</span><br></code></pre></td></tr></table></figure><p>Given <code>n</code>, calculate <code>F(n)</code>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// dp</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fib</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    &#125;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt; n+<span class="hljs-number">1</span>; i++ &#123;<br>        dp[i] = dp[i<span class="hljs-number">-1</span>] + dp[i<span class="hljs-number">-2</span>]<br>    &#125;<br>    <span class="hljs-comment">// fmt.Println(dp)</span><br>    <span class="hljs-keyword">return</span> dp[n]<br>&#125;<br><br><span class="hljs-comment">// é€’å½’</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fib</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>&#125;<br>    <span class="hljs-keyword">return</span> fib(n<span class="hljs-number">-1</span>) + fib(n<span class="hljs-number">-2</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åŸºæœ¬çš„dpå’Œé€’å½’çš„å±•ç°</p><h2 id="226-ç¿»è½¬äºŒå‰æ ‘"><a href="#226-ç¿»è½¬äºŒå‰æ ‘" class="headerlink" title="226. ç¿»è½¬äºŒå‰æ ‘"></a>226. ç¿»è½¬äºŒå‰æ ‘</h2><p>Given the <code>root</code> of a binary tree, invert the tree, and return <em>its root</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">invertTree</span><span class="hljs-params">(root *TreeNode)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">return</span> dfs(root)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    <br>    tmp := root.Right<br>    root.Right = dfs(root.Left)<br>    root.Left = dfs(tmp)<br>    <br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡ç‚¹åœ¨äºç”¨tmpæš‚æ—¶å­˜å‚¨ï¼Œè¦ä¸ä¼šå‡ºç°å†…å­˜é‡å å¯¼è‡´çš„åˆ†æ”¯é‡å¤ã€‚</p><p>æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å¶å­ç»“ç‚¹ï¼Œåªè¦æ˜¯nilè¿”å›å°±ok</p><h2 id="144-äºŒå‰æ ‘å‰åºéå†"><a href="#144-äºŒå‰æ ‘å‰åºéå†" class="headerlink" title="144. äºŒå‰æ ‘å‰åºéå†"></a>144. äºŒå‰æ ‘å‰åºéå†</h2><p>Given the <code>root</code> of a binary tree, return <em>the preorder traversal of its nodesâ€™ values</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">preorderTraversal</span><span class="hljs-params">(root *TreeNode)</span></span> []<span class="hljs-type">int</span> &#123;<br>    res := []<span class="hljs-type">int</span>&#123;&#125;<br>    dfs(root, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode, arr *[]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    *arr = <span class="hljs-built_in">append</span>(*arr, root.Val)<br>    dfs(root.Left, arr)<br>    dfs(root.Right, arr)<br>    <br>    <span class="hljs-keyword">return</span> <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="283-ç§»åŠ¨0"><a href="#283-ç§»åŠ¨0" class="headerlink" title="283. ç§»åŠ¨0"></a>283. ç§»åŠ¨0</h2><p>Given an integer array <code>nums</code>, move all <code>0</code>â€˜s to the end of it while maintaining the relative order of the non-zero elements.</p><p><strong>Note</strong> that you must do this in-place without making a copy of the array.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">moveZeroes</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span>  &#123;<br>    slow := <span class="hljs-number">0</span><br>    fast := <span class="hljs-number">0</span><br>    n := <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>        <span class="hljs-keyword">if</span> nums[i] == <span class="hljs-number">0</span> &#123;<br>            fast++<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            nums[slow], nums[fast] = nums[fast], nums[slow]<br>            slow++<br>            fast++<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ç®€å•ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">moveZeroes</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span>  &#123;<br>    slow := <span class="hljs-number">0</span><br>    fast := <span class="hljs-number">0</span><br>    n := <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>        <span class="hljs-keyword">if</span> nums[i] != <span class="hljs-number">0</span> &#123;<br>            nums[slow], nums[fast] = nums[fast], nums[slow]<br>            slow++     <br>        &#125;<br>        fast++<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ç©¶æç®€å•ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">moveZeroes</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span>  &#123;<br>    slow := <span class="hljs-number">0</span><br>    n := <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> fast := <span class="hljs-number">0</span>; fast &lt; n; fast++ &#123;<br>        <span class="hljs-keyword">if</span> nums[fast] != <span class="hljs-number">0</span> &#123;<br>            nums[slow], nums[fast] = nums[fast], nums[slow]<br>            slow++     <br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>elseé‡Œé¢éƒ½++æ˜¯å› ä¸ºè¦ä¿æŒslowå’Œfastä¹‹é—´çš„å·®è·ï¼Œè¦è®©fastæŒ‡å‘æœ€æ–°ï¼ŒslowæŒ‡å‘ç¬¬ä¸€ä¸ª0çš„ä½ç½®ã€‚</p><h1 id="MIDDLE"><a href="#MIDDLE" class="headerlink" title="MIDDLE"></a>MIDDLE</h1><h2 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h2><p>Given a string <code>s</code>, find the length of the <strong>longest substring</strong> without repeating characters.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lengthOfLongestSubstring</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">var</span> freq [<span class="hljs-number">127</span>]<span class="hljs-type">int</span><br>result, left, right := <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span><br><br><span class="hljs-keyword">for</span> left &lt; <span class="hljs-built_in">len</span>(s) &#123;<br><span class="hljs-keyword">if</span> right+<span class="hljs-number">1</span> &lt; <span class="hljs-built_in">len</span>(s) &amp;&amp; freq[s[right+<span class="hljs-number">1</span>]] == <span class="hljs-number">0</span> &#123;<br>freq[s[right+<span class="hljs-number">1</span>]]++<br>right++<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>freq[s[left]]--<br>left++<br>&#125;<br>result = max(result, right-left+<span class="hljs-number">1</span>)<br>&#125;<br><span class="hljs-keyword">return</span> result<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œä¸æ–­çš„å³ç§»ï¼Œåªè¦æ²¡æœ‰é‡å¤çš„å­—ç¬¦ï¼Œå°±æŒç»­å‘å³æ‰©å¤§çª—å£è¾¹ç•Œã€‚ä¸€æ—¦å‡ºç°äº†é‡å¤å­—ç¬¦ï¼Œå°±éœ€è¦ç¼©å°å·¦è¾¹ç•Œï¼Œç›´åˆ°é‡å¤çš„å­—ç¬¦ç§»å‡ºäº†å·¦è¾¹ç•Œï¼Œç„¶åç»§ç»­ç§»åŠ¨æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¯æ¬¡ç§»åŠ¨éœ€è¦è®¡ç®—å½“å‰é•¿åº¦ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æœ€å¤§é•¿åº¦ï¼Œæœ€ç»ˆæœ€å¤§çš„å€¼å°±æ˜¯é¢˜ç›®ä¸­çš„æ‰€æ±‚ã€‚</p><h2 id="146-LRUç¼“å­˜æœºåˆ¶"><a href="#146-LRUç¼“å­˜æœºåˆ¶" class="headerlink" title="146. LRUç¼“å­˜æœºåˆ¶"></a>146. LRUç¼“å­˜æœºåˆ¶</h2><p>Design a data structure that follows the constraints of a <strong><a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU">Least Recently Used (LRU) cache</a></strong>.</p><p>Implement the <code>LRUCache</code> class:</p><ul><li><code>LRUCache(int capacity)</code> Initialize the LRU cache with <strong>positive</strong> size <code>capacity</code>.</li><li><code>int get(int key)</code> Return the value of the <code>key</code> if the key exists, otherwise return <code>-1</code>.</li><li><code>void put(int key, int value)</code> Update the value of the <code>key</code> if the <code>key</code> exists. Otherwise, add the <code>key-value</code> pair to the cache. If the number of keys exceeds the <code>capacity</code> from this operation, <strong>evict</strong> the least recently used key.</li></ul><p>The functions <code>get</code> and <code>put</code> must each run in <code>O(1)</code> average time complexity</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> LRUCache <span class="hljs-keyword">struct</span> &#123;<br>    Head, Tail *Node<br>    Keys       <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]*Node<br>    Cap        <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> Node <span class="hljs-keyword">struct</span> &#123;<br>    Key, Val    <span class="hljs-type">int</span><br>    Prev, Next  *Node<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Constructor</span><span class="hljs-params">(capacity <span class="hljs-type">int</span>)</span></span> LRUCache &#123;<br>    <span class="hljs-keyword">return</span> LRUCache&#123;Keys: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]*Node), Cap: capacity&#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(cache *LRUCache)</span></span> Get(key <span class="hljs-type">int</span>) <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> node, ok := cache.Keys[key]; ok &#123;<br>        cache.Remove(node) <span class="hljs-comment">// ä»é˜Ÿä¼é‡Œé¢å‰”é™¤</span><br>        cache.Add(node) <span class="hljs-comment">// æ”¾åˆ°é˜Ÿå°¾ï¼Œé‡æ–°æ’å…¥æ›´æ–°ä¸€ä¸‹</span><br>        <span class="hljs-keyword">return</span> node.Val<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(cache *LRUCache)</span></span> Put(key <span class="hljs-type">int</span>, value <span class="hljs-type">int</span>)  &#123;<br>    <span class="hljs-keyword">if</span> node, ok := cache.Keys[key]; ok &#123;<br>node.Val = value <span class="hljs-comment">// æ‰¾åˆ°ï¼Œæ›´æ–°keyå¯¹åº”çš„value</span><br>cache.Remove(node)<br>cache.Add(node)<br><span class="hljs-keyword">return</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>node = &amp;Node&#123;Key: key, Val: value&#125; <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span><br>cache.Keys[key] = node <span class="hljs-comment">// æ›´æ–°map</span><br>cache.Add(node) <span class="hljs-comment">// æ’å…¥é˜Ÿå°¾</span><br>&#125;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(cache.Keys) &gt; cache.Cap &#123; <span class="hljs-comment">// å¦‚æœè¶…è¿‡å®¹é‡äº†</span><br><span class="hljs-built_in">delete</span>(cache.Keys, cache.Tail.Key) <span class="hljs-comment">// åˆ é™¤mapä¸­å¯¹åº”çš„k-v</span><br>cache.Remove(cache.Tail) <span class="hljs-comment">// åˆ é™¤é˜Ÿå¤´çš„node</span><br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(cache *LRUCache)</span></span> Add(node *Node) &#123;<br>    node.Prev = <span class="hljs-literal">nil</span><br>    node.Next = cache.Head <span class="hljs-comment">// å·¦è¾¹æ˜¯é˜Ÿå°¾ï¼Œå³è¾¹æ˜¯é˜Ÿå¤´</span><br>    <span class="hljs-keyword">if</span> cache.Head != <span class="hljs-literal">nil</span> &#123;<br>        cache.Head.Prev = node <span class="hljs-comment">// Prevåœ¨å³è¾¹ï¼ŒNextåœ¨å·¦è¾¹</span><br>    &#125;<br>    cache.Head = node <span class="hljs-comment">// æ›´æ–°head</span><br>    <br>    <span class="hljs-keyword">if</span> cache.Tail == <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// å½“å­˜å‚¨ä¸ºç©ºçš„æ—¶å€™ï¼Œæ‰å¦‚æ­¤æ›´æ–°ï¼Œä¿è¯Tailæœ‰å€¼ï¼Œåç»­æ‰å¥½æ’å…¥ã€‚</span><br>        cache.Tail = node<br>        cache.Tail.Next = <span class="hljs-literal">nil</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(cache *LRUCache)</span></span> Remove(node *Node) &#123;<br>    <span class="hljs-keyword">if</span> node == cache.Head &#123; <span class="hljs-comment">// å¦‚æœè¦ç§»é™¤çš„èŠ‚ç‚¹åœ¨Headï¼ˆå³è¾¹ï¼‰</span><br>        cache.Head = node.Next <br>        node.Next = <span class="hljs-literal">nil</span> <br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> node == cache.Tail &#123; <span class="hljs-comment">// å¦‚æœè¦ç§»é™¤çš„èŠ‚ç‚¹åœ¨Tailï¼ˆå·¦è¾¹ï¼‰</span><br>        cache.Tail = node.Prev<br>        node.Prev.Next = <span class="hljs-literal">nil</span><br>        node.Prev = <span class="hljs-literal">nil</span><br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    node.Prev.Next = node.Next<br>    node.Next.Prev = node.Prev<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Your LRUCache object will be instantiated and called as such:</span><br><span class="hljs-comment"> * obj := Constructor(capacity);</span><br><span class="hljs-comment"> * param_1 := obj.Get(key);</span><br><span class="hljs-comment"> * obj.Put(key,value);</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure><p>ä¸»ä½“ç»“æ„å°±æ˜¯mapæ¥åšæŸ¥è¯¢ï¼ŒåŒå‘é“¾è¡¨æ¥å­˜å‚¨ã€‚</p><p>GET PUTæ–¹æ³•ä¸­åŒ…å«ï¼Œaddå’Œremoveï¼Œaddéƒ½æ˜¯å¯¹å°¾éƒ¨çš„å¢åŠ ï¼Œremoveéƒ½æ˜¯å¯¹å¤´éƒ¨çš„å‰”é™¤</p><h2 id="215-æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ "><a href="#215-æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ " class="headerlink" title="215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ "></a>215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </h2><p>Given an integer array <code>nums</code> and an integer <code>k</code>, return <em>the</em> <code>kth</code> <em>largest element in the array</em>.</p><p>Note that it is the <code>kth</code> largest element in the sorted order, not the <code>kth</code> distinct element.</p><p>You must solve it in <code>O(n)</code> time complexity.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findKthLargest</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, k <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>sort.Ints(nums)<br>  <span class="hljs-keyword">return</span> nums[<span class="hljs-built_in">len</span>(nums)-k]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15-ä¸‰æ•°ä¹‹å’Œ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="15. ä¸‰æ•°ä¹‹å’Œ"></a>15. ä¸‰æ•°ä¹‹å’Œ</h2><p>Given an integer array nums, return all the triplets <code>[nums[i], nums[j], nums[k]]</code> such that <code>i != j</code>, <code>i != k</code>, and <code>j != k</code>, and <code>nums[i] + nums[j] + nums[k] == 0</code>.</p><p>Notice that the solution set must not contain duplicate triplets.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">threeSum</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span>[][]<span class="hljs-type">int</span>&#123;<br>sort.Ints(nums)<br>res:=[][]<span class="hljs-type">int</span>&#123;&#125;<br><br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-2</span>;i++&#123;<br>n1:=nums[i]<br><span class="hljs-keyword">if</span> n1&gt;<span class="hljs-number">0</span>&#123; <span class="hljs-comment">// æ’åºåå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å·²ç»å¤§äº0åé¢éƒ½æ²¡æœ‰æ„ä¹‰äº†</span><br><span class="hljs-keyword">break</span><br>&#125;<br><span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span>&amp;&amp;n1==nums[i<span class="hljs-number">-1</span>]&#123; <span class="hljs-comment">// å¦‚æœå½“å‰ä½å’Œå‰ä¸€ä½æ˜¯ä¸€æ ·çš„ï¼Œä»£è¡¨é‡å¤ï¼Œå¦‚æœå’Œåé¢çš„ä¸€æ ·çš„è¯ç­‰äºæ˜¯aä¸ç»™bé€‰æ‹©çš„æœºä¼šäº†</span><br><span class="hljs-keyword">continue</span><br>&#125;<br>l,r:=i+<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span><br><span class="hljs-keyword">for</span> l&lt;r&#123;<br>n2,n3:=nums[l],nums[r]<br><span class="hljs-keyword">if</span> n1+n2+n3==<span class="hljs-number">0</span>&#123;<br>res=<span class="hljs-built_in">append</span>(res,[]<span class="hljs-type">int</span>&#123;n1,n2,n3&#125;)<br><span class="hljs-keyword">for</span> l&lt;r&amp;&amp;nums[l]==n2&#123; <span class="hljs-comment">// ä¸€ç›´å¾€åæ‰¾æ‰¾åˆ°ä¸ä¸€æ ·ä¸ºæ­¢</span><br>l++<br>&#125;<br><span class="hljs-keyword">for</span> l&lt;r&amp;&amp;nums[r]==n3&#123; <span class="hljs-comment">// ä¸€ç›´å¾€å‰æ‰¾æ‰¾åˆ°ä¸ä¸€æ ·ä¸ºæ­¢</span><br>r--<br>&#125;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n1+n2+n3&lt;<span class="hljs-number">0</span>&#123;<br>l++<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>r--<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å»é‡é€»è¾‘çš„æ€è€ƒ</strong></p><p><strong>açš„å»é‡</strong></p><p>è¯´é“å»é‡ï¼Œå…¶å®ä¸»è¦è€ƒè™‘ä¸‰ä¸ªæ•°çš„å»é‡ã€‚ a, b ,c, å¯¹åº”çš„å°±æ˜¯ nums[i]ï¼Œnums[left]ï¼Œnums[right]</p><p>a å¦‚æœé‡å¤äº†æ€ä¹ˆåŠï¼Œaæ˜¯numsé‡Œéå†çš„å…ƒç´ ï¼Œé‚£ä¹ˆåº”è¯¥ç›´æ¥è·³è¿‡å»ã€‚</p><p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯åˆ¤æ–­ nums[i] ä¸ nums[i + 1]æ˜¯å¦ç›¸åŒï¼Œè¿˜æ˜¯åˆ¤æ–­ nums[i] ä¸ nums[i-1] æ˜¯å¦ç›¸åŒã€‚</p><p>æœ‰åŒå­¦å¯èƒ½æƒ³ï¼Œè¿™ä¸éƒ½ä¸€æ ·å—ã€‚</p><p>å…¶å®ä¸ä¸€æ ·ï¼</p><p>éƒ½æ˜¯å’Œ nums[i]è¿›è¡Œæ¯”è¾ƒï¼Œæ˜¯æ¯”è¾ƒå®ƒçš„å‰ä¸€ä¸ªï¼Œè¿˜æ˜¯æ¯”è¾ƒä»–çš„åä¸€ä¸ªã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„å†™æ³•æ˜¯ è¿™æ ·ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">if</span> (nums[i] == nums[i + <span class="hljs-number">1</span>]) &#123; <span class="hljs-comment">// å»é‡æ“ä½œ</span><br>    <span class="hljs-keyword">continue</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£å°±æˆ‘ä»¬å°±æŠŠ ä¸‰å…ƒç»„ä¸­å‡ºç°é‡å¤å…ƒç´ çš„æƒ…å†µç›´æ¥passæ‰äº†ã€‚ ä¾‹å¦‚{-1, -1 ,2} è¿™ç»„æ•°æ®ï¼Œå½“éå†åˆ°ç¬¬ä¸€ä¸ª-1 çš„æ—¶å€™ï¼Œåˆ¤æ–­ ä¸‹ä¸€ä¸ªä¹Ÿæ˜¯-1ï¼Œé‚£è¿™ç»„æ•°æ®å°±passäº†ã€‚</p><p><strong>æˆ‘ä»¬è¦åšçš„æ˜¯ ä¸èƒ½æœ‰é‡å¤çš„ä¸‰å…ƒç»„ï¼Œä½†ä¸‰å…ƒç»„å†…çš„å…ƒç´ æ˜¯å¯ä»¥é‡å¤çš„ï¼</strong></p><p>æ‰€ä»¥è¿™é‡Œæ˜¯æœ‰ä¸¤ä¸ªé‡å¤çš„ç»´åº¦ã€‚</p><p>é‚£ä¹ˆåº”è¯¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>]) &#123;<br>    <span class="hljs-keyword">continue</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¹ˆå†™å°±æ˜¯å½“å‰ä½¿ç”¨ nums[i]ï¼Œæˆ‘ä»¬åˆ¤æ–­å‰ä¸€ä½æ˜¯ä¸æ˜¯ä¸€æ ·çš„å…ƒç´ ï¼Œåœ¨çœ‹ {-1, -1 ,2} è¿™ç»„æ•°æ®ï¼Œå½“éå†åˆ° ç¬¬ä¸€ä¸ª -1 çš„æ—¶å€™ï¼Œåªè¦å‰ä¸€ä½æ²¡æœ‰-1ï¼Œé‚£ä¹ˆ {-1, -1 ,2} è¿™ç»„æ•°æ®ä¸€æ ·å¯ä»¥æ”¶å½•åˆ° ç»“æœé›†é‡Œã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»†èŠ‚çš„æ€è€ƒè¿‡ç¨‹ã€‚</p><h2 id="912-å¿«é€Ÿæ’åº"><a href="#912-å¿«é€Ÿæ’åº" class="headerlink" title="912. å¿«é€Ÿæ’åº"></a>912. å¿«é€Ÿæ’åº</h2><p>Given an array of integers <code>nums</code>, sort the array in ascending order.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">quick</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, start, end <span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> start &lt; end &#123; <br>        pivot := nums[start]<br>        i, j := start + <span class="hljs-number">1</span>, end<br>        <br>        <span class="hljs-keyword">for</span> i &lt;= j &#123;<br>            <span class="hljs-keyword">if</span> nums[i] &lt;= pivot &#123; <span class="hljs-comment">// left smaller then the pivot, continue</span><br>                i++<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> nums[j] &gt;= pivot &#123; <span class="hljs-comment">// right bigger than the pivot, continue</span><br>                j--<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                nums[j], nums[i] = nums[i], nums[j]<br>                j--<br>                i++<br>            &#125;<br>        &#125;<br>        <br>        nums[j], nums[start] = nums[start], nums[j] <span class="hljs-comment">// i meet j, then exchange</span><br>        <br>        quick(nums, start, j - <span class="hljs-number">1</span>)<br>        quick(nums, j + <span class="hljs-number">1</span>, end)<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sortArray</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>    quick(nums, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> nums<br>&#125; <br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// äº¤æ¢çš„æ–°å†™æ³•</span><br>a := <span class="hljs-number">0</span><br>b := <span class="hljs-number">1</span><br>a, b = b, a<br></code></pre></td></tr></table></figure><ol><li>æ‰¾åˆ°æ ‡å…µ</li><li>æ’åºï¼Œè¦æ±‚å·¦è¾¹éƒ½æ¯”æ ‡å…µå°ï¼Œå³è¾¹éƒ½æ¯”æ ‡å…µå¤§ï¼Œäº¤æ¢</li><li>é€’å½’ä¸‹ä¸€å±‚ï¼Œç›´åˆ°startå’Œendç›¸é‡</li></ol><h2 id="102-äºŒå‰æ ‘çš„å±‚åºéå†"><a href="#102-äºŒå‰æ ‘çš„å±‚åºéå†" class="headerlink" title="102. äºŒå‰æ ‘çš„å±‚åºéå†"></a>102. äºŒå‰æ ‘çš„å±‚åºéå†</h2><p>Given the <code>root</code> of a binary tree, return <em>the level order traversal of its nodesâ€™ values</em>. (i.e., from left to right, level by level).</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// è§£æ³•ä¸€ BFS</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span> [][]<span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>queue := []*TreeNode&#123;root&#125;<br>res := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>)<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(queue) &gt; <span class="hljs-number">0</span> &#123;<br>l := <span class="hljs-built_in">len</span>(queue)<br>tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, l)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; l; i++ &#123;<br>            node := queue[i]<br><span class="hljs-keyword">if</span> node.Left != <span class="hljs-literal">nil</span> &#123;<br>queue = <span class="hljs-built_in">append</span>(queue, node.Left)<br>&#125;<br><span class="hljs-keyword">if</span> node.Right != <span class="hljs-literal">nil</span> &#123;<br>queue = <span class="hljs-built_in">append</span>(queue, node.Right)<br>&#125;<br>tmp = <span class="hljs-built_in">append</span>(tmp, queue[i].Val)<br>&#125;<br>queue = queue[l:]<br>res = <span class="hljs-built_in">append</span>(res, tmp)<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>é˜Ÿåˆ—ä¸ä¸ºç©º</li><li>ç”¨ä¸€ä¸ªå¾ªç¯æ¸…ç©ºé˜Ÿåˆ—å¼„å¥½æ–°çš„é˜Ÿåˆ—</li><li>ç›´åˆ°æ‰€æœ‰çš„é˜Ÿåˆ—æ¸…ç©ºï¼Œç»“æŸ</li></ol><h2 id="33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„"><a href="#33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„" class="headerlink" title="33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„"></a>33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</h2><p>There is an integer array <code>nums</code> sorted in ascending order (with <strong>distinct</strong>values).</p><p>Prior to being passed to your function, <code>nums</code> is <strong>possibly rotated</strong> at an unknown pivot index <code>k</code> (<code>1 &lt;= k &lt; nums.length</code>) such that the resulting array is <code>[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]</code> (<strong>0-indexed</strong>). For example, <code>[0,1,2,4,5,6,7]</code> might be rotated at pivot index <code>3</code> and become <code>[4,5,6,7,0,1,2]</code>.</p><p>Given the array <code>nums</code> <strong>after</strong> the possible rotation and an integer <code>target</code>, return <em>the index of</em> <code>target</code> <em>if it is in</em> <code>nums</code><em>, or</em> <code>-1</code> <em>if it is not in</em> <code>nums</code>.</p><p>You must write an algorithm with <code>O(log n)</code> runtime complexity.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">search</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br>low, high := <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span><br><span class="hljs-keyword">for</span> low &lt;= high &#123;<br>mid := low + (high-low)&gt;&gt;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> nums[mid] == target &#123;<br><span class="hljs-keyword">return</span> mid<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> nums[mid] &gt; nums[low] &#123; <span class="hljs-comment">// åœ¨æ•°å€¼å¤§çš„ä¸€éƒ¨åˆ†åŒºé—´é‡Œ</span><br><span class="hljs-keyword">if</span> nums[low] &lt;= target &amp;&amp; target &lt; nums[mid] &#123;<br>high = mid - <span class="hljs-number">1</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>low = mid + <span class="hljs-number">1</span><br>&#125;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> nums[mid] &lt; nums[high] &#123; <span class="hljs-comment">// åœ¨æ•°å€¼å°çš„ä¸€éƒ¨åˆ†åŒºé—´é‡Œ</span><br><span class="hljs-keyword">if</span> nums[mid] &lt; target &amp;&amp; target &lt;= nums[high] &#123;<br>low = mid + <span class="hljs-number">1</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>high = mid - <span class="hljs-number">1</span><br>&#125;<br>&#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// å¦‚æœè½åœ¨äº†lowæˆ–è€…highä¸Šï¼Œlowå³ç§»ï¼Œhighå·¦ç§»</span><br><span class="hljs-keyword">if</span> nums[low] == nums[mid] &#123;<br>low++<br>&#125;<br><span class="hljs-keyword">if</span> nums[high] == nums[mid] &#123;<br>high--<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå’Œæ™®é€šçš„äºŒåˆ†æŸ¥æ‰¾æœ‰ä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿ</p><p>å› ä¸ºäºŒåˆ†çš„å‰ææ˜¯æœ¬èº«æœ‰åºï¼Œæ‰€ä»¥è¿™ä¸ªç›¸å½“äºç”¨ä¸€ä¸ªæ–­ç‚¹æ‰“ä¹±äº†ä½ çš„æ’åºã€‚ä½ éœ€è¦åšçš„å°±æ˜¯è¯†åˆ«è¿™ä¸ªæ–­ç‚¹ï¼Œç”±äºè¦æ±‚O(logN)æ‰€ä»¥è¯´ä¸èƒ½å…ˆæ‰¾åˆ°ï¼Œè€Œæ˜¯è¦åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­è¯†åˆ«æ–­ç‚¹ã€‚</p><p>å·¦è¾¹ä¸€å®šæ¯”å³è¾¹çš„å¤§ï¼Œç„¶ålowä»£è¡¨çš„å¤§åŒºåŸŸï¼Œhighä»£è¡¨å°åŒºåŸŸ</p><h2 id="165-æ¯”è¾ƒç‰ˆæœ¬å·"><a href="#165-æ¯”è¾ƒç‰ˆæœ¬å·" class="headerlink" title="165. æ¯”è¾ƒç‰ˆæœ¬å·"></a>165. æ¯”è¾ƒç‰ˆæœ¬å·</h2><p>Given two version numbers, <code>version1</code> and <code>version2</code>, compare them.</p><p>Version numbers consist of <strong>one or more revisions</strong> joined by a dot <code>&#39;.&#39;</code>. Each revision consists of <strong>digits</strong> and may contain leading <strong>zeros</strong>. Every revision contains <strong>at least one character</strong>. Revisions are <strong>0-indexed from left to right</strong>, with the leftmost revision being revision 0, the next revision being revision 1, and so on. For example <code>2.5.33</code> and <code>0.1</code> are valid version numbers.</p><p>To compare version numbers, compare their revisions in <strong>left-to-right order</strong>. Revisions are compared using their <strong>integer value ignoring any leading zeros</strong>. This means that revisions <code>1</code> and <code>001</code> are considered <strong>equal</strong>. If a version number does not specify a revision at an index, then <strong>treat the revision as <code>0</code></strong>. For example, version <code>1.0</code> is less than version <code>1.1</code> because their revision 0s are the same, but their revision 1s are <code>0</code> and <code>1</code> respectively, and <code>0 &lt; 1</code>.</p><p><em>Return the following:</em></p><ul><li>If <code>version1 &lt; version2</code>, return <code>-1</code>.</li><li>If <code>version1 &gt; version2</code>, return <code>1</code>.</li><li>Otherwise, return <code>0</code>.</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">compareVersion</span><span class="hljs-params">(version1 <span class="hljs-type">string</span>, version2 <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>x, y, i, j := <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-1</span><br><br><span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(version1) || j &lt; <span class="hljs-built_in">len</span>(version2) &#123;<br>x, i = readInt(version1, i+<span class="hljs-number">1</span>)<br>y, j = readInt(version2, j+<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">switch</span> &#123;<br><span class="hljs-keyword">case</span> x &lt; y:<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br><span class="hljs-keyword">case</span> y &lt; x:<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>&#125;<br>&#125;<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">readInt</span><span class="hljs-params">(s <span class="hljs-type">string</span>, index <span class="hljs-type">int</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">int</span>) &#123;<br>result := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> ; index &lt; <span class="hljs-built_in">len</span>(s) &amp;&amp; s[index] != <span class="hljs-string">&#x27;.&#x27;</span>; index++ &#123;<br>result = result*<span class="hljs-number">10</span> + <span class="hljs-type">int</span>(s[index]-<span class="hljs-string">&#x27;0&#x27;</span>)<br>&#125;<br><br><span class="hljs-keyword">return</span> result, index<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¦åˆ†åŒºçš„æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œå…ˆæ‰¾åˆ°å¯¹åº”çš„åŒºåŸŸã€‚<code>int(s[index]-&#39;0&#39;)</code>æ¥è½¬æ¢æˆintï¼Œå¦‚æœæ˜¯è‹±æ–‡å­—æ¯çš„è¯å°±ç”¨<code>-&#39;a&#39;</code>æ¥è½¬æ¢ã€‚è¿™æ ·æˆ‘ä»¬å¯¹äºæ•°æ®çš„å¤„ç†å°±æ˜¯ï¼Œæ¯”å¦‚12.04å°±æ˜¯1*10 + 2ï¼Œå¦‚æœ1çš„ä½ç½®æ˜¯0çš„è¯ï¼Œåˆ™ä¸ä¼šæˆä¸ºæ•´æ•°ã€‚</p><p>æˆ‘ä»¬readIntå‡½æ•°æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯æ‰¾åˆ°å¯¹åº”åŒºé—´çš„æ•°çš„æ•´æ•°ï¼Œç¬¬äºŒä¸ªä½œç”¨æ˜¯æ‰¾åˆ°å¯¹åº”çš„ä¸‹ä¸€ä¸ªå‡ºå‘çš„indexã€‚æˆ‘ä»¬ä¸ç”¨å¯¹åº”ä½å»æ¯”è¾ƒï¼Œè€Œæ˜¯å…¨éƒ¨æå‡ºæ¥ç„¶åç›´æ¥æ¯”æ•´æ•°çš„å¤§å°ã€‚</p><h2 id="46-å…¨æ’åˆ—"><a href="#46-å…¨æ’åˆ—" class="headerlink" title="46. å…¨æ’åˆ—"></a>46. å…¨æ’åˆ—</h2><p>Given an array <code>nums</code> of distinct integers, return <em>all the possible permutations</em>. You can return the answer in <strong>any order</strong>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">permute</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>    &#125;<br>    c, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    used := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>)<br>    dfs(used, c, nums, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(used <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>, c, nums []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == <span class="hljs-built_in">len</span>(nums) &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">if</span> ok, _ := used[nums[i]]; ok &#123;<br>            <span class="hljs-keyword">continue</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            used[nums[i]] = <span class="hljs-literal">true</span><br>            c = <span class="hljs-built_in">append</span>(c, nums[i])<br>            dfs(used, c, nums, res)<br>            used[nums[i]] = <span class="hljs-literal">false</span><br>            c = c[:<span class="hljs-built_in">len</span>(c)<span class="hljs-number">-1</span>]<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…ˆæŠŠæ‰€æœ‰çš„æƒ…å†µéƒ½å†™å‡ºæ¥ï¼Œå†æ…¢æ…¢å‡æ</p><h2 id="5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="5. æœ€é•¿å›æ–‡å­ä¸²"></a>5. æœ€é•¿å›æ–‡å­ä¸²</h2><p>Given a string <code>s</code>, return <em>the longest palindromic substring</em> in <code>s</code>.</p><p>A string is called a palindrome string if the reverse of that string is the same as the original string.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">longestPalindrome</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>    max := <span class="hljs-number">0</span><br>    left := <span class="hljs-number">0</span><br>    length := <span class="hljs-number">0</span><br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">bool</span>, <span class="hljs-built_in">len</span>(s))<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>, <span class="hljs-built_in">len</span>(s))<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-built_in">len</span>(s)<span class="hljs-number">-1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        <span class="hljs-keyword">for</span> j := i; j &lt; <span class="hljs-built_in">len</span>(s); j++ &#123;<br>            <span class="hljs-keyword">if</span> s[i] == s[j] &#123;<br>                <span class="hljs-keyword">if</span> j-i &lt;= <span class="hljs-number">1</span> &#123;<br>                    length = j-i<br>                    dp[i][j] = <span class="hljs-literal">true</span><br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> dp[i+<span class="hljs-number">1</span>][j<span class="hljs-number">-1</span>] &#123;<br>                    length = j-i<br>                    dp[i][j] = <span class="hljs-literal">true</span><br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> length &gt; max &#123;<br>                max = length<br>                left = i<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> s[left:left+max+<span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿”å›ä¸»è¦é è®°å½•èµ·ç‚¹å’Œé•¿åº¦çš„ç»“åˆã€‚</p><p>ä¸æƒ³ç­‰çš„æƒ…å†µè‚¯å®šæ˜¯ä¸èƒ½åŒ¹é…ï¼Œæƒ³ç­‰çš„æ—¶å€™åˆ†ä¸‰ç§æƒ…å†µï¼Œå¦‚æœç›¸å·®ç›¸é‡ç­‰äº1ç›´æ¥å°±æ˜¯okçš„ï¼Œå¦‚æœæ˜¯å¤§äºçš„è¯å°±ç”±ä»–å‰ä¸€ä¸ªçŠ¶æ€æ¨å¯¼å‡ºæ¥ã€‚</p><h2 id="129-æ±‚æ ¹åˆ°å¶å­ç»“ç‚¹æ•°å­—ä¹‹å’Œ"><a href="#129-æ±‚æ ¹åˆ°å¶å­ç»“ç‚¹æ•°å­—ä¹‹å’Œ" class="headerlink" title="129. æ±‚æ ¹åˆ°å¶å­ç»“ç‚¹æ•°å­—ä¹‹å’Œ"></a>129. æ±‚æ ¹åˆ°å¶å­ç»“ç‚¹æ•°å­—ä¹‹å’Œ</h2><p>You are given the <code>root</code> of a binary tree containing digits from <code>0</code> to <code>9</code> only.</p><p>Each root-to-leaf path in the tree represents a number.</p><ul><li>For example, the root-to-leaf path <code>1 -&gt; 2 -&gt; 3</code> represents the number <code>123</code>.</li></ul><p>Return <em>the total sum of all root-to-leaf numbers</em>. Test cases are generated so that the answer will fit in a <strong>32-bit</strong> integer.</p><p>A <strong>leaf</strong> node is a node with no children.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// solution1</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">int</span> &#123;<br>    sum := <span class="hljs-number">0</span><br>    dfs(root, root.Val, &amp;sum)<br>    <span class="hljs-keyword">return</span> sum<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode, tmp <span class="hljs-type">int</span>, sum *<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>        *sum += tmp<br>      <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>        tmp = tmp*<span class="hljs-number">10</span> + root.Left.Val<br>        dfs(root.Left, tmp, sum)<br>        tmp = (tmp-root.Left.Val)/<span class="hljs-number">10</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>        tmp = tmp*<span class="hljs-number">10</span> + root.Right.Val<br>        dfs(root.Right, tmp, sum)<br>        tmp = (tmp-root.Right.Val)/<span class="hljs-number">10</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">// solution2</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">int</span> &#123;<br>    sum := <span class="hljs-number">0</span><br>    dfs(root, root.Val, &amp;sum)<br>    <span class="hljs-keyword">return</span> sum<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode, tmpSum <span class="hljs-type">int</span>, sum *<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>        *sum += tmpSum<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>            dfs(root.Left, tmpSum*<span class="hljs-number">10</span> + root.Left.Val, sum)<br>        &#125;<br>        <span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>            dfs(root.Right, tmpSum*<span class="hljs-number">10</span> + root.Right.Val, sum)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘è¿™é‡Œæ˜¯å†™æˆäº†å›æº¯ï¼Œå…¶å®æ˜¯å†™éº»çƒ¦äº†ï¼Œå¹¶ä¸éœ€è¦å›æº¯ï¼Œæˆ‘åªéœ€è¦çŸ¥é“é¡ºç€ä¸‹æ¥ä»¥åçš„åˆ†æ”¯æ€»å’Œæ˜¯å¤šå°‘å°±okã€‚</p><h2 id="200-å²›å±¿æ•°é‡"><a href="#200-å²›å±¿æ•°é‡" class="headerlink" title="200. å²›å±¿æ•°é‡"></a>200. å²›å±¿æ•°é‡</h2><p>Given an <code>m x n</code> 2D binary grid <code>grid</code> which represents a map of <code>&#39;1&#39;</code>s (land) and <code>&#39;0&#39;</code>s (water), return <em>the number of islands</em>.</p><p>An <strong>island</strong> is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">numIslands</span><span class="hljs-params">(grid [][]<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    result := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i, row := <span class="hljs-keyword">range</span> grid &#123;<br>        <span class="hljs-keyword">for</span> j, value := <span class="hljs-keyword">range</span> row &#123;<br>            <span class="hljs-keyword">if</span> value == <span class="hljs-string">&#x27;1&#x27;</span> &#123;<br>                visit(&amp;grid, i, j)<br>                result += <span class="hljs-number">1</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">visit</span><span class="hljs-params">(grid *[][]<span class="hljs-type">byte</span>, i <span class="hljs-type">int</span>, j <span class="hljs-type">int</span>)</span></span> &#123;<br>    m, n := <span class="hljs-built_in">len</span>(*grid), <span class="hljs-built_in">len</span>((*grid)[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span>) || (i &gt;= m) || (j &lt; <span class="hljs-number">0</span>) || (j &gt;= n) || ((*grid)[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    (*grid)[i][j] = <span class="hljs-string">&#x27;0&#x27;</span><br>    <br>    visit(grid, i<span class="hljs-number">-1</span>, j)<br>    visit(grid, i+<span class="hljs-number">1</span>, j)<br>    visit(grid, i, j<span class="hljs-number">-1</span>)<br>    visit(grid, i, j+<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¦æ±‚æ‰¾å‡ºåœ°å›¾ä¸­çš„å­¤å²›ã€‚å­¤å²›çš„å«ä¹‰æ˜¯å››å‘¨è¢«æµ·æ°´åŒ…å›´çš„å²›ã€‚</li><li>è¿™ä¸€é¢˜å¯ä»¥æŒ‰ç…§ç¬¬ 79 é¢˜çš„æ€è·¯è¿›è¡Œæœç´¢ï¼Œåªè¦æ‰¾åˆ°ä¸º â€œ1â€ çš„å²›ä»¥åï¼Œä»è¿™é‡Œå¼€å§‹æœç´¢è¿™å‘¨è¿é€šçš„é™†åœ°ï¼Œä¹Ÿéƒ½æ ‡è¯†ä¸Šè®¿é—®è¿‡ã€‚æ¯æ¬¡é‡åˆ°æ–°çš„ â€œ1â€ ä¸”æ²¡æœ‰è®¿é—®è¿‡ï¼Œå°±ç›¸å½“äºé‡åˆ°äº†æ–°çš„å²›å±¿äº†ã€‚</li></ul><p>DFSçš„é¢˜</p><p>ä¸¤ç§æ€è·¯ï¼Œä¸Šè¿°æ€è·¯æ˜¯ç›´æ¥å°†æµ·å²›å˜æˆæµ·æ°´ï¼Œè¿˜æœ‰ä¸€ä¸ªæ€è·¯å°±æ˜¯æ ‡è®°æµè§ˆè¿‡å“ªä¸ªã€‚</p><p>ç›¸å½“äºæˆ‘è¿›å…¥ä¸€ä¸ªå²›å±¿ï¼Œåªè¦ä»–æ˜¯å²›å±¿æˆ‘å°±æ„ŸæŸ“ä»–å˜æˆï¼Œæµ·æ°´ã€‚è¿™æ ·å‰©ä¸‹çš„å¤§å¾ªç¯å»æ‰¾ä¹Ÿä¸èƒ½å‘ç°å¤šä½™çš„å²›å±¿äº†ã€‚ä¸€ç§ç±»ä¼¼äºæ„ŸæŸ“çš„æ€æƒ³ã€‚</p><h2 id="54-èºæ—‹çŸ©é˜µ"><a href="#54-èºæ—‹çŸ©é˜µ" class="headerlink" title="54. èºæ—‹çŸ©é˜µ"></a>54. èºæ—‹çŸ©é˜µ</h2><p>Given an <code>m x n</code> <code>matrix</code>, return <em>all elements of the</em> <code>matrix</code> <em>in spiral order</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">spiralOrder</span><span class="hljs-params">(matrix [][]<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(matrix)<br>    n := <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br>    idx, sum := <span class="hljs-number">0</span>, m*n<br>    arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, m*n)<br>    <br>    top := <span class="hljs-number">0</span><br>    bottom := m<span class="hljs-number">-1</span><br>    left := <span class="hljs-number">0</span><br>    right := n<span class="hljs-number">-1</span><br>    <br>    <span class="hljs-keyword">for</span> idx &lt; sum &#123;<br>        <span class="hljs-keyword">for</span> i := left; i &lt;= right &amp;&amp; idx &lt; sum; i++ &#123;<br>            arr[idx] = matrix[top][i]<br>            idx++<br>        &#125;<br>        top++<br><br>        <span class="hljs-keyword">for</span> i := top; i &lt;= bottom &amp;&amp; idx &lt; sum; i++ &#123;<br>            arr[idx] = matrix[i][right]<br>            idx++<br>        &#125;<br>        right--<br><br>        <span class="hljs-keyword">for</span> i := right; i &gt;= left &amp;&amp; idx &lt; sum; i-- &#123;<br>            arr[idx] = matrix[bottom][i]<br>            idx++<br>        &#125;<br>        bottom--<br><br>        <span class="hljs-keyword">for</span> i := bottom; i &gt;= top &amp;&amp; idx &lt; sum; i-- &#123;<br>            arr[idx] = matrix[i][left]<br>            idx++<br>        &#125;<br>        left++<br>    &#125;<br>    <span class="hljs-keyword">return</span> arr<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„å¾ªç¯çš„åŒºé—´ä¸€å®šè¦ï¼šæœ‰idx&lt;sumé˜²æ­¢ï¼ŒåŠ å®Œidxè¿˜å¾€åç»§ç»­èµ°ã€‚æ‰€ä»¥å¤–å±‚ä¸€ä¸ªåˆ¤æ–­ï¼Œå†…å±‚ä¸€ä¸ªåˆ¤æ–­ã€‚</p><h2 id="300-æœ€é•¿ä¸Šå‡å­åºåˆ—"><a href="#300-æœ€é•¿ä¸Šå‡å­åºåˆ—" class="headerlink" title="300. æœ€é•¿ä¸Šå‡å­åºåˆ—"></a>300. æœ€é•¿ä¸Šå‡å­åºåˆ—</h2><p>Given an integer array <code>nums</code>, return the length of the longest strictly increasing subsequence.</p><p>A <strong>subsequence</strong> is a sequence that can be derived from an array by deleting some or no elements without changing the order of the remaining elements. For example, <code>[3,6,2,7]</code> is a subsequence of the array <code>[0,3,1,6,2,2,7]</code>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// åŠ¨æ€è§„åˆ’æ±‚è§£</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lengthOfLIS</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">// dpæ•°ç»„çš„å®šä¹‰ dp[i]è¡¨ç¤ºå–ç¬¬iä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œè¡¨ç¤ºå­åºåˆ—çš„é•¿åº¦ï¼Œå…¶ä¸­åŒ…æ‹¬ nums[i] è¿™ä¸ªå…ƒç´ </span><br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(nums))<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½åº”è¯¥åˆå§‹åŒ–ä¸º1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>        dp[i] = <span class="hljs-number">1</span><br>    &#125;<br><br>    ans := dp[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; i; j++ &#123;<br>            <span class="hljs-keyword">if</span> nums[i] &gt; nums[j] &#123;<br>                dp[i] = max(dp[i], dp[j] + <span class="hljs-number">1</span>)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> dp[i] &gt; ans &#123;<br>            ans = dp[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> x &gt; y &#123;<br>        <span class="hljs-keyword">return</span> x<br>    &#125;<br>    <span class="hljs-keyword">return</span> y<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="22-æ‹¬å·ç”Ÿæˆ"><a href="#22-æ‹¬å·ç”Ÿæˆ" class="headerlink" title="22. æ‹¬å·ç”Ÿæˆ"></a>22. æ‹¬å·ç”Ÿæˆ</h2><p>Given <code>n</code> pairs of parentheses, write a function to <em>generate all combinations of well-formed parentheses</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateParenthesis</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> []<span class="hljs-type">string</span>&#123;&#125;<br>    &#125;<br>    res := []<span class="hljs-type">string</span>&#123;&#125;<br>    dfs(n, n, <span class="hljs-string">&quot;&quot;</span>, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(lindex, rindex <span class="hljs-type">int</span>, str <span class="hljs-type">string</span>, res *[]<span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> lindex == <span class="hljs-number">0</span> &amp;&amp; rindex == <span class="hljs-number">0</span> &#123;<br>        *res = <span class="hljs-built_in">append</span>(*res, str)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> lindex &gt; <span class="hljs-number">0</span> &#123;<br>        dfs(lindex<span class="hljs-number">-1</span>, rindex, str+<span class="hljs-string">&quot;(&quot;</span>, res)<br>    &#125;<br>    <span class="hljs-keyword">if</span> rindex &gt; <span class="hljs-number">0</span> &amp;&amp; lindex &lt; rindex &#123;<br>        dfs(lindex, rindex<span class="hljs-number">-1</span>, str+<span class="hljs-string">&quot;)&quot;</span>, res)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„æ€è·¯æ˜¯dfsï¼Œå› ä¸ºæ˜¯ä¸ªç»„åˆé—®é¢˜ï¼Œç°åœ¨ç€çœ¼äºè¿™ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬è®¾å®šlindexå’Œrindexä½œä¸ºå·¦å³æ‹¬å·çš„å‚¨å¤‡åº“ï¼Œç„¶åè¿›è¡ŒåŒ¹é…ï¼Œåªè¦åº“é‡Œé¢è¿˜æœ‰å‚¨å¤‡å°±æ’åˆ—è¿›å»ï¼Œç„¶åæ³¨æ„å³æ‹¬å·ä¸€å®šæ˜¯åœ¨å·¦æ‹¬å·å°äºå·¦æ‹¬å·æ•°é‡çš„æ—¶å€™è¿›è¡ŒåŒ¹é…ï¼Œè¦ä¸ç„¶ä¼šå‡ºç°å·¦æ‹¬å·ä¸åŒ¹é…å³æ‹¬å·çš„ã€‚</p><h2 id="19-åˆ é™¤å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"><a href="#19-åˆ é™¤å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹" class="headerlink" title="19. åˆ é™¤å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"></a>19. åˆ é™¤å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h2><p>Given the <code>head</code> of a linked list, remove the <code>nth</code> node from the end of the list and return its head.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * type ListNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Next *ListNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">removeNthFromEnd</span><span class="hljs-params">(head *ListNode, n <span class="hljs-type">int</span>)</span></span> *ListNode &#123;<br>fakeHead := &amp;ListNode&#123;Next: head&#125;<br>preSlow, slow, fast := fakeHead, head, head<br><span class="hljs-keyword">for</span> fast != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">0</span> &#123;<br>preSlow = slow<br>slow = slow.Next<br>&#125;<br>n--<br>fast = fast.Next<br>&#125;<br>preSlow.Next = slow.Next<br><span class="hljs-keyword">return</span> fakeHead.Next<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é“é¢˜æ¯”è¾ƒç®€å•ï¼Œå…ˆå¾ªç¯ä¸€æ¬¡æ‹¿åˆ°é“¾è¡¨çš„æ€»é•¿åº¦ï¼Œç„¶åå¾ªç¯åˆ°è¦åˆ é™¤çš„ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹å¼€å§‹åˆ é™¤æ“ä½œã€‚éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‰¹ä¾‹æ˜¯ï¼Œæœ‰å¯èƒ½è¦åˆ é™¤å¤´ç»“ç‚¹ï¼Œè¦å•ç‹¬å¤„ç†ã€‚</p><p>è¿™é“é¢˜æœ‰ä¸€ç§ç‰¹åˆ«ç®€å•çš„è§£æ³•ã€‚è®¾ç½® 2 ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆè·ç¦»å‰ä¸€ä¸ªæŒ‡é’ˆ n ä¸ªè·ç¦»ã€‚åŒæ—¶ç§»åŠ¨ 2 ä¸ªæŒ‡é’ˆï¼Œ2 ä¸ªæŒ‡é’ˆéƒ½ç§»åŠ¨ç›¸åŒçš„è·ç¦»ã€‚å½“ä¸€ä¸ªæŒ‡é’ˆç§»åŠ¨åˆ°äº†ç»ˆç‚¹ï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªæŒ‡é’ˆå°±æ˜¯å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹äº†ã€‚</p><h2 id="322-é›¶é’±äº¤æ¢"><a href="#322-é›¶é’±äº¤æ¢" class="headerlink" title="322. é›¶é’±äº¤æ¢"></a>322. é›¶é’±äº¤æ¢</h2><p>You are given an integer array <code>coins</code> representing coins of different denominations and an integer <code>amount</code> representing a total amount of money.</p><p>Return <em>the fewest number of coins that you need to make up that amount</em>. If that amount of money cannot be made up by any combination of the coins, return <code>-1</code>.</p><p>You may assume that you have an infinite number of each kind of coin.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">coinChange</span><span class="hljs-params">(coins []<span class="hljs-type">int</span>, amount <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>  dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, amount+<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åˆå§‹åŒ–dp[0]</span><br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-comment">// éå†èƒŒåŒ…,ä»1å¼€å§‹</span><br><span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= amount; j++ &#123;<br><span class="hljs-comment">// åˆå§‹åŒ–ä¸ºmath.MaxInt32</span><br>dp[j] = math.MaxInt32<br><span class="hljs-comment">// éå†ç‰©å“</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(coins); i++ &#123;<br><span class="hljs-keyword">if</span> j &gt;= coins[i]&#123;<br><span class="hljs-comment">// æ¨å¯¼å…¬å¼</span><br>dp[j] = min(dp[j], dp[j-coins[i]]+<span class="hljs-number">1</span>)<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">// æ²¡æ‰¾åˆ°èƒ½è£…æ»¡èƒŒåŒ…çš„, å°±è¿”å›-1</span><br><span class="hljs-keyword">if</span> dp[amount] == math.MaxInt32 &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br><span class="hljs-keyword">return</span> dp[amount]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆå§‹åŒ–ä¸ºamount+1æ˜¯å› ä¸ºæ˜¯ä»0å¼€å§‹ç®—çš„ï¼Œä½†æ˜¯æœ€ç»ˆèƒŒåŒ…çš„å®¹é‡æ˜¯amount</p><p>éå†ç‰©å“æ”¾å…¥èƒŒåŒ…ä¸­ï¼Œåªè¦æ˜¯å½“å‰çš„å¸å€¼æ²¡æœ‰å¤§äºæœ€ç»ˆamountå°±å¯ä»¥æœ‰èµ„æ ¼æ”¾å…¥ï¼ˆå› ä¸ºæˆ‘ä»¬è¿½æ±‚æ›´å¤§çš„å¸å€¼ï¼Œæ›´å°‘çš„å¸æ•°ï¼‰ã€‚è¿™æ—¶è¿›è¡Œé€’æ¨ä¸¤ç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¸€ï¼šä¸æ”¾å…¥å¸ï¼›çŠ¶æ€äºŒï¼šæ”¾å…¥å¸ï¼ˆæ‰¾å‰ä¸€ä¸ªçŠ¶æ€ï¼‰ï¼Œæˆ‘ä»¬å°½å¯èƒ½æ”¾å…¥æ›´å°‘çš„ç¡¬å¸æ»¡è¶³å½“å‰çš„å¸å€¼ã€‚æœ€ç»ˆè¿­ä»£åˆ°æœ€åï¼Œå‘ç°åªè¦dp[amount]==math.MaxInt32çš„è¯ï¼Œé‚£ä¹ˆä»£è¡¨ä»–æ²¡æœ‰è¢«æ›´æ–°ï¼Œä»£è¡¨å®¹é‡å¹¶æ²¡æœ‰è¢«è£…æ»¡è‚¯å®šæ˜¯é”™è¯¯çš„è¿”å›-1ã€‚</p><h2 id="56-åˆå¹¶åŒºé—´"><a href="#56-åˆå¹¶åŒºé—´" class="headerlink" title="56. åˆå¹¶åŒºé—´"></a>56. åˆå¹¶åŒºé—´</h2><p>Given an array of <code>intervals</code> where <code>intervals[i] = [starti, endi]</code>, merge all overlapping intervals, and return <em>an array of the non-overlapping intervals that cover all the intervals in the input</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">merge</span><span class="hljs-params">(intervals [][]<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">//å…ˆä»å°åˆ°å¤§æ’åº</span><br>    sort.Slice(intervals,<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i,j <span class="hljs-type">int</span>)</span></span><span class="hljs-type">bool</span>&#123;<br>        <span class="hljs-keyword">return</span> intervals[i][<span class="hljs-number">0</span>]&lt;intervals[j][<span class="hljs-number">0</span>]<br>    &#125;)<br>    i := <span class="hljs-number">0</span><br>    <span class="hljs-comment">//å†å¼„é‡å¤çš„</span><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(intervals)<span class="hljs-number">-1</span>;i++&#123;<br>        <span class="hljs-keyword">if</span> intervals[i][<span class="hljs-number">1</span>]&gt;=intervals[i+<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]&#123;<br>            intervals[i][<span class="hljs-number">1</span>]=max(intervals[i][<span class="hljs-number">1</span>],intervals[i+<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])<span class="hljs-comment">//èµ‹å€¼æœ€å¤§å€¼</span><br>            intervals=<span class="hljs-built_in">append</span>(intervals[:i+<span class="hljs-number">1</span>],intervals[i+<span class="hljs-number">2</span>:]...)<br>            i--<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> intervals<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>1ã€å…ˆå°†åŒºé—´æŒ‰ç…§å·¦èµ·ç‚¹çš„é¡ºåºæ’åºã€‚</p><p>2ã€ä»ç¬¬ä¸€ä¸ªåŒºé—´å¼€å§‹éå†ï¼Œå¦‚æœå‰è€…çš„å³è¾¹ç•Œå¤§äºç­‰äºäº†åè€…çš„å·¦è¾¹ç•Œï¼Œé‚£å°±å¯ä»¥è¿›è¡Œåˆå¹¶ã€‚å°†å‰è€…çš„å³è¾¹ç•Œæ›´æ–°ä¸ºï¼ˆå‰è€…å³è¾¹ç•Œæˆ–åè€…åè¾¹ç•Œçš„æœ€å¤§å€¼ï¼‰ã€‚</p><p>3ã€å‰”é™¤åè€…åŒºé—´ï¼ˆè®©å‰è€…appendä¸Šåè€…çš„åè€…ï¼‰ï¼Œå†iâ€”å½’æ¡£</p><h2 id="695-æœ€å¤§å²›å±¿æ•°é‡"><a href="#695-æœ€å¤§å²›å±¿æ•°é‡" class="headerlink" title="695. æœ€å¤§å²›å±¿æ•°é‡"></a>695. æœ€å¤§å²›å±¿æ•°é‡</h2><p>You are given an <code>m x n</code> binary matrix <code>grid</code>. An island is a group of <code>1</code>â€˜s (representing land) connected <strong>4-directionally</strong> (horizontal or vertical.) You may assume all four edges of the grid are surrounded by water.</p><p>The <strong>area</strong> of an island is the number of cells with a value <code>1</code> in the island.</p><p>Return <em>the maximum <strong>area</strong> of an island in</em> <code>grid</code>. If there is no island, return <code>0</code>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxAreaOfIsland</span><span class="hljs-params">(grid [][]<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    res := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i, row := <span class="hljs-keyword">range</span> grid &#123;<br>        <span class="hljs-keyword">for</span> j, value := <span class="hljs-keyword">range</span> row &#123;<br>            <span class="hljs-keyword">if</span> value == <span class="hljs-number">1</span> &#123;<br>                count := <span class="hljs-number">0</span><br>                dfs(&amp;grid, &amp;count, &amp;res, i, j)<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(grid *[][]<span class="hljs-type">int</span>, count, res *<span class="hljs-type">int</span>, i, j <span class="hljs-type">int</span>)</span></span> &#123;<br>    m, n := <span class="hljs-built_in">len</span>(*grid), <span class="hljs-built_in">len</span>((*grid)[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span>) || (i &gt;= m) || (j &lt; <span class="hljs-number">0</span>) || (j &gt;= n) || ((*grid)[i][j] == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    (*grid)[i][j] = <span class="hljs-number">0</span><br>    *count++<br>    <span class="hljs-keyword">if</span> *count &gt; *res &#123;*res = *count&#125;<br>    <br>    dfs(grid, count, res, i+<span class="hljs-number">1</span>, j)<br>    dfs(grid, count, res, i<span class="hljs-number">-1</span>, j)<br>    dfs(grid, count, res, i, j+<span class="hljs-number">1</span>)<br>    dfs(grid, count, res, i, j<span class="hljs-number">-1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¿™ä¸€é¢˜å’Œç¬¬ 200 é¢˜ï¼Œç¬¬ 1254 é¢˜è§£é¢˜æ€è·¯æ˜¯ä¸€è‡´çš„ã€‚DPS æ·±æœã€‚è¿™ä¸è¿‡è¿™ä¸€é¢˜éœ€è¦å¤šå¤„ç† 2 ä»¶äº‹æƒ…ï¼Œä¸€ä¸ªæ˜¯æ³¨æ„é è¾¹ç¼˜çš„å²›å±¿ä¸èƒ½è®¡ç®—åœ¨å†…ï¼ŒäºŒæ˜¯åŠ¨æ€ç»´æŠ¤å²›å±¿çš„æœ€å¤§é¢ç§¯ã€‚</li><li>æ³¨æ„countä¸€å®šè¦æ˜¯æŒ‡é’ˆï¼Œè¦ä¸ç„¶å½“ä»–æœ‰ä¸¤ä¸ªåˆ†æ”¯çš„æ—¶å€™countä¸æ˜¯ç´¯åŠ è€Œæ˜¯å•çº¯çš„å¢åŠ ä¸€</li></ul><h2 id="103-äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†"><a href="#103-äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†" class="headerlink" title="103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†"></a>103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†</h2><p>Given the <code>root</code> of a binary tree, return <em>the zigzag level order traversal of its nodesâ€™ values</em>. (i.e., from left to right, then right to left for the next level and alternate between).</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for a binary tree node.</span><br><span class="hljs-comment"> * type TreeNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Left *TreeNode</span><br><span class="hljs-comment"> *     Right *TreeNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">zigzagLevelOrder</span><span class="hljs-params">(root *TreeNode)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;&#125;<br>    res := [][]<span class="hljs-type">int</span>&#123;&#125;<br>    queue := []*TreeNode&#123;root&#125;<br>    flag := <span class="hljs-literal">true</span> <span class="hljs-comment">// flag true = l to r, flag false = r to l</span><br>    <br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(queue) != <span class="hljs-number">0</span> &#123;<br>        l := <span class="hljs-built_in">len</span>(queue)<br>tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, l)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; l; i++ &#123;<br>            node := queue[i]<br><span class="hljs-keyword">if</span> node.Left != <span class="hljs-literal">nil</span> &#123;<br>queue = <span class="hljs-built_in">append</span>(queue, node.Left)<br>&#125;<br><span class="hljs-keyword">if</span> node.Right != <span class="hljs-literal">nil</span> &#123;<br>queue = <span class="hljs-built_in">append</span>(queue, node.Right)<br>&#125;<br>            <span class="hljs-keyword">if</span> flag &#123;<br>                tmp = <span class="hljs-built_in">append</span>(tmp, queue[i].Val)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                tmp = <span class="hljs-built_in">append</span>(tmp, queue[l-i<span class="hljs-number">-1</span>].Val)<br>            &#125;<br>&#125;<br>queue = queue[l:]<br>    flag =!flag<br>res = <span class="hljs-built_in">append</span>(res, tmp)<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹‹å‰é¡ºåºå¼„çš„ä¸å¥½ï¼Œæƒ³çš„æ˜¯åå‘æ”¾å…¥ï¼Œå…¶å®åå‘æå–æ›´å¥½ç†è§£ã€‚</p><h2 id="209-é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#209-é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="209. é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</h2><p>Given an array of positive integers <code>nums</code> and a positive integer <code>target</code>, return the minimal length of a <strong>contiguous subarray</strong> <code>[numsl, numsl+1, ..., numsr-1, numsr]</code> of which the sum is greater than or equal to <code>target</code>. If there is no such subarray, return <code>0</code> instead.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">minSubArrayLen</span><span class="hljs-params">(target <span class="hljs-type">int</span>, nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>left, sum, res := <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)+<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> right, v := <span class="hljs-keyword">range</span> nums &#123;<br>sum += v<br><span class="hljs-keyword">for</span> sum &gt;= target &#123;<br>res = min(res, right-left+<span class="hljs-number">1</span>)<br>sum -= nums[left]<br>left++<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> res == <span class="hljs-built_in">len</span>(nums)+<span class="hljs-number">1</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a <span class="hljs-type">int</span>, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> a &gt; b &#123;<br><span class="hljs-keyword">return</span> b<br>&#125;<br><span class="hljs-keyword">return</span> a<br>&#125;<br></code></pre></td></tr></table></figure><p>æ»‘åŠ¨çª—å£æ€æƒ³ï¼Œæ’å¥½åºåˆ—çš„ï¼Œè¿˜æœ‰è¿ç»­å­åºåˆ—çš„éƒ½è€ƒè™‘æ»‘åŠ¨çª—å£ã€‚</p><h2 id="718-æœ€é•¿é‡å¤å­åºåˆ—"><a href="#718-æœ€é•¿é‡å¤å­åºåˆ—" class="headerlink" title="718. æœ€é•¿é‡å¤å­åºåˆ—"></a>718. æœ€é•¿é‡å¤å­åºåˆ—</h2><p>Given two integer arrays <code>nums1</code> and <code>nums2</code>, return <em>the maximum length of a subarray that appears in <strong>both</strong> arrays</em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findLength</span><span class="hljs-params">(nums1 []<span class="hljs-type">int</span>, nums2 []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(nums1)<br>    n := <span class="hljs-built_in">len</span>(nums2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>    &#125;<br>    res := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> nums1[i<span class="hljs-number">-1</span>] == nums2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> dp[i][j] &gt; res &#123;<br>                res = dp[i][j]<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//fmt.Println(dp[i][1:])</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®dp[i] [j]çš„å®šä¹‰ï¼Œdp[i] [j]çš„çŠ¶æ€åªèƒ½ç”±dp[i - 1] [j - 1]æ¨å¯¼å‡ºæ¥ã€‚</p><p>å³å½“A[i - 1] å’ŒB[j - 1]ç›¸ç­‰çš„æ—¶å€™ï¼Œdp[i] [j] = dp[i - 1] [j - 1] + 1;</p><p>æ ¹æ®é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œéå†i å’Œ j è¦ä»1å¼€å§‹ï¼</p><h2 id="384-æ‰“ä¹±æ•°ç»„"><a href="#384-æ‰“ä¹±æ•°ç»„" class="headerlink" title="384. æ‰“ä¹±æ•°ç»„"></a>384. æ‰“ä¹±æ•°ç»„</h2><p>Given an integer array <code>nums</code>, design an algorithm to randomly shuffle the array. All permutations of the array should be <strong>equally likely</strong> as a result of the shuffling.</p><p>Implement the <code>Solution</code> class:</p><ul><li><code>Solution(int[] nums)</code> Initializes the object with the integer array <code>nums</code>.</li><li><code>int[] reset()</code> Resets the array to its original configuration and returns it.</li><li><code>int[] shuffle()</code> Returns a random shuffling of the array.</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Solution <span class="hljs-keyword">struct</span> &#123;<br>    nums []<span class="hljs-type">int</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Constructor</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> Solution &#123;<br>    <span class="hljs-keyword">return</span> Solution&#123;<br>nums: nums,<br>&#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *Solution)</span></span> Reset() []<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">return</span> this.nums<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *Solution)</span></span> Shuffle() []<span class="hljs-type">int</span> &#123;<br>  arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(this.nums))<br><span class="hljs-built_in">copy</span>(arr, this.nums)<br>rand.Shuffle(<span class="hljs-built_in">len</span>(arr), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> &#123;<br>arr[i], arr[j] = arr[j], arr[i]<br>&#125;)<br><span class="hljs-keyword">return</span> arr<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨rand.Shuffle()å‡½æ•°ã€‚</p><p>ç”¨copyå¤åˆ¶æ–°ç©ºé—´çš„æ•°ç»„ï¼Œä¸ä¼šç ´åæœ¬èº«å¯¹è±¡è‡ªå·±çš„æ•°ç»„ã€‚</p><h2 id="62-ç‹¬ä¸€æ— äºŒçš„è·¯å¾„"><a href="#62-ç‹¬ä¸€æ— äºŒçš„è·¯å¾„" class="headerlink" title="62. ç‹¬ä¸€æ— äºŒçš„è·¯å¾„"></a>62. ç‹¬ä¸€æ— äºŒçš„è·¯å¾„</h2><p>There is a robot on an <code>m x n</code> grid. The robot is initially located at the <strong>top-left corner</strong> (i.e., <code>grid[0][0]</code>). The robot tries to move to the <strong>bottom-right corner</strong> (i.e., <code>grid[m - 1][n - 1]</code>). The robot can only move either down or right at any point in time.</p><p>Given the two integers <code>m</code> and <code>n</code>, return <em>the number of possible unique paths that the robot can take to reach the bottom-right corner</em>.</p><p>The test cases are generated so that the answer will be less than or equal to <code>2 * 109</code>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">uniquePaths</span><span class="hljs-params">(m <span class="hljs-type">int</span>, n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m)<br><span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>&#125;<br>    <br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; n; j++ &#123;<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt; n; j++ &#123;<br>            dp[i][j] = dp[i<span class="hljs-number">-1</span>][j] + dp[i][j<span class="hljs-number">-1</span>]<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>åªèƒ½å‘ä¸‹åæˆ–è€…å‘å³ï¼Œæ‰€ä»¥åˆå§‹åŒ–å¸Œæœ›æ˜¯çºµåˆ—å’Œæ¨ªåˆ—å…¨éƒ½åˆå§‹åŒ–ä¸º1</p><p>å½“å‰ä½ç½®å°±æ˜¯ç”±ä¸Šä¸€ä¸ªçŠ¶æ€æ¨å‡ºæ¥çš„ï¼Œå¹¶ä¸”ä¸Šä¸€ä¸ªçŠ¶æ€éƒ½æ¥è‡ªäºä¸Šè¾¹æˆ–è€…å·¦è¾¹ã€‚</p><h2 id="93-å¤åŸIPåœ°å€"><a href="#93-å¤åŸIPåœ°å€" class="headerlink" title="93. å¤åŸIPåœ°å€"></a>93. å¤åŸIPåœ°å€</h2><p>A <strong>valid IP address</strong> consists of exactly four integers separated by single dots. Each integer is between <code>0</code> and <code>255</code> (<strong>inclusive</strong>) and cannot have leading zeros.</p><ul><li>For example, <code>&quot;0.1.2.201&quot;</code> and <code>&quot;192.168.1.1&quot;</code> are <strong>valid</strong> IP addresses, but <code>&quot;0.011.255.245&quot;</code>, <code>&quot;192.168.1.312&quot;</code> and <code>&quot;192.168@1.1&quot;</code> are <strong>invalid</strong> IP addresses.</li></ul><p>Given a string <code>s</code> containing only digits, return <em>all possible valid IP addresses that can be formed by inserting dots into</em> <code>s</code>. You are <strong>not</strong> allowed to reorder or remove any digits in <code>s</code>. You may return the valid IP addresses in <strong>any</strong> order.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">restoreIpAddresses</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br>    <span class="hljs-keyword">if</span> s == <span class="hljs-string">&quot;&quot;</span> &#123;<br><span class="hljs-keyword">return</span> []<span class="hljs-type">string</span>&#123;&#125;<br>&#125;<br>res, ip := []<span class="hljs-type">string</span>&#123;&#125;, []<span class="hljs-type">int</span>&#123;&#125;<br>    dfs(s, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, ip, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(s <span class="hljs-type">string</span>, start, cut <span class="hljs-type">int</span>, ip []<span class="hljs-type">int</span>, res *[]<span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> cut == <span class="hljs-number">4</span> &amp;&amp; start == <span class="hljs-built_in">len</span>(s) &#123;<br>        tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(ip))<br>        <span class="hljs-built_in">copy</span>(tmp, ip)<br>        resIp := getIp(tmp)<br>        *res = <span class="hljs-built_in">append</span>(*res, resIp)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> cut &gt; <span class="hljs-number">4</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := start; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        sub := s[start : i + <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> isValid(sub) &#123;<br>            tmp, _ := strconv.Atoi(sub)<br>            ip = <span class="hljs-built_in">append</span>(ip, tmp)<br>            cut++<br>            dfs(s, i + <span class="hljs-number">1</span>, cut, ip, res)<br>            ip = ip[:<span class="hljs-built_in">len</span>(ip) - <span class="hljs-number">1</span>]<br>            cut--<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValid</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; <span class="hljs-built_in">len</span>(s) != <span class="hljs-number">1</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125; <span class="hljs-comment">// 0å¼€å¤´çš„ä¸å¯ä»¥</span><br>    tmp, _ := strconv.Atoi(s)<br>    <span class="hljs-keyword">if</span> (tmp &gt; <span class="hljs-number">255</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getIp</span><span class="hljs-params">(ip []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>    resIp := strconv.Itoa(ip[<span class="hljs-number">0</span>])<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(ip); i++ &#123;<br>resIp += <span class="hljs-string">&quot;.&quot;</span> + strconv.Itoa(ip[i])<br>&#125;<br><span class="hljs-keyword">return</span> resIp<br>&#125;<br></code></pre></td></tr></table></figure><p>getIpå‡½æ•°ç”¨æ¥ç»„è£…ip</p><p>isValidç”¨æ¥æ ¡éªŒæ˜¯å¦åˆæ³•ï¼ˆå¼€å¤´ä¸èƒ½æ˜¯0ï¼Œå¹¶ä¸”ä¸èƒ½å¤§äº255ï¼‰</p><p>åˆæ³•å¹¶ä¸”æ€»å…±éå†å®Œæˆäº†å°±ç®—æ˜¯ä¸€ä¸ªç»“æœï¼Œæ¯æ¬¡å­˜çš„éƒ½æ˜¯ä¸€ä¸ªæ•°ã€‚</p><h1 id="HARD"><a href="#HARD" class="headerlink" title="HARD"></a>HARD</h1><h2 id="25-Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"><a href="#25-Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨" class="headerlink" title="25. Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"></a>25. Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</h2><p>Given the <code>head</code> of a linked list, reverse the nodes of the list <code>k</code> at a time, and return <em>the modified list</em>.</p><p><code>k</code> is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of <code>k</code> then left-out nodes, in the end, should remain as it is.</p><p>You may not alter the values in the listâ€™s nodes, only nodes themselves may be changed.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * type ListNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Next *ListNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseKGroup</span><span class="hljs-params">(head *ListNode, k <span class="hljs-type">int</span>)</span></span> *ListNode &#123;<br>curr := head<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; k; i++ &#123;<br><span class="hljs-keyword">if</span> curr == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> head<br>&#125;<br>curr = curr.Next<br>&#125;<br>newHead := reverse(head, curr) <span class="hljs-comment">// curræ­¤æ—¶æ˜¯ä¸‹ä¸€ä¸ªçš„å¼€å¤´</span><br>head.Next = reverseKGroup(curr, k)<br><span class="hljs-keyword">return</span> newHead<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverse</span><span class="hljs-params">(first *ListNode, last *ListNode)</span></span> *ListNode &#123;<br>    curr := first<br>prev := last<br><span class="hljs-keyword">for</span> curr != last &#123;<br>tmp := curr.Next<br>curr.Next = prev<br>prev = curr<br>curr = tmp<br>&#125;<br><span class="hljs-keyword">return</span> prev<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="42-æ¥é›¨æ°´"><a href="#42-æ¥é›¨æ°´" class="headerlink" title="42. æ¥é›¨æ°´"></a>42. æ¥é›¨æ°´</h2><p>Given <code>n</code> non-negative integers representing an elevation map where the width of each bar is <code>1</code>, compute how much water it can trap after raining.</p><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/10/22/rainwatertrap.png" alt="img"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trap</span><span class="hljs-params">(height []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    sum:=<span class="hljs-number">0</span><br>    n:=<span class="hljs-built_in">len</span>(height)<br>    lh:=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,n)<br>    rh:=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,n)<br>    lh[<span class="hljs-number">0</span>]=height[<span class="hljs-number">0</span>]<br>    rh[n<span class="hljs-number">-1</span>]=height[n<span class="hljs-number">-1</span>]<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;n;i++&#123;<br>        lh[i]=max(lh[i<span class="hljs-number">-1</span>],height[i])<br>    &#125;<br>    <span class="hljs-keyword">for</span> i:=n<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>        rh[i]=max(rh[i+<span class="hljs-number">1</span>],height[i])<br>    &#125;<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;n<span class="hljs-number">-1</span>;i++&#123;<br>        h:=min(rh[i],lh[i])-height[i]<br>        <span class="hljs-keyword">if</span> h&gt;<span class="hljs-number">0</span>&#123;<br>            sum+=h<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&lt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šä¸€èŠ‚çš„åŒæŒ‡é’ˆè§£æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åªè¦è®°å½•å·¦è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ å’Œ å³è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ï¼Œå°±å¯ä»¥è®¡ç®—å½“å‰ä½ç½®çš„é›¨æ°´é¢ç§¯ï¼Œè¿™å°±æ˜¯é€šè¿‡åˆ—æ¥è®¡ç®—ã€‚</p><p>å½“å‰åˆ—é›¨æ°´é¢ç§¯ï¼šmin(å·¦è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ï¼Œè®°å½•å³è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦) - å½“å‰æŸ±å­é«˜åº¦ã€‚</p><p>ä¸ºäº†å¾—åˆ°ä¸¤è¾¹çš„æœ€é«˜é«˜åº¦ï¼Œä½¿ç”¨äº†åŒæŒ‡é’ˆæ¥éå†ï¼Œæ¯åˆ°ä¸€ä¸ªæŸ±å­éƒ½å‘ä¸¤è¾¹éå†ä¸€éï¼Œè¿™å…¶å®æ˜¯æœ‰é‡å¤è®¡ç®—çš„ã€‚æˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªä½ç½®çš„å·¦è¾¹æœ€é«˜é«˜åº¦è®°å½•åœ¨ä¸€ä¸ªæ•°ç»„ä¸Šï¼ˆmaxLeftï¼‰ï¼Œå³è¾¹æœ€é«˜é«˜åº¦è®°å½•åœ¨ä¸€ä¸ªæ•°ç»„ä¸Šï¼ˆmaxRightï¼‰ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤è®¡ç®—ï¼Œè¿™å°±ç”¨åˆ°äº†åŠ¨æ€è§„åˆ’ã€‚</p><p>å½“å‰ä½ç½®ï¼Œå·¦è¾¹çš„æœ€é«˜é«˜åº¦æ˜¯å‰ä¸€ä¸ªä½ç½®çš„å·¦è¾¹æœ€é«˜é«˜åº¦å’Œæœ¬é«˜åº¦çš„æœ€å¤§å€¼ã€‚</p><p>å³ä»å·¦å‘å³éå†ï¼šmaxLeft[i] = max(height[i], maxLeft[i - 1]);</p><p>ä»å³å‘å·¦éå†ï¼šmaxRight[i] = max(height[i], maxRight[i + 1]);</p><p>æ€»ä½“æ€è·¯å°±æ˜¯æ‹†å¼€çœ‹ï¼š</p><p>1ã€æˆ‘ä»¬éœ€è¦çŸ¥é“æ¯ä¸ªä½ç½®å…¶å·¦è¾¹å’Œå³è¾¹æœ€é«˜çš„é«˜åº¦æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥å…ˆinitä¸¤ä¸ªæ•°ç»„ã€‚dpçš„æ€æƒ³ï¼Œåˆ†åˆ«è®°å½•å·¦å³ä½ç½®çš„å…¶å·¦è¾¹æœ€é«˜çš„é«˜åº¦å’Œå…¶å³è¾¹æœ€é«˜çš„é«˜åº¦ã€‚ç»†èŠ‚å°±æ˜¯æˆ‘ä»¬è¦æ³¨æ„å·¦è¾¹æ˜¯ä»ä¸‹æ ‡1å¼€å§‹ï¼Œå³è¾¹è¦ä»ä¸‹æ ‡n-2å¼€å§‹éƒ½è¦ç•™å‡ºä¸€ä¸ªç©ºé—´ï¼Œå› ä¸º</p><p>2ã€è¿™æ—¶å€™å‡†å¤‡å·¥ä½œåšå¥½äº†æˆ‘ä»¬å°±è¦ç”¨dpçš„æ€æƒ³å°†æ‰€æœ‰çš„é›¨æ°´è®°å½•å‡ºæ¥ï¼Œç”¨ <strong>min(å·¦è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ï¼Œè®°å½•å³è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦) - å½“å‰æŸ±å­é«˜åº¦</strong> æ¥è¿›è¡Œè®¡ç®—ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>algorithm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redis-study</title>
    <link href="/2022/07/26/redis-study/"/>
    <url>/2022/07/26/redis-study/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>ä½¿ç”¨Homebrewå®‰è£…Redis</p><p><code>brew install redis</code></p><p>å¯åŠ¨redis</p><p><code>Brew services start redis</code></p><p>æŸ¥çœ‹redisæ˜¯å¦è¿è¡Œ</p><p><code>ps axu|grep redis</code></p><p>æŸ¥çœ‹åˆ—è¡¨</p><p><code>brew services list</code></p><p>å…³é—­redis</p><p><code>brew services stop redis</code></p><p>dockerä¸­è¿è¡Œredis</p><p><code>docker exec -it &quot;container_name&quot; bash</code></p><h1 id="æŒ‡å—ä¼ é€é—¨"><a href="#æŒ‡å—ä¼ é€é—¨" class="headerlink" title="æŒ‡å—ä¼ é€é—¨"></a>æŒ‡å—ä¼ é€é—¨</h1><p>golang-redis <a href="https://www.bilibili.com/read/cv15392487?spm_id_from=333.999.0.0">https://www.bilibili.com/read/cv15392487?spm_id_from=333.999.0.0</a></p><p>rediså…¥é—¨ <a href="https://www.bilibili.com/read/cv15157176?spm_id_from=333.999.0.0">https://www.bilibili.com/read/cv15157176?spm_id_from=333.999.0.0</a></p><h1 id="å…«è‚¡æ–‡"><a href="#å…«è‚¡æ–‡" class="headerlink" title="å…«è‚¡æ–‡"></a>å…«è‚¡æ–‡</h1><p>æ•°æ®ç»“æ„ï¼šå­—ç¬¦ä¸²ã€é“¾è¡¨ã€å“ˆå¸Œè¡¨ã€é›†åˆã€æœ‰åºé›†åˆ</p><p>æŒä¹…åŒ–ï¼šRDBã€AOF</p><p>å†™æ“ä½œæ…¢äºè¯»æ“ä½œ  </p><p><strong>ç¼“å­˜æ·˜æ±°ï¼š</strong></p><p>FIFOå…ˆå…¥å…ˆå‡º</p><p>LRUæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šé€šè¿‡hashè¡¨æ¥å®šä½å…·ä½“çš„ä½ç½®ï¼Œç„¶åæŠŠä»–æ”¾åœ¨é˜Ÿå°¾</p><p>LFUæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼šè®°å½•è®¿é—®æ¬¡æ•°ï¼ŒæŒ‰ç…§è®¿é—®æ¬¡æ•°å°‘æ”¾é˜Ÿå°¾</p><p><strong>ç¼“å­˜ä¸€è‡´ï¼š</strong></p><p>å»¶è¿ŸåŒåˆ ï¼Œè¿˜æœ‰ä¸€ä¸ªå¿˜è®°äº†</p><p><strong>ç¼“å­˜å‡»ç©¿ï¼š</strong>ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œç„¶åå†æ¬¡è®¿é—®ç›´æ¥æ‰“åˆ°æ•°æ®åº“</p><p>redisçš„æ€§èƒ½æ˜¯æ™®é€šå…³ç³»å‹æ•°æ®åº“çš„10-100å€ï¼Œå¦‚æœrediså‹‰å¼ºå®Œæˆçš„ä»»åŠ¡ï¼Œç›´æ¥æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œmysqlè‚¯å®šç›´æ¥å®•æœºäº†</p><p>mysqlè§’åº¦å‡ºå‘ï¼šå‡å°‘å‡»ç©¿åçš„ç›´æ¥æµé‡</p><p>ä»Redisè§’åº¦å‡ºå‘ï¼š</p><p>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</p><p>çƒ­ç‚¹æ•°æ®åå°å¯åŠ¨ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œé‡æ–°æŠŠæ•°æ®å›å¡«ç¼“å­˜å±‚</p><p><strong>ç¼“å­˜ç©¿é€ï¼š</strong>æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“ä¹Ÿä¸å­˜åœ¨çš„æ•°æ®ï¼Œå³ç¼“å­˜æŸ¥ä¸åˆ°ï¼Œæ•°æ®åº“ä¹ŸæŸ¥ä¸åˆ°ï¼Œæ‰€ä»¥é€äº†</p><p>ä¸€èˆ¬è§£å†³åŠæ³•ï¼š</p><ol><li>æ‹¦æˆªéæ³•æŸ¥è¯¢è¯·æ±‚</li><li>ç¼“å­˜ç©ºå¯¹è±¡ valueä¸ºç©ºï¼Œé˜²æ­¢ç›´æ¥æ‰“åˆ°æ•°æ®åº“</li><li>å¸ƒéš†è¿‡æ»¤å™¨<a href="https://zhuanlan.zhihu.com/p/43263751">https://zhuanlan.zhihu.com/p/43263751</a></li></ol><p>â€‹        è®¾è®¡æ€è·¯ï¼šè®¾è®¡kä¸ªhashæ˜ å°„å‡½æ•°ï¼Œè¿™kä¸ªæ˜ å°„å‡½æ•°å„ä¸ç›¸åŒï¼ŒæŠŠåœ¨æ•°æ®åº“ä¸­çš„æœ‰æ•ˆæ•°æ®é€šè¿‡è¿™ä¸ªæ˜ å°„å‡½æ•°å¾—åˆ°æ•°ç»„æŒ‡å®šä½ç½®ï¼Œå¹¶ç½®ä¸º1</p><p>â€‹        æŸ¥è¯¢æ€è·¯ï¼šè¾“å…¥æŸ¥è¯¢æ•°æ®ï¼Œé€šè¿‡è¿™ä¸€ç³»åˆ—hashå‡½æ•°ï¼Œåˆ¤æ–­å¯¹åº”ä½ç½®æ˜¯å¦å…¨ä¸º1ã€‚å¦‚æœæ˜¯ï¼Œåˆ™å¾ˆå¤§æ¦‚ç‡å°±æ˜¯æˆ‘ä»¬çš„æœ‰æ•ˆè¯·æ±‚äº†ï¼Œå¦‚æœæœ‰ä¸€ä½ä¸º0ï¼Œåˆ™æŸ¥è¯¢ä¸€å®šæ˜¯æ— æ•ˆæŸ¥è¯¢</p><p>è¿‡æ»¤å™¨åŠ åœ¨è¯·æ±‚rediså‰é¢è¿™æ ·å¯ä»¥å…ˆæŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰è¿‡è¿™ä¸ªæ•°æ®ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±ä¸ç”¨è¯·æ±‚äº†ï¼Œå› ä¸ºè‚¯å®šä¸å­˜åœ¨ã€‚æ³¨æ„è¿”å›çš„ç»“æœæ˜¯æ¦‚ç‡æ€§çš„ï¼Œè€Œä¸”hashå€¼å¯èƒ½è¦†ç›–ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ¯ä¸€ä¸ªæ•°æ®éƒ½å¯ä»¥åœ¨å­˜å‚¨ä¸­æœ‰kä¸ªç»“æœ</p><p><strong>ç¼“å­˜é›ªå´©ï¼š</strong>ä¸€å¤§æ‰¹è¢«ç¼“å­˜çš„æ•°æ®ï¼ŒåŒæ—¶å¤±æ•ˆï¼Œæ­¤æ—¶å¯¹äºè¿™ä¸€æ‰¹çš„æ•°æ®è¯·æ±‚å°±å…¨æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œå¯¼è‡´æ•°æ®åº“å®•æœº</p><p>ç¼“å­˜å‡»ç©¿ï¼šå•ç‚¹ï¼›ç¼“å­˜é›ªå´©ï¼šå¤šç‚¹</p><p>ä»MySQLçš„è§’åº¦ï¼šå‡å°‘å¹¶å‘é‡</p><p>ä»Redisçš„è§’åº¦ï¼š</p><p>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</p><p>åˆ†æå¤±æ•ˆæ—¶é—´ï¼Œå°½é‡è®©å¤±æ•ˆæ—¶é—´ç‚¹åˆ†æ•£</p><p>ç¼“å­˜é¢„çƒ­ï¼Œå³åœ¨ä¸Šçº¿å‰ï¼Œæ ¹æ®å½“å¤©çš„æƒ…å†µåˆ†æï¼Œå°†çƒ­æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿ</p><h1 id="å¤šæœº"><a href="#å¤šæœº" class="headerlink" title="å¤šæœº"></a>å¤šæœº</h1><h2 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h2><p>Mysqlçš„ä¸»ä»å¤åˆ¶<a href="https://www.cnblogs.com/rickiyang/p/13856388.html">https://www.cnblogs.com/rickiyang/p/13856388.html</a></p><p><strong>ä¸€ä¸»ä¸€ä»/ä¸€ä¸»å¤šä»</strong></p><p>å†™å‘½ä»¤ç›´æ¥æ‰“åˆ°ä¸»åº“ä¸Šï¼Œä»åº“æ»åä¸€ç‚¹ï¼ˆæ—¶å»¶ï¼‰ä»ä¸»åº“åŒæ­¥æ•°æ®ï¼Œç„¶åè¯»è¯·æ±‚å°½é‡ä»ä»åº“é‡Œé¢æ</p><ol><li><p>å½“ä¸»åº“ä»åº“ä¸Šçº¿åï¼Œä»–ä»¬ä¸æ€¥ç€ç›´æ¥è¿›è¡Œå¤åˆ¶è¿‡ç¨‹ï¼Œé¦–å…ˆéœ€è¦è¿›è¡Œæ¡æ‰‹ï¼Œè¿›è¡Œä¿¡æ¯éªŒè¯ã€‚</p></li><li><p>å½“æ¡æ‰‹å®Œæˆåï¼Œä»åº“éœ€è¦å‘ä¸»åº“å‘é€PSYNå‘½ä»¤ï¼Œå³åŒæ­¥å‘½ä»¤ï¼Œå¼€å¯æ•°æ®åŒæ­¥è¿‡ç¨‹ï¼Œå¹¶å‘é€ä¸»åº“IDï¼ˆé˜²æ­¢æ–­ç½‘åæ¢äº†ä¸»åº“ï¼Œç”¨æ¥åˆ¤æ–­çš„æ˜¯è¿›è¡Œå…¨é‡å¤åˆ¶/æ–­çº¿åé‡å¤åˆ¶ï¼‰ï¼Œå¤åˆ¶çš„è¿›åº¦åç§»é‡offset</p></li><li>ä¸»åº“ä¼šæ ¹æ®ä»åº“å‘é€çš„ä¿¡æ¯ï¼Œè¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œå¹¶å‘Šè¯‰ä»åº“ï¼Œæ˜¯è¿›è¡Œå…¨é‡å¤åˆ¶/æ–­çº¿åé‡å¤åˆ¶</li></ol><p><strong>å…¨é‡å¤åˆ¶</strong>ï¼šåˆæ¬¡å¤åˆ¶åçš„åŒæ­¥</p><p>â€‹    ä¸»åº“æ‰§è¡ŒBGSAVEï¼Œç”Ÿæˆå¯¹åº”çš„RDBæ–‡ä»¶ï¼ŒåŒæ—¶å¼€è¾Ÿç¼“å†²åŒºï¼Œè®°å½•åœ¨RDBæ–‡ä»¶å®è¡Œè¿‡ç¨‹ä¸­ï¼Œæ”¶åˆ°çš„æ–°æ•°æ®å‘½ä»¤</p><p>â€‹    RDBæ–‡ä»¶äº§ç”Ÿåï¼Œä¸»åº“å‘é€ç»™ä»åº“ï¼Œä»åº“é€šè¿‡RDBæ¢å¤æ•°æ®ï¼ˆæŒä¹…åŒ–<a href="https://www.51cto.com/article/634555.htmlï¼‰">https://www.51cto.com/article/634555.htmlï¼‰</a></p><p><strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong>ï¼š</p><p>â€‹    ä¸»åº“çŠ¶æ€è¢«ä¿®æ”¹äº†ï¼ˆå¦‚å¢åŠ äº†æ–°æ•°æ®ï¼Œä¿®æ”¹äº†åŸå§‹æ•°æ®ï¼‰ä¸ºäº†ä½¿å¾—ä»åº“å’Œä¸»åº“æ•°æ®çŠ¶æ€ä¸€è‡´ï¼Œä¸»åº“å°†ä¼šæŠŠæ•°æ®å˜æ›´å‘½ä»¤å‘ç»™ä»åº“ï¼Œä»åº“æ”¶åˆ°åæ‰§è¡Œå‘½ä»¤ã€‚</p><p><strong>æ–­çº¿åé‡å¤åˆ¶</strong>ï¼šä»åº“ä¸ä¸»åº“æ–­çº¿é‡è¿åå¤åˆ¶ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–æœåŠ¡å™¨è¿è¡ŒIDï¼Œå¤åˆ¶åç§»é‡ï¼Œå¤åˆ¶ç§¯å‹ç¼“å†²åŒº</p><p>â€‹    æœåŠ¡å™¨è¿è¡ŒIDï¼šå”¯ä¸€ç¡®å®šä¸»åº“èº«ä»½ï¼Œå¦‚æœä¸æ˜¯ä¸€ä¸ªçš„è¯å°±æ‰§è¡Œå…¨é‡å¤åˆ¶ã€‚</p><p>â€‹    å¤åˆ¶åç§»é‡ï¼šä»£è¡¨ä¸»èŠ‚ç‚¹ä¼ è¾“äº†çš„å­—èŠ‚æ•°</p><p>â€‹    å¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼šå¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œå­˜å‚¨äº†æœ€è¿‘ä¸»èŠ‚ç‚¹çš„æ•°æ®ä¿®æ”¹å‘½ä»¤</p><h2 id="å“¨å…µ"><a href="#å“¨å…µ" class="headerlink" title="å“¨å…µ"></a>å“¨å…µ</h2><p>å“¨å…µæœºåˆ¶ï¼šå³æ–°å»ºå“¨å…µç»„ï¼Œå¯¹ä¸»åº“ä»åº“ç»Ÿä¸€è¿›è¡Œç›‘æ§ï¼Œå¦‚æœä¸»åº“åäº†ï¼Œå“¨å…µç»„è¿›è¡ŒæŠ•ç¥¨ï¼Œä»ä»åº“ä¸­é‡æ–°é€‰å‡ºä¸»åº“</p><p>æœ¬è´¨ä¸Šï¼Œä»ä»£ç å±‚é¢ä¸Šè®²ï¼Œå“¨å…µæ˜¯ä¸€ä¸ªä¸æä¾›æ•°æ®æœåŠ¡çš„redisæœåŠ¡å™¨</p><p>ä¾‹å­å‚è€ƒã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹</p><p>ä¸€å°ä¸»åº“ï¼Œä¸‰å°ä»åº“ï¼Œå“¨å…µç³»ç»Ÿç›‘æ§ç€è¿™å››å°æœºå™¨ã€‚</p><p>æ¯ä¸ªæœºå™¨éƒ½ä¼šå‘å“¨å…µä¸€å®šæ—¶é—´ï¼ˆ10ç§’ï¼‰å‘é€ä¿¡æ¯ï¼ˆä¹Ÿç§°ä¸ºå¿ƒè·³ï¼‰ã€‚</p><p>å“¨å…µç³»ç»Ÿå¦‚æœä¸€å®šæ—¶é—´æ”¶ä¸åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå°±é»˜è®¤è¿™ä¸ªæœºå™¨æ–­è”äº†ã€‚</p><p>å…·ä½“åˆ¤æ–­<strong>ä¸‹çº¿çš„é€»è¾‘</strong>æ˜¯ï¼š</p><p>å½“æŸä¸ªå“¨å…µå‘ç°ä¸»åº“è¿æ¥ä¸ä¸Šï¼Œä¼šå°†å…¶æ ‡æ³¨ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œå¹¶é€šçŸ¥å…¶ä»–å“¨å…µè¿æ¥ä¸€ä¸‹ä¸»åº“è¯•è¯•ã€‚</p><p>è¶…è¿‡åŠæ•°å“¨å…µç¡®è®¤é“¾æ¥ä¸ä¸Šåï¼Œå°±ä¼šæ ‡è®°è¯¥ä¸»åº“ä¸ºå®¢è§‚ä¸‹çº¿ï¼Œå¹¶æ‰§è¡Œæ•…éšœè½¬ç§»ï¼ˆä»ä»åº“ä¸­æŒ‘ä¸ªå½“ä¸»åº“ï¼‰</p><p>åœ¨æ•…éšœè½¬ç§»è¿‡ç¨‹ä¸­ï¼Œä¼šé€šè¿‡é€‰ä¸¾åè®®ï¼Œä»æ‰€æœ‰å“¨å…µä¸­é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½œä¸ºè€å¤§ï¼Œä¸»æŒè´Ÿè´£æ–°ä¸»åº“çš„é€‰ä¸¾å·¥ä½œ</p><p>é€‰å–å®Œæˆåï¼Œå“¨å…µä¼šå¯¹è¿™ä¸ªä»åº“å‘é€slave of no oneï¼Œæ­¤æ—¶è¯¥ä»åº“å°±å˜æˆä¸»åº“äº†ï¼ŒåŒæ—¶å‘å…¶ä»–slaveå‘é€æ–°ä¸»åº“çš„IPç«¯å£</p><h2 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h2><p>Clusterï¼šRedisæä¾›çš„åˆ†å¸ƒå¼æ•°æ®åº“è§£å†³æ–¹æ¡ˆ</p><p>è‡ªåŠ¨å°†ä½ çš„æ•°æ®åˆ‡åˆ†ç»™å¤šä¸ªèŠ‚ç‚¹å­˜å‚¨</p><p>å³ä½¿è¿™äº›èŠ‚ç‚¹ä¸­ä¸€éƒ¨åˆ†å®•æœºï¼Œä¹Ÿå¯ä»¥ç»§ç»­æ‰§è¡Œæ•°æ®æ“ä½œ</p><p>åˆ†åŒºç­–ç•¥ï¼šé‡‡ç”¨è™šæ‹Ÿæ§½ï¼Œæ‰€æœ‰keyé€šè¿‡CRC16æ ¡éªŒå‡½æ•°ï¼Œå¯¹16384å–æ¨¡ï¼Œå†³å®šæ•°æ®åˆ†é…åˆ°å“ªä¸ªæ§½ä½ã€‚</p><p>æ¯ä¸ªredisçš„clusterèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†æ§½æ•°æ®çš„å­˜å‚¨ï¼Œå¹¶ä¸”è¯¥èŠ‚ç‚¹å¯ä»¥ç»“åˆä¹‹å‰è®²åˆ°çš„ä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œå°†åˆ†é…ç»™ä»–çš„æ•°æ®è¿›è¡Œå¤åˆ¶ã€‚</p><p>æŸ¥è¯¢ç­–ç•¥ï¼šæ¯éš”èŠ‚ç‚¹éƒ½ä¼šå­˜å‚¨æ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿè¢«ç§°ä¸ºå…ƒä¿¡æ¯ã€‚</p><p>è¿™ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„å…ƒæ•°æ®åŒ…æ‹¬åœ¨è¯¥èŠ‚ç‚¹è§†è§’ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs">1. å„èŠ‚ç‚¹å­˜å‚¨çš„æ§½æ•°æ®1. å„èŠ‚ç‚¹çš„masterå’ŒslaveçŠ¶æ€1. å„èŠ‚ç‚¹æ˜¯å¦å­˜æ´»</code></pre></div><p>  â€¦â€¦</p><p>å…ƒæ•°æ®ä¿¡æ¯çš„ä¼ æ’­ï¼šgossipåè®®ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æŠŠè‡ªå·±çš„æ•°æ®ä¿¡æ¯é€šè¿‡è¿™ä¸ªåè®®æ•£æ­©å‡ºå»</p><p>å…·ä½“è¿‡ç¨‹ï¼š</p><ol><li>Gossipåè®®æ˜¯å‘¨æœŸæ€§çš„ï¼Œæ¯éš”ä¸€å®šæ—¶é—´ï¼Œæ‰§è¡Œä¸€æ¬¡</li><li>æ‰€æœ‰è¢«æ„ŸæŸ“èŠ‚ç‚¹é€‰æ‹©kä¸ªé‚»æ¥èŠ‚ç‚¹æ•£æ­¥ä¿¡æ¯</li></ol><p>å…³äºclusterçš„æ‰©å®¹å’Œç¼©å®¹ï¼šç”±äºé›†ç¾¤æ•°æ®å¯èƒ½å‡ºç°æœåŠ¡å™¨æ‰©å®¹ï¼ˆæ•°æ®å¤ªå¤šäº†åŠ èŠ‚ç‚¹ï¼‰ï¼ŒæœåŠ¡å™¨ç¼©å®¹ï¼ˆæ•°æ®å¤ªå°‘å‡å°‘èŠ‚ç‚¹é¿å…æµªè´¹ï¼‰åœ¨è¯¥è¿‡ç¨‹ä¸­ï¼Œæ•°æ®äº§ç”Ÿè¿ç§»</p><p>æ‰€ä»¥ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šæŸä¸ªæ§½ä¸€éƒ¨åˆ†æ•°æ®åœ¨åŸæ¥èŠ‚ç‚¹ä¸Šï¼Œå› æ­¤ä¸€èˆ¬clusterçš„æŸ¥è¯¢é€»è¾‘å¦‚ä¸‹ï¼š</p><ol><li><p>å®¢æˆ·ç«¯ç»™æŒ‡å®šèŠ‚ç‚¹å‘é€æŸ¥è¯¢å‘½ä»¤</p></li><li><p>èŠ‚ç‚¹åˆ¤æ–­æ•°æ®æ˜¯å¦è¿˜å­˜åœ¨æœ¬èŠ‚ç‚¹ä¸Š</p></li></ol><p>â€‹    3.1ï¼ˆyesï¼‰è¿”å›é¢„æœŸæ•°æ®</p><p>â€‹    3.2ï¼ˆnoï¼‰åˆ¤æ–­æ•°æ®æ‰€åœ¨æ§½æ˜¯å¦è¿ç§»</p><p>â€‹       4.1ï¼ˆyesï¼‰å‘é€ASKé”™è¯¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ–°èŠ‚ç‚¹ä½ç½®</p><p>â€‹       4.2ï¼ˆnoï¼‰keyä¸å­˜åœ¨</p><h1 id="é’è®­è¥é¡¹ç›®çš„åº”ç”¨"><a href="#é’è®­è¥é¡¹ç›®çš„åº”ç”¨" class="headerlink" title="é’è®­è¥é¡¹ç›®çš„åº”ç”¨"></a>é’è®­è¥é¡¹ç›®çš„åº”ç”¨</h1><p>é‚£ä¹ˆåœ¨ç”¨æˆ·æ³¨å†Œéœ€æ±‚ä¹‹ä¸‹ï¼Œredisä¸­çš„å“ˆå¸Œç±»å‹æ¥å­˜å‚¨ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯æ˜¯éå¸¸é€‚åˆçš„ï¼Œä»å­˜å‚¨ä¼˜åŠ¿ä¸Šé¢æ¥è®²ï¼Œä½¿ç”¨å“ˆå¸Œç±»å‹çš„å­˜å‚¨èƒ½å¤Ÿè®©æ¯ä¸ªç”¨æˆ·çš„éå¿…å¡«å­—æ®µä¸å ç”¨å¤šä½™çš„å†…å­˜ã€‚é‚£ä¹ˆæ¯æ¬¡åˆ›å»ºç”¨æˆ·çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨ä¸šåŠ¡å±‚ä¿è¯ç”¨æˆ·å¿…å¡«çš„å­—æ®µéƒ½å­˜åœ¨ï¼Œç„¶åæ’å…¥æ–°ç”¨æˆ·çš„ä¿¡æ¯å³å¯ã€‚</p><p><strong>Redis å­˜å‚¨ä¸€æ¡ç”¨æˆ·ä¿¡æ¯</strong></p><p><strong>ä¸€ã€æ–¹å¼1</strong></p><p>å¦‚æœç”¨æ™®é€šçš„key/valueç»“æ„æ¥å­˜å‚¨ï¼Œä¸»è¦æœ‰ä»¥ä¸‹2ç§å­˜å‚¨æ–¹å¼ï¼š </p><p>ç¬¬ä¸€ç§æ–¹å¼å°†ç”¨æˆ·IDä½œä¸ºæŸ¥æ‰¾key,æŠŠå…¶ä»–ä¿¡æ¯å°è£…æˆä¸€ä¸ªå¯¹è±¡ä»¥<a href="https://so.csdn.net/so/search?q=åºåˆ—åŒ–&amp;spm=1001.2101.3001.7020">åºåˆ—åŒ–</a>çš„æ–¹å¼å­˜å‚¨ï¼Œ </p><p> å¦‚ï¼šset u001 â€œæä¸‰,18,20010101â€ </p><p> è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼Œå¢åŠ äº†åºåˆ—åŒ–/<a href="https://so.csdn.net/so/search?q=ååºåˆ—åŒ–&amp;spm=1001.2101.3001.7020">ååºåˆ—åŒ–</a>çš„å¼€é”€ï¼Œå¹¶ä¸”åœ¨éœ€è¦ä¿®æ”¹å…¶ä¸­ä¸€é¡¹ä¿¡æ¯æ—¶ï¼Œéœ€è¦æŠŠæ•´ä¸ªå¯¹è±¡å–å›ï¼Œå¹¶ä¸”ä¿®æ”¹æ“ä½œéœ€è¦å¯¹å¹¶å‘è¿›è¡Œä¿æŠ¤ï¼Œå¼•å…¥CASç­‰å¤æ‚é—®é¢˜ã€‚ </p><p><strong>äºŒã€æ–¹å¼2</strong></p><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯è¿™ä¸ªç”¨æˆ·ä¿¡æ¯å¯¹è±¡æœ‰å¤šå°‘æˆå‘˜å°±å­˜æˆå¤šå°‘ä¸ªkey-valueå¯¹å„¿ï¼Œç”¨ç”¨æˆ·ID+å¯¹åº”å±æ€§çš„åç§°ä½œä¸ºå”¯ä¸€æ ‡è¯†æ¥å–å¾—å¯¹åº”å±æ€§çš„å€¼ï¼Œ </p><p> å¦‚ï¼šmset user:001:name â€œæä¸‰ â€œuser:001:age18 user:001:birthday â€œ20010101â€ </p><p> è™½ç„¶çœå»äº†åºåˆ—åŒ–å¼€é”€å’Œå¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯ç”¨æˆ·IDä¸ºé‡å¤å­˜å‚¨ï¼Œå¦‚æœå­˜åœ¨å¤§é‡è¿™æ ·çš„æ•°æ®ï¼Œå†…å­˜æµªè´¹è¿˜æ˜¯éå¸¸å¯è§‚çš„ã€‚ </p><p><strong>ä¸‰ã€æœ€å¥½çš„åŠæ³•</strong></p><p>é‚£ä¹ˆRedisæä¾›çš„Hashå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒRedisçš„Hashå®é™…æ˜¯å†…éƒ¨å­˜å‚¨çš„Valueä¸ºä¸€ä¸ªHashMapï¼Œ </p><p> å¹¶æä¾›äº†ç›´æ¥å­˜å–è¿™ä¸ªMapæˆå‘˜çš„æ¥å£ï¼Œ </p><p> å¦‚ï¼šhmset user:001 name â€œæä¸‰â€ age 18 birthday â€œ20010101â€ </p><p> ä¹Ÿå°±æ˜¯è¯´ï¼ŒKeyä»ç„¶æ˜¯ç”¨æˆ·ID,valueæ˜¯ä¸€ä¸ªMapï¼Œè¿™ä¸ªMapçš„keyæ˜¯æˆå‘˜çš„å±æ€§åï¼Œvalueæ˜¯å±æ€§å€¼ï¼Œ è¿™æ ·å¯¹æ•°æ®çš„ä¿®æ”¹å’Œå­˜å–éƒ½å¯ä»¥ç›´æ¥é€šè¿‡å…¶å†…éƒ¨Mapçš„Key(Redisé‡Œç§°å†…éƒ¨Mapçš„keyä¸ºfield), ä¹Ÿå°±æ˜¯é€šè¿‡ </p><p> key(ç”¨æˆ·ID) + field(å±æ€§æ ‡ç­¾) æ“ä½œå¯¹åº”å±æ€§æ•°æ®äº†ï¼Œæ—¢ä¸éœ€è¦é‡å¤å­˜å‚¨æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¸¦æ¥åºåˆ—åŒ–å’Œå¹¶å‘ä¿®æ”¹æ§åˆ¶çš„é—®é¢˜ã€‚å¾ˆå¥½çš„è§£å†³äº†é—®é¢˜ã€‚</p><p>æˆ‘ä»¬ç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œç”¨æˆ·å¯†ç çš„ä½œç”¨æ˜¯åœ¨éªŒè¯ç™»å½•ä¸Šé¢ï¼Œè´¦å·çš„ä¿¡æ¯æ˜¯ç”¨æ¥åšä¸šåŠ¡çš„ã€‚æš‚æ—¶æƒ³åˆ†åº“å­˜å‚¨ã€‚</p><p>ã€æ‘˜è¦ã€‘ Gorm è¯»å†™åˆ†ç¦» å†™åœ¨å‰é¢åœ¨gorm v2ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æ”¯æŒè¯»å†™åˆ†ç¦»ï¼Œé‚£è¯»å†™åˆ†ç¦»æ˜¯åŸºäºä¸»ä»å¤åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆé…ç½®mysqlçš„ä¸»ä»å¤åˆ¶ 1. ä¸ºä»€ä¹ˆéœ€è¦ä¸»ä»å¤åˆ¶ï¼Ÿåœ¨ä¸šåŠ¡å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªæƒ…æ™¯ï¼šå¦‚æœæœ‰ä¸€å¥sqlè¯­å¥éœ€è¦é”è¡¨ï¼Œå¯¼è‡´æš‚æ—¶ä¸èƒ½ä½¿ç”¨è¯»çš„æœåŠ¡ï¼Œé‚£ä¹ˆå°±å¾ˆå½±å“è¿è¡Œä¸­çš„ä¸šåŠ¡ã€‚ä½¿ç”¨ä¸»ä»å¤åˆ¶ï¼Œè®©ä¸»åº“è´Ÿè´£å†™ï¼Œä»åº“è´Ÿè´£è¯»ï¼Œè¿™æ ·ï¼Œå³ä½¿ä¸»åº“å‡ºç°äº†é”è¡¨çš„æƒ…æ™¯ï¼Œé€šè¿‡è¯»ä»åº“ä¹Ÿå¯ä»¥ä¿è¯ä¸šåŠ¡çš„æ­£â€¦<a href="https://bbs.huaweicloud.com/blogs/314327">https://bbs.huaweicloud.com/blogs/314327</a></p><p>å…¬å¸ä¸“é—¨ç®¡dbçš„äººä¼šå¸®ä½ æŠŠæ•°æ®è¡¨å»ºç«‹å¥½ï¼Œæ‰€ä»¥ä¸ç”¨åœ¨æ„æ˜¯å¦æœ‰è¿™ä¸ªè¡¨ï¼Œè‚¯å®šæœ‰æ‰€ä»¥ç›´æ¥è¿ç§»å°±å¯ä»¥äº†ã€‚    </p><h3 id="ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ</strong></h3><p>è¿™ç¯‡åšæ–‡è§£é‡Šçš„æŒºæ¸…æ¥šï¼Œæˆ‘ç›´æ¥å¼•ç”¨ <a href="https://blog.csdn.net/lambert310/article/details/51683775">https://blog.csdn.net/lambert310/article/details/51683775</a></p><p><strong>è·¨åŸŸ</strong>ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬ã€‚å®ƒæ˜¯ç”±æµè§ˆå™¨çš„åŒæºç­–ç•¥é€ æˆçš„ï¼Œæ˜¯æµè§ˆå™¨æ–½åŠ çš„å®‰å…¨é™åˆ¶ã€‚</p><p>æ‰€è°“åŒæºæ˜¯æŒ‡ï¼Œ<strong>åŸŸåï¼Œåè®®ï¼Œç«¯å£</strong>å‡ç›¸åŒï¼Œåªè¦æœ‰ä¸€ä¸ªä¸åŒï¼Œå°±æ˜¯è·¨åŸŸã€‚ä¸æ˜ç™½æ²¡å…³ç³»ï¼Œä¸¾ä¸ªæ —å­ï¼š</p><p><a href="http://www.123.com/index.html">http://www.123.com/index.html</a> è°ƒç”¨ <a href="http://www.123.com/server.php">http://www.123.com/server.php</a> ï¼ˆéè·¨åŸŸï¼‰</p><p><a href="http://www.123.com/index.html">http://www.123.com/index.html</a> è°ƒç”¨ <a href="http://www.456.com/server.php">http://www.456.com/server.php</a> ï¼ˆä¸»åŸŸåä¸åŒ:123/456ï¼Œè·¨åŸŸï¼‰</p><p><a href="http://abc.123.com/index.html">http://abc.123.com/index.html</a> è°ƒç”¨ <a href="http://def.123.com/server.php">http://def.123.com/server.php</a> ï¼ˆå­åŸŸåä¸åŒ:abc/defï¼Œè·¨åŸŸï¼‰</p><p><a href="http://www.123.com:8080/index.html">http://www.123.com:8080/index.html</a> è°ƒç”¨ <a href="http://www.123.com:8081/server.php">http://www.123.com:8081/server.php</a> ï¼ˆç«¯å£ä¸åŒ:8080/8081ï¼Œè·¨åŸŸï¼‰</p><p><a href="http://www.123.com/index.html">http://www.123.com/index.html</a> è°ƒç”¨ <a href="https://www.123.com/server.php">https://www.123.com/server.php</a> ï¼ˆåè®®ä¸åŒ:http/httpsï¼Œè·¨åŸŸï¼‰</p><p>è¯·æ³¨æ„ï¼šlocalhostå’Œ127.0.0.1è™½ç„¶éƒ½æŒ‡å‘æœ¬æœºï¼Œä½†ä¹Ÿå±äºè·¨åŸŸã€‚</p><p>æµè§ˆå™¨æ‰§è¡Œjavascriptè„šæœ¬æ—¶ï¼Œä¼šæ£€æŸ¥è¿™ä¸ªè„šæœ¬å±äºå“ªä¸ªé¡µé¢ï¼Œå¦‚æœä¸æ˜¯åŒæºé¡µé¢ï¼Œå°±ä¸ä¼šè¢«æ‰§è¡Œã€‚</p><h3 id="è·¨åŸŸä¼šé˜»æ­¢ä»€ä¹ˆæ“ä½œï¼Ÿ"><a href="#è·¨åŸŸä¼šé˜»æ­¢ä»€ä¹ˆæ“ä½œï¼Ÿ" class="headerlink" title="è·¨åŸŸä¼šé˜»æ­¢ä»€ä¹ˆæ“ä½œï¼Ÿ"></a><strong>è·¨åŸŸä¼šé˜»æ­¢ä»€ä¹ˆæ“ä½œï¼Ÿ</strong></h3><p>æµè§ˆå™¨æ˜¯ä»ä¸¤ä¸ªæ–¹é¢å»åšè¿™ä¸ªåŒæºç­–ç•¥çš„ï¼Œä¸€æ˜¯é’ˆå¯¹æ¥å£çš„è¯·æ±‚ï¼ŒäºŒæ˜¯é’ˆå¯¹Domçš„æŸ¥è¯¢</p><p>è·¨åŸŸé—®é¢˜çš„è§£å†³<a href="https://juejin.cn/post/7114216333700677640">https://juejin.cn/post/7114216333700677640</a></p><p>shouldbindè®²è§£<a href="https://blog.51cto.com/dongweizhen/3606784">https://blog.51cto.com/dongweizhen/3606784</a></p><p>é¡¹ç›®ç»“æ„å‘½å<a href="https://zhuanlan.zhihu.com/p/346573562">https://zhuanlan.zhihu.com/p/346573562</a></p><figure class="highlight go"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs go">err := dao.DB.Model(&amp;model.User&#123;&#125;).Where(<span class="hljs-string">&quot;user_name = ?&quot;</span>, username).Find(&amp;user).Error<br></code></pre></td></tr></table></figure><p>ä»¥è°ä¸ºæ¨¡å‹æˆä¸ºè¡¨ç„¶åå»æ‰¾å¯¹åº”çš„åå­—ï¼Œç”¨findå°†è¾“å‡ºçš„æ•°æ®å¯¹è±¡è£…å…¥userç»“æ„</p><p>ä½œç”¨åŸŸ<a href="https://studygolang.com/articles/13239">https://studygolang.com/articles/13239</a></p><p>Abortç»ˆæ­¢è¯·æ±‚<a href="https://blog.csdn.net/cyberspecter/article/details/100602552">https://blog.csdn.net/cyberspecter/article/details/100602552</a></p><p>æ—¥å¿—æ¡†æ¶ â€œgithub.com/sirupsen/logrusâ€</p><p>redis + tokençš„ç”¨å¤„<a href="https://juejin.cn/post/7022579299349692452">https://juejin.cn/post/7022579299349692452</a></p>]]></content>
    
    
    <categories>
      
      <category>Nosql</category>
      
    </categories>
    
    
    <tags>
      
      <tag>redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>java web</title>
    <link href="/2022/07/23/java-web/"/>
    <url>/2022/07/23/java-web/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€JDBC"><a href="#ä¸€ã€JDBC" class="headerlink" title="ä¸€ã€JDBC"></a>ä¸€ã€JDBC</h1><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1. æ³¨å†Œé©±åŠ¨</span><br><span class="hljs-comment">//Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><br><span class="hljs-comment">//2. è·å–è¿æ¥</span><br><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/db1&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;woaini123&quot;</span>;<br><span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br><br><span class="hljs-comment">//3. å®šä¹‰sql</span><br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account set money = 2000 where id = 1&quot;</span>;<br><br><span class="hljs-comment">//4. è·å–æ‰§è¡Œsqlçš„å¯¹è±¡ Statement</span><br><span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();<br><br><span class="hljs-comment">//5. æ‰§è¡Œsql</span><br><span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> stmt.executeUpdate(sql); <span class="hljs-comment">// å—å½±å“çš„è¡Œæ•°</span><br><br><span class="hljs-comment">//6. å¤„ç†ç»“æœ</span><br>System.out.println(count);<br><br><span class="hljs-comment">//7. é‡Šæ”¾èµ„æº</span><br>stmt.close();<br>conn.close();<br></code></pre></td></tr></table></figure><h2 id="1-DriverManager"><a href="#1-DriverManager" class="headerlink" title="1. DriverManager"></a>1. DriverManager</h2><p>registerDriver()</p><h2 id="2-Connection"><a href="#2-Connection" class="headerlink" title="2. Connection"></a>2. Connection</h2><h3 id="2-1-è·å–æ‰§è¡ŒSQLçš„å¯¹è±¡"><a href="#2-1-è·å–æ‰§è¡ŒSQLçš„å¯¹è±¡" class="headerlink" title="2.1 è·å–æ‰§è¡ŒSQLçš„å¯¹è±¡"></a>2.1 è·å–æ‰§è¡ŒSQLçš„å¯¹è±¡</h3><h3 id="2-2-ç®¡ç†äº‹åŠ¡"><a href="#2-2-ç®¡ç†äº‹åŠ¡" class="headerlink" title="2.2 ç®¡ç†äº‹åŠ¡"></a>2.2 ç®¡ç†äº‹åŠ¡</h3><ul><li>MySQLäº‹åŠ¡ç®¡ç†</li></ul><p>å¼€å¯äº‹åŠ¡ï¼šBEGINï¼›/START TRANSACTIONï¼›</p><p>æäº¤äº‹åŠ¡ï¼šCOMMITï¼›</p><p>å›æ»šäº‹åŠ¡ï¼šROLLBACKï¼›</p><p>MySQLé»˜è®¤è‡ªåŠ¨æäº¤äº‹åŠ¡</p><ul><li>JDBCäº‹åŠ¡ç®¡ç†ï¼šConnectionæ¥å£å®šä¹‰äº†3ä¸ªå¯¹åº”çš„æ–¹æ³•</li></ul><p>å¼€å¯äº‹åŠ¡ï¼šsetAutoCommit(boolean autoCommit)ï¼štrueä¸ºè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼›falseä¸ºæ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼Œå³ä¸ºå¼€å¯äº‹åŠ¡</p><p>æäº¤äº‹åŠ¡ï¼šcommit()</p><p>å›æ»šäº‹åŠ¡ï¼šrollback()</p><h2 id="3-Statement"><a href="#3-Statement" class="headerlink" title="3. Statement"></a>3. Statement</h2><p>ä½œç”¨ï¼šæ‰§è¡Œsqlè¯­å¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>  <span class="hljs-title function_">executeUpdate</span><span class="hljs-params">(sql)</span>: æ‰§è¡ŒDMLã€DDLè¯­å¥<br>  -&gt; è¿”å›å€¼ï¼š(<span class="hljs-number">1</span>)DMLè¯­å¥å½±å“çš„è¡Œæ•° (<span class="hljs-number">2</span>)DDLè¯­å¥æ‰§è¡Œåï¼Œæ‰§è¡ŒæˆåŠŸä¹Ÿå¯èƒ½è¿”å›<span class="hljs-number">0</span><br>  <br>ResultSet  <span class="hljs-title function_">executeQuery</span><span class="hljs-params">(sql)</span>: æ‰§è¡ŒDQLè¯­å¥<br>  -&gt; è¿”å›å€¼ï¼šResultSet ç»“æœé›†å¯¹è±¡<br></code></pre></td></tr></table></figure><p>æ‰§è¡ŒDDLï¼ˆå¯¹æ•°æ®çš„åº“æ“ä½œï¼‰ä»¥åä¸æŠ¥é”™å°±ç®—æ˜¯okçš„</p><h2 id="4-ResultSet"><a href="#4-ResultSet" class="headerlink" title="4. ResultSet"></a>4. ResultSet</h2><ul><li><p>å°è£…äº†DQLæŸ¥è¯¢è¯­å¥çš„ç»“æœ</p><p>ResultSet stmt.executeQuery(sql)ï¼šæ‰§è¡ŒDQLè¯­å¥ï¼Œè¿”å› ResultSetå¯¹è±¡</p></li><li><p>è·å–æŸ¥è¯¢ç»“æœ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">next</span><span class="hljs-params">()</span>: (<span class="hljs-number">1</span>)å°†å…‰æ ‡ä»å½“å‰ä½ç½®å‘å‰ç§»åŠ¨ä¸€è¡Œ ï¼ˆ<span class="hljs-number">2</span>ï¼‰åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦ä¸ºæœ‰æ•ˆè¡Œ<br>  -&gt; è¿”å›å€¼ï¼š<br>  <span class="hljs-literal">true</span>ï¼šæœ‰æ•ˆè¡Œï¼Œå½“å‰è¡Œæœ‰æ•°æ®<br>  <span class="hljs-literal">false</span>ï¼šæ— æ•ˆè¡Œï¼Œå½“å‰è¡Œæ²¡æœ‰æ•°æ®<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">xxx <span class="hljs-title function_">getXxx</span><span class="hljs-params">(å‚æ•°)</span>: è·å–æ•°æ®<br>  -&gt; xxxï¼šæ•°æ®ç±»å‹ï¼›å¦‚ï¼š<span class="hljs-type">int</span> <span class="hljs-title function_">getInt</span><span class="hljs-params">(å‚æ•°)</span>ï¼›String <span class="hljs-title function_">getString</span><span class="hljs-params">(å‚æ•°)</span><br>  -&gt; å‚æ•°ï¼š<br>  <span class="hljs-type">int</span>ï¼šåˆ—çš„ç¼–å·ï¼Œä»<span class="hljs-number">1</span>å¼€å§‹<br>  Stringï¼šåˆ—çš„åç§°<br></code></pre></td></tr></table></figure><p>åˆ—çš„ç¼–å·æ˜¯ä»1å¼€å§‹çš„ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">while</span>(re.next())&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> getInt(<span class="hljs-number">1</span>)<br>  <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> rs.getString(<span class="hljs-number">2</span>)<br>  <span class="hljs-type">double</span> <span class="hljs-variable">money</span> <span class="hljs-operator">=</span> rs.getDouble(<span class="hljs-number">3</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ol><li><p>å®šä¹‰å®ä½“ç±»Account</p></li><li><p>æŸ¥è¯¢æ•°æ®ï¼Œå°è£…åˆ°Accountå¯¹è±¡ä¸­</p></li><li>å°†Accountå¯¹è±¡å­˜å…¥ArrayListé›†åˆä¸­</li></ol><h2 id="5-PreparedStatement"><a href="#5-PreparedStatement" class="headerlink" title="5. PreparedStatement"></a>5. PreparedStatement</h2><p>é¢„ç¼–è¯‘SQLè¯­å¥å¹¶æ‰§è¡Œï¼šé¢„é˜²SQLæ³¨å…¥é—®é¢˜</p><p>SQLæ³¨å…¥æ¼”ç¤º</p><p><code>String sql = &quot;select * from tb_user where username = &#39;&quot;+name+&#39;&#39; and password = &#39;&quot;+pwd+&#39;&quot;&#39;&quot;;</code></p><p>pwd = â€œ â€˜ or â€˜1â€™ = â€˜1 â€</p><p>1âƒ£ï¸è·å–PreparedStatementå¯¹è±¡</p><p>â€‹     ç”¨ï¼Ÿå½“å ä½ç¬¦</p><p>2âƒ£ï¸è®¾ç½®å‚æ•°å€¼</p><p>â€‹     è®¾ç½®å‚æ•°</p><p>â€‹     Xxxï¼šæ•°æ®ç±»å‹ï¼›å¦‚ setIntï¼ˆå‚æ•°1ï¼Œå‚æ•°2ï¼‰</p><p>3âƒ£ï¸æ‰§è¡ŒSQL</p>]]></content>
    
    
    
    <tags>
      
      <tag>java web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>simple distributed</title>
    <link href="/2022/07/23/simple-distributed/"/>
    <url>/2022/07/23/simple-distributed/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€æœåŠ¡æ³¨å†Œ"><a href="#ä¸€ã€æœåŠ¡æ³¨å†Œ" class="headerlink" title="ä¸€ã€æœåŠ¡æ³¨å†Œ"></a>ä¸€ã€æœåŠ¡æ³¨å†Œ</h1><h2 id="1-è‡ªå®šä¹‰æ—¥å¿—çš„é€»è¾‘"><a href="#1-è‡ªå®šä¹‰æ—¥å¿—çš„é€»è¾‘" class="headerlink" title="1. è‡ªå®šä¹‰æ—¥å¿—çš„é€»è¾‘"></a>1. è‡ªå®šä¹‰æ—¥å¿—çš„é€»è¾‘</h2><figure class="highlight go"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">const</span> (<br>    O_RDONLY <span class="hljs-type">int</span> = syscall.O_RDONLY <span class="hljs-comment">// åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span><br>    O_WRONLY <span class="hljs-type">int</span> = syscall.O_WRONLY <span class="hljs-comment">// åªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span><br>    O_RDWR   <span class="hljs-type">int</span> = syscall.O_RDWR   <span class="hljs-comment">// è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span><br>    O_APPEND <span class="hljs-type">int</span> = syscall.O_APPEND <span class="hljs-comment">// å†™æ“ä½œæ—¶å°†æ•°æ®é™„åŠ åˆ°æ–‡ä»¶å°¾éƒ¨</span><br>    O_CREATE <span class="hljs-type">int</span> = syscall.O_CREAT  <span class="hljs-comment">// å¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶</span><br>    O_EXCL   <span class="hljs-type">int</span> = syscall.O_EXCL   <span class="hljs-comment">// å’ŒO_CREATEé…åˆä½¿ç”¨ï¼Œæ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨</span><br>    O_SYNC   <span class="hljs-type">int</span> = syscall.O_SYNC   <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶ç”¨äºåŒæ­¥I/O</span><br>    O_TRUNC  <span class="hljs-type">int</span> = syscall.O_TRUNC  <span class="hljs-comment">// å¦‚æœå¯èƒ½ï¼Œæ‰“å¼€æ—¶æ¸…ç©ºæ–‡ä»¶</span><br>)<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">f, err := os.OpenFile(<span class="hljs-type">string</span>(fl), os.O_CREATE | os.O_WRONLY | os.O_APPEND, <span class="hljs-number">0600</span>)<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºæ˜¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœflè¿™ä¸ªåå­—ä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªflï¼Œåªå†™å…¥ï¼Œå¹¶ä¸”å†™æ“ä½œæ—¶å°†æ•°æ®é™„åŠ åœ¨æ–‡ä»¶å°¾éƒ¨ã€‚</p><p>ç³»ç»Ÿè‡ªå¸¦çš„logå‡½æ•°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">New</span><span class="hljs-params">(out io.Writer, prefix <span class="hljs-type">string</span>, flag <span class="hljs-type">int</span>)</span></span> *Logger &#123;<br><span class="hljs-keyword">return</span> &amp;Logger&#123;out: out, prefix: prefix, flag: flag&#125;<br>&#125;<br>LstdFlags     = Ldate | Ltime <span class="hljs-comment">// initial values for the standard logger</span><br></code></pre></td></tr></table></figure><h2 id="2-å¯è¿è¡Œçš„æ—¥å¿—æœåŠ¡"><a href="#2-å¯è¿è¡Œçš„æ—¥å¿—æœåŠ¡" class="headerlink" title="2. å¯è¿è¡Œçš„æ—¥å¿—æœåŠ¡"></a>2. å¯è¿è¡Œçš„æ—¥å¿—æœåŠ¡</h2><pre><code class=" mermaid">graph TD;log --&gt; logserviceservice --&gt; logservicesubgraph cmdlogserviceend</code></pre><p>logåŒ…æä¾›logé€»è¾‘</p><p>serviceåŒ…start()æä¾›æœåŠ¡</p><p>cmdåŒ…æä¾›å¯åŠ¨æœåŠ¡</p><h2 id="3-æ³¨å†ŒæœåŠ¡çš„é€»è¾‘"><a href="#3-æ³¨å†ŒæœåŠ¡çš„é€»è¾‘" class="headerlink" title="3. æ³¨å†ŒæœåŠ¡çš„é€»è¾‘"></a>3. æ³¨å†ŒæœåŠ¡çš„é€»è¾‘</h2><p><strong>golangä¸­å¤„ç†httpå“åº”æ•°æ®è§£ç ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼</strong></p><ul><li>json.Unmarshalè¿›è¡Œè§£ç </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">HandleUse</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>    <span class="hljs-keyword">var</span> u Use<br>    data, err := ioutil.ReadAll(r.Body)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        w.WriteHeader(http.StatusBadRequest)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> err := json.Unmarshal(data, &amp;u); err != <span class="hljs-literal">nil</span> &#123;<br>        w.WriteHeader(http.StatusInternalServerError)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    w.WriteHeader(http.StatusOK)<br>    fmt.Fprintf(w, <span class="hljs-string">&quot;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%d&quot;</span>, u.Name, u.Age)<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>json.NewDecoderè§£ç </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">HandleUse</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>    <span class="hljs-keyword">var</span> u Use<br>    <span class="hljs-keyword">if</span> err := json.NewDecoder(r.Body).Decode(&amp;u); err != <span class="hljs-literal">nil</span> &#123;<br>        w.WriteHeader(http.StatusInternalServerError)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    w.WriteHeader(http.StatusOK)<br>    fmt.Fprintf(w, <span class="hljs-string">&quot;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%d&quot;</span>, u.Name, u.Age)<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åŒºåˆ«</strong></p><p>1ã€json.NewDecoderæ˜¯ä»ä¸€ä¸ªæµé‡Œé¢ç›´æ¥è¿›è¡Œè§£ç ï¼Œä»£ç ç²¾å¹²<br>2ã€json.Unmarshalæ˜¯ä»å·²å­˜åœ¨äºå†…å­˜ä¸­çš„jsonè¿›è¡Œè§£ç <br>3ã€ç›¸å¯¹äºè§£ç ï¼Œjson.NewEncoderè¿›è¡Œå¤§JSONçš„ç¼–ç æ¯”json.marshalæ€§èƒ½é«˜ï¼Œå› ä¸ºå†…éƒ¨ä½¿ç”¨pool</p><p><strong>åœºæ™¯åº”ç”¨</strong></p><p>1ã€json.NewDecoderç”¨äºhttpè¿æ¥ä¸socketè¿æ¥çš„è¯»å–ä¸å†™å…¥ï¼Œæˆ–è€…æ–‡ä»¶è¯»å–<br>2ã€json.Unmarshalç”¨äºç›´æ¥æ˜¯byteçš„è¾“å…¥</p><pre><code class=" mermaid">graph TD;log --&gt; logserviceservice --&gt; logserviceregistrysubgraph cmdlogserviceend</code></pre><h2 id="4-å¯è¿è¡Œçš„æœåŠ¡æ³¨å†Œçš„-Web-Service"><a href="#4-å¯è¿è¡Œçš„æœåŠ¡æ³¨å†Œçš„-Web-Service" class="headerlink" title="4. å¯è¿è¡Œçš„æœåŠ¡æ³¨å†Œçš„ Web - Service"></a>4. å¯è¿è¡Œçš„æœåŠ¡æ³¨å†Œçš„ Web - Service</h2><pre><code class=" mermaid">graph TD;log --&gt; logserviceservice --&gt; logserviceregistry --&gt; registryservicesubgraph cmdlogserviceregistryserviceend</code></pre><h2 id="5-æ³¨å†Œä¸€ä¸ªæœåŠ¡"><a href="#5-æ³¨å†Œä¸€ä¸ªæœåŠ¡" class="headerlink" title="5. æ³¨å†Œä¸€ä¸ªæœåŠ¡"></a>5. æ³¨å†Œä¸€ä¸ªæœåŠ¡</h2><pre><code class=" mermaid">graph TD;log --&gt; logserviceservice --&gt; logserviceregistry --&gt; registryserviceregistry --&gt; servicesubgraph cmdlogserviceregistryserviceend</code></pre><p>æ³¨æ„ç½‘å€ä¸€å®šè¡¨æ˜httpï¼Œå› ä¸ºé»˜è®¤ä¼¼ä¹æ˜¯httpsï¼Œè¿™æ ·å°±404äº†ï¼Œæƒé™ä¸å¤Ÿã€‚</p><h2 id="6-å–æ¶ˆæ³¨å†Œçš„æœåŠ¡"><a href="#6-å–æ¶ˆæ³¨å†Œçš„æœåŠ¡" class="headerlink" title="6. å–æ¶ˆæ³¨å†Œçš„æœåŠ¡"></a>6. å–æ¶ˆæ³¨å†Œçš„æœåŠ¡</h2><p>å†™äº†ä¸¤ç§å¯¹ä¸€ä¸ªsliceä¸­åˆ é™¤ç‰¹å®šå…ƒç´ çš„æ–¹æ³•ï¼Œå¹¶åšäº†æ€§èƒ½å¯¹æ¯”ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><p>å‡è®¾æˆ‘ä»¬çš„åˆ‡ç‰‡æœ‰0å’Œ1ï¼Œæˆ‘ä»¬è¦åˆ é™¤æ‰€æœ‰çš„0ï¼Œæ­¤å¤„æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DeleteSlice</span><span class="hljs-params">(a []<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(a); i++ &#123;<br><span class="hljs-keyword">if</span> a[i] == <span class="hljs-number">0</span> &#123;<br>a = <span class="hljs-built_in">append</span>(a[:i], a[i+<span class="hljs-number">1</span>:]...)<br>i--<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> a<br>&#125;<br></code></pre></td></tr></table></figure><p>è§£é‡Šï¼šè¿™é‡Œåˆ©ç”¨å¸¸è§çš„æ–¹æ³•å¯¹sliceä¸­çš„å…ƒç´ è¿›è¡Œåˆ é™¤ï¼Œæ³¨æ„åˆ é™¤æ—¶ï¼Œåé¢çš„å…ƒç´ å‰ç§»ï¼Œiåº”è¯¥åç§»ä¸€ä½ã€‚</p><p>ç¬¬äºŒç§æ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DeleteSlice1</span><span class="hljs-params">(a []<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>ret := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(a))<br><span class="hljs-keyword">for</span> _, val := <span class="hljs-keyword">range</span> a &#123;<br><span class="hljs-keyword">if</span> val == <span class="hljs-number">1</span> &#123;<br>ret = <span class="hljs-built_in">append</span>(ret, val)<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> ret<br>&#125;<br></code></pre></td></tr></table></figure><p>è§£é‡Šï¼šè¿™ç§æ–¹æ³•æœ€å®¹æ˜“ç†è§£ï¼Œé‡æ–°ä½¿ç”¨ä¸€ä¸ªsliceï¼Œå°†ä¸åˆç†çš„è¿‡æ»¤æ‰ã€‚ç¼ºç‚¹æ˜¯éœ€è¦å¼€è¾Ÿå¦ä¸€ä¸ªsliceçš„ç©ºé—´ï¼Œä¼˜ç‚¹æ˜¯å®¹æ˜“ç†è§£ï¼Œè€Œä¸”ä¸å¯¹åŸæ¥çš„sliceè¿›è¡Œæ“ä½œã€‚</p><p>ç¬¬ä¸‰ç§æ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DeleteSlice2</span><span class="hljs-params">(a []<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span>&#123;<br>j := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> _, val := <span class="hljs-keyword">range</span> a &#123;<br><span class="hljs-keyword">if</span> val == <span class="hljs-number">1</span> &#123;<br>a[j] = val<br>j++<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> a[:j]<br>&#125;<br></code></pre></td></tr></table></figure><p>è§£é‡Šï¼šè¿™é‡Œåˆ©ç”¨ä¸€ä¸ªindexï¼Œè®°å½•åº”è¯¥ä¸‹ä¸€ä¸ªæœ‰æ•ˆå…ƒç´ åº”è¯¥åœ¨çš„ä½ç½®ï¼Œéå†æ‰€æœ‰å…ƒç´ ï¼Œå½“é‡åˆ°æœ‰æ•ˆå…ƒç´ ï¼ŒindexåŠ ä¸€ï¼Œå¦åˆ™ä¸åŠ ï¼Œæœ€ç»ˆindexçš„ä½ç½®å°±æ˜¯æ‰€æœ‰æœ‰æ•ˆå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚æœ€ååšä¸€ä¸ªæˆªå–å°±è¡Œäº†ã€‚è¿™ç§æ–¹æ³•ä¼šå¯¹åŸæ¥çš„sliceè¿›è¡Œä¿®æ”¹ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•åœ¨sliceå¤§å°æ¯”è¾ƒå°æ—¶ï¼Œæ¯”ç¬¬2ã€3ç§æ–¹æ³•æ…¢ä¸€å€å·¦å³ã€‚ä½†æ˜¯sliceå¤§å°å˜å¤§æ—¶ï¼Œæ€§èƒ½æ˜¾è‘—ä¸‹é™ã€‚</p><p>ç¬¬2ç§æ–¹æ³•å’Œç¬¬3ç§æ–¹æ³•å·®è·åŸºæœ¬å¤„äºåŒä¸€é‡çº§ï¼Œä½†æ˜¯ç¬¬3ç§æ–¹æ³•ç¨å¿«ä¸€äº›ã€‚ä½†æ˜¯å½“sliceå¤§å°å¢åŠ åˆ°10^6çº§åˆ«æ—¶ï¼Œç¬¬ä¸‰ç§æ–¹æ³•çš„ä¼˜åŠ¿å°±æ˜¾ç°å‡ºæ¥ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.registrations = <span class="hljs-built_in">append</span>(r.registrations[:i], r.registrations[i+<span class="hljs-number">1</span>:]...)<br></code></pre></td></tr></table></figure><p>slice2è¢«æ‰“æ•£ç„¶åä¸€ä¸ªä¸ªçš„æ”¾å…¥slice1ä¸­ã€‚</p><h1 id="äºŒã€æœåŠ¡å‘ç°"><a href="#äºŒã€æœåŠ¡å‘ç°" class="headerlink" title="äºŒã€æœåŠ¡å‘ç°"></a>äºŒã€æœåŠ¡å‘ç°</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-comment">// å£°æ˜ä¸€ä¸ªç»“æ„ä½“</span><br><span class="hljs-keyword">type</span> Cat <span class="hljs-keyword">struct</span> &#123;<br>name   <span class="hljs-type">string</span><br>color  <span class="hljs-type">string</span><br>sex    <span class="hljs-type">bool</span><br>couple Mouse <span class="hljs-comment">// è¿™é‡Œèµ‹å€¼ä¸º å¦ä¸€ä¸ªç»“æ„ä½“, å¦‚æœå’Œç»“æ„ä½“åä¸€æ · å¯ä»¥çœç•¥ä¸€ä¸ª</span><br>&#125;<br><br><span class="hljs-comment">// ç»“æ„ä½“æŒ‚è½½æ–¹æ³• ä½¿ç”¨æŒ‡é’ˆ é¿å…å†…å­˜æ‹·è´</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Cat)</span></span> CaptureMouse(name <span class="hljs-type">string</span>) (res <span class="hljs-type">bool</span>) &#123;<br><span class="hljs-keyword">if</span> c.name == name &#123;<br>fmt.Println(<span class="hljs-string">&quot;åå­—ä¸ºTomï¼Œèƒ½æ‰åˆ°è€é¼ &quot;</span>)<br><span class="hljs-comment">// ç”±äºä½¿ç”¨äº†æŒ‡é’ˆï¼Œ å¯ä»¥æ”¹å˜ç»“æ„ä½“çš„å€¼</span><br>c.name = <span class="hljs-string">&quot;old tom &quot;</span><br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;åå­—ä¸ä¸ºTomï¼Œ æ‰ä¸åˆ°è€é¼ &quot;</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br>&#125;<br><br><span class="hljs-comment">// åœ¨å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</span><br><span class="hljs-keyword">type</span> Mouse <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>color <span class="hljs-type">string</span><br>sex <span class="hljs-type">bool</span><br>&#125;<br><br><span class="hljs-comment">// ç»“æ„ä½“æŒ‚è½½æ–¹æ³• ä¸ä½¿ç”¨æŒ‡é’ˆ å®ä¾‹çš„æˆå‘˜ä¼šè¿›è¡Œå€¼å¤åˆ¶</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m Mouse)</span></span> Eat(stuff <span class="hljs-type">string</span>) (res <span class="hljs-type">bool</span>) &#123;<br><span class="hljs-keyword">if</span> stuff == <span class="hljs-string">&quot;å¥¶é…ª&quot;</span> &#123;<br>fmt.Println(m.name, <span class="hljs-string">&quot;å–œæ¬¢åƒ&quot;</span>, stuff)<br><span class="hljs-comment">// ä¸èƒ½æ”¹å˜å¤–éƒ¨ç»“æ„ä½“çš„å€¼</span><br>m.name = <span class="hljs-string">&quot;old jerry&quot;</span><br>fmt.Println(<span class="hljs-string">&quot;Mouse.Eat(): &quot;</span> + m.name) <span class="hljs-comment">// å½¢å¼å‚æ•°æ”¹å˜</span><br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(m.name, <span class="hljs-string">&quot;ä¸å–œæ¬¢åƒ&quot;</span>, stuff)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// å®ä¾‹åŒ–ç»“æ„ä½“</span><br>Tom := Cat&#123;<br>name:  <span class="hljs-string">&quot;Tom&quot;</span>,<br>color: <span class="hljs-string">&quot;white&quot;</span>,<br>sex:   <span class="hljs-literal">true</span>,<br>couple: Mouse&#123;<br>name: <span class="hljs-string">&quot;Jerry&quot;</span>,<br>&#125;,<br>&#125;<br><br><span class="hljs-comment">// è°ƒç”¨æ–¹æ³•</span><br>res := Tom.CaptureMouse(<span class="hljs-string">&quot;Tom&quot;</span>)<br>fmt.Println(res)<br>fmt.Println(Tom)<br><span class="hljs-comment">// é€šè¿‡å­ç±»å±æ€§è°ƒç”¨å­ç±»çš„æ–¹æ³•(æˆ‘è‡ªå·±å–çš„åå­—)</span><br>Tom.couple.Eat(<span class="hljs-string">&quot;ç³–&quot;</span>)<br>Tom.couple.Eat(<span class="hljs-string">&quot;å¥¶é…ª&quot;</span>)<br>fmt.Println(<span class="hljs-string">&quot;main: &quot;</span> + Tom.couple.name) <span class="hljs-comment">// å½¢å¼å‚æ•°æ”¹å˜ï¼Œå®ä¾‹åŒ–çš„å†…å®¹ä¸æ”¹å˜</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æ„ä½“æŒ‚è½½æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ ä¸€ç§æ˜¯ä¸ä½¿ç”¨æŒ‡é’ˆï¼Œè¿™ç§ä¼šå¯¹å®ä¾‹çš„æˆå‘˜ä¼šè¿›è¡Œå€¼çš„å¤åˆ¶ï¼Œ ç¬¬äºŒç§æ˜¯æŒ‡é’ˆï¼Œå¯ä»¥é¿å…å†…å­˜æ‹·è´(æ‰€ä»¥æ›´æ¨èæŒ‡é’ˆæ–¹å¼)ã€‚</p><p>ä¸åŠ æŒ‡é’ˆï¼Œè¾“å‡ºçš„ç»“æœæ˜¯ä¸€æ ·çš„é‡Œé¢çš„å½¢å¼å‚æ•°éƒ½æ˜¯æ­£å¸¸çš„ä¿®æ”¹å’Œä½¿ç”¨è¾“å‡ºç»“æœï¼Œä½†æ˜¯å…·ä½“æœ¬èº«è¿™ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡çš„å†…å®¹æ˜¯ä¸æ”¹å˜çš„</p><p>è¯»å†™é”</p><p>è¯»å†™é”æ˜¯åˆ†åˆ«é’ˆå¯¹è¯»æ“ä½œå’Œå†™æ“ä½œè¿›è¡Œé”å®šå’Œè§£é”æ“ä½œçš„äº’æ–¥é”ã€‚åœ¨ Go è¯­è¨€ä¸­ï¼Œè¯»å†™é”ç”±ç»“æ„ä½“ç±»å‹ sync.RWMutex ä»£è¡¨ã€‚</p><p>åŸºæœ¬éµå¾ªåŸåˆ™ï¼š</p><p>å†™é”å®šæƒ…å†µä¸‹ï¼Œå¯¹è¯»å†™é”è¿›è¡Œè¯»é”å®šæˆ–è€…å†™é”å®šï¼Œéƒ½å°†é˜»å¡ï¼›è€Œä¸”è¯»é”ä¸å†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼›</p><p>è¯»é”å®šæƒ…å†µä¸‹ï¼Œå¯¹è¯»å†™é”è¿›è¡Œå†™é”å®šï¼Œå°†é˜»å¡ï¼›åŠ è¯»é”æ—¶ä¸ä¼šé˜»å¡ï¼›</p><p>å¯¹æœªè¢«å†™é”å®šçš„è¯»å†™é”è¿›è¡Œå†™è§£é”ï¼Œä¼šå¼•å‘ Panicï¼›</p><p>å¯¹æœªè¢«è¯»é”å®šçš„è¯»å†™é”è¿›è¡Œè¯»è§£é”çš„æ—¶å€™ä¹Ÿä¼šå¼•å‘ Panicï¼›</p><p>å†™è§£é”åœ¨è¿›è¡Œçš„åŒæ—¶ä¼šè¯•å›¾å”¤é†’æ‰€æœ‰å› è¿›è¡Œè¯»é”å®šè€Œè¢«é˜»å¡çš„ goroutineï¼›</p><p>è¯»è§£é”åœ¨è¿›è¡Œçš„æ—¶å€™åˆ™ä¼šè¯•å›¾å”¤é†’ä¸€ä¸ªå› è¿›è¡Œå†™é”å®šè€Œè¢«é˜»å¡çš„ goroutineã€‚</p><p>ä¸äº’æ–¥é”ç±»ä¼¼ï¼Œsync.RWMutex ç±»å‹çš„é›¶å€¼å°±å·²ç»æ˜¯ç«‹å³å¯ç”¨çš„è¯»å†™é”äº†ã€‚åœ¨æ­¤ç±»å‹çš„æ–¹æ³•é›†åˆä¸­åŒ…å«äº†ä¸¤å¯¹æ–¹æ³•ï¼Œå³ï¼š</p><p>RWMutex æä¾›å››ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/*</span><br><span class="hljs-comment">func (*RWMutex) Lock // å†™é”å®š</span><br><span class="hljs-comment">func (*RWMutex) Unlock // å†™è§£é”</span><br><span class="hljs-comment">func (*RWMutex) RLock // è¯»é”å®š</span><br><span class="hljs-comment">func (*RWMutex) RUnlock // è¯»è§£é”</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">package</span> main<br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;fmt&quot;</span><br>    <span class="hljs-string">&quot;sync&quot;</span><br>    <span class="hljs-string">&quot;time&quot;</span><br>)<br><span class="hljs-keyword">var</span> m *sync.RWMutex<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    wg := sync.WaitGroup&#123;&#125;<br>    wg.Add(<span class="hljs-number">20</span>)<br>    <span class="hljs-keyword">var</span> rwMutex sync.RWMutex<br>    Data := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(t <span class="hljs-type">int</span>)</span></span> &#123;<br>            rwMutex.RLock()<br>            <span class="hljs-keyword">defer</span> rwMutex.RUnlock()<br>            fmt.Printf(<span class="hljs-string">&quot;Read data: %v\n&quot;</span>, Data)<br>            wg.Done()<br>            time.Sleep(<span class="hljs-number">2</span> * time.Second)<br>            <span class="hljs-comment">// è¿™å¥ä»£ç ç¬¬ä¸€æ¬¡è¿è¡Œåï¼Œè¯»è§£é”ã€‚</span><br>            <span class="hljs-comment">// å¾ªç¯åˆ°ç¬¬äºŒä¸ªæ—¶ï¼Œè¯»é”å®šåï¼Œè¿™ä¸ªgoroutineå°±æ²¡æœ‰é˜»å¡ï¼ŒåŒæ—¶è¯»æˆåŠŸã€‚</span><br>        &#125;(i)<br>        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(t <span class="hljs-type">int</span>)</span></span> &#123;<br>            rwMutex.Lock()<br>            <span class="hljs-keyword">defer</span> rwMutex.Unlock()<br>            Data += t<br>            fmt.Printf(<span class="hljs-string">&quot;Write Data: %v %d \n&quot;</span>, Data, t)<br>            wg.Done() <br>            <span class="hljs-comment">// è¿™å¥ä»£ç è®©å†™é”çš„æ•ˆæœæ˜¾ç¤ºå‡ºæ¥ï¼Œå†™é”å®šä¸‹æ˜¯éœ€è¦è§£é”åæ‰èƒ½å†™çš„ã€‚</span><br>            time.Sleep(<span class="hljs-number">2</span> * time.Second)        <br>        &#125;(i)<br>    &#125;<br>    time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>    wg.Wait()<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">handler := <span class="hljs-built_in">new</span>(logHandler)<br>handler := &amp;logHandler&#123;&#125;<br><span class="hljs-comment">// è¿™ä¸¤ä¸ªæ˜¯ä¸€æ ·çš„éƒ½æ˜¯è¿”å›ä¸€ä¸ªæŒ‡é’ˆ</span><br></code></pre></td></tr></table></figure><h1 id="ä¸‰ã€æœåŠ¡çŠ¶æ€ç›‘æ§"><a href="#ä¸‰ã€æœåŠ¡çŠ¶æ€ç›‘æ§" class="headerlink" title="ä¸‰ã€æœåŠ¡çŠ¶æ€ç›‘æ§"></a>ä¸‰ã€æœåŠ¡çŠ¶æ€ç›‘æ§</h1><h1 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h1><pre><code class=" mermaid">graph LR;å®¢æˆ·ç«¯ --&gt; portalportal --&gt; æ³¨å†ŒæœåŠ¡æ³¨å†ŒæœåŠ¡ --&gt; portalportal --&gt; å®¢æˆ·ç«¯portal --&gt; LogæœåŠ¡portal --&gt; GradingæœåŠ¡æ³¨å†ŒæœåŠ¡ --&gt; LogæœåŠ¡LogæœåŠ¡ --&gt; æ³¨å†ŒæœåŠ¡æ³¨å†ŒæœåŠ¡ --&gt; GradingæœåŠ¡GradingæœåŠ¡ --&gt; æ³¨å†ŒæœåŠ¡GradingæœåŠ¡ --&gt; LogæœåŠ¡</code></pre><p>ç”±äºæœ‰æ³¨å†Œä¸­å¿ƒæ‰€ä»¥æ˜¯ä¸ªSOAæ¶æ„çš„åˆ†å¸ƒå¼ã€‚</p><p>æ‰€æœ‰çš„å°æœåŠ¡éƒ½åˆ†æˆä¸€ä¸ªclientä¸€ä¸ªserverã€‚</p><p><strong>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼š</strong>è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ã€‚å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡å°±åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ï¼Œå®¢æˆ·ç«¯è´Ÿè´£åºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€è¿æ¥æ± ç®¡ç†ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€è¶…æ—¶ç®¡ç†ã€å¼‚æ­¥ç®¡ç†ç­‰ã€‚</p><p><strong>æœåŠ¡å™¨ç«¯ï¼ˆServerï¼‰ï¼š</strong>æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ã€‚æœåŠ¡å™¨ç«¯å¦‚åŒå®ç°ä¸€ä¸ªæœ¬åœ°å‡½æ•°ä¸€æ ·æ¥å®ç°è¿œç¨‹æœåŠ¡æä¾›ï¼ŒæœåŠ¡å™¨ç«¯éœ€è¦åšæ”¶å‘åŒ…é˜Ÿåˆ—ã€I/Oçº¿ç¨‹ã€å·¥ä½œçº¿ç¨‹ã€åºåˆ—åŒ–åŠååºåˆ—åŒ–ç­‰å·¥ä½œã€‚</p><p><strong>æ³¨å†Œä¸­å¿ƒï¼š</strong>æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€‚</p><p>åˆ†å¸ƒå¼çš„å‰ä¸–ä»Šç”Ÿ<a href="https://juejin.cn/post/6844903862327836685">https://juejin.cn/post/6844903862327836685</a></p><p>æ³¨å†Œè¿™ä¸ªæ¦‚å¿µå…¶å®æ˜¯å°†è‡ªå·±çš„handlerç»‘å®šåœ¨è·¯ç”±ä¸Šï¼Œå¹¶ä¸”å¯åŠ¨è¯¥è·¯ç”±çš„ç›‘å¬ä»è€Œæä¾›æœåŠ¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Backend development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>distributed</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Geeç³»åˆ—å®ç°</title>
    <link href="/2022/06/29/Gee%E7%B3%BB%E5%88%97%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/06/29/Gee%E7%B3%BB%E5%88%97%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Webæ¡†æ¶-Gee"><a href="#Webæ¡†æ¶-Gee" class="headerlink" title="Webæ¡†æ¶ - Gee"></a>Webæ¡†æ¶ - Gee</h1><h2 id="0-1-åŸºæœ¬çš„netåŒ…"><a href="#0-1-åŸºæœ¬çš„netåŒ…" class="headerlink" title="0.1 åŸºæœ¬çš„netåŒ…"></a>0.1 åŸºæœ¬çš„netåŒ…</h2><p>å»ºç«‹tcpè¿æ¥çš„æ­¥éª¤(serverç«¯)</p><ol><li>è®¾ç½®tcpåœ°å€</li><li>è®¾ç«‹ç›‘å¬å¯¹è±¡</li><li>å»ºç«‹è¿æ¥</li></ol><figure class="highlight go"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><pre><code class="hljs go">tcpAddr, _ := net.ResolveTCPAddr(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:8888&quot;</span>)<br>listener, _ := net.ListenTCP(<span class="hljs-string">&quot;tcp&quot;</span>, tcpAddr)<br>conn, err := listener.AcceptTCP()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-comment">// åˆ›å»ºå¥½ä¸€ä¸ªtcpçš„æœåŠ¡ç«¯</span><br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼Œå¾ªç¯é“¾æ¥ï¼Œè¦å¤„ç†å¾ˆå¤štcpè¯·æ±‚ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>  &#123;<br>    tcpAddr, _ := net.ResolveTCPAddr(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:8888&quot;</span>)<br>    listener, _ := net.ListenTCP(<span class="hljs-string">&quot;tcp&quot;</span>, tcpAddr)<br>    <span class="hljs-keyword">for</span> &#123;<br>        conn, err := listener.AcceptTCP()<br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>          fmt.Println(err)<br>          <span class="hljs-keyword">return</span><br>          <span class="hljs-comment">// handle error</span><br>        &#125;<br>        <span class="hljs-keyword">go</span> handleConnection(conn)<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handleConnection</span><span class="hljs-params">(conn *net.TCPConn)</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br>buf := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">1024</span>)<br>n, err := conn.Read(buf)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        fmt.Println(err)<br>        <span class="hljs-keyword">break</span><br>&#125;<br>fmt.Println(conn.RemoteAddr().String() + <span class="hljs-type">string</span>(buf[<span class="hljs-number">0</span> : n])) <span class="hljs-comment">// è·å–è¿æ¥è¿›æ¥çš„åœ°å€ + å­—ç¬¦ä¸²</span><br>str := <span class="hljs-string">&quot;received success! message: &quot;</span> + <span class="hljs-type">string</span>(buf[<span class="hljs-number">0</span> : n])<br>conn.Write([]<span class="hljs-type">byte</span>(str))<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>(dialç«¯)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>  &#123;<br>    tcpAddr, _ := net.ResolveTCPAddr(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:8888&quot;</span>)<br>    conn, _ := net.DialTCP(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-literal">nil</span>, tcpAddr)<br>    reader := bufio.NewReader(os.Stdin)<br>    <span class="hljs-keyword">for</span> &#123;<br>        bytes, _, _ := reader.ReadLine()<br>        conn.Write(bytes)<br>        rb := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">1024</span>)<br>        rn, _ := conn.Read(rb)<br>        fmt.Println(<span class="hljs-type">string</span>(rb[<span class="hljs-number">0</span> : rn])) <span class="hljs-comment">// stringå¤„ç†è¦ä¸å°±æ˜¯ASCIIç </span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="0-2-HttpåŒ…"><a href="#0-2-HttpåŒ…" class="headerlink" title="0.2 HttpåŒ…"></a>0.2 HttpåŒ…</h2><p><strong>Getè¯·æ±‚çš„å®ç°</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;net/http&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(res http.ResponseWriter, req *http.Request)</span></span> &#123;<br>res.Write([]<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;æˆ‘æ”¶åˆ°äº†ç»™ä½ è¿”å›&quot;</span>))<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>  &#123;<br>    http.HandleFunc(<span class="hljs-string">&quot;/test&quot;</span>, handler)<br>    server := http.Server&#123;<br>      Addr: <span class="hljs-string">&quot;:8080&quot;</span>,<br>      Handler: <span class="hljs-literal">nil</span>,<br>    &#125;<br>    server.ListenAndServe()<br>    <span class="hljs-comment">// http.ListenAndServe(&quot;:8080&quot;, nil)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¸ç”¨åˆ¤æ–­reqçš„æ–¹æ³•å°±å¯ä»¥å®ç°å‘¢getå‘¢ï¼Ÿå› ä¸ºé»˜è®¤æ˜¯getè¯·æ±‚ï¼Ÿ</p><p>å…¶ä¸­ä¸ºä»€ä¹ˆå‰è€…responseä¸æ˜¯æŒ‡é’ˆï¼Œè€Œåè€…requestæ˜¯æŒ‡é’ˆå‘¢ï¼Ÿå› ä¸ºrequestæ˜¯å¤–éƒ¨ä¼ æ¥çš„ï¼ˆè¿™ä¸ªæœ‰å¾…ä»¥åcheckæºç ï¼‰</p><p><strong>server</strong> æœåŠ¡ï¼ŒåŒ…å«åœ°å€ã€ç«¯å£ã€å¤„ç†å™¨ç­‰ç­‰</p><p><strong>conn</strong> é“¾æ¥ï¼Œç”¨æˆ·è¯·æ±‚æ¥çš„</p><p><strong>response</strong> è¿”å›ä¿¡æ¯</p><p><strong>request</strong> ç”¨æˆ·çš„è¯·æ±‚ä¿¡æ¯</p><p><strong>Handle</strong> å¯¹äºæ¥æ”¶çš„ä¿¡æ¯è¿›è¡Œå¤„ç†å¹¶ä¸”è¿”å›çš„ä¸€ä¸ªå¤„ç†å™¨</p><p>Stepï¼š</p><p>1ã€é€šè¿‡ Header() æ¥è®¾ç½®å¤´map</p><p>2ã€é€šè¿‡ WriteHeader(code) æ¥è®¾ç½®çŠ¶æ€ç </p><p>3ã€é€šè¿‡ Write å†™å…¥è¿™ä¸ªio.writer æ¥æ§åˆ¶è¿”å›å€¼</p><p>4ã€é€šè¿‡ req.Body ä»¥è¯·æ±‚è¿‡æ¥çš„bodyå†…å®¹</p><p>5ã€å‰©ä¸‹çš„å°±æ˜¯ç»„è£…ï¼Œe.g. ä¸€ä¸ªå†…ç½®çš„æ–¹æ³•ï¼ŒæŠŠè·¯å¾„å½“é™æ€æ˜¾ç¤º</p><p>http.Handle(â€œ/â€œ, http.FileServer(http.dir(â€œ/â€œ)))</p><p>resæ˜¯æˆ‘ä»¬è¦è¿”å›çš„å€¼ï¼Œreqæ˜¯å‰ç«¯ä¼ ç»™æˆ‘ä»¬çš„å€¼ã€‚</p><pre><code class=" mermaid">graph LR;httpè¯·æ±‚ --&gt; DefaultServeMux;DefaultServeMux --&gt; Handler1;DefaultServeMux --&gt; Handler2;DefaultServeMux --&gt; ......;DefaultServeMux --&gt; Handler3;</code></pre><p>æœ‰è‡ªå®šä¹‰çš„handlerçš„è¯å°±æ˜¯è¿™ä¸ªæ ·å­ã€‚</p><pre><code class=" mermaid">graph LR;httpè¯·æ±‚ --&gt; myHandler;</code></pre><p>Multiplexerï¼ˆå¤šè·¯å¤ç”¨å™¨ï¼‰</p><p>ä»–ä¹Ÿæ˜¯ä¸€ä¸ªhandler</p><p><strong>urlé€šç”¨æ ¼å¼</strong></p><p>Scheme : // [ userinfo@ ] host / path [ ?query ] [ #fragment ]</p><p>å¦‚æœä»æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆä½ æ— æ³•æå–å¤„ Fragment å­—æ®µçš„å€¼ï¼ˆæµè§ˆå™¨åœ¨å‘é€è¯·æ±‚æ—¶ä¼šæŠŠ fragment éƒ¨åˆ†å»æ‰ï¼‰</p><h3 id="FORM-è¡¨å•"><a href="#FORM-è¡¨å•" class="headerlink" title="FORM è¡¨å•"></a>FORM è¡¨å•</h3><h4 id="è¡¨å•çš„-enctype-å±æ€§"><a href="#è¡¨å•çš„-enctype-å±æ€§" class="headerlink" title="è¡¨å•çš„ enctype å±æ€§"></a>è¡¨å•çš„ enctype å±æ€§</h4><ul><li>å¦‚æœ enctype æ˜¯ application/x-www-form-urlencodedï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå°†è¡¨å•æ•°æ®ç¼–ç åˆ°æŸ¥è¯¢å­—ç¬¦ä¸²é‡Œé¢ã€‚ä¾‹å¦‚ï¼š</li></ul><p>â€‹            frist_name=peter&amp;last_name=pan</p><ul><li><p>å¦‚æœ enctype æ˜¯ multipart/form-dataï¼Œé‚£ä¹ˆ</p><p>â€‹     æ¯ä¸€ä¸ª name-value å¯¹éƒ½ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªMIMEæ¶ˆæ¯éƒ¨åˆ†</p><p>â€‹     æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æœ‰è‡ªå·±çš„ Content Type å’Œ Content Dispostion</p></li></ul><p><strong>å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</strong></p><p>ç®€å•æ–‡æœ¬ï¼šè¡¨å•URLç¼–ç </p><p>å¤§é‡æ•°æ®ï¼Œä¾‹å¦‚ä¸Šä¼ æ–‡ä»¶ï¼šmultipart-MIME</p><p>â€‹        ç”šè‡³å¯ä»¥æŠŠäºŒè¿›åˆ¶æ•°æ®é€šè¿‡base64ç¼–ç ï¼Œæ¥å½“ä½œæ–‡æœ¬è¿›è¡Œå‘é€</p><h4 id="FORM-å­—æ®µ"><a href="#FORM-å­—æ®µ" class="headerlink" title="FORM å­—æ®µ"></a>FORM å­—æ®µ</h4><p>æå–Requestä¸Šçš„å­—æ®µæœ‰ä¸‰ä¸ªï¼ŒFormï¼ŒPostFormï¼ŒMultipartForm</p><p>é€šå¸¸åšæ³•è°ƒç”¨ ParseForm æˆ– ParseMultipartForm æ¥è§£æ Requestï¼Œç„¶åç›¸åº”çš„è®¿é—® Formã€PostForm æˆ– MultipartForm å­—æ®µ</p><h4 id="PostForm-å­—æ®µ"><a href="#PostForm-å­—æ®µ" class="headerlink" title="PostForm å­—æ®µ"></a>PostForm å­—æ®µ</h4><p>ç”±äºè¡¨å•å’Œ URL é‡Œæœ‰åŒæ ·çš„ Keyï¼Œé‚£ä¹ˆä»–ä»¬éƒ½ä¼šæ”¾åœ¨ä¸€ä¸ª slice é‡Œé¢ï¼Œï¼ˆè¡¨å•åœ¨å‰é¢ï¼Œurlçš„åœ¨åé¢ï¼‰ã€‚å¦‚æœåªæƒ³è¦è¡¨å•çš„ key - value å¯¹ï¼Œä¸è¦ URL çš„ï¼Œå¯ä»¥ä½¿ç”¨PostForm å­—æ®µ</p><p>PostForm å’Œ Form åªæ”¯æŒ application/x-www-form-urlencoded</p><p>MultipartForm å­—æ®µæ”¯æŒ multipart key-value å¯¹ï¼Œè¿”å›ç±»å‹æ˜¯ä¸ª struct ä¸æ˜¯ mapã€‚1âƒ£ï¸ keyâ€”-stringï¼Œvalueâ€”-[]string 2âƒ£ï¸ ç©ºçš„ï¼ˆkeyâ€”-stringï¼Œvalueâ€”-æ–‡ä»¶ï¼‰æ‰€ä»¥è¿™ä¸ªæ˜¯ç”¨æ¥ä¼ è¾“æ–‡ä»¶çš„</p><p>FormValue æ–¹æ³•ä¼šè¿”å› Form å­—æ®µä¸­æŒ‡å®š key å¯¹åº”çš„ç¬¬ä¸€ä¸ª valueï¼Œæ— éœ€è°ƒç”¨ParseFormï¼ˆæ— éœ€è§£æï¼‰</p><p>PostFromValue ç›¸åŒï¼Œä½†å¦‚æœ enctype è®¾ä¸º multipart/form-data</p><h4 id="FromFileæ–¹æ³•"><a href="#FromFileæ–¹æ³•" class="headerlink" title="FromFileæ–¹æ³•"></a>FromFileæ–¹æ³•</h4><p>ä¸Šä¼ æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ï¼šFormFileï¼ˆä¾‹å­ï¼‰</p><p>â€‹        æ— éœ€è°ƒç”¨ ParseMultipartForm æ–¹æ³•</p><p>â€‹        è¿”å›æŒ‡å®š key å¯¹åº”çš„ç¬¬ä¸€ä¸ª value</p><p>â€‹        åŒæ—¶è¿”å› File å’ŒFileHeaderï¼Œä»¥åŠé”™è¯¯ä¿¡æ¯</p><p>â€‹        å¦‚æœåªä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼ä¼šå¿«ä¸€äº›        </p><h3 id="ResponseWriter"><a href="#ResponseWriter" class="headerlink" title="ResponseWriter"></a>ResponseWriter</h3><p>ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¿”å›å“åº”éœ€è¦ä½¿ç”¨ ResponseWriter</p><p>ResponseWriter æ˜¯ä¸€ä¸ªæ¥å£ï¼Œhandler ç”¨å®ƒæ¥è¿”å›å“åº”</p><p>çœŸæ­£æ”¯æ’‘ ResponseWriter çš„å¹•å struct æ˜¯éå¯¼å‡ºçš„ http.response</p><p><strong>Qï¼šä¸ºä»€ä¹ˆ Handler çš„ ServeHTTP(w ResponseWriter, r *Request)ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯æŒ‡é’ˆç±»å‹ï¼Ÿè€Œ w æ˜¯æŒ‰å€¼ä¼ é€’çš„å—ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>ResponseWriteræ˜¯ä¸€ä¸ªæ¥å£å®ƒä»£è¡¨äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œw å’Œ r éƒ½æ˜¯æŒ‰ç…§å¼•ç”¨ä¼ é€’çš„</p><h4 id="Header-æ–¹æ³•"><a href="#Header-æ–¹æ³•" class="headerlink" title="Header æ–¹æ³•"></a>Header æ–¹æ³•</h4><p>Header æ–¹æ³•è¿”å› headers çš„ mapï¼Œå¯ä»¥è¿›è¡Œä¿®æ”¹</p><p>ä¿®æ”¹åçš„ headers å°†ä¼šä½“ç°åœ¨è¿”å›ç»™å®¢æˆ·ç«¯çš„ HTTP å“åº”é‡Œ</p><h4 id="Write-æ–¹æ³•"><a href="#Write-æ–¹æ³•" class="headerlink" title="Write æ–¹æ³•"></a>Write æ–¹æ³•</h4><p>å†™å…¥body</p><h4 id="WriteHeader-æ–¹æ³•"><a href="#WriteHeader-æ–¹æ³•" class="headerlink" title="WriteHeader æ–¹æ³•"></a>WriteHeader æ–¹æ³•</h4><p>WriteHeader æ–¹æ³•æ¥å—ä¸€ä¸ªæ•´æ•°ç±»å‹ï¼ˆHTTP çŠ¶æ€ç ï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠå®ƒä½œä¸º HTTP å“åº”çš„çŠ¶æ€ç è¿”å›</p><p>å¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰æ˜¾å¼è°ƒç”¨ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ Write æ–¹æ³•å‰ï¼Œä¼šéšå¼çš„è°ƒç”¨ WriteHeaderï¼ˆhttp.StatusOKï¼‰</p><p>â€‹        æ‰€ä»¥ WriteHeader ä¸»è¦ç”¨æ¥å‘é€é”™è¯¯ç±»çš„ HTTP çŠ¶æ€ç </p><p>è°ƒç”¨å®Œ WriteHeader æ–¹æ³•ä¹‹åï¼Œä»ç„¶å¯ä»¥å†™å…¥åˆ° ResponseWriterï¼Œä½†æ— æ³•å†ä¿®æ”¹ header äº†</p><h4 id="å†…ç½®çš„-Response"><a href="#å†…ç½®çš„-Response" class="headerlink" title="å†…ç½®çš„ Response"></a>å†…ç½®çš„ Response</h4><p>NotFound å‡½æ•°ï¼Œ404 + é¢å¤–çš„ä¿¡æ¯</p><p>ServeFile å‡½æ•°ï¼Œä»æ–‡ä»¶ç³»ç»Ÿæä¾›æ–‡ä»¶ï¼Œè¿”å›ç»™è¯·æ±‚è€…</p><p>ServeContent å‡½æ•°ï¼Œå¯ä»¥è¯·æ±‚rangeå†…çš„å†…å®¹</p><p>Redirect å‡½æ•°ï¼Œé‡å®šå‘</p><h3 id="æ¨¡ç‰ˆ"><a href="#æ¨¡ç‰ˆ" class="headerlink" title="æ¨¡ç‰ˆ"></a>æ¨¡ç‰ˆ</h3><pre><code class=" mermaid">graph LR;æ¨¡ç‰ˆ --&gt; æ¨¡ç‰ˆå¼•æ“;æ•°æ® --&gt; æ¨¡ç‰ˆå¼•æ“;æ¨¡ç‰ˆå¼•æ“ --&gt; HTML</code></pre><p>ä¸¤ç§ç†æƒ³çš„æ¨¡ç‰ˆå¼•æ“ï¼š1ã€æ— é€»è¾‘æ¨¡ç‰ˆå¼•æ“ 2ã€é€»è¾‘åµŒå…¥æ¨¡ç‰ˆå¼•æ“</p><p>goä½¿ç”¨çš„æ˜¯text/templateï¼ŒHTMLç›¸å…³éƒ¨åˆ†ç”¨çš„æ˜¯html/templateï¼Œæ˜¯æ··åˆä½“</p><h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><h4 id="controllerçš„è§’è‰²"><a href="#controllerçš„è§’è‰²" class="headerlink" title="controllerçš„è§’è‰²"></a>controllerçš„è§’è‰²</h4><p>main()ï¼šè®¾ç½®ç±»å·¥ä½œ</p><p>controllerï¼š</p><p>â€‹        é™æ€èµ„æº</p><p>â€‹        æŠŠä¸åŒçš„è¯·æ±‚é€åˆ°ä¸åŒçš„controllerè¿›è¡Œå¤„ç†</p><pre><code class=" mermaid">graph LR;å‰ç½®controller --&gt; home_handler;å‰ç½®controller --&gt; page1_handler;å‰ç½®controller --&gt; page2_handler;</code></pre><h4 id="è·¯ç”±å‚æ•°"><a href="#è·¯ç”±å‚æ•°" class="headerlink" title="è·¯ç”±å‚æ•°"></a>è·¯ç”±å‚æ•°</h4><p>é™æ€è·¯ç”±ï¼šä¸€ä¸ªè·¯å¾„å¯¹åº”ä¸€ä¸ªé¡µé¢</p><p>/home</p><p>/about</p><p>å¸¦å‚æ•°çš„è·¯ç”±ï¼šæ ¹æ®è·¯ç”±å‚æ•°ï¼Œåˆ›å»ºå‡ºä¸€æ—ä¸åŒçš„é¡µé¢</p><p>/companies/123</p><p>/companies/Microsoft</p><h4 id="ç¬¬ä¸‰æ–¹è·¯ç”±å™¨"><a href="#ç¬¬ä¸‰æ–¹è·¯ç”±å™¨" class="headerlink" title="ç¬¬ä¸‰æ–¹è·¯ç”±å™¨"></a>ç¬¬ä¸‰æ–¹è·¯ç”±å™¨</h4><h3 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h3><p>Marshalå’ŒUnmarshal</p><p>Marshalï¼ˆç¼–ç ï¼‰ï¼šæŠŠ go struct è½¬åŒ–ä¸º json æ ¼å¼</p><p>â€‹        MarshalIndentï¼Œï¼ˆå†…å®¹ï¼Œæ¢è¡Œï¼Œç¼©è¿›ï¼‰</p><p>Unmarshalï¼ˆè§£ç ï¼‰ï¼šæŠŠ json è½¬åŒ–ä¸º go struct</p><p><strong>é’ˆå¯¹ string æˆ– bytesï¼š</strong></p><p>â€‹        Marshal =&gt; String</p><p>â€‹        Unmarshal &lt;= String</p><p><strong>é’ˆå¯¹streamï¼š</strong></p><p>â€‹        Encode =&gt; Streamï¼ŒæŠŠæ•°æ®å†™å…¥åˆ° io.Writer</p><p>â€‹        Decode &lt;= Streamï¼Œä» io.Reader è¯»å–æ•°æ®</p><h3 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h3><p>åˆ›å»ºä¸­é—´ä»¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> MyMiddleware <span class="hljs-keyword">struct</span> &#123;<br>  Next http.Handler<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m MyMiddleware)</span></span> ServeHTTP(w http.ResponseWriter, r *http.Request) &#123;<br>  <span class="hljs-comment">// åœ¨ next handlerä¹‹å‰åšä¸€äº›äº‹æƒ…</span><br>  m.Next.ServeHTTP(w,r)<br>  <span class="hljs-comment">// åœ¨ next handlerä¹‹ååšä¸€äº›äº‹æƒ…ï¼ˆå¤„ç†ä¸€äº›å“åº”é‡Œé¢çš„å†…å®¹ï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¸­é—´ä»¶çš„ç”¨é€”"><a href="#ä¸­é—´ä»¶çš„ç”¨é€”" class="headerlink" title="ä¸­é—´ä»¶çš„ç”¨é€”"></a>ä¸­é—´ä»¶çš„ç”¨é€”</h4><ul><li><p>Logging æ—¥å¿—</p></li><li><p>å®‰å…¨</p></li><li><p>è¯·æ±‚è¶…æ—¶</p></li><li><p>å“åº”å‹ç¼©</p></li><li><p>æ‹¦æˆªå™¨</p></li></ul><h3 id="ä½¿ç”¨è¯·æ±‚ä¸Šä¸‹æ–‡"><a href="#ä½¿ç”¨è¯·æ±‚ä¸Šä¸‹æ–‡" class="headerlink" title="ä½¿ç”¨è¯·æ±‚ä¸Šä¸‹æ–‡"></a>ä½¿ç”¨è¯·æ±‚ä¸Šä¸‹æ–‡</h3><h4 id="Request-Context"><a href="#Request-Context" class="headerlink" title="Request Context"></a>Request Context</h4><p>func(*Request) Context() context.Context</p><p>â€‹        è¿”å›å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡</p><p>func(*Request) WithContext(ctx context.Context) context.Context</p><p>â€‹        åŸºäº Context è¿›è¡Œ â€ä¿®æ”¹â€œï¼Œï¼ˆå®é™…ä¸Šï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„ Context</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Context <span class="hljs-keyword">interface</span> &#123;<br>    Deadline() (deadline time.Time, ok <span class="hljs-type">bool</span>)<br><br>    Done() &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>&#123;&#125;<br><br>    Err() <span class="hljs-type">error</span><br><br>    Value(key <span class="hljs-keyword">interface</span>&#123;&#125;) <span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™äº›æ–¹æ³•éƒ½æ˜¯ç”¨äºè¯»çš„ï¼Œè¦æ›´æ–°çš„è¯å¾—åˆ›å»ºæ–°çš„context</p><h4 id="Context-API-å¯ä»¥è¿”å›æ–°-Context"><a href="#Context-API-å¯ä»¥è¿”å›æ–°-Context" class="headerlink" title="Context API - å¯ä»¥è¿”å›æ–° Context"></a>Context API - å¯ä»¥è¿”å›æ–° Context</h4><p>WithCancel()ï¼Œå®ƒæœ‰ä¸€ä¸ª CancelFunc</p><p>WithDeadline()ï¼Œå¸¦æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼ˆtime.Timeï¼‰</p><p>WithTimeout()ï¼Œå¸¦æœ‰ä¸€ä¸ªå…·ä½“çš„æ—¶é—´æ®µï¼ˆtime.Duration)</p><p>WithValue()ï¼Œåœ¨é‡Œé¢æ·»åŠ ä¸€äº›å€¼</p><p>PSï¼šnewåˆ›å»ºç»“æ„ä½“è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹åº”ç±»å‹çš„æŒ‡é’ˆï¼Œè€Œæ™®é€šç»“æ„ä½“çš„åˆ›å»ºéœ€è¦åŠ &amp;æ‰èƒ½æ˜¯æŒ‡é’ˆè¦ä¸å°±æ˜¯ä¸ªæ™®é€šçš„ç»“æ„ä½“æ— äººæŒ‡å‘å®ƒ</p><h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><p>TLS â€”â€” ä¼ è¾“å±‚å®‰å…¨</p><h4 id="HTTP-Listener"><a href="#HTTP-Listener" class="headerlink" title="HTTP Listener"></a>HTTP Listener</h4><p>http.ListenAndServe å‡½æ•°</p><p>http.ListenAndServeTLS å‡½æ•°</p><p>ç”¨ https ä¼šè®©httpåè®®ä»1.1å‡çº§åˆ°2</p><p>ä»–å»ºç«‹é•¿è¿æ¥ï¼Œæ‰€ä»¥åˆ†æˆå„ç§frameï¼Œå¯ä»¥æ•°æ®ç±»å‹æ¥è¿›è¡Œä¼˜åŒ–ä»è€Œæé«˜å¤„ç†æ•ˆç‡ã€‚</p><p>Server Pushå¯ä»¥æå‰é¢„åŠ è½½å¥½è¦åŠ è½½çš„æ–‡ä»¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">if</span> pusher, ok := w.(http.Pusher); ok &#123;<br>    pusher.Push(<span class="hljs-string">&quot;/css/app.css&quot;</span>, &amp;http.PushOptions&#123;<br>      Header: http.Header&#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;text/css&quot;</span>&#125;&#125;,<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>æµ‹è¯•modelå±‚</p><p>user<strong>_test</strong>.go</p><ul><li><p>æµ‹è¯•ä»£ç æ‰€åœ¨æ–‡ä»¶çš„åç§°ä»¥ _test ç»“å°¾</p></li><li><p>å¯¹äºç”Ÿäº§ç¼–è¯‘ï¼Œä¸ä¼šåŒ…å«ä»¥ _test ç»“å°¾çš„æ–‡ä»¶</p></li><li><p>å¯¹äºæµ‹è¯•ç¼–è¯‘ï¼Œä¼šåŒ…å«ä»¥ _test ç»“å°¾çš„æ–‡ä»¶</p></li></ul><p>func <strong>Test</strong>UpdatesModifiedTime( <strong>t *testing.T</strong> )</p><ul><li>æµ‹è¯•å‡½æ•°ååº”ä»¥ Test å¼€å¤´ï¼ˆéœ€è¦å¯¼å‡ºï¼‰</li><li>å‡½æ•°åéœ€è¦è¡¨è¾¾å‡ºè¢«éªŒè¯çš„ç‰¹å¾</li><li>æµ‹è¯•å‡½æ•°çš„å‚æ•°ç±»å‹æ˜¯ *testing.Tï¼Œå®ƒä¼šæä¾›æµ‹è¯•ç›¸å…³çš„ä¸€äº›å·¥å…·</li></ul><h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><p>Import _ â€œnet/http/pprofâ€</p><ul><li>è®¾ç½®ä¸€äº›ç›‘å¬çš„ URLï¼Œå®ƒä»¬ä¼šæä¾›å„ç±»è¯Šæ–­ä¿¡æ¯</li></ul><p>go tool pprof <a href="http://localhost:8080/debug/pprof/heap">http://localhost:8080/debug/pprof/heap</a> // å†…å­˜</p><ul><li>ä»åº”ç”¨è·å–å†…å­˜dumpï¼šåº”ç”¨åœ¨ä½¿ç”¨å“ªäº›å†…å­˜ï¼Œä»–ä»¬ä¼šå»å“ª</li></ul><p>go tool pprof <a href="http://localhost:8080/debug/pprof/profile">http://localhost:8080/debug/pprof/profile</a> // CPU</p><ul><li>CPUçš„å¿«ç…§ï¼Œå¯ä»¥çœ‹åˆ°è°åœ¨ç”¨ CPU</li></ul><p>go tool pprof <a href="http://localhost:8080/debug/pprof/block">http://localhost:8080/debug/pprof/block</a> // goroutine</p><ul><li>çœ‹åˆ°é˜»å¡çš„ goroutine</li></ul><p>go tool pprof <a href="http://localhost:8080/debug/pprof/trace?second=5">http://localhost:8080/debug/pprof/trace?second=5</a> // trace</p><ul><li>ç›‘æ§è¿™æ®µæ—¶é—´å†…ï¼Œä»€ä¹ˆåœ¨æ‰§è¡Œï¼Œä»€ä¹ˆåœ¨è°ƒç”¨ä»€ä¹ˆ</li></ul><p><a href="http://localhost:8080/debug/pprof">http://localhost:8080/debug/pprof</a> // ç½‘å€</p><h2 id="Day-1-HTTPåŸºç¡€"><a href="#Day-1-HTTPåŸºç¡€" class="headerlink" title="Day 1 HTTPåŸºç¡€"></a>Day 1 HTTPåŸºç¡€</h2><p>åœ¨å®ç°<code>Engine</code>ä¹‹å‰ï¼Œæˆ‘ä»¬è°ƒç”¨ <em>http.HandleFunc</em> å®ç°äº†è·¯ç”±å’ŒHandlerçš„æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯åªèƒ½é’ˆå¯¹å…·ä½“çš„è·¯ç”±å†™å¤„ç†é€»è¾‘ã€‚æ¯”å¦‚<code>/hello</code>ã€‚ä½†æ˜¯åœ¨å®ç°<code>Engine</code>ä¹‹åï¼Œæˆ‘ä»¬æ‹¦æˆªäº†æ‰€æœ‰çš„HTTPè¯·æ±‚ï¼Œæ‹¥æœ‰äº†ç»Ÿä¸€çš„æ§åˆ¶å…¥å£ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥è‡ªç”±å®šä¹‰è·¯ç”±æ˜ å°„çš„è§„åˆ™ï¼Œä¹Ÿå¯ä»¥ç»Ÿä¸€æ·»åŠ ä¸€äº›å¤„ç†é€»è¾‘ï¼Œä¾‹å¦‚æ—¥å¿—ã€å¼‚å¸¸å¤„ç†ç­‰</p><p><code>gee.go</code>å†…å®¹</p><ul><li>é¦–å…ˆå®šä¹‰äº†ç±»å‹<code>HandlerFunc</code>ï¼Œè¿™æ˜¯æä¾›ç»™æ¡†æ¶ç”¨æˆ·çš„ï¼Œç”¨æ¥å®šä¹‰è·¯ç”±æ˜ å°„çš„å¤„ç†æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨<code>Engine</code>ä¸­ï¼Œæ·»åŠ äº†ä¸€å¼ è·¯ç”±æ˜ å°„è¡¨<code>router</code>ï¼Œkey ç”±è¯·æ±‚æ–¹æ³•å’Œé™æ€è·¯ç”±åœ°å€æ„æˆï¼Œä¾‹å¦‚<code>GET-/</code>ã€<code>GET-/hello</code>ã€<code>POST-/hello</code>ï¼Œè¿™æ ·é’ˆå¯¹ç›¸åŒçš„è·¯ç”±ï¼Œå¦‚æœè¯·æ±‚æ–¹æ³•ä¸åŒ,å¯ä»¥æ˜ å°„ä¸åŒçš„å¤„ç†æ–¹æ³•(Handler)ï¼Œvalue æ˜¯ç”¨æˆ·æ˜ å°„çš„å¤„ç†æ–¹æ³•ã€‚</li><li>å½“ç”¨æˆ·è°ƒç”¨<code>(*Engine).GET()</code>æ–¹æ³•æ—¶ï¼Œä¼šå°†è·¯ç”±å’Œå¤„ç†æ–¹æ³•æ³¨å†Œåˆ°æ˜ å°„è¡¨ <em>router</em>ä¸­ï¼Œ<code>(*Engine).Run()</code>æ–¹æ³•ï¼Œæ˜¯ <em>ListenAndServe</em> çš„åŒ…è£…ã€‚</li><li><code>Engine</code>å®ç°çš„ <em>ServeHTTP</em> æ–¹æ³•çš„ä½œç”¨å°±æ˜¯ï¼Œè§£æè¯·æ±‚çš„è·¯å¾„ï¼ŒæŸ¥æ‰¾è·¯ç”±æ˜ å°„è¡¨ï¼Œå¦‚æœæŸ¥åˆ°ï¼Œå°±æ‰§è¡Œæ³¨å†Œçš„å¤„ç†æ–¹æ³•ã€‚å¦‚æœæŸ¥ä¸åˆ°ï¼Œå°±è¿”å› <em>404 NOT FOUND</em> ã€‚</li></ul><p>ç¬¬äºŒä¸ªå‚æ•°ç±»å‹æ˜¯æ¥å£ç±»å‹ <code>http.Handler</code>ï¼Œ<code>Handler</code> çš„å®šä¹‰åšæ–‡ä¸­å·²ç»è´´äº†ï¼Œæ˜¯ä» <code>http</code> çš„æºç ä¸­æ‰¾åˆ°çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Handler <span class="hljs-keyword">interface</span> &#123;<br>    ServeHTTP(w ResponseWriter, r *Request)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ListenAndServe</span><span class="hljs-params">(address <span class="hljs-type">string</span>, h Handler)</span></span> <span class="hljs-type">error</span><br></code></pre></td></tr></table></figure><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œå®ç°äº†æ¥å£æ–¹æ³•çš„ struct éƒ½å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºæ¥å£ç±»å‹ã€‚ä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">handler := (http.Handler)(engine) <span class="hljs-comment">// æ‰‹åŠ¨è½¬æ¢ä¸ºå€Ÿå£ç±»å‹</span><br>log.Fatal(http.ListenAndServe(<span class="hljs-string">&quot;:9999&quot;</span>, handler))<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œ<code>ListenAndServe</code> æ–¹æ³•é‡Œé¢ä¼šå»è°ƒç”¨ <code>handler.ServeHTTP()</code> æ–¹æ³•ï¼Œä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨ http çš„æºç ä¸­æ‰¾åˆ°è°ƒç”¨çš„åœ°æ–¹ã€‚ä½†æ˜¯è¿™ä¹ˆå†™æ˜¯å¤šä½™çš„ï¼Œä¼ å‚æ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œå‚æ•°è½¬æ¢çš„ã€‚æ‰€ä»¥ç›´æ¥ä¼ å…¥engine å³å¯ã€‚</p><p>åœ¨æ²¡æœ‰ engine çš„æƒ…å†µä¸‹æˆ‘ä»¬é»˜è®¤çš„æ˜¯ä¸€ä¸ª DefaultServeMux ä»–è´Ÿè´£è¯†åˆ«æ‰€æœ‰çš„ handlerï¼Œä½†ä»–ä¸èƒ½ç»™ handler åˆ†ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¼•å…¥ engineã€‚</p><p><a href="https://blog.csdn.net/liuqun0319/article/details/106136338">https://blog.csdn.net/liuqun0319/article/details/106136338</a> è¯¦è§£ type func() ç”¨æ³•åˆ†æ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>one(<span class="hljs-number">2</span>, callback)<br>&#125;<br><br><span class="hljs-comment">//éœ€è¦ä¼ é€’å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callback</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;i am callBack&quot;</span>)<br>fmt.Println(i)<br>&#125;<br><br><span class="hljs-comment">//main ä¸­è°ƒç”¨çš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">one</span><span class="hljs-params">(i <span class="hljs-type">int</span>, f <span class="hljs-keyword">func</span>(<span class="hljs-type">int</span>)</span></span>) &#123;<br>two(i,fun(f))<br>&#125;<br><br><span class="hljs-comment">//one() ä¸­è°ƒç”¨çš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">two</span><span class="hljs-params">(i <span class="hljs-type">int</span>, c Call)</span></span> &#123;<br>c.call(i)<br>&#125;<br><br><span class="hljs-comment">//å®šä¹‰çš„typeå‡½æ•°</span><br><span class="hljs-keyword">type</span> fun <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span><br><br><span class="hljs-comment">//funå®ç°çš„Callæ¥å£çš„call()å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f fun)</span></span> call(i <span class="hljs-type">int</span>) &#123;<br>f(i)<br>&#125;<br><br><span class="hljs-comment">//callæ¥å£</span><br><span class="hljs-keyword">type</span> Call <span class="hljs-keyword">interface</span> &#123;<br>call(<span class="hljs-type">int</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œè§£é‡Šæ¸…æ¥šäº†ä¸Šè¿°çš„è°ƒç”¨å…³ç³»ã€‚é¦–å…ˆ one() å‚æ•°ä¸­çš„å‡½æ•°è°ƒç”¨ two() å‚æ•°ä¸­çš„æ¥å£ï¼Œå¹¶ä¸”é€šè¿‡è¯¥æ¥å£ä¸ºè¿™ä¸ªå‡½æ•°èµ‹å€¼ï¼Œä½†æœ€ç»ˆçœŸæ­£è¿è¡Œçš„è¿˜æ˜¯ one() ä¸­çš„å‡½æ•° callbackï¼Œåªä¸è¿‡ callback ä»£è¡¨ç€ä¸€ä¸ª fun å‡½æ•°å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œæ¥å£çš„åŠŸèƒ½æ˜¯ç”¨æ¥ç»™ fun å‡½æ•°èµ‹å€¼ã€‚å¦‚ä¸‹è½¬æ¢</p><p><strong>æµç¨‹å›¾ï¼š</strong></p><pre><code class=" mermaid">graph LR;httpè¯·æ±‚ --&gt; engine;engine --&gt; GETè¯·æ±‚;engine --&gt; POSTè¯·æ±‚;</code></pre><p>å…¶ä¸­ engine æ˜¯ç”¨æ¥é‰´åˆ«è¯·æ±‚çš„ï¼ˆæœ‰ä¸¤éƒ¨åˆ†ï¼‰ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ªè·¯ç”±mapï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬è®¾å®šå¥½çš„è·¯ç”±ã€‚ç¬¬äºŒéƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªServeHTTPæ–¹æ³•ï¼ˆè¿™ä¸ªæ˜¯åœ¨ GET å’Œ POST æ–¹æ³•ä¸­è½¬æ¢çš„ï¼Œå› ä¸ºgoä¸­ç»“æ„ä½“æ”¾å…¥å‡½æ•°ä¸­çš„å‚æ•°æ¥å£å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºåˆ«çš„ç±»å‹ï¼‰</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// æ‰€æœ‰çš„handleréƒ½è¦æœ‰SeverHTTPè¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜è¦æœ‰ResponseWriter, *Requestè¿™ä¸¤ä¸ªå‚æ•°ï¼‰</span><br><span class="hljs-keyword">type</span> Handler <span class="hljs-keyword">interface</span> &#123;<br>   ServeHTTP(ResponseWriter, *Request)<br>&#125;<br></code></pre></td></tr></table></figure><p>engine ä¸­çš„ ServeHTTP ç›®çš„æ˜¯ä¸ºäº†å®ç°è½¬æ¢æˆ handler çš„ engine è¯¥æœ‰çš„æ¥å£ã€‚ç¬¬ä¸€æ­¥é€šè¿‡ listenAndServer å°† engine å˜æˆ handler æ¥å£ã€‚å› ä¸ºå˜æˆäº†handleræ¥å£ï¼ˆå¦‚ä¸Šï¼‰ï¼Œæ‰€ä»¥ç¬¬äºŒæ­¥ engine ä¹Ÿè¦å®ç° ServeHTTP å‡½æ•°ã€‚ç¬¬ä¸‰æ­¥é‡Œé¢å®ç°çš„å†…å®¹å°±æ˜¯ 1.æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„è·¯ç”±æ³¨å†Œ 2. è‹¥æŸ¥æ‰¾åˆ°å°±ç›´æ¥ä¸ºè¿™ä¸ª handlerFunc èµ‹å…¥å‚ 3. æ²¡æ‰¾åˆ°å°±404</p><p>å…¶ä¸­ä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥å†™æˆ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">if</span> handler, ok := e.Router[key]; ok &#123;<br>handler(w, r) <span class="hljs-comment">// è°ƒç”¨å­˜å‚¨åœ¨ map ä¸­çš„å‡½æ•°ï¼Œæ‰§è¡Œå¹¶èµ‹å€¼ã€‚</span><br></code></pre></td></tr></table></figure><p>handler æœ¬èº«å°±æ˜¯ä¸ª func ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±æ˜¯èµ‹å€¼å¹¶è¿è¡Œã€‚</p><h2 id="Day-2-ä¸Šä¸‹æ–‡"><a href="#Day-2-ä¸Šä¸‹æ–‡" class="headerlink" title="Day 2 ä¸Šä¸‹æ–‡"></a>Day 2 ä¸Šä¸‹æ–‡</h2><p><strong>è®¾è®¡Contextå¿…è¦æ€§</strong></p><ol><li>å¯¹WebæœåŠ¡æ¥è¯´ï¼Œæ— éæ˜¯æ ¹æ®è¯·æ±‚<code>*http.Request</code>ï¼Œæ„é€ å“åº”<code>http.ResponseWriter</code>ã€‚ä½†æ˜¯è¿™ä¸¤ä¸ªå¯¹è±¡æä¾›çš„æ¥å£ç²’åº¦å¤ªç»†ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æ„é€ ä¸€ä¸ªå®Œæ•´çš„å“åº”ï¼Œéœ€è¦è€ƒè™‘æ¶ˆæ¯å¤´(Header)å’Œæ¶ˆæ¯ä½“(Body)ï¼Œè€Œ Header åŒ…å«äº†çŠ¶æ€ç (StatusCode)ï¼Œæ¶ˆæ¯ç±»å‹(ContentType)ç­‰å‡ ä¹æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦è®¾ç½®çš„ä¿¡æ¯ã€‚å› æ­¤ï¼Œå¦‚æœä¸è¿›è¡Œæœ‰æ•ˆçš„å°è£…ï¼Œé‚£ä¹ˆæ¡†æ¶çš„ç”¨æˆ·å°†éœ€è¦å†™å¤§é‡é‡å¤ï¼Œç¹æ‚çš„ä»£ç ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚é’ˆå¯¹å¸¸ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æ„é€ å‡º HTTP å“åº”æ˜¯ä¸€ä¸ªå¥½çš„æ¡†æ¶å¿…é¡»è€ƒè™‘çš„ç‚¹ã€‚</li></ol><p>ç”¨è¿”å› JSON æ•°æ®ä½œæ¯”è¾ƒï¼Œæ„Ÿå—ä¸‹å°è£…å‰åçš„å·®è·ã€‚</p><p>å°è£…å‰</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go">obj = <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;geektutu&quot;</span>,<br>    <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;1234&quot;</span>,<br>&#125;<br>w.Header().Set(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>)<br>w.WriteHeader(http.StatusOK)<br>encoder := json.NewEncoder(w)<br><span class="hljs-keyword">if</span> err := encoder.Encode(obj); err != <span class="hljs-literal">nil</span> &#123;<br>    http.Error(w, err.Error(), <span class="hljs-number">500</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>VS å°è£…åï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">c.JSON(http.StatusOK, gee.H&#123;<br>    <span class="hljs-string">&quot;username&quot;</span>: c.PostForm(<span class="hljs-string">&quot;username&quot;</span>),<br>    <span class="hljs-string">&quot;password&quot;</span>: c.PostForm(<span class="hljs-string">&quot;password&quot;</span>),<br>&#125;)<br></code></pre></td></tr></table></figure><p>æµç¨‹å›¾</p><pre><code class=" mermaid">graph LR;httpè¯·æ±‚ --&gt; engine;engine --&gt; router-get\post;router-get\post --&gt; PostForm;router-get\post --&gt; Query;router-get\post --&gt; Status;router-get\post --&gt; SetHeader;router-get\post --&gt; String;router-get\post --&gt; JSON;router-get\post --&gt; Data;router-get\post --&gt; HTML;</code></pre><p>æœ€é‡è¦çš„è¿˜æ˜¯é€šè¿‡å®ç°äº† ServeHTTP æ¥å£ï¼Œæ¥ç®¡äº†æ‰€æœ‰çš„ HTTP è¯·æ±‚ã€‚</p><p>åé¢é›†æˆäº†å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚JSONï¼ŒHTMLç­‰ç­‰ï¼Œä¸ºçš„å°±æ˜¯å‰æ–‡æåˆ°çš„ï¼Œè¿™æ ·å†å¤„ç†JSONè¯·æ±‚çš„æ—¶å€™ä¸ç”¨é‡å¤çš„å†™ä¸€éæ€ä¹ˆå°†æ•°æ®è½¬æˆJSONï¼Œç»Ÿä¸€è½¬æ¢æˆJSONç„¶åå“åº”JSONè¯·æ±‚ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Context <span class="hljs-keyword">struct</span> &#123;<br><span class="hljs-comment">// origin objects</span><br>Writer http.ResponseWriter<br>Req    *http.Request<br><span class="hljs-comment">// request info</span><br>Path   <span class="hljs-type">string</span><br>Method <span class="hljs-type">string</span><br><span class="hljs-comment">// response info</span><br>StatusCode <span class="hljs-type">int</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬è´¨ä¸Šæ²¡æœ‰å˜å°±æ˜¯åœ¨ w å’Œ r çš„ä¸Šé¢åˆå°è£…äº†ä¸€å±‚ contextï¼Œè¿™ä¸ª context åŒ…å«äº†ä¸€äº›å±æ€§æ¯”å¦‚è¯·æ±‚ä¸­çš„è·¯å¾„å’Œæ–¹æ³•ï¼Œå“åº”çš„çŠ¶æ€ç ã€‚</p><p>æŠŠçŠ¶æ€ç çš„è®¾ç½®ï¼Œå“åº”å¤´çš„å†…å®¹çš„è®¾ç½®å°è£…åœ¨ context çš„æ–¹æ³•ä¸­ï¼ŒContext å°±åƒä¸€æ¬¡ä¼šè¯çš„ç™¾å®ç®±ï¼Œå¯ä»¥æ‰¾åˆ°ä»»ä½•ä¸œè¥¿ã€‚</p><ul><li>ç»™<code>map[string]interface&#123;&#125;</code>èµ·äº†ä¸€ä¸ªåˆ«å<code>gee.H</code>ï¼Œæ„å»ºJSONæ•°æ®æ—¶ï¼Œæ˜¾å¾—æ›´ç®€æ´ã€‚</li><li><code>Context</code>ç›®å‰åªåŒ…å«äº†<code>http.ResponseWriter</code>å’Œ<code>*http.Request</code>ï¼Œå¦å¤–æä¾›äº†å¯¹ Method å’Œ Path è¿™ä¸¤ä¸ªå¸¸ç”¨å±æ€§çš„ç›´æ¥è®¿é—®ã€‚</li><li>æä¾›äº†è®¿é—®Queryå’ŒPostFormå‚æ•°çš„æ–¹æ³•ã€‚</li><li>æä¾›äº†å¿«é€Ÿæ„é€ String/Data/JSON/HTMLå“åº”çš„æ–¹æ³•ã€‚</li></ul><p>äºŒã€åŒºåˆ«ï¼š</p><p>1ã€json.NewDecoderæ˜¯ä»ä¸€ä¸ª<code>æµ</code>é‡Œé¢ç›´æ¥è¿›è¡Œè§£ç ï¼Œä»£ç ç²¾å¹²ï¼›<br>2ã€json.Unmarshalæ˜¯ä»å·²å­˜åœ¨ä¸å†…å­˜ä¸­çš„jsonè¿›è¡Œè§£ç ï¼›<br>3ã€ç›¸å¯¹äºè§£ç ï¼Œjson.NewEncoderè¿›è¡Œå¤§JSONçš„ç¼–ç æ¯”json.marshalæ€§èƒ½é«˜ï¼Œå› ä¸ºå†…éƒ¨ä½¿ç”¨poolã€‚</p><p>ä¸‰ã€åœºæ™¯åº”ç”¨ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">encoder := json.NewEncoder(c.Writer)<br><span class="hljs-keyword">if</span> err := encoder.Encode(obj); err != <span class="hljs-literal">nil</span> &#123;<br>http.Error(c.Writer, err.Error(), <span class="hljs-number">500</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>1ã€json.NewDecoderç”¨äºhttpè¿æ¥ä¸socketè¿æ¥çš„è¯»å–ä¸å†™å…¥ï¼Œæˆ–è€…æ–‡ä»¶è¯»å–ï¼›<br>2ã€json.Unmarshalç”¨äºç›´æ¥æ˜¯byteçš„è¾“å…¥ã€‚</p><h2 id="Day-3-å‰ç¼€æ ‘è·¯ç”±"><a href="#Day-3-å‰ç¼€æ ‘è·¯ç”±" class="headerlink" title="Day 3 å‰ç¼€æ ‘è·¯ç”±"></a>Day 3 å‰ç¼€æ ‘è·¯ç”±</h2><p>æ‰€æœ‰çš„è·¯ç”±åœ°å€å…¶å®æ˜¯è™šæ‹Ÿçš„åœ°å€ï¼Œå°±æ˜¯mapå­˜å‚¨ï¼Œç›¸å½“äºä¸€ä¸ªæ ‡è¯†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">parts := strings.Split(url, <span class="hljs-string">&quot;/&quot;</span>)<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¹‹å parts[0] = â€œâ€ï¼Œæ˜¯ä¸€ä¸ªnil</p><p>æˆ‘ä»¬å¯¹äºè·¯ç”±çš„ä¿®æ”¹å˜æˆäº†ï¼Œæ·»åŠ è·¯ç”±å’ŒæŸ¥æ‰¾è·¯ç”±ï¼ŒæŸ¥æ‰¾è·¯ç”±æ¯”è¾ƒå¤æ‚ä¸€ç‚¹ï¼Œå› ä¸ºè¦è€ƒè™‘åˆ°é€šé…ç¬¦çš„é—®é¢˜ã€‚</p><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a><strong>æµç¨‹</strong></h3><p>addRouter -&gt; getRouter -&gt; handle åœ¨çœ‹ä¸€éä»£ç  èµ°ä¸€éæµç¨‹å°±æ˜äº†å¤šäº†, è¯´ç™½äº†å°±æ˜¯ ç”¨å‰ç¼€æ ‘ç»“æ„å­˜ å‰ç¼€æ ‘ç»“æ„å–, ç”¨GET /a/asd/c || GET a/s/c åŒ¹é…åˆ°è·¯ç”±(GET-/a/:param/c)å¯¹åº”çš„HandlerFunc å¹¶æŠŠasd || s å­˜åœ¨contextçš„Paramsé‡Œã€‚</p><h3 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a><strong>BUG</strong></h3><p><strong>Qï¼š</strong></p><p><strong>ç¬¬ä¸€ä¸ª bug</strong></p><p>åœ¨ <code>trie.go</code> é‡Œçš„</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *node)</span></span> insert(pattern <span class="hljs-type">string</span>, parts []<span class="hljs-type">string</span>, height <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) == height &#123;<br>n.pattern = pattern<br><span class="hljs-keyword">return</span><br>&#125;<br>part := parts[height]<br>child := n.matchChild(part)<br><span class="hljs-keyword">if</span> child == <span class="hljs-literal">nil</span> &#123;<br>child = &amp;node&#123;part: part, isWild: part[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;:&#x27;</span> || part[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;*&#x27;</span>&#125;<br>n.children = <span class="hljs-built_in">append</span>(n.children, child)<br>&#125;<br>child.insert(pattern, parts, height+<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœç¬¬ä¸€æ¬¡æ’å…¥çš„<code>pattern</code>ä¸º<code>/:age</code>ï¼Œ<code>method</code> ä¸º <code>GET</code>ï¼Œ<code>handlefunc</code> ä¸º <code>handleAge()</code></p><p>é‚£ä¹ˆä¼šç”Ÿæˆä¸€ä¸ªè¿™æ ·çš„ <code>node</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">nodeAge = node&#123;<br>    pattern:  <span class="hljs-string">&quot;:age&quot;</span>,<br>    part:     <span class="hljs-string">&quot;:age&quot;</span>,<br>    children: <span class="hljs-literal">nil</span>,<br>    isWild:   <span class="hljs-literal">true</span>,<br>&#125;<br>handlers[<span class="hljs-string">&quot;GET-:age&quot;</span>] = handleAge<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ¬¡æ’å…¥çš„ <code>pattern</code> ä¸º <code>/18</code> ,<code>method</code> ä¸ç¬¬ä¸€æ¬¡ç›¸åŒï¼Œä»ç„¶ä¸º <code>GET</code>ï¼Œ<code>handlefunc</code>ä¸º <code>handle18()</code>ï¼Œæ­¤æ—¶å¹¶ä¸ä¼šä¿®æ”¹ä¹‹å‰çš„ <code>node</code>ï¼Œè€Œæ˜¯ä¿®æ”¹äº†ä¹‹å‰ <code>nodeAge</code> çš„ <code>pattern</code>ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go">nodeAge = node&#123;<br>    pattern:  <span class="hljs-string">&quot;18&quot;</span>,<br>    part:     <span class="hljs-string">&quot;:age&quot;</span>,<br>    children: <span class="hljs-literal">nil</span>,<br>    isWild:   <span class="hljs-literal">true</span>,<br>&#125;<br>handlers[<span class="hljs-string">&quot;GET-:age&quot;</span>] = handleAge<br>handlers[<span class="hljs-string">&quot;GET-18&quot;</span>] =  handle18<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çœ‹çœ‹<code>handle()</code>å‡½æ•°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *router)</span></span> handle(c *Context) &#123;<br>n, params := r.getRoute(c.Method, c.Path)<br><span class="hljs-keyword">if</span> n != <span class="hljs-literal">nil</span> &#123;<br>c.Params = params<br>key := c.Method + <span class="hljs-string">&quot;-&quot;</span> + n.pattern<br>r.handlers[key](c)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>c.String(http.StatusNotFound, <span class="hljs-string">&quot;404 NOT FOUND: %s\n&quot;</span>, c.Path)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“æœ‰ä¸€ä¸ª <code>/19</code> çš„è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå°†ä¼šåŒ¹é…åˆ° <code>nodeAge</code>ï¼Œä½†æ˜¯ç”±äº <code>nodeAge</code> çš„ <code>pattern</code>å˜æˆäº† <code>18</code>ï¼Œå› æ­¤å°†ä¼šè¢« <code>handle18()</code> å¤„ç†ï¼Œè¿™ä¸å¤ªåˆé€‚ã€‚</p><p><strong><code>GIN</code>çš„åšæ³•æ˜¯å°†å†²çªçš„è·¯ç”±ç›´æ¥<code>panic</code>äº†ã€‚</strong></p><p><strong>ç¬¬äºŒä¸ªbug</strong></p><p><code>router</code>çš„ <code>handle</code> æ–¹æ³•è²Œä¼¼ä¸æ˜¯åç¨‹å®‰å…¨çš„</p><p>å‡è®¾æ­¤æ—¶åªæœ‰ä¸€ä¸ª<code>/:age</code>çš„<code>router</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">nodeAge = node&#123;<br>    pattern:  <span class="hljs-string">&quot;:age&quot;</span>,<br>    part:     <span class="hljs-string">&quot;:age&quot;</span>,<br>    children: <span class="hljs-literal">nil</span>,<br>    isWild:   <span class="hljs-literal">true</span>,<br>&#125;<br>handlers[<span class="hljs-string">&quot;GET-:age&quot;</span>] = handleAge<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æœ‰ä¸¤ä¸ªè¯·æ±‚åœ°å€åˆ†åˆ«ä¸º <code>/18</code> å’Œ <code>/19</code>çš„è¯·æ±‚åˆ°è¾¾ã€‚</p><p><code>handle()</code> å†…çš„ <code>getRoute()</code> å‡½æ•°å¾—åˆ°çš„ <code>params</code> åˆ†åˆ«ä¸º <code>key:age value:18</code> å’Œ <code>key:age value:19</code>ï¼Œå®ƒä»¬ä¼šå¯¹<strong>åŒä¸€ä¸ª</strong> <code>context</code> è¿›è¡Œå†™å…¥ï¼Œå› æ­¤ä¸å¤ªå®‰å…¨ã€‚</p><p>åœ¨ <code>http</code> åŒ…å†…çš„ <code>server.go</code> æ–‡ä»¶ä¸­çš„ <code>Serve</code> å‡½æ•°å†…ï¼Œæœ‰è¿™æ ·ä¸€æ®µæ³¨é‡Š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Serve accepts incoming connections on the Listener l, creating a</span><br><span class="hljs-comment">// new service goroutine for each. The service goroutines read requests and</span><br><span class="hljs-comment">// then call srv.Handler to reply to them.</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">// HTTP/2 support is only enabled if the Listener returns *tls.Conn</span><br><span class="hljs-comment">// connections and they were configured with &quot;h2&quot; in the TLS</span><br><span class="hljs-comment">// Config.NextProtos.</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">// Serve always returns a non-nil error and closes l.</span><br><span class="hljs-comment">// After Shutdown or Close, the returned error is ErrServerClosed.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(srv *Server)</span></span> Serve(l net.Listener) <span class="hljs-type">error</span><br></code></pre></td></tr></table></figure><p>å¯è§ï¼Œ<code>http.ListenAndServe()</code> æ˜¯æœ‰å¯èƒ½å¼€å¯å¤šä¸ªåç¨‹çš„ã€‚</p><p><strong>Aï¼š</strong></p><p>ç¬¬ä¸€ä¸ªbugï¼Œå­˜åœ¨è¦†ç›–çš„é—®é¢˜ï¼Œgin çš„åšæ³•æ‰æ˜¯å¯¹çš„ï¼Œåº”è¯¥æŠŠé—®é¢˜æš´éœ²ç»™ç”¨æˆ·ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œhttp è¯·æ±‚æ˜¯å¹¶å‘çš„ï¼Œä½†æ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè°ƒç”¨ <code>ServeHTTP</code> ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­ï¼Œcontext æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„ï¼Œä¸ä¼šå¯¹åŒä¸€ä¸ªcontextè¿›è¡Œå†™å…¥ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(engine *Engine)</span></span> ServeHTTP(w http.ResponseWriter, req *http.Request) &#123;<br>c := newContext(w, req)<br>engine.router.handle(c)<br>&#125;<br></code></pre></td></tr></table></figure><p>å…³é”®ç‚¹ï¼šæ¯”è¾ƒ parts çš„é•¿åº¦æœ‰æ²¡æœ‰ç›¸åŒ¹é…çš„æ·±åº¦å°±å¯ä»¥çŸ¥é“æ˜¯å¦åŒ¹é…ä¸Šäº†ï¼Œå› ä¸ºé€šé…ç¬¦ä¹Ÿå ä½</p><h2 id="Day-4-åˆ†ç»„æ§åˆ¶"><a href="#Day-4-åˆ†ç»„æ§åˆ¶" class="headerlink" title="Day 4 åˆ†ç»„æ§åˆ¶"></a>Day 4 åˆ†ç»„æ§åˆ¶</h2><h3 id="åˆ†ç»„çš„æ„ä¹‰"><a href="#åˆ†ç»„çš„æ„ä¹‰" class="headerlink" title="åˆ†ç»„çš„æ„ä¹‰"></a>åˆ†ç»„çš„æ„ä¹‰</h3><p>åˆ†ç»„æ§åˆ¶(Group Control)æ˜¯ Web æ¡†æ¶åº”æä¾›çš„åŸºç¡€åŠŸèƒ½ä¹‹ä¸€ã€‚æ‰€è°“åˆ†ç»„ï¼Œæ˜¯æŒ‡è·¯ç”±çš„åˆ†ç»„ã€‚å¦‚æœæ²¡æœ‰è·¯ç”±åˆ†ç»„ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªè·¯ç”±è¿›è¡Œæ§åˆ¶ã€‚ä½†æ˜¯çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾€å¾€æŸä¸€ç»„è·¯ç”±éœ€è¦ç›¸ä¼¼çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼š</p><ul><li>ä»¥<code>/post</code>å¼€å¤´çš„è·¯ç”±åŒ¿åå¯è®¿é—®ã€‚</li><li>ä»¥<code>/admin</code>å¼€å¤´çš„è·¯ç”±éœ€è¦é‰´æƒã€‚</li><li>ä»¥<code>/api</code>å¼€å¤´çš„è·¯ç”±æ˜¯ RESTful æ¥å£ï¼Œå¯ä»¥å¯¹æ¥ç¬¬ä¸‰æ–¹å¹³å°ï¼Œéœ€è¦ä¸‰æ–¹å¹³å°é‰´æƒã€‚</li></ul><p>psï¼šRESTfulé£æ ¼æ˜¯ â€”â€” <strong>URLå®šä½èµ„æºï¼Œç”¨HTTPåŠ¨è¯ï¼ˆGET,POST,DELETE,DETCï¼‰æè¿°æ“ä½œã€‚</strong></p><p>parent ä¹‹å‰è®¾è®¡æ˜¯ç”¨æ¥æ‹¼æ¥ prefix çš„ï¼Œæ¯ä¸ª group åªè®°å½•è‡ªå·±çš„éƒ¨åˆ†ï¼Œæœ€åé€šè¿‡ parent å±‚å±‚å›æº¯æ‹¼æ¥ã€‚ä¸è¿‡åæ¥æ”¹ç”¨ <code>group.prefix + prefix</code> çš„æ–¹å¼ group åˆå§‹åŒ–æ—¶å·²ç»æ‹¼æ¥äº†å®Œæ•´çš„ prefixï¼Œæ‰€ä»¥ä¸éœ€è¦ <code>parent</code> äº†ï¼Œå¯ä»¥åˆ é™¤ã€‚</p><h2 id="Day-5-ä¸­é—´ä»¶"><a href="#Day-5-ä¸­é—´ä»¶" class="headerlink" title="Day 5 ä¸­é—´ä»¶"></a>Day 5 ä¸­é—´ä»¶</h2><p>Gee çš„ä¸­é—´ä»¶çš„å®šä¹‰ä¸è·¯ç”±æ˜ å°„çš„ Handler ä¸€è‡´ï¼Œå¤„ç†çš„è¾“å…¥æ˜¯<code>Context</code>å¯¹è±¡ã€‚æ’å…¥ç‚¹æ˜¯æ¡†æ¶æ¥æ”¶åˆ°è¯·æ±‚åˆå§‹åŒ–<code>Context</code>å¯¹è±¡åï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨è‡ªå·±å®šä¹‰çš„ä¸­é—´ä»¶åšä¸€äº›é¢å¤–çš„å¤„ç†ï¼Œä¾‹å¦‚è®°å½•æ—¥å¿—ç­‰ï¼Œä»¥åŠå¯¹<code>Context</code>è¿›è¡ŒäºŒæ¬¡åŠ å·¥ã€‚c.Next()<code>è¡¨ç¤ºç­‰å¾…æ‰§è¡Œå…¶ä»–çš„ä¸­é—´ä»¶æˆ–ç”¨æˆ·çš„</code>Handler</p><p>å‡è®¾æˆ‘ä»¬åº”ç”¨äº†ä¸­é—´ä»¶ A å’Œ Bï¼Œå’Œè·¯ç”±æ˜ å°„çš„ Handlerã€‚<code>c.handlers</code>æ˜¯è¿™æ ·çš„[A, B, Handler]ï¼Œ<code>c.index</code>åˆå§‹åŒ–ä¸º-1ã€‚è°ƒç”¨<code>c.Next()</code>ï¼Œæ¥ä¸‹æ¥çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>c.index++ï¼Œc.index å˜ä¸º 0</li><li>0 &lt; 3ï¼Œè°ƒç”¨ c.handlers[0]ï¼Œå³ A</li><li>æ‰§è¡Œ part1ï¼Œè°ƒç”¨ c.Next()</li><li>c.index++ï¼Œc.index å˜ä¸º 1</li><li>1 &lt; 3ï¼Œè°ƒç”¨ c.handlers[1]ï¼Œå³ B</li><li>æ‰§è¡Œ part3ï¼Œè°ƒç”¨ c.Next()</li><li>c.index++ï¼Œc.index å˜ä¸º 2</li><li>2 &lt; 3ï¼Œè°ƒç”¨ c.handlers[2]ï¼Œå³Handler</li><li>Handler è°ƒç”¨å®Œæ¯•ï¼Œè¿”å›åˆ° B ä¸­çš„ part4ï¼Œæ‰§è¡Œ part4</li><li>part4 æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›åˆ° A ä¸­çš„ part2ï¼Œæ‰§è¡Œ part2</li><li>part2 æ‰§è¡Œå®Œæ¯•ï¼Œç»“æŸã€‚</li></ul><p>ä¸€å¥è¯è¯´æ¸…æ¥šé‡ç‚¹ï¼Œæœ€ç»ˆçš„é¡ºåºæ˜¯<code>part1 -&gt; part3 -&gt; Handler -&gt; part 4 -&gt; part2</code>ã€‚æ°æ°æ»¡è¶³äº†æˆ‘ä»¬å¯¹ä¸­é—´ä»¶çš„è¦æ±‚ï¼Œæ¥ä¸‹æ¥çœ‹è°ƒç”¨éƒ¨åˆ†çš„ä»£ç ï¼Œå°±èƒ½å…¨éƒ¨ä¸²èµ·æ¥äº†ã€‚</p><p>ç›®å‰çš„ç»“æ„ï¼š</p><pre><code class=" mermaid">graph LR;httpè¯·æ±‚ --&gt; RouterGroup;RouterGroup --&gt; Engine;Engine --&gt; Context-get\post;Context-get\post --&gt; Next;Context-get\post --&gt; Param;Context-get\post --&gt; PostForm;Context-get\post --&gt; Query;Context-get\post --&gt; Status;Context-get\post --&gt; SetHeader;Context-get\post --&gt; String;Context-get\post --&gt; JSON;Context-get\post --&gt; Data;Context-get\post --&gt; HTML;</code></pre><p>æ¯ä¸€ä¸ªuseéƒ½ä¼šappendä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¹¶ä¸”å­˜å‚¨åœ¨router groupä¸­ï¼Œåœ¨å®ç°serveHTTPçš„æ—¶å€™å°†è¿™äº›ä¸­é—´ä»¶å‡½æ•°é€’ç»™context</p><p>æœ€ååœ¨next()ä¸­å¯åŠ¨ç¬¬ä¸€ä¸ªhandler</p><h2 id="Day-6-æ¨¡ç‰ˆ-Template"><a href="#Day-6-æ¨¡ç‰ˆ-Template" class="headerlink" title="Day 6 æ¨¡ç‰ˆ Template"></a>Day 6 æ¨¡ç‰ˆ Template</h2><p>é‚£å¦‚æœæˆ‘ä¹ˆå°†æ‰€æœ‰çš„é™æ€æ–‡ä»¶æ”¾åœ¨<code>/usr/web</code>ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆ<code>filepath</code>çš„å€¼å³æ˜¯è¯¥ç›®å½•ä¸‹æ–‡ä»¶çš„ç›¸å¯¹åœ°å€ã€‚æ˜ å°„åˆ°çœŸå®çš„æ–‡ä»¶åï¼Œå°†æ–‡ä»¶è¿”å›ï¼Œé™æ€æœåŠ¡å™¨å°±å®ç°äº†ã€‚</p><p>æ‰¾åˆ°æ–‡ä»¶åï¼Œå¦‚ä½•è¿”å›è¿™ä¸€æ­¥ï¼Œ<code>net/http</code>åº“å·²ç»å®ç°äº†ã€‚å› æ­¤ï¼Œgee æ¡†æ¶è¦åšçš„ï¼Œä»…ä»…æ˜¯è§£æè¯·æ±‚çš„åœ°å€ï¼Œæ˜ å°„åˆ°æœåŠ¡å™¨ä¸Šæ–‡ä»¶çš„çœŸå®åœ°å€ï¼Œäº¤ç»™<code>http.FileServer</code>å¤„ç†å°±å¥½äº†</p><p>Golang å…§å»ºæä¾› <a href="https://golang.org/pkg/net/http/#FileServer">http.FileServer</a> ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é€é HTTP å­˜å–æª”æ¡ˆç³»çµ±(file system)ï¼Œä¾‹å¦‚ä»¥ä¸‹ç¨‹å¼ç¢¼åŸ·è¡Œä¹‹å¾Œï¼Œå°±å¯ä»¥é€éç€è¦½å™¨æ‰“é–‹ç¶²å€ <code>http://localhost:8080</code> ç€è¦½ <code>/usr/share/doc</code> è³‡æ–™å¤¾å…§çš„æª”æ¡ˆã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    http.ListenAndServe(<span class="hljs-string">&quot;:8080&quot;</span>, http.FileServer(http.Dir(<span class="hljs-string">&quot;/usr/share/doc&quot;</span>)))<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶è·¯å¾„é€šè¿‡ipæ¥è®¿é—®è§„å®šçš„åœ°å€ã€‚</p><p>å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šçš„ç»“æ„ä½“æ˜¯éœ€è¦åŠ æŒ‡é’ˆçš„</p><p>å¦‚æœæ˜¯ä¸€ä¸ªmapç±»å‹ä»–è‡ªå·±å°±æ˜¯ä¸ªå¯¹è±¡ä¸ç”¨åŠ æŒ‡é’ˆ</p><p>é¦–å…ˆä¸º Engine ç¤ºä¾‹æ·»åŠ äº† <code>*template.Template</code> å’Œ <code>template.FuncMap</code>å¯¹è±¡ï¼Œå‰è€…å°†æ‰€æœ‰çš„æ¨¡æ¿åŠ è½½è¿›å†…å­˜ï¼Œåè€…æ˜¯æ‰€æœ‰çš„è‡ªå®šä¹‰æ¨¡æ¿æ¸²æŸ“å‡½æ•°ã€‚</p><p>å¦å¤–ï¼Œç»™ç”¨æˆ·åˆ†åˆ«æä¾›äº†è®¾ç½®è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°<code>funcMap</code>å’ŒåŠ è½½æ¨¡æ¿çš„æ–¹æ³•ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå¯¹åŸæ¥çš„ <code>(*Context).HTML()</code>æ–¹æ³•åšäº†äº›å°ä¿®æ”¹ï¼Œä½¿ä¹‹æ”¯æŒæ ¹æ®æ¨¡æ¿æ–‡ä»¶åé€‰æ‹©æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ã€‚</p><p>è¿™ä¸€å—è®¾è®¡æ¯”è¾ƒç®€å•ï¼ŒRouterGroup åªåšè·¯ç”±çš„äº‹æƒ…ï¼ŒEngine åšå…¨å±€çš„äº‹æƒ…ã€‚<code>LoadHTMLGlob</code> è®¾è®¡æˆå…¨å±€çš„äº†ï¼Œä½ å¯ä»¥å°è¯•ä¸‹ï¼Œå®ç° RouterGroup çº§åˆ«çš„æ¨¡æ¿ã€‚</p><p><code>e.HtmlTemplates = template.Must(template.New(&quot;&quot;).Funcs(e.FuncMap).ParseGlob(pattern))</code></p><p><a href="https://www.cnblogs.com/f-ck-need-u/p/10035768.html">https://www.cnblogs.com/f-ck-need-u/p/10035768.html</a></p><p><strong>ä½¿ç”¨template.New()å‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ã€æ— è§£ææ•°æ®çš„æ¨¡æ¿ï¼ŒåŒæ—¶è¿˜ä¼šåˆ›å»ºä¸€ä¸ªcommonï¼Œä¹Ÿå°±æ˜¯æ¨¡æ¿ç»„</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>template.New()å‡½æ•°ä¸ä»…åˆ›å»ºäº†ä¸€ä¸ªæ¨¡æ¿ï¼Œè¿˜åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„commonç»“æ„(æ¨¡æ¿ç»„)ã€‚éœ€è¦æ³¨æ„ï¼Œæ–°åˆ›å»ºçš„commonæ˜¯ç©ºçš„ï¼Œåªæœ‰è¿›è¡Œæ¨¡æ¿è§£æ(Parse()ï¼ŒParseFiles()ç­‰æ“ä½œ)ä¹‹åï¼Œæ‰ä¼šå°†æ¨¡æ¿æ·»åŠ åˆ°commonçš„tmplå­—æ®µ(mapç»“æ„)ä¸­</strong>ã€‚</p><p>Parse()åªèƒ½è§£æå­—ç¬¦ä¸²ï¼Œè¦è§£ææ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œéœ€è¦ä½¿ç”¨ParseFiles()æˆ–ParseGlob()ã€‚</p><p>templateå†…ç½®äº†ä¸€ç³»åˆ—å‡½æ•°ï¼Œä½†è¿™äº›å‡½æ•°æ¯•ç«Ÿæœ‰é™ï¼Œå¯èƒ½æ— æ³•æ»¡è¶³ç‰¹æ®Šçš„éœ€æ±‚ã€‚templateå…è®¸æˆ‘ä»¬å®šä¹‰è‡ªå·±çš„å‡½æ•°ï¼Œæ·»åŠ åˆ°commonä¸­ï¼Œç„¶åå°±å¯ä»¥åœ¨å¾…è§£æçš„å†…å®¹ä¸­åƒä½¿ç”¨å†…ç½®å‡½æ•°ä¸€æ ·ä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°ã€‚</p><p>è‡ªå®šä¹‰å‡½æ•°çš„ä¼˜å…ˆçº§é«˜äºå†…ç½®çš„å‡½æ•°ä¼˜å…ˆçº§ï¼Œå³å…ˆæ£€ç´¢è‡ªå®šä¹‰å‡½æ•°ï¼Œå†æ£€ç´¢å†…ç½®å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè‡ªå®šä¹‰å‡½æ•°çš„å‡½æ•°åå’Œå†…ç½®å‡½æ•°åç›¸åŒï¼Œåˆ™å†…ç½®å‡½æ•°å°†å¤±æ•ˆã€‚</p><p>æœ¬æ–‡åªå¯¹æ­¤ç¨ä½œè§£é‡Šï¼Œæœ¬æ–‡çš„é‡ç‚¹ä¸æ˜¯templateçš„å…·ä½“è¯­æ³•å’Œç”¨æ³•ã€‚</p><p><strong>Golang Template</strong></p><p><a href="https://blog.csdn.net/lengyuezuixue/article/details/79367825?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-79367825-blog-79899340.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-79367825-blog-79899340.pc_relevant_aa&amp;utm_relevant_index=1">https://blog.csdn.net/lengyuezuixue/article/details/79367825?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-79367825-blog-79899340.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-79367825-blog-79899340.pc_relevant_aa&amp;utm_relevant_index=1</a></p><h2 id="Day-7-é”™è¯¯æ¢å¤"><a href="#Day-7-é”™è¯¯æ¢å¤" class="headerlink" title="Day 7 é”™è¯¯æ¢å¤"></a>Day 7 é”™è¯¯æ¢å¤</h2><p>Gee çš„é”™è¯¯å¤„ç†æœºåˆ¶</p><p>å¯¹ä¸€ä¸ª Web æ¡†æ¶è€Œè¨€ï¼Œé”™è¯¯å¤„ç†æœºåˆ¶æ˜¯éå¸¸å¿…è¦çš„ã€‚å¯èƒ½æ˜¯æ¡†æ¶æœ¬èº«æ²¡æœ‰å®Œå¤‡çš„æµ‹è¯•ï¼Œå¯¼è‡´åœ¨æŸäº›æƒ…å†µä¸‹å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰æƒ…å†µã€‚ä¹Ÿæœ‰å¯èƒ½ç”¨æˆ·ä¸æ­£ç¡®çš„å‚æ•°ï¼Œè§¦å‘äº†æŸäº›å¼‚å¸¸ï¼Œä¾‹å¦‚æ•°ç»„è¶Šç•Œï¼Œç©ºæŒ‡é’ˆç­‰ã€‚å¦‚æœå› ä¸ºè¿™äº›åŸå› å¯¼è‡´ç³»ç»Ÿå®•æœºï¼Œå¿…ç„¶æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>æˆ‘ä»¬åœ¨ç¬¬å…­å¤©å®ç°çš„æ¡†æ¶å¹¶æ²¡æœ‰åŠ å…¥å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¦‚æœä»£ç ä¸­å­˜åœ¨ä¼šè§¦å‘ panic çš„ BUGï¼Œå¾ˆå®¹æ˜“å®•æ‰ã€‚</p><h1 id="åˆ†å¸ƒå¼ç¼“å­˜-GeeCache"><a href="#åˆ†å¸ƒå¼ç¼“å­˜-GeeCache" class="headerlink" title="åˆ†å¸ƒå¼ç¼“å­˜ - GeeCache"></a>åˆ†å¸ƒå¼ç¼“å­˜ - GeeCache</h1><h2 id="Day-1-LRUç¼“å­˜æœºåˆ¶"><a href="#Day-1-LRUç¼“å­˜æœºåˆ¶" class="headerlink" title="Day 1 LRUç¼“å­˜æœºåˆ¶"></a>Day 1 LRUç¼“å­˜æœºåˆ¶</h2><h3 id="1-æ ¸å¿ƒæ•°æ®ç»“æ„"><a href="#1-æ ¸å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="1. æ ¸å¿ƒæ•°æ®ç»“æ„"></a>1. æ ¸å¿ƒæ•°æ®ç»“æ„</h3><p><img src="https://geektutu.com/post/geecache-day1/lru.jpg" alt="implement lru algorithm with golang"></p><p>è¿™å¼ å›¾å¾ˆå¥½åœ°è¡¨ç¤ºäº† LRU ç®—æ³•æœ€æ ¸å¿ƒçš„ 2 ä¸ªæ•°æ®ç»“æ„</p><ul><li>ç»¿è‰²çš„æ˜¯å­—å…¸(map)ï¼Œå­˜å‚¨é”®å’Œå€¼çš„æ˜ å°„å…³ç³»ã€‚è¿™æ ·æ ¹æ®æŸä¸ªé”®(key)æŸ¥æ‰¾å¯¹åº”çš„å€¼(value)çš„å¤æ‚æ˜¯<code>O(1)</code>ï¼Œåœ¨å­—å…¸ä¸­æ’å…¥ä¸€æ¡è®°å½•çš„å¤æ‚åº¦ä¹Ÿæ˜¯<code>O(1)</code>ã€‚</li><li>çº¢è‰²çš„æ˜¯åŒå‘é“¾è¡¨(double linked list)å®ç°çš„é˜Ÿåˆ—ã€‚å°†æ‰€æœ‰çš„å€¼æ”¾åˆ°åŒå‘é“¾è¡¨ä¸­ï¼Œè¿™æ ·ï¼Œå½“è®¿é—®åˆ°æŸä¸ªå€¼æ—¶ï¼Œå°†å…¶ç§»åŠ¨åˆ°é˜Ÿå°¾çš„å¤æ‚åº¦æ˜¯<code>O(1)</code>ï¼Œåœ¨é˜Ÿå°¾æ–°å¢ä¸€æ¡è®°å½•ä»¥åŠåˆ é™¤ä¸€æ¡è®°å½•çš„å¤æ‚åº¦å‡ä¸º<code>O(1)</code>ã€‚</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Cache is a LRU cache. It is not safe for concurrent access.</span><br><span class="hljs-keyword">type</span> Cache <span class="hljs-keyword">struct</span> &#123;<br>maxBytes <span class="hljs-type">int64</span><br>nbytes   <span class="hljs-type">int64</span><br>ll       *list.List<br>cache    <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*list.Element<br><span class="hljs-comment">// optional and executed when an entry is purged.</span><br>OnEvicted <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(key <span class="hljs-type">string</span>, value Value)</span></span> <span class="hljs-comment">// é©±é€</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ Go è¯­è¨€æ ‡å‡†åº“å®ç°çš„åŒå‘é“¾è¡¨<code>list.List</code>ã€‚</li><li>å­—å…¸çš„å®šä¹‰æ˜¯ <code>map[string]*list.Element</code>ï¼Œé”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼æ˜¯åŒå‘é“¾è¡¨ä¸­å¯¹åº”èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li><li><code>maxBytes</code> æ˜¯å…è®¸ä½¿ç”¨çš„æœ€å¤§å†…å­˜ï¼Œ<code>nbytes</code> æ˜¯å½“å‰å·²ä½¿ç”¨çš„å†…å­˜ï¼Œ<code>OnEvicted</code> æ˜¯æŸæ¡è®°å½•è¢«ç§»é™¤æ—¶çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥ä¸º nilã€‚</li><li>é”®å€¼å¯¹ <code>entry</code> æ˜¯åŒå‘é“¾è¡¨èŠ‚ç‚¹çš„æ•°æ®ç±»å‹ï¼Œåœ¨é“¾è¡¨ä¸­ä»ä¿å­˜æ¯ä¸ªå€¼å¯¹åº”çš„ key çš„å¥½å¤„åœ¨äºï¼Œæ·˜æ±°é˜Ÿé¦–èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ç”¨ key ä»å­—å…¸ä¸­åˆ é™¤å¯¹åº”çš„æ˜ å°„ã€‚</li><li>ä¸ºäº†é€šç”¨æ€§ï¼Œæˆ‘ä»¬å…è®¸å€¼æ˜¯å®ç°äº† <code>Value</code> æ¥å£çš„ä»»æ„ç±»å‹ï¼Œè¯¥æ¥å£åªåŒ…å«äº†ä¸€ä¸ªæ–¹æ³• <code>Len() int</code>ï¼Œç”¨äºè¿”å›å€¼æ‰€å ç”¨çš„å†…å­˜å¤§å°ã€‚</li></ul><h3 id="2-æŸ¥æ‰¾"><a href="#2-æŸ¥æ‰¾" class="headerlink" title="2. æŸ¥æ‰¾"></a>2. æŸ¥æ‰¾</h3><p>æŸ¥æ‰¾ä¸»è¦æœ‰ 2 ä¸ªæ­¥éª¤ï¼Œç¬¬ä¸€æ­¥æ˜¯ä»å­—å…¸ä¸­æ‰¾åˆ°å¯¹åº”çš„åŒå‘é“¾è¡¨çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒæ­¥ï¼Œå°†è¯¥èŠ‚ç‚¹ç§»åŠ¨åˆ°é˜Ÿå°¾ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Get look ups a key&#x27;s value</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Cache)</span></span> Get(key <span class="hljs-type">string</span>) (value Value, ok <span class="hljs-type">bool</span>) &#123;<br><span class="hljs-keyword">if</span> ele, ok := c.cache[key]; ok &#123;<br>c.ll.MoveToFront(ele)<br>kv := ele.Value.(*entry)<br><span class="hljs-keyword">return</span> kv.value, <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœé”®å¯¹åº”çš„é“¾è¡¨èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™å°†å¯¹åº”èŠ‚ç‚¹ç§»åŠ¨åˆ°é˜Ÿå°¾ï¼Œå¹¶è¿”å›æŸ¥æ‰¾åˆ°çš„å€¼ã€‚</li><li><code>c.ll.MoveToFront(ele)</code>ï¼Œå³å°†é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ <code>ele</code> ç§»åŠ¨åˆ°é˜Ÿå°¾ï¼ˆåŒå‘é“¾è¡¨ä½œä¸ºé˜Ÿåˆ—ï¼Œé˜Ÿé¦–é˜Ÿå°¾æ˜¯ç›¸å¯¹çš„ï¼Œåœ¨è¿™é‡Œçº¦å®š front ä¸ºé˜Ÿå°¾ï¼‰</li></ul><p>å…¶ä¸­<code>kv := ele.Value.(*entry)</code></p><p>ä¸€ä¸ªç®€å•çš„æ–­è¨€è¡¨è¾¾å¼ï¼š</p><p>var s = x.(T)</p><p>å¦‚æœ x ä¸æ˜¯ nilï¼Œä¸” x å¯ä»¥è½¬æ¢æˆ T ç±»å‹ï¼Œå°±ä¼šæ–­è¨€æˆåŠŸï¼Œè¿”å› T ç±»å‹çš„å˜é‡ sã€‚å¦‚æœ T ä¸æ˜¯æ¥å£ç±»å‹ï¼Œåˆ™è¦æ±‚ x çš„ç±»å‹å°±æ˜¯ Tï¼ˆæˆ–è€…åŒ…å«xï¼‰ï¼Œå¦‚æœ T æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¦æ±‚ x å®ç°äº† T æ¥å£ã€‚</p><p>å¦‚æœæ–­è¨€ç±»å‹æˆç«‹ï¼Œåˆ™è¡¨è¾¾å¼è¿”å›å€¼å°±æ˜¯ T ç±»å‹çš„ xï¼Œå¦‚æœæ–­è¨€å¤±è´¥å°±ä¼šè§¦å‘ panicã€‚</p><p>ä¸Šè¿°è¡¨æ‰€ç¤ºå†æ–­è¨€å¤±è´¥å°±ä¼š panicï¼Œgo æä¾›äº†å¦å¤–ä¸€ç§å¸¦è¿”å›æ˜¯å¦æˆç«‹çš„æ–­è¨€è¯­æ³•ï¼š</p><p>s, ok := x.(T)</p><p>è¯¥æ–¹æ³•å’Œç¬¬ä¸€ç§å·®ä¸å¤šä¸€æ ·ï¼Œä½†æ˜¯ ok ä¼šè¿”å›æ˜¯å¦æ–­è¨€æˆåŠŸä¸ä¼šå‡ºç° panicï¼Œok å°±è¡¨ç¤ºæ˜¯å¦æ˜¯æˆåŠŸäº†ã€‚</p><h3 id="3-åˆ é™¤"><a href="#3-åˆ é™¤" class="headerlink" title="3. åˆ é™¤"></a>3. åˆ é™¤</h3><p>è¿™é‡Œçš„åˆ é™¤ï¼Œå®é™…ä¸Šæ˜¯ç¼“å­˜æ·˜æ±°ã€‚å³ç§»é™¤æœ€è¿‘æœ€å°‘è®¿é—®çš„èŠ‚ç‚¹ï¼ˆé˜Ÿé¦–ï¼‰</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// RemoveOldest removes the oldest item</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Cache)</span></span> RemoveOldest() &#123;<br>ele := c.ll.Back()<br><span class="hljs-keyword">if</span> ele != <span class="hljs-literal">nil</span> &#123;<br>c.ll.Remove(ele)<br>kv := ele.Value.(*entry)<br><span class="hljs-built_in">delete</span>(c.cache, kv.key)<br>c.nbytes -= <span class="hljs-type">int64</span>(<span class="hljs-built_in">len</span>(kv.key)) + <span class="hljs-type">int64</span>(kv.value.Len())<br><span class="hljs-keyword">if</span> c.OnEvicted != <span class="hljs-literal">nil</span> &#123;<br>c.OnEvicted(kv.key, kv.value)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>c.ll.Back()</code> å–åˆ°é˜Ÿé¦–èŠ‚ç‚¹ï¼Œä»é“¾è¡¨ä¸­åˆ é™¤ã€‚</li><li><code>delete(c.cache, kv.key)</code>ï¼Œä»å­—å…¸ä¸­ <code>c.cache</code> åˆ é™¤è¯¥èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ã€‚</li><li>æ›´æ–°å½“å‰æ‰€ç”¨çš„å†…å­˜ <code>c.nbytes</code>ã€‚</li><li>å¦‚æœå›è°ƒå‡½æ•° <code>OnEvicted</code> ä¸ä¸º nilï¼Œåˆ™è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</li></ul><h3 id="4-æ–°å¢-ä¿®æ”¹"><a href="#4-æ–°å¢-ä¿®æ”¹" class="headerlink" title="4. æ–°å¢/ä¿®æ”¹"></a>4. æ–°å¢/ä¿®æ”¹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Add adds a value to the cache.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Cache)</span></span> Add(key <span class="hljs-type">string</span>, value Value) &#123;<br><span class="hljs-keyword">if</span> ele, ok := c.cache[key]; ok &#123;<br>c.ll.MoveToFront(ele)<br>kv := ele.Value.(*entry)<br>c.nbytes += <span class="hljs-type">int64</span>(value.Len()) - <span class="hljs-type">int64</span>(kv.value.Len())<br>kv.value = value<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>ele := c.ll.PushFront(&amp;entry&#123;key, value&#125;)<br>c.cache[key] = ele<br>c.nbytes += <span class="hljs-type">int64</span>(<span class="hljs-built_in">len</span>(key)) + <span class="hljs-type">int64</span>(value.Len())<br>&#125;<br><span class="hljs-keyword">for</span> c.maxBytes != <span class="hljs-number">0</span> &amp;&amp; c.maxBytes &lt; c.nbytes &#123;<br>c.RemoveOldest()<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœé”®å­˜åœ¨ï¼Œåˆ™æ›´æ–°å¯¹åº”èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹ç§»åˆ°é˜Ÿå°¾ã€‚</li><li>ä¸å­˜åœ¨åˆ™æ˜¯æ–°å¢åœºæ™¯ï¼Œé¦–å…ˆé˜Ÿå°¾æ·»åŠ æ–°èŠ‚ç‚¹ <code>&amp;entry&#123;key, value&#125;</code>, å¹¶å­—å…¸ä¸­æ·»åŠ  key å’ŒèŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ã€‚</li><li>æ›´æ–° <code>c.nbytes</code>ï¼Œå¦‚æœè¶…è¿‡äº†è®¾å®šçš„æœ€å¤§å€¼ <code>c.maxBytes</code>ï¼Œåˆ™ç§»é™¤æœ€å°‘è®¿é—®çš„èŠ‚ç‚¹ã€‚</li></ul><p>æœ€åï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘ä»¬å®ç° <code>Len()</code> ç”¨æ¥è·å–æ·»åŠ äº†å¤šå°‘æ¡æ•°æ®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Len the number of cache entries</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Cache)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> c.ll.Len()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Day-2-å•æœºå¹¶å‘ç¼“å­˜"><a href="#Day-2-å•æœºå¹¶å‘ç¼“å­˜" class="headerlink" title="Day 2 å•æœºå¹¶å‘ç¼“å­˜"></a>Day 2 å•æœºå¹¶å‘ç¼“å­˜</h2><h3 id="1-æ”¯æŒå¹¶å‘è¯»å†™"><a href="#1-æ”¯æŒå¹¶å‘è¯»å†™" class="headerlink" title="1. æ”¯æŒå¹¶å‘è¯»å†™"></a>1. æ”¯æŒå¹¶å‘è¯»å†™</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ <code>sync.Mutex</code> å°è£… LRU çš„å‡ ä¸ªæ–¹æ³•ï¼Œä½¿ä¹‹æ”¯æŒå¹¶å‘çš„è¯»å†™ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬æŠ½è±¡äº†ä¸€ä¸ªåªè¯»æ•°æ®ç»“æ„ <code>ByteView</code> ç”¨æ¥è¡¨ç¤ºç¼“å­˜å€¼ï¼Œæ˜¯ GeeCache ä¸»è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚</p><ul><li>ByteView åªæœ‰ä¸€ä¸ªæ•°æ®æˆå‘˜ï¼Œ<code>b []byte</code>ï¼Œb å°†ä¼šå­˜å‚¨çœŸå®çš„ç¼“å­˜å€¼ã€‚é€‰æ‹© byte ç±»å‹æ˜¯ä¸ºäº†èƒ½å¤Ÿæ”¯æŒä»»æ„çš„æ•°æ®ç±»å‹çš„å­˜å‚¨ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€å›¾ç‰‡ç­‰ã€‚</li><li>å®ç° <code>Len() int</code> æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ lru.Cache çš„å®ç°ä¸­ï¼Œè¦æ±‚è¢«ç¼“å­˜å¯¹è±¡å¿…é¡»å®ç° Value æ¥å£ï¼Œå³ <code>Len() int</code> æ–¹æ³•ï¼Œè¿”å›å…¶æ‰€å çš„å†…å­˜å¤§å°ã€‚</li><li><code>b</code> æ˜¯åªè¯»çš„ï¼Œä½¿ç”¨ <code>ByteSlice()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ‹·è´ï¼Œé˜²æ­¢ç¼“å­˜å€¼è¢«å¤–éƒ¨ç¨‹åºä¿®æ”¹ã€‚</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> cache <span class="hljs-keyword">struct</span> &#123;<br>mu         sync.Mutex<br>lru        *lru.Cache<br>cacheBytes <span class="hljs-type">int64</span> <span class="hljs-comment">// cacheçš„å†…å®¹é•¿åº¦</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸»ä½“ç»“æ„Group</strong></p><p>Group æ˜¯ GeeCache æœ€æ ¸å¿ƒçš„æ•°æ®ç»“æ„ï¼Œè´Ÿè´£ä¸ç”¨æˆ·çš„äº¤äº’ï¼Œå¹¶ä¸”æ§åˆ¶ç¼“å­˜å€¼å­˜å‚¨å’Œè·å–çš„æµç¨‹ã€‚</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck">                            <span class="hljs-comment">æ˜¯</span><br><span class="hljs-comment">æ¥æ”¶ key</span> <span class="hljs-literal">--</span>&gt; <span class="hljs-comment">æ£€æŸ¥æ˜¯å¦è¢«ç¼“å­˜</span> <span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">è¿”å›ç¼“å­˜å€¼ â‘´</span><br>                <span class="hljs-comment">|  å¦                         æ˜¯</span><br>                <span class="hljs-comment">|</span><span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">æ˜¯å¦åº”å½“ä»è¿œç¨‹èŠ‚ç‚¹è·å–</span> <span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">ä¸è¿œç¨‹èŠ‚ç‚¹äº¤äº’</span> <span class="hljs-literal">--</span>&gt; <span class="hljs-comment">è¿”å›ç¼“å­˜å€¼ â‘µ</span><br>                            <span class="hljs-comment">|  å¦</span><br>                            <span class="hljs-comment">|</span><span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">è°ƒç”¨`å›è°ƒå‡½æ•°`ï¼Œè·å–å€¼å¹¶æ·»åŠ åˆ°ç¼“å­˜</span> <span class="hljs-literal">--</span>&gt; <span class="hljs-comment">è¿”å›ç¼“å­˜å€¼ â‘¶</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†åœ¨ <code>geecache.go</code> ä¸­å®ç°ä¸»ä½“ç»“æ„ Groupï¼Œé‚£ä¹ˆ GeeCache çš„ä»£ç ç»“æ„çš„é›å½¢å·²ç»å½¢æˆäº†ã€‚</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">geecache/<br>    |<span class="hljs-params">--lru/</span><br>        |<span class="hljs-params">--lru</span>.go  <span class="hljs-string">//</span> lru ç¼“å­˜æ·˜æ±°ç­–ç•¥<br>    |<span class="hljs-params">--byteview</span>.go <span class="hljs-string">//</span> ç¼“å­˜å€¼çš„æŠ½è±¡ä¸å°è£…<br>    |<span class="hljs-params">--cache</span>.go    <span class="hljs-string">//</span> å¹¶å‘æ§åˆ¶<br>    |<span class="hljs-params">--geecache</span>.go <span class="hljs-string">//</span> è´Ÿè´£ä¸å¤–éƒ¨äº¤äº’ï¼Œæ§åˆ¶ç¼“å­˜å­˜å‚¨å’Œè·å–çš„ä¸»æµç¨‹<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°æµç¨‹ â‘´ å’Œ â‘¶ï¼Œè¿œç¨‹äº¤äº’çš„éƒ¨åˆ†åç»­å†å®ç°ã€‚</p><p>æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œåº”ä»æ•°æ®æºï¼ˆæ–‡ä»¶ï¼Œæ•°æ®åº“ç­‰ï¼‰è·å–æ•°æ®å¹¶æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚GeeCache æ˜¯å¦åº”è¯¥æ”¯æŒå¤šç§æ•°æ®æºçš„é…ç½®å‘¢ï¼Ÿä¸åº”è¯¥ï¼Œä¸€æ˜¯æ•°æ®æºçš„ç§ç±»å¤ªå¤šï¼Œæ²¡åŠæ³•ä¸€ä¸€å®ç°ï¼›äºŒæ˜¯æ‰©å±•æ€§ä¸å¥½ã€‚å¦‚ä½•ä»æºå¤´è·å–æ•°æ®ï¼Œåº”è¯¥æ˜¯ç”¨æˆ·å†³å®šçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä»¶äº‹äº¤ç»™ç”¨æˆ·å¥½äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå›è°ƒå‡½æ•°(callback)ï¼Œåœ¨ç¼“å­˜ä¸å­˜åœ¨æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¾—åˆ°æºæ•°æ®ã€‚</p><p>GetGroup()</p><ul><li>ä¸€ä¸ª Group å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç¼“å­˜çš„å‘½åç©ºé—´ï¼Œæ¯ä¸ª Group æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„åç§° <code>name</code>ã€‚æ¯”å¦‚å¯ä»¥åˆ›å»ºä¸‰ä¸ª Groupï¼Œç¼“å­˜å­¦ç”Ÿçš„æˆç»©å‘½åä¸º scoresï¼Œç¼“å­˜å­¦ç”Ÿä¿¡æ¯çš„å‘½åä¸º infoï¼Œç¼“å­˜å­¦ç”Ÿè¯¾ç¨‹çš„å‘½åä¸º coursesã€‚</li><li>ç¬¬äºŒä¸ªå±æ€§æ˜¯ <code>getter Getter</code>ï¼Œå³ç¼“å­˜æœªå‘½ä¸­æ—¶è·å–æºæ•°æ®çš„å›è°ƒ(callback)ã€‚</li><li>ç¬¬ä¸‰ä¸ªå±æ€§æ˜¯ <code>mainCache cache</code>ï¼Œå³ä¸€å¼€å§‹å®ç°çš„å¹¶å‘ç¼“å­˜ã€‚</li><li>æ„å»ºå‡½æ•° <code>NewGroup</code> ç”¨æ¥å®ä¾‹åŒ– Groupï¼Œå¹¶ä¸”å°† group å­˜å‚¨åœ¨å…¨å±€å˜é‡ <code>groups</code> ä¸­ã€‚</li><li><code>GetGroup</code> ç”¨æ¥ç‰¹å®šåç§°çš„ Groupï¼Œè¿™é‡Œä½¿ç”¨äº†åªè¯»é” <code>RLock()</code>ï¼Œå› ä¸ºä¸æ¶‰åŠä»»ä½•å†²çªå˜é‡çš„å†™æ“ä½œã€‚</li></ul><h2 id="Day-3-HTTP-æœåŠ¡ç«¯"><a href="#Day-3-HTTP-æœåŠ¡ç«¯" class="headerlink" title="Day 3 HTTP æœåŠ¡ç«¯"></a>Day 3 HTTP æœåŠ¡ç«¯</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">url := <span class="hljs-string">&quot;/_geecache/scores/Tom&quot;</span><br>basePath := <span class="hljs-string">&quot;/_geecache/&quot;</span><br>fmt.Println(url[<span class="hljs-built_in">len</span>(basePath):])<br>parts := strings.SplitN(url[<span class="hljs-built_in">len</span>(basePath):],<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">2</span>)<br>fmt.Println(strings.SplitN(url[<span class="hljs-built_in">len</span>(basePath):],<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">2</span>))<br>fmt.Printf(<span class="hljs-string">&quot;parts[0]: %s\n&quot;</span>, parts[<span class="hljs-number">0</span>])<br>fmt.Printf(<span class="hljs-string">&quot;parts[1]: %s\n&quot;</span>, parts[<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„åˆ‡ç‰‡basePathæ˜¯æœ‰ä¸¤ä¸ª/ï¼Œæ‰€ä»¥åé¢ä¸ç”¨+1</p><h2 id="Day-4-ä¸€è‡´æ€§Hash"><a href="#Day-4-ä¸€è‡´æ€§Hash" class="headerlink" title="Day 4 ä¸€è‡´æ€§Hash"></a>Day 4 ä¸€è‡´æ€§Hash</h2><h3 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€è‡´æ€§Hash"><a href="#1-ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€è‡´æ€§Hash" class="headerlink" title="1.ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€è‡´æ€§Hash"></a>1.ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€è‡´æ€§Hash</h3><h4 id="1-1-æˆ‘è¯¥è®¿é—®è°ï¼Ÿ"><a href="#1-1-æˆ‘è¯¥è®¿é—®è°ï¼Ÿ" class="headerlink" title="1.1 æˆ‘è¯¥è®¿é—®è°ï¼Ÿ"></a>1.1 æˆ‘è¯¥è®¿é—®è°ï¼Ÿ</h4><p>å¯¹äºåˆ†å¸ƒå¼ç¼“å­˜æ¥è¯´ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹å¹¶æ²¡æœ‰å­˜å‚¨ç¼“å­˜å€¼ï¼Œé‚£ä¹ˆå®ƒé¢ä¸´çš„éš¾é¢˜æ˜¯ï¼Œä»è°é‚£è·å–æ•°æ®ï¼Ÿè‡ªå·±ï¼Œè¿˜æ˜¯èŠ‚ç‚¹1, 2, 3, 4â€¦ ã€‚å‡è®¾åŒ…æ‹¬è‡ªå·±åœ¨å†…ä¸€å…±æœ‰ 10 ä¸ªèŠ‚ç‚¹ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”±è¯¥èŠ‚ç‚¹ä»æ•°æ®æºè·å–æ•°æ®ã€‚</p><p>å‡è®¾ç¬¬ä¸€æ¬¡éšæœºé€‰å–äº†èŠ‚ç‚¹ 1 ï¼ŒèŠ‚ç‚¹ 1 ä»æ•°æ®æºè·å–åˆ°æ•°æ®çš„åŒæ—¶ç¼“å­˜è¯¥æ•°æ®ï¼›é‚£ç¬¬äºŒæ¬¡ï¼Œåªæœ‰ 1/10 çš„å¯èƒ½æ€§å†æ¬¡é€‰æ‹©èŠ‚ç‚¹ 1, æœ‰ 9/10 çš„æ¦‚ç‡é€‰æ‹©äº†å…¶ä»–èŠ‚ç‚¹ï¼Œå¦‚æœé€‰æ‹©äº†å…¶ä»–èŠ‚ç‚¹ï¼Œå°±æ„å‘³ç€éœ€è¦å†ä¸€æ¬¡ä»æ•°æ®æºè·å–æ•°æ®ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¾ˆè€—æ—¶çš„ã€‚è¿™æ ·åšï¼Œä¸€æ˜¯ç¼“å­˜æ•ˆç‡ä½ï¼ŒäºŒæ˜¯å„ä¸ªèŠ‚ç‚¹ä¸Šå­˜å‚¨ç€ç›¸åŒçš„æ•°æ®ï¼Œæµªè´¹äº†å¤§é‡çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>é‚£æœ‰ä»€ä¹ˆåŠæ³•ï¼Œå¯¹äºç»™å®šçš„ keyï¼Œæ¯ä¸€æ¬¡éƒ½é€‰æ‹©åŒä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿä½¿ç”¨ hash ç®—æ³•ä¹Ÿèƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚é‚£æŠŠ key çš„æ¯ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç åŠ èµ·æ¥ï¼Œå†é™¤ä»¥ 10 å–ä½™æ•°å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè¿™å¯ä»¥è®¤ä¸ºæ˜¯è‡ªå®šä¹‰çš„ hash ç®—æ³•ã€‚</p><p><img src="https://geektutu.com/post/geecache-day4/hash_select.jpg" alt="hash select peer"></p><p>ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä»»æ„æ—¶åˆ»è¯·æ±‚æŸ¥æ‰¾é”® <code>Tom</code> å¯¹åº”çš„å€¼ï¼Œéƒ½ä¼šåˆ†é…ç»™èŠ‚ç‚¹ 2ï¼Œæœ‰æ•ˆåœ°è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ã€‚</p><h5 id="1-2-èŠ‚ç‚¹æ•°é‡å˜åŒ–äº†æ€ä¹ˆåŠï¼Ÿ"><a href="#1-2-èŠ‚ç‚¹æ•°é‡å˜åŒ–äº†æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="1.2 èŠ‚ç‚¹æ•°é‡å˜åŒ–äº†æ€ä¹ˆåŠï¼Ÿ"></a>1.2 èŠ‚ç‚¹æ•°é‡å˜åŒ–äº†æ€ä¹ˆåŠï¼Ÿ</h5><p>ç®€å•æ±‚å– Hash å€¼è§£å†³äº†ç¼“å­˜æ€§èƒ½çš„é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è€ƒè™‘èŠ‚ç‚¹æ•°é‡å˜åŒ–çš„åœºæ™¯ã€‚å‡è®¾ï¼Œç§»é™¤äº†å…¶ä¸­ä¸€å°èŠ‚ç‚¹ï¼Œåªå‰©ä¸‹ 9 ä¸ªï¼Œé‚£ä¹ˆä¹‹å‰ <code>hash(key) % 10</code> å˜æˆäº† <code>hash(key) % 9</code>ï¼Œä¹Ÿå°±æ„å‘³ç€å‡ ä¹ç¼“å­˜å€¼å¯¹åº”çš„èŠ‚ç‚¹éƒ½å‘ç”Ÿäº†æ”¹å˜ã€‚å³å‡ ä¹æ‰€æœ‰çš„ç¼“å­˜å€¼éƒ½å¤±æ•ˆäº†ã€‚èŠ‚ç‚¹åœ¨æ¥æ”¶åˆ°å¯¹åº”çš„è¯·æ±‚æ—¶ï¼Œå‡éœ€è¦é‡æ–°å»æ•°æ®æºè·å–æ•°æ®ï¼Œå®¹æ˜“å¼•èµ· <code>ç¼“å­˜é›ªå´©</code>ã€‚</p><blockquote><p>ç¼“å­˜é›ªå´©ï¼šç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚å¸¸å› ä¸ºç¼“å­˜æœåŠ¡å™¨å®•æœºï¼Œæˆ–ç¼“å­˜è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´å¼•èµ·ã€‚</p></blockquote><p>é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ã€‚</p><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°† key æ˜ å°„åˆ° 2^32 çš„ç©ºé—´ä¸­ï¼Œå°†è¿™ä¸ªæ•°å­—é¦–å°¾ç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªç¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ChecksumIEEE</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">uint32</span><br></code></pre></td></tr></table></figure><p> ChecksumIEEE ä½¿ç”¨ IEEE å¤šé¡¹å¼è¿”å›æ•°æ®çš„ CRC-32 æ ¡éªŒå’Œã€‚ </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> <span class="hljs-type">uint32</span> <span class="hljs-type">uint32</span><br></code></pre></td></tr></table></figure><p>uint32 is the set of all unsigned 32-bit integers. Range: 0 through 4294967295</p><h3 id="Goæ ‡å‡†åº“æ˜¯å¦‚ä½•å®ç°äºŒåˆ†æŸ¥æ‰¾çš„ï¼Ÿ"><a href="#Goæ ‡å‡†åº“æ˜¯å¦‚ä½•å®ç°äºŒåˆ†æŸ¥æ‰¾çš„ï¼Ÿ" class="headerlink" title="Goæ ‡å‡†åº“æ˜¯å¦‚ä½•å®ç°äºŒåˆ†æŸ¥æ‰¾çš„ï¼Ÿ"></a>Goæ ‡å‡†åº“æ˜¯å¦‚ä½•å®ç°äºŒåˆ†æŸ¥æ‰¾çš„ï¼Ÿ</h3><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ ‡å‡†åº“ä¸­çš„ä»£ç å®ç°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Search</span><span class="hljs-params">(n <span class="hljs-type">int</span>, f <span class="hljs-keyword">func</span>(<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span>) <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">// Define f(-1) == false and f(n) == true.</span><br>    <span class="hljs-comment">// Invariant: f(i-1) == false, f(j) == true.</span><br>    i, j := <span class="hljs-number">0</span>, n<br>    <span class="hljs-keyword">for</span> i &lt; j &#123;<br>        h := <span class="hljs-type">int</span>(<span class="hljs-type">uint</span>(i+j) &gt;&gt; <span class="hljs-number">1</span>) <span class="hljs-comment">// avoid overflow when computing h</span><br>        <span class="hljs-comment">// i â‰¤ h &lt; j</span><br>        <span class="hljs-keyword">if</span> !f(h) &#123;<br>            i = h + <span class="hljs-number">1</span> <span class="hljs-comment">// preserves f(i-1) == false</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            j = h <span class="hljs-comment">// preserves f(j) == true å› ä¸ºæ˜¯å¼€åŒºé—´æ‰€ä»¥ï¼Œj = h</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// i == j, f(i-1) == false, and f(j) (= f(i)) == true  =&gt;  answer is i.</span><br>    <span class="hljs-keyword">return</span> i<br>&#125;<br></code></pre></td></tr></table></figure><p>ğŸŒŸè¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯æˆ‘ä»¬è¦æ‰¾çš„indexè·ç¦»ä»–æœ€å°çš„åæ ‡ï¼ˆ0å¼€å§‹ï¼‰</p><p>åˆä¸€çœ‹ï¼Œä¸æˆ‘ä»¬ä¸Šé¢çš„å®ç°ä¸€ç‚¹ä¹Ÿä¸åŒå‘¢ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚</p><p>å…¥å‚<code>n</code>å°±æ˜¯ä»£è¡¨è¦æŸ¥æ‰¾åºåˆ—çš„é•¿åº¦ï¼Œå…¥å‚<code>f</code>å°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ¡ä»¶ã€‚è¿™æ®µä»£ç å¾ˆçŸ­ï¼Œå¤§æ¦‚æ€è·¯å°±æ˜¯ï¼š</p><ul><li>å®šä¹‰å¥½è¿™æ®µåºåˆ—çš„å¼€å§‹ã€ç»“å°¾çš„ä½ç½®</li><li>ä½¿ç”¨ä½ç§»æ“ä½œè·å–ä¸­ä½æ•°ï¼Œè¿™æ ·èƒ½æ›´å¥½çš„é¿å…æº¢å‡º</li><li>ç„¶åæ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„æ¡ä»¶åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œé€æ¸ç¼©å°èŒƒå›´</li></ul><p>è¿™æ®µä»£ç ä¸æˆ‘å®ç°çš„ä¸åŒåœ¨äºï¼Œå®ƒå¹¶ä¸æ˜¯åœ¨ç”¨æˆ·ä¼ å…¥çš„æ¯”è¾ƒå‡½æ•°<code>f</code>è¿”å›<code>true</code>å°±ç»“æŸæŸ¥æ‰¾ï¼Œè€Œæ˜¯ç»§ç»­åœ¨å½“å‰<code>[i, j)</code>åŒºé—´çš„å‰åŠæ®µæŸ¥æ‰¾ï¼Œå¹¶ä¸”ï¼Œå½“<code>f</code>ä¸º<code>false</code>æ—¶ï¼Œä¹Ÿä¸æ¯”è¾ƒå½“å‰å…ƒç´ ä¸è¦æŸ¥æ‰¾çš„å…ƒç´ çš„å¤§å°å…³ç³»ï¼Œè€Œæ˜¯ç›´æ¥åœ¨ååŠæ®µæŸ¥æ‰¾ã€‚æ‰€ä»¥<code>for</code>å¾ªç¯é€€å‡ºçš„å”¯ä¸€æ¡ä»¶å°±æ˜¯<code>i&gt;=j</code>ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·ä½¿ç”¨ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    nums := []<span class="hljs-type">int64</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>&#125;<br>    fmt.Println(sort.Search(<span class="hljs-built_in">len</span>(nums), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span>&#123;<br>        <span class="hljs-keyword">return</span> nums[i] == <span class="hljs-number">1</span><br>    &#125;))<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœç«Ÿç„¶æ˜¯<code>7</code>ï¼Œè€Œä¸æ˜¯<code>1</code>ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ¡ä»¶æ”¹æˆ<code>return nums[i] &gt;=1</code>ï¼Œè¿è¡Œç»“æœå°±å¯¹äº†ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„æ¡ä»¶å¹¶ä¸æ˜¯è®©ç”¨æˆ·ç¡®è®¤ç›®æ ‡æ¡ä»¶ï¼Œè¿™é‡Œçš„æ€æƒ³æ˜¯è®©æˆ‘ä»¬é€æ­¥ç¼©å°èŒƒå›´ï¼Œé€šè¿‡è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½å¯ä»¥ç¼©å°èŒƒå›´ï¼Œè¯´çš„æœ‰ç‚¹é¥¶ï¼Œå°±ä¸Šé¢çš„ä»£ç ä¸¾ä¸ªä¾‹å­ã€‚ç°åœ¨æ˜¯ä¸€ä¸ªå‡åºæ•°ç»„ï¼Œæˆ‘ä»¬è¦æ‰¾çš„æ•°å€¼æ˜¯<code>1</code>ï¼Œæˆ‘ä»¬ä¼ å…¥çš„æ¡ä»¶æ˜¯<code>return nums[i]&gt;=1</code>ï¼Œç¬¬ä¸€è¿›å…¥å‡½æ•°<code>Search</code>ï¼Œæˆ‘ä»¬è·å–ä¸­çš„ä¸­ä½æ•°<code>h</code>æ˜¯<code>3</code>ï¼Œå½“å‰å…ƒç´ æ˜¯å¤§äºç›®æ ‡æ•°å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½åœ¨å‰åŠæ®µæŸ¥æ‰¾ï¼Œå°±æ˜¯è¿™æ ·ä¸æ–­ç¼©å°èŒƒå›´ï¼Œæ‰¾åˆ°æˆ‘ä»¬æœ€ç»ˆçš„é‚£ä¸ªæ•°å€¼ï¼Œå¦‚æœå½“å‰åºåˆ—ä¸­æ²¡æœ‰æˆ‘ä»¬è¦æ‰¾çš„ç›®æ ‡æ•°å€¼ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›æˆ‘ä»¬å¯ä»¥æ’å…¥çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä½å…ƒç´ çš„åæ ‡+1çš„ä½ç½®ã€‚</p><p>è¿™ä¸ªé€»è¾‘è¯´å®è¯ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä»”ç»†æ€è€ƒäº†ä¸€ä¸‹ï¼Œè¿™ç§å®ç°è¿˜æ˜¯æœ‰ä¸€äº›ä¼˜ç‚¹çš„ï¼š</p><ul><li>ä½¿ç”¨<strong>ç§»ä½æ“ä½œ</strong>ï¼Œé¿å…å› ä¸º<code>i+j</code>å¤ªå¤§è€Œé€ æˆçš„æº¢å‡º</li><li>å¦‚æœæˆ‘ä»¬æŸ¥æ‰¾åºåˆ—ä¸­æœ‰å¤šä¸ªå…ƒç´ ç›¸ç­‰æ—¶ï¼Œä¸”æˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ å°±æ˜¯è¿™ä¸ªæ—¶ï¼Œæˆ‘ä»¬æ€»ä¼šæ‰¾åˆ°ä¸‹æ ‡æœ€å°çš„é‚£ä¸ªå…ƒç´ </li><li>å¦‚æœæˆ‘ä»¬æ²¡æ‰¾åˆ°è¦æ‰¾çš„ç›®æ ‡å…ƒç´ æ—¶ï¼Œè¿”å›çš„ä¸‹æ ‡æ˜¯æˆ‘ä»¬å¯æ’å…¥çš„ä½ç½®ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œæ•°æ®æ’å…¥æ—¶ï¼Œä¾ç„¶å¯ä»¥ä¿è¯æ•°æ®çš„æœ‰åº</li></ul><p>ğŸŒŸ<strong>æ³¨æ„ï¼šä½¿ç”¨<code>sort.Search</code>æ—¶ï¼Œå…¥å‚æ¡ä»¶æ˜¯æ ¹æ®è¦æŸ¥æ‰¾çš„åºåˆ—æ˜¯å‡åºåºåˆ—è¿˜æ˜¯é™åºåºåˆ—æ¥å†³å®šçš„ï¼Œå¦‚æœæ˜¯å‡åºåºåˆ—ï¼Œåˆ™ä¼ å…¥çš„æ¡ä»¶åº”è¯¥æ˜¯<code>&gt;=ç›®æ ‡å…ƒç´ å€¼</code>ï¼Œå¦‚æœæ˜¯é™åºåºåˆ—ï¼Œåˆ™ä¼ å…¥çš„æ¡ä»¶åº”è¯¥æ˜¯<code>&lt;=ç›®æ ‡å…ƒç´ å€¼</code></strong></p><p>è§£æ<code>int(uint(i+j) &gt;&gt; 1)</code>è¿™æ®µä»£ç </p><p>è¿™é‡Œæˆ‘æƒ³å•ç‹¬è§£æä¸€ä¸‹è¿™æ®µä»£ç ï¼Œå› ä¸ºå¾ˆå°‘è§ï¼Œæ‰€ä»¥å¯ä»¥å½“ä½œä¸€ä¸ªçŸ¥è¯†ç‚¹è®°ä¸€ä¸‹ã€‚è¿™é‡Œä½¿ç”¨åˆ°çš„æ˜¯ç§»ä½æ“ä½œï¼Œé€šè¿‡å‘å³ç§»åŠ¨ä¸€ä½ï¼Œæ­£å¥½å¯ä»¥å¾—åˆ°<code>/2</code>çš„ç»“æœã€‚å…·ä½“ä»€ä¹ˆåŸå› å‘¢ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªå›¾ï¼Œæ‰‹å·¥ç”»çš„ï¼Œçœ‹å®Œä½ å°±æ‡‚äº†ï¼š</p><p><img src="https://segmentfault.com/img/remote/1460000040178986" alt="img"></p><p>æ‡‚äº†å§ï¼Œå…„å¼Ÿä»¬ï¼ç§»ä½å®ç°è¦æ¯”ä¹˜é™¤å‘çš„æ•ˆç‡é«˜å¾ˆå¤šï¼Œæˆ‘ä»¬åœ¨å¹³å¸¸å¼€å‘ä¸­å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æå‡æ•ˆç‡ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç‚¹å°±æ˜¯ä½¿ç”¨<code>uint</code>æ•°æ®ç±»å‹ï¼Œå› ä¸º<code>uint</code>çš„æ•°æ®èŒƒå›´æ˜¯<code>2^32</code>å³<code>0</code>åˆ°<code>4294967295</code>ã€‚ä½¿ç”¨<code>uint</code>å¯ä»¥é¿å…å› ä¸º<code>i+j</code>å¤ªå¤§è€Œé€ æˆçš„æº¢å‡ºã€‚</p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th><th>èŒƒä¾‹</th></tr></thead><tbody><tr><td>&amp;</td><td>æŒ‰ä½ä¸</td><td>A &amp; B</td></tr><tr><td>\</td><td></td><td>æŒ‰ä½æˆ–</td><td>A \</td><td>B</td></tr><tr><td>^</td><td>æŒ‰ä½å¼‚æˆ–</td><td>A ^ B</td></tr><tr><td>&lt;&lt;</td><td>å·¦ç§»è¿ç®—ç¬¦</td><td>A &lt;&lt; 2</td></tr><tr><td><code>&gt;&gt;</code></td><td>å³ç§»è¿ç®—ç¬¦</td><td>A &gt;&gt; 2</td></tr></tbody></table></div><p><strong>è¯´æ˜</strong></p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th><th>åŠŸèƒ½</th><th>è¿ç®—è§„åˆ™</th></tr></thead><tbody><tr><td>æŒ‰ä½ä¸</td><td>åŒç›®è¿ç®—ç¬¦</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸ä¸</td><td>å¦‚æœä¸¤æ•°å¯¹åº”çš„äºŒè¿›åˆ¶ä½éƒ½ä¸º 1ï¼Œé‚£ä¹ˆç»“æœä¸º 1ï¼Œ å¦åˆ™ç»“æœä¸º 0ã€‚</td></tr><tr><td>æŒ‰ä½æˆ–</td><td>åŒç›®è¿ç®—ç¬¦</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸æˆ–</td><td>å¦‚æœä¸¤æ•°å¯¹åº”çš„äºŒè¿›åˆ¶ä½æœ‰ä¸€ä¸ªä¸º 1ï¼Œé‚£ä¹ˆç»“æœä¸º 1ï¼Œ å¦åˆ™ç»“æœä¸º 0ã€‚</td></tr><tr><td>æŒ‰ä½å¼‚æˆ–</td><td>åŒç›®è¿ç®—ç¬¦</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸å¼‚æˆ–</td><td>å¦‚æœä¸¤æ•°å¯¹åº”çš„äºŒè¿›åˆ¶ä½ä¸åŒï¼Œé‚£ä¹ˆç»“æœä¸º 1ï¼Œ å¦åˆ™ç»“æœä¸º 0ã€‚</td></tr><tr><td>å·¦ç§»</td><td>åŒç›®è¿ç®—ç¬¦</td><td>æŠŠè¿ç®—ç¬¦ <code>&lt;&lt;</code> å·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥ 0ã€‚</td><td>å·¦ç§» N ä½ï¼Œå°±æ˜¯ä¹˜ä»¥ 2 çš„ N æ¬¡æ–¹ã€‚</td></tr><tr><td>å³ç§»</td><td>åŒç›®è¿ç®—ç¬¦</td><td>æŠŠè¿ç®—ç¬¦ <code>&lt;&lt;</code> å·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ã€‚</td><td>å³ç§» N ä½ï¼Œå°±æ˜¯é™¤ä»¥ 2 çš„ N æ¬¡æ–¹ã€‚</td></tr></tbody></table></div><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Get gets the closest item in the hash to the provided key.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Map)</span></span> Get(key <span class="hljs-type">string</span>) <span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(m.keys) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>&#125;<br><br>hash := <span class="hljs-type">int</span>(m.hash([]<span class="hljs-type">byte</span>(key)))<br><span class="hljs-comment">// Binary search for appropriate replica.</span><br>idx := sort.Search(<span class="hljs-built_in">len</span>(m.keys), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> m.keys[i] &gt;= hash<br>&#125;)<br><br><span class="hljs-keyword">return</span> m.hashMap[m.keys[idx%<span class="hljs-built_in">len</span>(m.keys)]]<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é€‰æ‹©èŠ‚ç‚¹å°±éå¸¸ç®€å•äº†ï¼Œç¬¬ä¸€æ­¥ï¼Œè®¡ç®— key çš„å“ˆå¸Œå€¼ã€‚</li><li>ç¬¬äºŒæ­¥ï¼Œé¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è™šæ‹ŸèŠ‚ç‚¹çš„ä¸‹æ ‡ <code>idx</code>ï¼Œä» m.keys ä¸­è·å–åˆ°å¯¹åº”çš„å“ˆå¸Œå€¼ã€‚å¦‚æœ <code>idx == len(m.keys)</code>ï¼Œè¯´æ˜åº”é€‰æ‹© <code>m.keys[0]</code>ï¼Œå› ä¸º <code>m.keys</code> æ˜¯ä¸€ä¸ªç¯çŠ¶ç»“æ„ï¼Œæ‰€ä»¥ç”¨å–ä½™æ•°çš„æ–¹å¼æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</li><li>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡ <code>hashMap</code> æ˜ å°„å¾—åˆ°çœŸå®çš„èŠ‚ç‚¹ã€‚</li></ul><p>è‡³æ­¤ï¼Œæ•´ä¸ªä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°±å®ç°å®Œæˆäº†ã€‚</p><p>ğŸŒŸæµç¨‹æ˜¯å…ˆæœ‰hashçš„keyï¼Œé€šè¿‡keyæˆ‘ä»¬å†è¿›è¡ŒæŸ¥æ‰¾å¯¹åº”çš„èŠ‚ç‚¹çš„hashï¼Œé€šè¿‡hashä½œä¸ºhashMapçš„keyæ‰¾åˆ°hashMapé‡Œé¢çš„å­˜å€¼ï¼ˆçœŸå®èŠ‚ç‚¹ï¼‰è¿™å°±æ˜¯<code>return m.hashMap[m.keys[idx%len(m.keys)]]</code>çš„æ„ä¹‰ã€‚</p><p>idx%len(m.keys)æ˜¯æˆç¯å½¢çš„å…³é”®ï¼Œä¿è¯å¦‚æœè¶…è¿‡ç›®å‰è®¾ç«‹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆè™š + å®ï¼‰å°±é»˜è®¤æ‰¾ä¸€åœˆæ‰¾åˆ°ä¸‹æ ‡0çš„ä½ç½®ã€‚</p><p>keysæ•°ç»„å­˜çš„æ˜¯ä¸‹æ ‡è¿ç»­çš„hashå€¼ï¼Œæ‰€ä»¥å¿…å®šé€šè¿‡goçš„äºŒåˆ†æŸ¥æ‰¾èƒ½æ‰¾åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ¯”å·²å­˜åœ¨çš„AèŠ‚ç‚¹å°çš„è¯å°±æ’åœ¨Açš„ä½ç½®ï¼ˆä¸‹æ ‡ç›¸åŒï¼‰</p><h2 id="Day-5-åˆ†å¸ƒå¼èŠ‚ç‚¹"><a href="#Day-5-åˆ†å¸ƒå¼èŠ‚ç‚¹" class="headerlink" title="Day 5 åˆ†å¸ƒå¼èŠ‚ç‚¹"></a>Day 5 åˆ†å¸ƒå¼èŠ‚ç‚¹</h2><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œé€‰æ‹©èŠ‚ç‚¹        æ˜¯                                    æ˜¯</span><br>    <span class="hljs-comment">|</span><span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">æ˜¯å¦æ˜¯è¿œç¨‹èŠ‚ç‚¹</span> <span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">HTTP å®¢æˆ·ç«¯è®¿é—®è¿œç¨‹èŠ‚ç‚¹</span> <span class="hljs-literal">--</span>&gt; <span class="hljs-comment">æˆåŠŸï¼Ÿ</span><span class="hljs-literal">-----</span>&gt; <span class="hljs-comment">æœåŠ¡ç«¯è¿”å›è¿”å›å€¼</span><br>                    <span class="hljs-comment">|  å¦                                    â†“  å¦</span><br>                    <span class="hljs-comment">|</span><span class="hljs-literal">----------------------------</span>&gt; <span class="hljs-comment">å›é€€åˆ°æœ¬åœ°èŠ‚ç‚¹å¤„ç†ã€‚</span><br></code></pre></td></tr></table></figure><p>é»˜è®¤æ ¼å¼<code>%v</code>ä¸‹ï¼Œå¯¹äºä¸åŒçš„æ•°æ®ç±»å‹ï¼Œåº•å±‚ä¼šå»è°ƒç”¨é»˜è®¤çš„æ ¼å¼åŒ–æ–¹å¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-type">bool</span>:                    %t <br><span class="hljs-type">int</span>, <span class="hljs-type">int8</span> etc.:          %d <br><span class="hljs-type">uint</span>, <span class="hljs-type">uint8</span> etc.:        %d, %x <span class="hljs-keyword">if</span> printed with %#v<br><span class="hljs-type">float32</span>, <span class="hljs-type">complex64</span>, etc: %g<br><span class="hljs-type">string</span>:                  %s<br><span class="hljs-keyword">chan</span>:                    %p <br>pointer:                 %p<br></code></pre></td></tr></table></figure><h3 id="func-QueryEscape"><a href="#func-QueryEscape" class="headerlink" title="func QueryEscape"></a>func QueryEscape</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QueryEscape</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span><br></code></pre></td></tr></table></figure><p>QueryEscapeå‡½æ•°å¯¹sè¿›è¡Œè½¬ç ä½¿ä¹‹å¯ä»¥å®‰å…¨çš„ç”¨åœ¨URLæŸ¥è¯¢é‡Œã€‚</p><h3 id="func-QueryUnescape"><a href="#func-QueryUnescape" class="headerlink" title="func QueryUnescape"></a>func QueryUnescape</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QueryUnescape</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>)<br></code></pre></td></tr></table></figure><p>QueryUnescapeå‡½æ•°ç”¨äºå°†QueryEscapeè½¬ç çš„å­—ç¬¦ä¸²è¿˜åŸã€‚å®ƒä¼šæŠŠ%ABæ”¹ä¸ºå­—èŠ‚0xABï¼Œå°†â€™+â€™æ”¹ä¸ºâ€™ â€˜ã€‚å¦‚æœæœ‰æŸä¸ª%åé¢æœªè·Ÿä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œæœ¬å‡½æ•°ä¼šè¿”å›é”™è¯¯ã€‚</p><p>http.Get()å°±æ˜¯å‘é€ä¸€ä¸ªgetè¯·æ±‚</p><p>å½“Point.Distanceè¢«ç¬¬ä¸€ä¸ªåŒ…è£…æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå®ƒçš„æ¥æ”¶å™¨å€¼æ˜¯p.Pointï¼Œè€Œä¸æ˜¯pï¼Œå½“ç„¶äº†ï¼Œåœ¨Pointç±»çš„æ–¹æ³•é‡Œï¼Œä½ æ˜¯è®¿é—®ä¸åˆ°ColoredPointçš„ä»»ä½•å­—æ®µçš„ã€‚</p><p>åœ¨ç±»å‹ä¸­å†…åµŒçš„åŒ¿åå­—æ®µä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå‘½åç±»å‹çš„æŒ‡é’ˆï¼Œè¿™ç§æƒ…å†µä¸‹å­—æ®µå’Œæ–¹æ³•ä¼šè¢«é—´æ¥åœ°å¼•å…¥åˆ°å½“å‰çš„ç±»å‹ä¸­(è¯‘æ³¨ï¼šè®¿é—®éœ€è¦é€šè¿‡è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡å»å–)ã€‚æ·»åŠ è¿™ä¸€å±‚é—´æ¥å…³ç³»è®©æˆ‘ä»¬å¯ä»¥å…±äº«é€šç”¨çš„ç»“æ„å¹¶åŠ¨æ€åœ°æ”¹å˜å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚ä¸‹é¢è¿™ä¸ªColoredPointçš„å£°æ˜å†…åµŒäº†ä¸€ä¸ª*Pointçš„æŒ‡é’ˆã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> car <span class="hljs-keyword">struct</span> &#123;<br>e     engine<br>price <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> engine <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>size <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e engine)</span></span> start() &#123;<br>fmt.Println(<span class="hljs-string">&quot;engine start...&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ChangeName</span><span class="hljs-params">(e engine, newName <span class="hljs-type">string</span>)</span></span> &#123;<br>e.name = newName<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>car := &amp;car&#123;<br>e: engine&#123;<br>name: <span class="hljs-string">&quot;HONDA&quot;</span>,<br>size: <span class="hljs-number">200</span>,<br>&#125;,<br>price: <span class="hljs-number">9999</span>,<br>&#125;<br>car.e.start()<br>ChangeName(car.e, <span class="hljs-string">&quot;KTM&quot;</span>)<br>fmt.Println(car.e.name)<br>&#125;<br><br>engine start...<br>HONDA<br></code></pre></td></tr></table></figure><p>è¿™æ—¶å¦‚æœç»“æ„ä½“ä½œä¸ºå½¢å‚ä¼ å…¥å‡½æ•°ä¸­ï¼Œå½“æ—¶ä¸æ˜¯æŒ‰ç…§åœ°å€ä¼ é€’è€Œæ˜¯å€¼ä¼ é€’æ˜¯æ— æ³•ä¿®æ”¹çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> car <span class="hljs-keyword">struct</span> &#123;<br>e     *engine<br>price <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> engine <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>size <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e engine)</span></span> start() &#123;<br>fmt.Println(<span class="hljs-string">&quot;engine start...&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ChangeName</span><span class="hljs-params">(e *engine, newName <span class="hljs-type">string</span>)</span></span> &#123;<br>e.name = newName<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>car := &amp;car&#123;<br>e: &amp;engine&#123;<br>name: <span class="hljs-string">&quot;HONDA&quot;</span>,<br>size: <span class="hljs-number">200</span>,<br>&#125;,<br>price: <span class="hljs-number">9999</span>,<br>&#125;<br>car.e.start()<br>ChangeName(car.e, <span class="hljs-string">&quot;KTM&quot;</span>)<br>fmt.Println(car.e.name)<br>&#125;<br><br>engine start...<br>KTM<br></code></pre></td></tr></table></figure><p>è¿™æ—¶æ˜¯åœ°å€ä¼ é€’æ‰èƒ½æ”¹å˜å†…éƒ¨çš„å€¼</p><ul><li><code>Set()</code> æ–¹æ³•å®ä¾‹åŒ–äº†ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œå¹¶ä¸”æ·»åŠ äº†ä¼ å…¥çš„èŠ‚ç‚¹ã€‚</li><li>å¹¶ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ª HTTP å®¢æˆ·ç«¯ <code>httpGetter</code>ã€‚</li><li><code>PickerPeer()</code> åŒ…è£…äº†ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„ <code>Get()</code> æ–¹æ³•ï¼Œæ ¹æ®å…·ä½“çš„ keyï¼Œé€‰æ‹©èŠ‚ç‚¹ï¼Œè¿”å›èŠ‚ç‚¹å¯¹åº”çš„ HTTP å®¢æˆ·ç«¯ã€‚</li></ul><p>è‡³æ­¤ï¼ŒHTTPPool æ—¢å…·å¤‡äº†æä¾› HTTP æœåŠ¡çš„èƒ½åŠ›ï¼Œä¹Ÿå…·å¤‡äº†æ ¹æ®å…·ä½“çš„ keyï¼Œåˆ›å»º HTTP å®¢æˆ·ç«¯ä»è¿œç¨‹èŠ‚ç‚¹è·å–ç¼“å­˜å€¼çš„èƒ½åŠ›ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123; <br>    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘½ä»¤è¡Œkeyï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤æ˜¯ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ .exe -h æç¤º </span><br>    <span class="hljs-keyword">var</span> user = flag.String(<span class="hljs-string">&quot;user&quot;</span>ï¼Œ <span class="hljs-string">&quot;root&quot;</span>ï¼Œ <span class="hljs-string">&quot;ç”¨æˆ·å&quot;</span>) <br>    <span class="hljs-keyword">var</span> port = flag.Int(<span class="hljs-string">&quot;port&quot;</span>ï¼Œ <span class="hljs-number">3306</span>ï¼Œ <span class="hljs-string">&quot;ç«¯å£&quot;</span>) <br>    <span class="hljs-keyword">var</span> ip = flag.String(<span class="hljs-string">&quot;ip&quot;</span>ï¼Œ <span class="hljs-string">&quot;localhost&quot;</span>ï¼Œ <span class="hljs-string">&quot;mysql ip&quot;</span>) <br> <br>    <span class="hljs-comment">//å¿…é¡»ä½¿ç”¨flag.Parse()è§£æä¸€ä¸‹å‘½ä»¤è¡Œå‚æ•° </span><br>    flag.Parse() <br>    <span class="hljs-comment">//flag.Typeè¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå¿…é¡»é€šè¿‡ *å˜é‡å–å€¼ </span><br>    fmt.Println(*userï¼Œ*portï¼Œ*ip) <br>&#125; <br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æƒ…å¢ƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">trap</span> <span class="hljs-string">&#x27;rm -f &quot;/var/tmp/CJK.text&quot;&#x27;</span> EXIT<br><span class="hljs-comment">#ç•¶è…³æœ¬é‡ä¸Š EXIT å°±æœƒåŸ·è¡Œ rm -f &quot;/var/tmp/CJK.txt&quot;ã€‚</span><br></code></pre></td></tr></table></figure><p>å¸¸ç”¨æ–¼é€€å‡ºè…³æœ¬æ™‚æ¸…ç†æª”æ¡ˆï¼Œæˆ–æ˜¯åŸ·è¡ŒéŒ¯èª¤æ™‚é€€å‡ºè…³æœ¬ã€‚</p><p>å¦‚æœç•¶é€€å‡ºè¦åŸ·è¡Œå¤šè¡ŒæŒ‡ä»¤å¯ä»¥ä½¿ç”¨å‘¼å«å‡½å¼çš„æ–¹å¼ï¼Œä½¿ç”¨èˆ‰ä¾‹å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-function"><span class="hljs-title">Exit_safely</span></span> ()&#123;<br>  command1<br>  command2<br>  command3<br>&#125;<br><span class="hljs-built_in">trap</span> Exit_safely EXIT<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">trap</span> <span class="hljs-string">&quot;rm server;kill 0&quot;</span> EXIT<br><br>go build -o server<br>./server -port=8001 &amp;<br>./server -port=8002 &amp;<br>./server -port=8003 -api=1 &amp;<br><br><span class="hljs-built_in">sleep</span> 2<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&gt;&gt;&gt; start test&quot;</span><br>curl <span class="hljs-string">&quot;http://localhost:9999/api?key=Tom&quot;</span><br>curl <span class="hljs-string">&quot;http://localhost:9999/api?key=Tom&quot;</span><br>curl <span class="hljs-string">&quot;http://localhost:9999/api?key=Tom&quot;</span><br><br><span class="hljs-built_in">wait</span><br></code></pre></td></tr></table></figure><p>wait(å‚æ•°)  ä½¿ç”¨ wait æ˜¯åœ¨ç­‰å¾…ä¸Šä¸€æ‰¹æˆ–ä¸Šä¸€ä¸ªè„šæœ¬æ‰§è¡Œå®Œï¼ˆå³ä¸Šä¸€ä¸ªçš„è¿›ç¨‹ç»ˆæ­¢ï¼‰ï¼Œå†æ‰§è¡Œwaitä¹‹åçš„å‘½ä»¤ã€‚</p><h2 id="Day-6-é˜²æ­¢ç¼“å­˜å‡»ç©¿"><a href="#Day-6-é˜²æ­¢ç¼“å­˜å‡»ç©¿" class="headerlink" title="Day 6 é˜²æ­¢ç¼“å­˜å‡»ç©¿"></a>Day 6 é˜²æ­¢ç¼“å­˜å‡»ç©¿</h2><blockquote><p><strong>ç¼“å­˜é›ªå´©</strong>ï¼šç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚ç¼“å­˜é›ªå´©é€šå¸¸å› ä¸ºç¼“å­˜æœåŠ¡å™¨å®•æœºã€ç¼“å­˜çš„ key è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ç­‰å¼•èµ·ã€‚</p><p><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šä¸€ä¸ªå­˜åœ¨çš„keyï¼Œåœ¨ç¼“å­˜è¿‡æœŸçš„ä¸€åˆ»ï¼ŒåŒæ—¶æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šå‡»ç©¿åˆ° DB ï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ã€‚</p><p><strong>ç¼“å­˜ç©¿é€</strong>ï¼šæŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œå› ä¸ºä¸å­˜åœ¨åˆ™ä¸ä¼šå†™åˆ°ç¼“å­˜ä¸­ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šå»è¯·æ±‚ DBï¼Œå¦‚æœç¬é—´æµé‡è¿‡å¤§ï¼Œç©¿é€åˆ° DBï¼Œå¯¼è‡´å®•æœºã€‚</p></blockquote><h2 id="Day-7-ä½¿ç”¨-Protobuf-é€šä¿¡"><a href="#Day-7-ä½¿ç”¨-Protobuf-é€šä¿¡" class="headerlink" title="Day 7 ä½¿ç”¨ Protobuf é€šä¿¡"></a>Day 7 ä½¿ç”¨ Protobuf é€šä¿¡</h2><p>protobuf å¹¿æ³›åœ°åº”ç”¨äºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨(RPC) çš„äºŒè¿›åˆ¶ä¼ è¾“ï¼Œä½¿ç”¨ protobuf çš„ç›®çš„éå¸¸ç®€å•ï¼Œä¸ºäº†è·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚ä¼ è¾“å‰ä½¿ç”¨ protobuf ç¼–ç ï¼Œæ¥æ”¶æ–¹å†è¿›è¡Œè§£ç ï¼Œå¯ä»¥æ˜¾è‘—åœ°é™ä½äºŒè¿›åˆ¶ä¼ è¾“çš„å¤§å°ã€‚å¦å¤–ä¸€æ–¹é¢ï¼Œprotobuf å¯éå¸¸é€‚åˆä¼ è¾“ç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äºé€šä¿¡å­—æ®µçš„æ‰©å±•ã€‚</p><p>ä½¿ç”¨ protobuf ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ 2 æ­¥ï¼š</p><ul><li>æŒ‰ç…§ protobuf çš„è¯­æ³•ï¼Œåœ¨ <code>.proto</code> æ–‡ä»¶ä¸­å®šä¹‰æ•°æ®ç»“æ„ï¼Œå¹¶ä½¿ç”¨ <code>protoc</code> ç”Ÿæˆ Go ä»£ç ï¼ˆ<code>.proto</code>æ–‡ä»¶æ˜¯è·¨å¹³å°çš„ï¼Œè¿˜å¯ä»¥ç”Ÿæˆ Cã€Java ç­‰å…¶ä»–æºç æ–‡ä»¶ï¼‰ã€‚</li><li>åœ¨é¡¹ç›®ä»£ç ä¸­å¼•ç”¨ç”Ÿæˆçš„ Go ä»£ç ã€‚</li></ul><p><code>option go_package = &quot;./&quot;; // æŒ‡å®šç”Ÿæˆçš„goæ–‡ä»¶æ‰€åœ¨path</code></p><h1 id="ORMæ¡†æ¶-GeeORM"><a href="#ORMæ¡†æ¶-GeeORM" class="headerlink" title="ORMæ¡†æ¶ - GeeORM"></a>ORMæ¡†æ¶ - GeeORM</h1><h2 id="Day-0-åºè¨€"><a href="#Day-0-åºè¨€" class="headerlink" title="Day 0 åºè¨€"></a>Day 0 åºè¨€</h2><p>goçš„åå°„</p><ul><li><code>reflect.ValueOf()</code> è·å–æŒ‡é’ˆå¯¹åº”çš„åå°„å€¼ã€‚</li><li><code>reflect.Indirect()</code> è·å–æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„åå°„å€¼ã€‚</li><li><code>(reflect.Type).Name()</code> è¿”å›ç±»å(å­—ç¬¦ä¸²)ã€‚</li><li><code>(reflect.Type).Field(i)</code> è·å–ç¬¬ i ä¸ªæˆå‘˜å˜é‡ã€‚</li></ul><p>å¹¶å‘åç¨‹ä¹‹é—´ä¸éœ€è¦æ¶ˆæ¯ä¼ é€’ï¼Œéå¸¸é€‚åˆ <code>sync.WaitGroup</code>ã€‚</p><ul><li>wg.Add(1) é”åŠ 1ã€‚</li><li>wg.Wait() é˜»å¡ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ã€‚</li><li>wg.Done() é”å‡1ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Backend development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TCP, UDP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golangåŸç†</title>
    <link href="/2022/06/18/golang%E5%8E%9F%E7%90%86/"/>
    <url>/2022/06/18/golang%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Slice"><a href="#1-Slice" class="headerlink" title="1. Slice"></a>1. Slice</h1><p>sliceçš„æ‰©å®¹çš„å†…å­˜åˆ†é…ï¼Œä¸¤å¤§éƒ¨åˆ†ï¼Œå…ˆè¿›è¡Œå®¹é‡é¢„ä¼°ï¼Œå†è¿›è¡Œå†…å­˜åˆ†é…ã€‚</p><p>ç¬¬ä¸€æ­¥æŸ¥çœ‹æ˜¯å¦æ˜¯æ‰©å®¹åçš„capæ˜¯å¦å¤§äºåŸæ¥capçš„ä¸¤å€ï¼Œå¦‚æœå¤§äºåˆ™æ›´æ–°ä¸ºæ‰©å®¹åcapï¼›å¦‚æœå°äºçš„è¯åˆ™è¿›è¡Œç¬¬äºŒæ­¥ã€‚</p><p>ç¬¬äºŒæ­¥æŸ¥çœ‹æ›´æ–°åçš„capçš„å¤§å°ï¼Œå¦‚æœcap &lt; 1024 åˆ™ cap <em> 2ï¼Œå¦‚æœcap &gt; 1024 åˆ™ cap </em> 1.25ã€‚</p><p>ç¬¬ä¸‰æ­¥æ ¹æ®å†…å­˜åˆ†é…è¿›è¡Œé€‰æ‹©ï¼Œå†…å­˜å ç”¨ä¸ºcap * å¯¹åº”æ•°æ®ç»“æ„çš„å­—èŠ‚æ•°ï¼Œå‘ä¸Šå–æ•´</p><h1 id="2-ç»“æ„ä½“å’Œå†…å­˜å¯¹é½"><a href="#2-ç»“æ„ä½“å’Œå†…å­˜å¯¹é½" class="headerlink" title="2. ç»“æ„ä½“å’Œå†…å­˜å¯¹é½"></a>2. ç»“æ„ä½“å’Œå†…å­˜å¯¹é½</h1><p>8æ ¹åœ°å€æ€»çº¿ï¼Œå¯¹åº”256ä¸ªåœ°å€ï¼Œå¯ä»¥æ“ä½œ256ä¸ªåœ°å€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨çš„æœ€é«˜çš„å†…å­˜æ•°ä¸º256byte</p><p>32æ ¹åœ°å€æ€»çº¿ï¼Œå¯¹åº”2^32 - 1ä¸ªåœ°å€ï¼Œå¯ä»¥æ“ä½œ4Gä¸ªåœ°å€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨çš„æœ€é«˜çš„å†…å­˜æ•°ä¸º4G</p><p>ï¼ˆ<strong>32ä½ç³»ç»Ÿ</strong> <strong>32ä½ç³»ç»Ÿ</strong>ä½¿ç”¨<strong>32ä½</strong>åœ°å€çº¿çš„<strong>æœ€å¤§</strong>å¯»å€ç©ºé—´ä¸º2çš„<strong>32</strong>æ¬¡æ–¹bytesï¼Œè®¡ç®—åå³4294967296 Bytesï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„4096MBï¼Œ<strong>32ä½</strong>åœ°å€çº¿çš„å¯»å€ç©ºé—´å°é¡¶å³ä¸º4GBï¼‰</p><p>64æ ¹åœ°å€æ€»çº¿ï¼Œå¯¹åº”2^64 - 1ä¸ªåœ°å€ï¼Œå¯ä»¥æ“ä½œ128Gä¸ªåœ°å€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨çš„æœ€é«˜çš„å†…å­˜æ•°ä¸º128G</p><p>ï¼ˆç›¸å¯¹æ¥è¯´ï¼Œ<strong>64ä½</strong>æ“ä½œ<strong>ç³»ç»Ÿ</strong>æ”¯æŒçš„<strong>å†…å­˜</strong>å¤§å°æ˜¯2çš„<strong>64</strong>æ¬¡æ–¹ï¼Œç›¸å½“äº128GB<strong>å†…å­˜</strong>ï¼Œ<strong>æœ€å¤§</strong>æ”¯æŒ32<strong>ä½ç³»ç»Ÿ</strong>çš„32å€æ•°ï¼Œç°åœ¨æ¥è¯´ï¼Œ128GB<strong>å†…å­˜</strong>æ”¯æŒæ˜¯ç†è®ºå€¼ï¼Œä½†æ˜¯åœ¨å®é™…è¿ç”¨è¿‡ç¨‹ä¸­å¾ˆå°‘éœ€è¦è¿™ä¹ˆå¤§çš„ï¼Œç°é˜¶æ®µä¸»æµç”µè„‘ä¸€èˆ¬éƒ½æ˜¯8GB<strong>å†…å­˜</strong>å¤§ä¸€äº›16GB/32GBï¼‰</p><h2 id="å†…å­˜å¯¹é½"><a href="#å†…å­˜å¯¹é½" class="headerlink" title="å†…å­˜å¯¹é½"></a>å†…å­˜å¯¹é½</h2><p>ç¼–ç¨‹è¯­è¨€è§„å®šè‡ªå·±çš„æ•°æ®ç±»å‹çš„é•¿åº¦ï¼Œæ¯”å¦‚int16é•¿åº¦ä¸º2å­—èŠ‚ï¼ˆ2*8byteï¼‰</p><p><strong>æ¢ç®—å…³ç³» </strong> 8bit(ä½)=1Byte(<strong>å­—èŠ‚</strong>)ï¼› 1024Byte(<strong>å­—èŠ‚</strong>)=1KBï¼› 1024KB=1MBï¼› 1024MB=1GB</p><p>1å­—èŠ‚ï¼ˆbyteï¼‰= 8ä½ï¼ˆbitï¼‰</p><p>RegSizeæ˜¯å¯¹é½è¾¹ç•Œ</p><div class="table-container"><table><thead><tr><th></th><th>64ä½å¹³å°</th><th></th><th>32ä½å¹³å°</th><th></th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å¤§å°</td><td>RegSize</td><td>å¤§å°</td><td>RegSize</td></tr><tr><td>int8</td><td>1 byte âœ…</td><td>8 byte</td><td>1 byte âœ…</td><td>4 byte</td></tr><tr><td>int16</td><td>2 byte âœ…</td><td>8 byte</td><td>2 byte âœ…</td><td>4 byte</td></tr><tr><td>int32</td><td>4 byte âœ…</td><td>8 byte</td><td>4 byte âœ…</td><td>4 byte</td></tr><tr><td>int64</td><td>8 byte âœ…</td><td>8 byte</td><td>8 byte</td><td>4 byte âœ…</td></tr><tr><td>string</td><td>16 byte</td><td>8 byte âœ…</td><td>8 byte</td><td>4 byte âœ…</td></tr><tr><td>Slice</td><td>24 byte</td><td>8 byte âœ…</td><td>12 byte</td><td>4 byte âœ…</td></tr></tbody></table></div><p>è¿™æ ·çš„å¯¹é½æ–¹å¼ä¸ä¼šæµªè´¹å†…å­˜</p><h2 id="ç»“æ„ä½“çš„å†…å­˜å¯¹é½"><a href="#ç»“æ„ä½“çš„å†…å­˜å¯¹é½" class="headerlink" title="ç»“æ„ä½“çš„å†…å­˜å¯¹é½"></a>ç»“æ„ä½“çš„å†…å­˜å¯¹é½</h2><p><img src="https://cdn.jsdeliver.net/gh/PanyuHaa/PicGo/img/Screen%20Shot%202022-06-21%20at%2015.03.58.png" alt="Screen Shot 2022-06-21 at 15.03.58"></p><p>å¤§äº8byteçš„ä¸€å®šè¦å†…å­˜å¯¹é½ï¼Œè¦ä¸åç»­æŸ¥æ‰¾çš„æ€§èƒ½ä¼šé™ä½ï¼Œä¸æ˜¯æ•´æ•°å€çš„è¯å°±ä¼šæŸ¥è¯¢ä¸¤æ¬¡ï¼ˆç”šè‡³æ›´å¤šï¼‰å†æ‹¼æ¥ã€‚</p><p>ç»“æ„ä½“éƒ½æ˜¯æŒ‰é¡ºåºè¿ç»­å­˜å‚¨çš„ã€‚</p><h1 id="3-map"><a href="#3-map" class="headerlink" title="3. map"></a>3. map</h1><p><a href="https://www.cnblogs.com/qcrao-2018/p/10903807.html">https://www.cnblogs.com/qcrao-2018/p/10903807.html</a></p><p>å“ˆå¸Œæ”¾å…¥çš„æ–¹æ³•ï¼š1ã€å–æ¨¡æ³• 2ã€ä¸è¿ç®—</p><p>è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•ï¼š1ã€å¼€æ”¾åœ°å€æ³• 2ã€æ‹‰é“¾æ³• </p><p>å“ˆå¸Œå†²çªå°±ç®—èƒ½è§£å†³ä½†æ˜¯ä»–çš„å­˜åœ¨å°±æ˜¯ä¼šå½±å“é€Ÿåº¦ï¼Œé€šå¸¸æŠŠå­˜å‚¨é”®å€¼å¯¹çš„æ•°ç›®ä¸æ¡¶çš„æ•°ç›®æœ‰æ¯”å€¼ï¼Œç§°ä¸ºè´Ÿè½½å› å­ã€‚</p><p>è´Ÿè½½å› å­æ˜¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ‰©å®¹çš„æ ‡å‡†ã€‚</p><p>æ¸è¿›å¼æ‰©å®¹ï¼Œå¯ä»¥é¿å…ä¸€æ¬¡æ€§æ‰©å®¹å¸¦æ¥çš„æ€§èƒ½ç¬æ—¶æŠ–åŠ¨ã€‚ä»–çš„è¿‡ç¨‹ï¼šå…ˆåˆ†é…è¶³å¤Ÿå¤šçš„æ–°æ¡¶ï¼Œç”¨ä¸€ä¸ªå­—æ®µè®°å½•æ—§æ¡¶çš„ä½ç½®ï¼Œè¿˜æœ‰å½“å‰è¿ç§»çš„è¿›åº¦ï¼Œæ¯æ¬¡è¯»å†™çš„æ—¶å€™éƒ½è¿›è¡Œä¸€éƒ¨åˆ†è¿ç§»ï¼Œç­‰åˆ°å…¨éƒ¨è¿ç§»å®Œæˆåå°±æ˜¯æ‰©å®¹å®Œæ¯•ã€‚</p><p><img src="https://cdn.jsdeliver.net/gh/PanyuHaa/PicGo/img/hmap.png" alt="hmap"></p><p><strong>tophashæ˜¯</strong>ä¸€ä¸ªé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œå®ƒä¸ä»…ä»…ç”¨æ¥å­˜æ”¾keyçš„å“ˆå¸Œé«˜8ä½ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹å®ƒè¿˜å¯ä»¥æ ‡è®°è¿ç§»çŠ¶æ€ï¼Œbucketæ˜¯å¦ä¸ºç©ºç­‰ã€‚</p><p>å–k1çš„é«˜å…«ä½ï¼ˆbitï¼‰hashå€¼æ”¾åœ¨tophashé‡Œé¢ã€‚</p><p><code>bmap</code> å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œæ¡¶â€ï¼Œæ¡¶é‡Œé¢ä¼šæœ€å¤šè£… 8 ä¸ª keyï¼Œè¿™äº› key ä¹‹æ‰€ä»¥ä¼šè½å…¥åŒä¸€ä¸ªæ¡¶ï¼Œæ˜¯å› ä¸ºå®ƒä»¬ç»è¿‡å“ˆå¸Œè®¡ç®—åï¼Œå“ˆå¸Œç»“æœæ˜¯â€œä¸€ç±»â€çš„ã€‚åœ¨æ¡¶å†…ï¼Œåˆä¼šæ ¹æ® key è®¡ç®—å‡ºæ¥çš„ hash å€¼çš„é«˜ 8 ä½æ¥å†³å®š key åˆ°åº•è½å…¥æ¡¶å†…çš„å“ªä¸ªä½ç½®ï¼ˆä¸€ä¸ªæ¡¶å†…æœ€å¤šæœ‰8ä¸ªä½ç½®ï¼‰ã€‚</p><p><img src="https://user-images.githubusercontent.com/7698088/57576986-acd87600-749f-11e9-8710-75e423c7efdb.png" alt="hashmap bmap"></p><p><strong>æ‰©å®¹è§„åˆ™</strong></p><p><code>B</code> æ˜¯ buckets æ•°ç»„çš„é•¿åº¦çš„å¯¹æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ buckets æ•°ç»„çš„é•¿åº¦å°±æ˜¯ 2^Bã€‚</p><p>count/(2^B) &gt; 6.5 â€”â€”â€”-&gt; ç¿»å€æ‰©å®¹hmap.B++</p><p>LoadFactoræ²¡è¶…æ ‡ â€”â€”â€”â€”&gt; ç­‰é‡æ‰©å®¹</p><p>noverflow è¾ƒå¤š B &lt;= 15 noverflow &gt;= 2^B; B &gt; 15 noverflow &gt;= 2^15</p><p>ç­‰é‡æ‰©å®¹çš„æ„ä¹‰ï¼Œå› ä¸ºä¸éœ€è¦å¤ªå¤šçš„æº¢å‡ºæ¡¶ï¼Œæ‰€ä»¥æ–°æ¡¶å¯ä»¥æ•´åˆä¹‹å‰è¿˜å­˜åœ¨çš„KVï¼Œå¯ä»¥åˆ é™¤ä¹‹å‰æ®‹å­˜çš„å†…éƒ¨ç¢ç‰‡</p><h1 id="4-å‡½æ•°è°ƒç”¨æ ˆ"><a href="#4-å‡½æ•°è°ƒç”¨æ ˆ" class="headerlink" title="4. å‡½æ•°è°ƒç”¨æ ˆ"></a>4. å‡½æ•°è°ƒç”¨æ ˆ</h1><p>callæŒ‡ä»¤è®°å½•æœ‰å‡½æ•°è°ƒç”¨å­˜åœ¨ï¼Œretç”¨æ¥è¿”å›å‡½æ•°è°ƒç”¨çš„ä½ç½®ã€‚</p><p>å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå±€éƒ¨å˜é‡ï¼Œå‚æ•°å’Œè¿”å›å€¼ï¼Œéƒ½å­˜åœ¨è™šæ‹Ÿåœ°å€ä¸­çš„æ ˆã€‚ä¸Šé¢æ˜¯é«˜åœ°å€</p><p><a href="https://static.cyub.vip/images/202105/go-stack-sum.png"><img src="https://static.cyub.vip/images/202105/go-stack-sum.png" alt="mainå‡½æ•°è°ƒç”¨æ ˆ"></a></p><p>æ ˆåº•ä¹Ÿç§°æ ˆåŸºbpï¼Œå±€éƒ¨å˜é‡ï¼Œè¿”å›å€¼ï¼Œå‚æ•°ï¼Œè¿”å›åœ°å€</p><p>æ ˆæŒ‡é’ˆspï¼Œåç§» + sp</p><p>goä¸­çš„å‡½æ•°æ ˆçš„åˆ†é…æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè¿™æ ·ä¸ä¼šå‡ºç°å‡½æ•°æ ˆæº¢å‡ºçš„é—®é¢˜ã€‚</p><p><img src="/Users/peterpan/Library/Application Support/typora-user-images/Screen Shot 2022-06-21 at 16.51.03.png" alt="Screen Shot 2022-06-21 at 16.51.03"></p><p>å…ˆå­˜å‚¨ä¸‹ä¸€ä¸ªè¦å»çš„ä½ç½®ï¼Œç„¶åå¼€å§‹è·³è½¬åˆ°è°ƒç”¨å¤„ç»§ç»­æ‰§è¡Œï¼Œä¸è¿‡åœ¨æ ˆåº•çš„ä½ç½®çš„é«˜åœ°å€å¤„ï¼Œå­˜å…¥è°ƒç”¨è€…çš„æ ˆåŸºå’Œå‘ä¸‹ç§»åŠ¨çš„ç§»åŠ¨ä½ç½®ï¼ˆç”¨äºå‘ä¸Šç§»åŠ¨å›å»ï¼‰ï¼Œç„¶åæ‰§è¡Œretè¿”å›ä¹‹å‰å­˜å‚¨çš„çŠ¶æ€ã€‚æœ¬è´¨ä¸Šæ˜¯å®ç°äº†ä¸€ä¸ªè·³è½¬çš„è¿‡ç¨‹ã€‚</p><p>ä¹‹æ‰€ä»¥å€¼æ‹·è´ä¸èƒ½å¤Ÿæ”¹å˜å…·ä½“çš„å€¼çš„åŸå› æ˜¯ï¼Œå€¼æ‹·è´çš„è¯ä»–çš„å‚æ•°æ˜¯å±€éƒ¨å˜é‡çš„å€¼è€Œä¸æ˜¯æŒ‡å‘ä»–ä»¬çš„åœ°å€ï¼Œæ‰€ä»¥ä¸¾ä¾‹swapå‡½æ•°ï¼Œä»–çš„ç¡®äº¤æ¢äº†ï¼Œä½†äº¤æ¢çš„åªæ˜¯å‚æ•°é‡Œé¢çš„aå’Œbï¼Œå¹¶æ²¡æœ‰å¯¹å±€éƒ¨å˜é‡çš„aå’Œbçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œæ‰€ä»¥æ²¡æœ‰å˜åŒ–ã€‚</p><p><strong>åŒ¿åè¿”å›å€¼</strong>â€”â€”è¿”å›å€¼å…ˆèµ‹å€¼ï¼Œå†è°ƒç”¨deferå‡½æ•°ã€‚</p><p><strong>å‘½åè¿”å›å€¼</strong>â€”â€”å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„å‚æ•°bä¸”deferé‡Œé¢æœ‰å¯¹bçš„æ“ä½œï¼Œé‚£ä¹ˆdeferé‡Œé¢çš„è°ƒç”¨æ˜¯ä¼šå½±å“åˆ°è¿”å›å€¼çš„ã€‚</p><p>å¦‚æœAè°ƒç”¨äº†å‡½æ•°Bå’ŒCï¼Œé‚£ä¹ˆå‡½æ•°æ ˆå¸§çš„å¤§å°è¦ä¾ç…§æœ€å¤§çš„ç©ºé—´éœ€æ±‚å‡½æ•°ï¼Œå¹¶ä¸”æ ˆé¡¶æŒ‡é’ˆçš„ä½ç½®æ˜¯ç»Ÿä¸€çš„ï¼Œè¿™æ ·ä¼šæ›´æ–¹ä¾¿åç»­çš„è™šæ‹Ÿåœ°å€æŸ¥è¯¢ã€‚ï¼ˆæ ˆåº•åœ¨ä¸Šï¼Œæ ˆé¡¶åœ¨ä¸‹ï¼‰</p><h1 id="5-é—­åŒ…"><a href="#5-é—­åŒ…" class="headerlink" title="5. é—­åŒ…"></a>5. é—­åŒ…</h1><p>å †å­˜å‚¨çš„æ˜¯å‡½æ•°çš„åœ°å€</p><p>é—­åŒ…å‡½æ•°é‡Œé¢çš„å˜é‡è¦å’Œå¤–éƒ¨å‡½æ•°ä¿æŒä¸€è‡´ï¼Œä»–ä»¬ä½¿ç”¨åŒä¸€ç‰‡å˜é‡</p><h1 id="6-æ–¹æ³•"><a href="#6-æ–¹æ³•" class="headerlink" title="6. æ–¹æ³•"></a>6. æ–¹æ³•</h1><h1 id="7-defer"><a href="#7-defer" class="headerlink" title="7. defer"></a>7. defer</h1><p>deferæ˜¯ç”¨å¤´æ’æ³•é“¾è¡¨è¿æ¥èµ·æ¥çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Backend development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Backend development, Golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>goè¯­è¨€ç¬”è®°</title>
    <link href="/2022/06/07/go%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/06/07/go%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€æ§åˆ¶å¹¶å‘çš„ä¸¤ç§æ–¹å¼"><a href="#ä¸€ã€æ§åˆ¶å¹¶å‘çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="ä¸€ã€æ§åˆ¶å¹¶å‘çš„ä¸¤ç§æ–¹å¼"></a>ä¸€ã€æ§åˆ¶å¹¶å‘çš„ä¸¤ç§æ–¹å¼</h1><h2 id="1-ä½¿ç”¨WaitGroup"><a href="#1-ä½¿ç”¨WaitGroup" class="headerlink" title="1. ä½¿ç”¨WaitGroup"></a>1. ä½¿ç”¨WaitGroup</h2><p><strong>åº”ç”¨åœºæ™¯ï¼šå¤šä¸ªGoroutineæ‰§è¡ŒåŒä¸€ä»¶äº‹æƒ…</strong></p><figure class="highlight go"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>   <span class="hljs-keyword">var</span> wg sync.WaitGroup<br><br>   wg.Add(<span class="hljs-number">2</span>)<br>   <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>      time.Sleep(<span class="hljs-number">2</span> * time.Second)<br>      fmt.Println(<span class="hljs-string">&quot;job 1 done.&quot;</span>)<br>      wg.Done()<br>   &#125;()<br>   <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>      time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>      fmt.Println(<span class="hljs-string">&quot;job 2 done.&quot;</span>)<br>      wg.Done()<br>   &#125;()<br>   wg.Wait()<br>   fmt.Println(<span class="hljs-string">&quot;All Done.&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¦‚ä½•ä¸»åŠ¨åœæ­¢å‘¢ï¼Ÿ</strong><br>ä½¿ç”¨Channelï¼ŒChannel + Selectçš„æ–¹å¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>stop := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)<br><br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> &lt;- stop:<br>fmt.Println(<span class="hljs-string">&quot;got the stop channel&quot;</span>)<br><span class="hljs-keyword">return</span><br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;still working&quot;</span>)<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br>&#125;<br>&#125;()<br><br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>fmt.Println(<span class="hljs-string">&quot;stop the goroutine&quot;</span>)<br>stop &lt;- <span class="hljs-literal">true</span><br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šä¸ªGoroutineæˆ–Goroutineå†…åˆæœ‰Goroutine</p><p><img src="/Users/peterpan/Library/Application Support/typora-user-images/Screen Shot 2022-06-07 at 22.49.10.png" alt="Screen Shot 2022-06-07 at 22.49.10"></p><p>è¿™ç§æ–¹å¼å¾ˆéš¾ç”¨åµŒå¥—çš„ã€‚</p><h2 id="2-ä½¿ç”¨Context"><a href="#2-ä½¿ç”¨Context" class="headerlink" title="2. ä½¿ç”¨Context"></a>2. ä½¿ç”¨Context</h2><p>ç®€å•æ”¹å†™æ²¡æœ‰åµŒå¥—ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ctx, cancel := context.WithCancel(context.Background()) <span class="hljs-comment">// context.Background() æ˜¯rootèŠ‚ç‚¹ï¼Œå°†rootèŠ‚ç‚¹æ”¾åœ¨channelé‡Œ</span><br><br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> &lt;- ctx.Done():<br>fmt.Println(<span class="hljs-string">&quot;got the stop channel&quot;</span>)<br><span class="hljs-keyword">return</span><br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;still working&quot;</span>)<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br>&#125;<br>&#125;()<br><br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>fmt.Println(<span class="hljs-string">&quot;stop the goroutine&quot;</span>)<br>cancel()<br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šä¸ªè¿›ç¨‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ctx, cancel := context.WithCancel(context.Background()) <span class="hljs-comment">// context.Background() æ˜¯rootèŠ‚ç‚¹ï¼Œå°†rootèŠ‚ç‚¹æ”¾åœ¨channelé‡Œ</span><br><br><span class="hljs-keyword">go</span> worker(ctx, <span class="hljs-string">&quot;node01&quot;</span>)<br><span class="hljs-keyword">go</span> worker(ctx, <span class="hljs-string">&quot;node02&quot;</span>)<br><span class="hljs-keyword">go</span> worker(ctx, <span class="hljs-string">&quot;node03&quot;</span>)<br><br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>fmt.Println(<span class="hljs-string">&quot;stop the goroutine&quot;</span>)<br>cancel()<br>time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>&#125;<br><br><span class="hljs-comment">// å‚æ•°ä¸ºcontextå’Œè¿›ç¨‹çš„name</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ctx context.Context, name <span class="hljs-type">string</span>)</span></span>  &#123;<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> &lt;- ctx.Done():<br>fmt.Println(<span class="hljs-string">&quot;got the stop channel&quot;</span>)<br><span class="hljs-keyword">return</span><br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;still working&quot;</span>)<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br>&#125;<br>&#125;()<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="äºŒã€å¹¶å‘æ¨¡å‹"><a href="#äºŒã€å¹¶å‘æ¨¡å‹" class="headerlink" title="äºŒã€å¹¶å‘æ¨¡å‹"></a>äºŒã€å¹¶å‘æ¨¡å‹</h1><p>poolèµ„æºæ± </p><p>åŒ…å«ï¼šèµ„æºresources (chan io.Closer)ã€å·¥å‚å‡½æ•°factoryå·¥å‚æ¨¡å¼äº§ç”Ÿpoolé€šè¿‡newï¼ˆï¼‰ã€closedåˆ¤æ–­poolçš„å¼€å…³ã€å’Œé”</p><p>ä¿¡å·é‡æ¨¡å¼ï¼šå°±æ˜¯ç»™ä¸€ä¸ªä¿¡å·é‡çš„æºå¤´ï¼Œç„¶åä¼ é€’ä¸‹å»ç›´åˆ°è¿˜ç»™main()ï¼Œå› ä¸ºmain()ä¹Ÿå¯ä»¥çœ‹æˆåç¨‹ï¼Œä¸è¿‡æ¢æˆç­‰å¾…ä¹Ÿå¯ä»¥ã€‚</p><h1 id="ä¸‰ã€åˆè¯†gRPC"><a href="#ä¸‰ã€åˆè¯†gRPC" class="headerlink" title="ä¸‰ã€åˆè¯†gRPC"></a>ä¸‰ã€åˆè¯†gRPC</h1><p>grpcç†è®ºåŸºç¡€</p><p><a href="https://www.cnblogs.com/songgj/p/13463717.html">https://www.cnblogs.com/songgj/p/13463717.html</a></p><p><img src="https://img2020.cnblogs.com/blog/824470/202010/824470-20201030135431451-1886001617.png" alt="img"></p><p><strong>RPCå’ŒHTTPåŒºåˆ«</strong><br>RPC å’Œ HTTPéƒ½æ˜¯å¾®æœåŠ¡é—´é€šä¿¡è¾ƒä¸ºå¸¸ç”¨çš„æ–¹æ¡ˆä¹‹ä¸€ï¼Œå…¶å®RPC å’Œ HTTP å¹¶ä¸å®Œå…¨æ˜¯åŒä¸€ä¸ªå±‚æ¬¡çš„æ¦‚å¿µï¼Œå®ƒä»¬ä¹‹é—´è¿˜æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚</p><p>RPC æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå…¶è°ƒç”¨åè®®é€šå¸¸åŒ…æ‹¬åºåˆ—åŒ–åè®®å’Œä¼ è¾“åè®®ã€‚åºåˆ—åŒ–åè®®æœ‰åŸºäºçº¯æ–‡æœ¬çš„ XML å’Œ JSONã€äºŒè¿›åˆ¶ç¼–ç çš„Protobufå’ŒHessianã€‚ä¼ è¾“åè®®æ˜¯æŒ‡å…¶åº•å±‚ç½‘ç»œä¼ è¾“æ‰€ä½¿ç”¨çš„åè®®ï¼Œæ¯”å¦‚ TCPã€HTTPã€‚<br>å¯ä»¥çœ‹å‡ºHTTPæ˜¯RPCçš„ä¼ è¾“åè®®çš„ä¸€ä¸ªå¯é€‰æ–¹æ¡ˆï¼Œæ¯”å¦‚è¯´ gRPC çš„ç½‘ç»œä¼ è¾“åè®®å°±æ˜¯ HTTPã€‚HTTP æ—¢å¯ä»¥å’Œ RPC ä¸€æ ·ä½œä¸ºæœåŠ¡é—´é€šä¿¡çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ä½œä¸º RPC ä¸­é€šä¿¡å±‚çš„ä¼ è¾“åè®®ï¼ˆæ­¤æ—¶ä¸ä¹‹å¯¹æ¯”çš„æ˜¯ TCP åè®®ï¼‰ã€‚</p><p><strong>ä»»åŠ¡èƒŒæ™¯ï¼š</strong></p><p>æè¿°ä¸€ä¸ªå‘å¯¼æœåŠ¡ï¼ŒæœåŠ¡åä¸ºRouteGuide</p><p>å®šä¹‰å››ç§ä¸åŒçš„ä¿¡æ¯ç±»å‹åˆ†åˆ«ä¸ºPointï¼ŒRectangleï¼ŒFeatureï¼ŒRouteSummaryä»¥åŠChatã€‚</p><p>å®šä¹‰å››ä¸ªæ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdeliver.net/gh/PanyuHaa/PicGo/img/Screen%20Shot%202022-06-09%20at%2016.13.15.png" alt="Screen Shot 2022-06-09 at 16.13.15"></p><p>å®šä¹‰ä¸€ä¸ªservice</p><h2 id="1-gRPCå››ç§æœåŠ¡ç±»å‹"><a href="#1-gRPCå››ç§æœåŠ¡ç±»å‹" class="headerlink" title="1. gRPCå››ç§æœåŠ¡ç±»å‹"></a>1. gRPCå››ç§æœåŠ¡ç±»å‹</h2><p><a href="https://www.lixueduan.com/post/grpc/03-stream/">https://www.lixueduan.com/post/grpc/03-stream/</a></p><p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨è¿™å››ç§æœåŠ¡ç±»å‹ï¼Œæ°¸è¿œè®°ä½æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚æœåŠ¡ã€‚</p><h3 id="1-1-Unary"><a href="#1-1-Unary" class="headerlink" title="1.1 Unary"></a>1.1 Unary</h3><p>å³æ—¶é€šä¿¡</p><h3 id="1-2-Client-side-streaming"><a href="#1-2-Client-side-streaming" class="headerlink" title="1.2 Client-side streaming"></a>1.2 Client-side streaming</h3><p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªstreamçš„è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡ç«¯å‘å›æ¥æ˜¯ä¸ªunary</p><h3 id="1-3-Server-side-streaming"><a href="#1-3-Server-side-streaming" class="headerlink" title="1.3 Server-side streaming"></a>1.3 Server-side streaming</h3><p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªunaryçš„è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨å‘å›æ¥æ˜¯ä¸ªstream</p><h3 id="1-4-Bidirectional-streaming"><a href="#1-4-Bidirectional-streaming" class="headerlink" title="1.4 Bidirectional streaming"></a>1.4 Bidirectional streaming</h3><p>åŒæ–¹é€šä¿¡çš„å‚æ•°éƒ½æ˜¯æµ</p><p>ç”¨forloopæ¥ä¸€ç›´æ¥å—å¯¹æ–¹çš„æµ</p><p>æµæ•°æ®å°±æ˜¯éœ€è¦ä¸€ç›´ä¼ è¾“çš„æ•°æ®ï¼Œæ¯”å¦‚å®æ—¶å‘é€è‡ªå·±çš„ä½ç½®ï¼ˆæ¯éš”1sï¼‰</p><h2 id="2-å®è·µ"><a href="#2-å®è·µ" class="headerlink" title="2. å®è·µ"></a>2. å®è·µ</h2><p><a href="https://developers.google.com/protocol-buffers/docs/reference/go-generated">https://developers.google.com/protocol-buffers/docs/reference/go-generated</a></p><p>ä¸€ã€å…ˆå†™å¥½protoæ–‡ä»¶</p><p>å¦‚æœæ˜¯http1.1ç”¨jsonæ¥æ•°æ®ä¼ è¾“fieldç›´æ¥æ˜¯stringå½“æˆkeyï¼Œvalueå°±æ˜¯valueã€‚è¿™é‡Œå‘¢æŠŠæ•°å­—ä½œä¸ºkeyï¼Œè¿™æ ·å‹ç¼©æ•°æ®é•¿åº¦ã€‚æ³¨æ„åºå·æ˜¯1å¼€å§‹ã€‚</p><p>messageæ˜¯å˜é‡</p><p>enumæ˜¯æšä¸¾</p><p>serviceæ˜¯æ–¹æ³•</p><p>äºŒã€åœ¨terminalé‡Œé¢å†™</p><p>å®‰è£…protoc</p><p><code>$ brew install protobuf</code><br><code>$ protoc --version</code> (æœ€æ–°ç‰ˆæœ¬)</p><p>.æ˜¯å½“å‰æ–‡ä»¶çš„æ„æ€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">protoc --go_out=. --go_opt=paths=source_relative --<span class="hljs-keyword">go</span>-grpc_out. --<span class="hljs-keyword">go</span>-grpc_opt=paths=source_relative route.proto<br></code></pre></td></tr></table></figure><p>å‰é¢çš„go_outè¾“å‡ºçš„æ˜¯messageçš„ä»£ç æ–‡ä»¶</p><p>åé¢çš„go-rpc_outè¾“å‡ºçš„æ˜¯serviceçš„ä»£ç æ–‡ä»¶</p><p>å¯ä»¥å†™æˆshellï¼Œè¿™æ ·ä»¥åæ›´æ–°pbæ–‡ä»¶çš„æ—¶å€™å°±ä¼šæ–¹ä¾¿</p><p>è¿™ä¸ªpbæ–‡ä»¶ä¹Ÿå°±æ˜¯stunä»£ç æ¡©</p><p>å¯èƒ½é‡åˆ°çš„ä¸¤ä¸ªé—®é¢˜ï¼š<br>1ã€å®¢æˆ·ç«¯æ‹¨é€šæœåŠ¡ç«¯å¤±è´¥ï¼šç«¯å£å¯èƒ½è¢«å ç”¨ï¼Œmacç³»ç»Ÿä½¿ç”¨lsof -i tcp:portå‘½ä»¤å¯æŸ¥è¯¢ç«¯å£å ç”¨æƒ…å†µï¼ˆportæ›¿æ¢ä¸ºè¦æŸ¥è¯¢çš„ç«¯å£å·ï¼‰ï¼Œæ”¹ç”¨æœªè¢«å ç”¨çš„ç«¯å£å·å³å¯ã€‚<br>2ã€grpc.WithInsecure()ï¼šè·³è¿‡è¯ä¹¦éªŒè¯ï¼Œç›®å‰å·²è¢«å¼ƒç”¨ï¼Œæ–‡æ¡£æ¨èä½¿ç”¨grpc.WithTransportCredentials(insecure.NewCredentials())ã€‚</p><p><strong>æœåŠ¡ç«¯</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> routeGuideServer <span class="hljs-keyword">struct</span> &#123;<br>features []*pb.Feature<br>pb.UnimplementedRouteGuideServer<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">newServer</span><span class="hljs-params">()</span></span> *routeGuideServer &#123;<br><span class="hljs-keyword">return</span> &amp;routeGuideServer&#123;<br>features: []*pb.Feature&#123;<br>&#123;Name: <span class="hljs-string">&quot;ä¸Šæµ·äº¤é€šå¤§å­¦é—µè¡Œæ ¡åŒº ä¸Šæµ·å¸‚é—µè¡ŒåŒºä¸œå·è·¯800å·&quot;</span>, Location: &amp;pb.Point&#123;<br>Latitude:  <span class="hljs-number">310235000</span>,<br>Longitude: <span class="hljs-number">121437403</span>,<br>&#125;&#125;,<br>&#123;Name: <span class="hljs-string">&quot;å¤æ—¦å¤§å­¦ ä¸Šæµ·å¸‚æ¨æµ¦åŒºäº”è§’åœºé‚¯éƒ¸è·¯220å·&quot;</span>, Location: &amp;pb.Point&#123;<br>Latitude:  <span class="hljs-number">312978870</span>,<br>Longitude: <span class="hljs-number">121503457</span>,<br>&#125;&#125;,<br>&#123;Name: <span class="hljs-string">&quot;åä¸œç†å·¥å¤§å­¦ ä¸Šæµ·å¸‚å¾æ±‡åŒºæ¢…é™‡è·¯130å·&quot;</span>, Location: &amp;pb.Point&#123;<br>Latitude:  <span class="hljs-number">311416130</span>,<br>Longitude: <span class="hljs-number">121424904</span>,<br>&#125;&#125;,<br>&#125;,<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  lis, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;localhost:5000&quot;</span>) <span class="hljs-comment">// ç›‘å¬</span><br>  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>    log.Fatalln(<span class="hljs-string">&quot;cannot create a listener at the address&quot;</span>)<br>  &#125;<br>  grpcServer := grpc.NewServer() <span class="hljs-comment">// åˆ›å»ºæ–°server</span><br>  pb.RegisterRouteGuideServer(grpcServer, newServer()) <span class="hljs-comment">// å°†pbä»£ç æ¡©æ³¨å†Œåˆ°grpcçš„server</span><br>  log.Fatalln(grpcServer.Serve(lis)) <span class="hljs-comment">// å¯åŠ¨grpcçš„server</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹‹æ‰€ä»¥éœ€è¦å†…åµŒä¸€ä¸ªUnimplementedXXX æ˜¯å› ä¸ºprotocåœ¨è§£æ.protoæ–‡ä»¶ï¼Œåˆ›å»ºgrpc.pb.goæ–‡ä»¶çš„æ—¶å€™ç”¨unplementedXXXå®Œæˆå‘å‰å…¼å®¹çš„å®ç°ã€‚</p><p><strong>å®¢æˆ·ç«¯</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br>conn, err := grpc.Dial(<span class="hljs-string">&quot;localhost:5000&quot;</span>, grpc.WithInsecure(), grpc.WithBlock()) <span class="hljs-comment">// æ‹¨å·è¯·æ±‚</span><br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;client cannot dial grpc server&quot;</span>)<br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br><br>client := pb.NewRouteGuideClient(conn) <span class="hljs-comment">// å»ºç«‹ä¸€ä¸ªclient</span><br><br>runForth(client)<br>&#125;<br></code></pre></td></tr></table></figure><p>grpc.WithInsecure() â€”- è®¾ç½®ä¸éªŒè¯è¯ä¹¦</p><p>grpc.WithBlock() â€”- æ‹¨å·æˆåŠŸæ‰ä¼šå¾€ä¸‹èµ°</p><p>æœåŠ¡ç«¯streamé€šè¿‡Send(T type)å‡½æ•°è¿›è¡Œå‘é€æ•°æ®</p><p>å®¢æˆ·ç«¯é€šè¿‡stream.Recv()æ¥æ¥æ”¶æ•°æ®ï¼Œé€šè¿‡ err == io.EOF æ¥è¿›è¡Œå¤„ç†</p><p>ï¼ˆClient-side streamingä¹Ÿæ˜¯åŒç†çš„ï¼Œä¸Šè¿°æ˜¯Server-side streamingã€‚clientç«¯éœ€è¦ä¸»åŠ¨è¿›è¡Œå…³é—­clientStream.CloseAndRecv()ï¼Œserverç«¯ä¹Ÿéœ€è¦å…³é—­stream.SendAndClose()ï¼‰</p><p>ä¸ºä»€ä¹ˆè¦ç”¨åˆ°æµå‘¢ï¼Ÿæ¯”å¦‚å½“ä½ æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œä¸éœ€è¦ä¸€æ¬¡æ€§è£…å¡«å®Œæ‰è®©å‰ç«¯æ˜¾ç¤ºï¼Œè¿™æ ·å¢åŠ äº†è¿è¡Œçš„æ•ˆç‡</p><h2 id="3-å°ç»“"><a href="#3-å°ç»“" class="headerlink" title="3. å°ç»“"></a>3. å°ç»“</h2><p><strong>Clientå‘é€å®Œæˆåéœ€è¦æ‰‹åŠ¨è°ƒç”¨Close()æˆ–è€…CloseSend()æ–¹æ³•å…³é—­streamï¼ŒServerç«¯åˆ™<code>return nil</code>å°±ä¼šè‡ªåŠ¨ Close</strong>ã€‚</p><p><strong>1ï¼‰ServerStream</strong></p><ul><li>æœåŠ¡ç«¯å¤„ç†å®Œæˆå<code>return nil</code>ä»£è¡¨å“åº”å®Œæˆ</li><li>å®¢æˆ·ç«¯é€šè¿‡ <code>err == io.EOF</code>åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦å“åº”å®Œæˆ</li></ul><p><strong>2ï¼‰ClientStream</strong></p><ul><li>å®¢æˆ·ç«¯å‘é€å®Œæ¯•é€šè¿‡<code>CloseAndRecv</code>å…³é—­stream å¹¶æ¥æ”¶æœåŠ¡ç«¯å“åº”</li><li>æœåŠ¡ç«¯é€šè¿‡ <code>err == io.EOF</code>åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦å‘é€å®Œæ¯•ï¼Œå®Œæ¯•åä½¿ç”¨<code>SendAndClose</code>å…³é—­ streamå¹¶è¿”å›å“åº”ã€‚</li></ul><p><strong>3ï¼‰BidirectionalStream</strong></p><ul><li>å®¢æˆ·ç«¯æœåŠ¡ç«¯éƒ½é€šè¿‡streamå‘å¯¹æ–¹æ¨é€æ•°æ®</li><li>å®¢æˆ·ç«¯æ¨é€å®Œæˆåé€šè¿‡<code>CloseSend</code>å…³é—­æµï¼Œé€šè¿‡<code>err == io.EOF</code>åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦å“åº”å®Œæˆ</li><li>æœåŠ¡ç«¯é€šè¿‡<code>err == io.EOF</code>åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦å“åº”å®Œæˆ,é€šè¿‡<code>return nil</code>è¡¨ç¤ºå·²ç»å®Œæˆå“åº”</li></ul><p>é€šè¿‡<code>err == io.EOF</code>æ¥åˆ¤å®šæ˜¯å¦æŠŠå¯¹æ–¹æ¨é€çš„æ•°æ®å…¨éƒ¨è·å–åˆ°äº†ã€‚</p><p>å®¢æˆ·ç«¯é€šè¿‡<code>CloseAndRecv</code>æˆ–è€…<code>CloseSend</code>å…³é—­ Streamï¼ŒæœåŠ¡ç«¯åˆ™é€šè¿‡<code>SendAndClose</code>æˆ–è€…ç›´æ¥ <code>return nil</code>æ¥è¿”å›å“åº”ã€‚</p><h1 id="å››ã€goçš„åå°„"><a href="#å››ã€goçš„åå°„" class="headerlink" title="å››ã€goçš„åå°„"></a>å››ã€goçš„åå°„</h1><p>å¯ä»¥åå°„çš„å†…å®¹æœ‰å››ä¸ªï¼šTypeã€Type.Nameã€Kindã€Value</p><p>nameæ˜¯åŒ…å†…çš„å®šä¹‰</p><p>å…ƒæ•°æ®ï¼šå°±æ˜¯æè¿°æ•°æ®çš„æ•°æ®</p><p>é€šè¿‡åå°„ï¼Œå°†ä¸€ä¸ªå€¼è¿›è¡Œè½¬å‹ï¼š1ã€æ‹¿åˆ°å€¼ 2ã€è°ƒç”¨Interface().(T type)</p><p>Reflect.Value to float</p><p>Reflect.Value to slice</p><p>é€šè¿‡åå°„æ”¹å˜å¯¹åº”çš„æ•°å€¼ã€‚ç”¨setï¼Œè¦å…ˆæ£€æµ‹ä¸€ä¸‹canset()</p><p>é€šè¿‡åå°„æ¥è°ƒç”¨è¯¥ç±»å‹çš„æ–¹æ³•ï¼ŒMethodByName(func name)è¿”å›ä¸€ä¸ªfunc value</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Student <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s Student)</span></span> DoHomework(number <span class="hljs-type">int</span>) &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%s is doing homework %d\n&quot;</span>, s.name, number)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// use reflect to invoke the DoHomework of a student</span><br>s := Student&#123;name: <span class="hljs-string">&quot;heli&quot;</span>&#125;<br>v := reflect.ValueOf(s)  <span class="hljs-comment">// å¦‚æœå‡½æ•°æ˜¯æŒ‡é’ˆçš„å‡½æ•°å°±è¦åŠ åœ°å€ï¼Œè¦ä¸ä¸èƒ½åŠ åœ°å€</span><br>methodV := v.MethodByName(<span class="hljs-string">&quot;DoHomework&quot;</span>)<br><span class="hljs-keyword">if</span> methodV.IsValid() &#123;<br>in := []reflect.Value&#123;reflect.ValueOf(<span class="hljs-number">55</span>)&#125;<br>methodV.Call(in)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨è¿‡åå°„ä¹Ÿå¯ä»¥æ„å»ºå‡½æ•°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeTimeFunc</span><span class="hljs-params">(f <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br>tf := reflect.TypeOf(f)<br>vf := reflect.ValueOf(f)<br><br><span class="hljs-keyword">if</span> tf.Kind() != reflect.Func &#123;<br><span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;expect a function&quot;</span>)<br>&#125;<br>wrapper := reflect.MakeFunc(tf, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(args []reflect.Value)</span></span> (result []reflect.Value) &#123;<br>start := time.Now()<br>result = vf.Call(args)<br>end := time.Now()<br>fmt.Printf(<span class="hljs-string">&quot;The function takes %v\n&quot;</span>, end.Sub(start))<br><span class="hljs-keyword">return</span> result<br>&#125;)<br><span class="hljs-keyword">return</span> wrapper.Interface()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TimeMe</span><span class="hljs-params">()</span></span> &#123;<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>timedFunc := makeTimeFunc(TimeMe).(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>)<br>timedFunc()<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨kindæ¥åˆ¤æ–­ç±»å‹ï¼Œå› ä¸ºä¸åŒçš„ç±»å‹å¯ä»¥è°ƒç”¨çš„æ–¹æ³•ä¸å®Œå…¨ä¸€æ ·ã€‚</p><p>é€šè¿‡åå°„æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ªç»“æ„ä½“çš„fieldçš„æ•°é‡å’Œå…¶å€¼è¿˜æœ‰methodçš„æ•°é‡ï¼Œè¿˜æœ‰åå­—ç­‰ç­‰ã€‚</p><p>å¯¹äºä¸€ä¸ªå‡½æ•°æˆ‘ä»¬å¯ä»¥çŸ¥é“å‡½æ•°çš„åå­—ï¼Œå‡½æ•°çš„INå’ŒOUTæœ‰å‡ ä¸ªã€‚</p><p>åæ­£åå°„å¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å¾—å‡½æ•°ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ç­‰çš„ä¿¡æ¯ã€‚</p><h1 id="äº”ã€Ginå’ŒRESTfulé£æ ¼çš„APIè®¾è®¡"><a href="#äº”ã€Ginå’ŒRESTfulé£æ ¼çš„APIè®¾è®¡" class="headerlink" title="äº”ã€Ginå’ŒRESTfulé£æ ¼çš„APIè®¾è®¡"></a>äº”ã€Ginå’ŒRESTfulé£æ ¼çš„APIè®¾è®¡</h1><p><strong>ä¸¾ä¾‹ä¸ç¬¦åˆçš„</strong></p><p>/getAllEmployees</p><p>/createEmployee</p><p>/updateEmployee</p><p>URIé‡Œé¢æ˜¯åŠ¨è¯ï¼Œè¿™é‡Œæ˜¾ç„¶æ²¡æœ‰æŠŠEmployeeå½“ä½œèµ„æºæ¥å¯¹å¾…</p><p><strong>æ­£ç¡®å¦‚ä¸‹</strong></p><p>GET /employees ï¼ˆåˆ—å‡ºæ‰€æœ‰å‘˜å·¥ï¼‰</p><p>GET /employeesï¼Ÿstate=externalï¼ˆåˆ—å‡ºæ‰€æœ‰çŠ¶æ€ä¸ºexternalçš„å‘˜å·¥ï¼‰</p><p>POST /employees ï¼ˆåˆ›å»ºä¸€ä¸ªæ–°å‘˜å·¥ï¼‰</p><p>PUT /employees/56 ï¼ˆæ›´æ–°56å·å‘˜å·¥çš„ä¿¡æ¯ï¼‰</p><p>éµå®ˆRESTfulé£æ ¼çš„ä¼˜åŠ¿</p><ol><li>å¯¹äºURIçš„åŒ¹é…æ¯”è¾ƒç®€æ´ï¼Œåªéœ€è¦åŒ¹é… /employees å’Œ /employees/:id å³å¯</li><li>æ ¼å¼è§„èŒƒï¼Œä½¿ç”¨æ—¶ä¸å®¹æ˜“å‡ºé”™</li></ol><p><strong>æ³¨æ„äº‹é¡¹</strong></p><p>å‘½åAPIæ¥å£ æ¨èç”¨å¤æ•°åè¯</p><p>GET /employees/56</p><p>éèµ„æºè¯·æ±‚ç”¨åŠ¨è¯</p><p>GET /translateï¼Ÿfrom=de_DE&amp;to=en_US&amp;text=Hello</p><p>shouldbindï¼Œæ˜¯å°†ä¼ å…¥è¿›æ¥çš„jsonç»‘å®šåˆ°ä½ è®¾å®šçš„ç»“æ„ä½“ä¸Šï¼Œå¯¹åº”èµ‹å€¼ã€‚</p><p>bindæ–¹æ³• <a href="https://cloudfeng.github.io/2020/03/13/2020/03/20200311_go_gin_request_bind_type/">https://cloudfeng.github.io/2020/03/13/2020/03/20200311_go_gin_request_bind_type/</a></p><h1 id="å…­ã€Raftï¼Œåˆ†å¸ƒå¼å…±è¯†ç®—æ³•"><a href="#å…­ã€Raftï¼Œåˆ†å¸ƒå¼å…±è¯†ç®—æ³•" class="headerlink" title="å…­ã€Raftï¼Œåˆ†å¸ƒå¼å…±è¯†ç®—æ³•"></a>å…­ã€Raftï¼Œåˆ†å¸ƒå¼å…±è¯†ç®—æ³•</h1><h2 id="BG"><a href="#BG" class="headerlink" title="BG"></a>BG</h2><p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„æŒ‘æˆ˜</p><ol><li>æ—¶åºæ€§ Timing è¿è¡Œåœ¨ä¸åŒç½‘ç»œä¸‹çš„æœºå™¨ä¸­çš„è¿›ç¨‹å¦‚ä½•åˆ¤æ–­ä¸€äº›äº‹ä»¶å‘ç”Ÿçš„é¡ºåº</li><li>å¹¶å‘æ€§ Concurrencyè¿è¡Œåœ¨ä¸åŒç½‘ç»œä¸‹çš„æœºå™¨ä¸­çš„è¿›ç¨‹å¦‚ä½•å…±äº«èµ„æºï¼Œè€Œäº’ä¸å¹²æ‰°ã€‚æ¯”å¦‚è®¿é—®å…±åŒçš„æ•°æ®åº“</li><li>å¥å£®æ€§ Robustness åº”å¯¹ç½‘ç»œçš„ä¸ç¨³å®šæ€§ä»¥åŠç¡¬ä»¶çš„ä¸ç¨³å®šæ€§</li><li>ä¸€è‡´æ€§ Consistency å¦‚ä½•ä¿éšœæ— è®ºè®¿é—®å“ªä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œéƒ½èƒ½è·å¾—ç›¸åŒçš„ç»“æœ</li></ol><p>åˆ†å¸ƒå¼å…±è¯† Consensus</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´ï¼Œå½¼æ­¤å¯¹æŸä¸ªçŠ¶æ€è¾¾æˆä¸€è‡´ç»“æœçš„è¿‡ç¨‹</p><p>åˆ†å¸ƒå¼å…±è¯†çš„åº”ç”¨ Application of Consensus</p><ol><li>é€»è¾‘æ—¶é—´çš„å…±è¯†ï¼Œæ¥å†³å®šäº‹ä»¶å‘ç”Ÿçš„<strong>é¡ºåº</strong></li><li>äº’æ–¥æ€§çš„å…±è¯†ï¼Œç”¨äºå†³å®šè°æ­£æ‹¥æœ‰<strong>è®¿é—®çš„èµ„æº</strong></li><li>åè°ƒè€…çš„å…±è¯†ï¼Œè°æ˜¯å½“ä¸‹çš„<strong>leader</strong></li></ol><h2 id="Raft"><a href="#Raft" class="headerlink" title="Raft"></a>Raft</h2><p>raftåŠ¨ç”»æ¼”ç¤º<a href="http://thesecretlivesofdata.com/raft/">http://thesecretlivesofdata.com/raft/</a></p><p><a href="https://zhuanlan.zhihu.com/p/32052223">https://zhuanlan.zhihu.com/p/32052223</a></p><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š<strong>è¿½éšè€…Follower</strong>ã€<strong>ç«é€‰è€…candidate</strong> ã€<strong>é¢†å¯¼è€…Leader</strong>ï¼ˆé»˜è®¤éƒ½æ˜¯ç«é€‰è€…ï¼Œéœ€è¦åˆ†é…ï¼‰</p><p>ç«é€‰è€…æ‹¿åˆ°è¶…è¿‡åŠæ•°çš„ç¥¨æ—¶æ‰èƒ½ç§°ä¸ºé¢†å¯¼è€…ï¼ˆè¶…è¿‡åŠæ•°ä¿è¯äº†é¢†å¯¼è€…çš„å”¯ä¸€æ€§ï¼‰</p><p>æ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šæˆä¸ºlog entryï¼Œç„¶åéƒ½é»˜è®¤æ˜¯uncommittedçš„çŠ¶æ€ï¼Œä¸ä¼šè¿›è¡Œæ›´æ–°ã€‚è¦å…ˆè¿›è¡Œå¹¿æ’­ï¼ˆå¤åˆ¶è¯¥è¯·æ±‚ï¼‰ï¼Œè·å¾—é«˜æŠ•ç¥¨çš„è¯ï¼Œå°±commitã€‚ç„¶åé€šçŸ¥æ‰€æœ‰çš„followerç„¶åå„è‡ªæ ¹æ®æ—¥å¿—commitäº†ã€‚ï¼ˆé€šè¿‡logæ¥ä¿è¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å‡†å¤‡å¥½æ›´æ–°äº†è¾¾æˆå…±è¯†åå†æ›´æ–°ï¼‰</p><p>ä¸Šè¿°è¿‡ç¨‹ä¹Ÿå«<strong>æ—¥å¿—å¤åˆ¶</strong></p><h3 id="1-Leaderé€‰ä¸¾"><a href="#1-Leaderé€‰ä¸¾" class="headerlink" title="1. Leaderé€‰ä¸¾"></a>1. Leaderé€‰ä¸¾</h3><p>é€‰ä¸¾è¿‡æœŸçš„æ—¶é—´ä¸€èˆ¬åœ¨150ms-300ms</p><p>termæ¥è¡¨ç¤ºé€»è¾‘æ—¶é—´è¶Šå¤§çš„termè¡¨ç¤ºæœ€æ–°çš„ä»»æœŸï¼Œæˆä¸ºç«é€‰è€…ä»¥åå¼€å§‹å‘ç¥¨ï¼Œæ¯ä¸ªtermä¹‹å†…åˆ«äººåªèƒ½æŠ•ç¥¨ä¸€æ¬¡ç»™ä»–ï¼Œè¿™æ ·é¿å…äº†é‡å¤ã€‚</p><p>termä»£è¡¨ä»»æœŸçš„è½®æ¬¡ï¼Œå¦‚æœAæ˜¯term=1ï¼ŒBå’ŒCéƒ½æ˜¯0çš„æ—¶å€™ï¼ŒAä¼˜å…ˆå‘èµ·æŠ•ç¥¨ï¼Œå¹¶ä¸”ç»™åˆ°BCï¼ŒæŸ¥çœ‹è‡ªå·±çš„termåœ¨å½“å‰Aç»™çš„termä¸‹æœ‰æ— æŠ•ç¥¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ•ç¥¨ï¼Œæ›´æ–°termå’ŒAç›¸ç­‰ï¼ˆä¿è¯ä¸ä¼šå†æŠ•ç¥¨ï¼‰ï¼›å¦‚æœæœ¬èº«å’ŒAçš„termç›¸åŒåˆ™ä¸æŠ•ç¥¨ã€‚</p><p>æŠ•ç¥¨ç»™åˆ«äººä»¥åè‡ªå·±çš„Timerå°±ä¼šé‡ç½®ï¼ˆtimerä¸º0çš„æ—¶å€™å˜æˆç«é€‰è€…ï¼‰</p><p>ç«é€‰è€… â€”â€”&gt; é¢†å¯¼è€… ä¹‹åï¼Œä¼šå‘¨æœŸæ€§å‘é€ Append Entries ä¹Ÿå°±æ˜¯é‚£ä¸ª log entryï¼Œè¿™æ ·ä¼šä¸€ç›´é‡ç½®å…¶ä»–èŠ‚ç‚¹çš„timerï¼Œé˜²æ­¢æ— æ•…å˜æˆç«é€‰è€…</p><p>timeoutæœ‰ä¸¤ä¸ªï¼š1ã€election timeout 2ã€heartbeat timeoutï¼ˆè¿œå°äºå‰è€…ï¼‰</p><p>heartbeat timeoutå°±æ˜¯å‰é¢æåˆ°çš„<code>å‘¨æœŸæ€§å‘é€ Append Entries</code> ï¼ˆraftä¸­ï¼Ÿleaderå‘å¿ƒè·³å—ï¼‰</p><p>å¹³ç¥¨çš„æƒ…å†µâ€”-éƒ½ä¼štime outï¼Œé‡æ–°è¯„é€‰ï¼Œè€Œä¸”time outçš„æ—¶é—´éƒ½æ˜¯éšæœºæ•°å¾ˆå°çš„æ¦‚ç‡ä¼šé‡å¤ã€‚</p><p>followerå˜æˆcandidateçš„æ—¶å€™termè¦<strong>+1</strong></p><h3 id="2-Log-Replication"><a href="#2-Log-Replication" class="headerlink" title="2. Log Replication"></a>2. Log Replication</h3><p>å®¢æˆ·å…ˆå‘é€æ•°æ®è¯·æ±‚ï¼Œleaderå…ˆæ¥æ”¶åˆ°è¯·æ±‚ã€‚ç„¶ååŒæ­¥å¹¿æ’­åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼Œå½“å…¶ä»–èŠ‚ç‚¹è¿”å›ç¡®è®¤çš„æ¶ˆæ¯ï¼Œä¿è¯äº†ä¸€è‡´æ€§ä»¥åï¼Œleaderå†è®²æ•°æ®å†™è¿›çŠ¶æ€æœºã€‚</p><p>ä¸ºèŠ‚ç‚¹åŠ å…¥partitionåï¼ˆç”¨æ¥æ’é™¤åŒºåŸŸçš„ç½‘ç»œæ•…éšœï¼‰ï¼Œä¼šåœ¨åˆ†å¼€çš„åŒºåŸŸå„è‡ªé€‰å‡ºleaderï¼Œå…¶ä½™ä¸å˜ã€‚ä½†æ˜¯è¿™é‡Œä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºåˆ†å¼€ä¸ä»£è¡¨æŒ‚æ‰æ‰€ä»¥å¯¼è‡´æœ‰çš„leaderæ— æ³•å†è·å¾—è¶…è¿‡åŠæ•°çš„æŠ•ç¥¨ï¼ˆç®—ä¸Šè‡ªå·±ï¼‰ï¼Œæ‰€æœ‰çš„log entryä¸èƒ½å¤Ÿcommitã€‚</p><p>è¿™é‡Œå°±é‡åˆ°äº†ä¸€ä¸ªæ¢å±Šçš„é—®é¢˜ï¼šæ¢å±Šçš„è§„åˆ™å°±æ˜¯è°çš„termé«˜å¬è°çš„ã€‚å¦‚æœæ•…éšœæ—¶ï¼Œæœ‰ä¸€ä¸ªtermä¸º2çš„leaderAå’Œä¸€ä¸ªtermä¸º1çš„leaderBï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦åœ¨æ‹†partitionåï¼Œæ¢å¤çš„åŒºåŸŸå†…çš„leaderè¿›è¡Œtermæ¯”è¾ƒï¼ˆleaderå†èåˆå‰ä»ç„¶å‘å…¶ä»–èŠ‚ç‚¹å‘é€æ¶ˆæ¯ï¼‰ã€‚</p><h2 id="Raftè®ºæ–‡èŠ‚é€‰"><a href="#Raftè®ºæ–‡èŠ‚é€‰" class="headerlink" title="Raftè®ºæ–‡èŠ‚é€‰"></a>Raftè®ºæ–‡èŠ‚é€‰</h2><h3 id="å‚é‡å®šä¹‰"><a href="#å‚é‡å®šä¹‰" class="headerlink" title="å‚é‡å®šä¹‰"></a>å‚é‡å®šä¹‰</h3><p><strong>State</strong></p><p>Volatile state on leadersï¼š</p><p>nextIndex[]å’ŒmatchIndex[]æ˜¯é•¿åº¦ç­‰äº<strong>æ‰€æœ‰æœºå™¨æ•°é‡</strong>çš„ä¸¤ä¸ªæ•°ç»„ï¼ŒLeaderå¯¹æ¯ä¸ªfolloweréƒ½è®°å½•å®ƒçš„nextIndexå’ŒmatchIndexã€‚ç”¨æ¥ç®¡ç†follower</p><p>nextIndex[]ï¼šæŒ‡çš„æ˜¯ä¸‹ä¸€æ¬¡appendEntriesä»å“ªé‡Œå¼€å§‹å°è¯•</p><p>matchIndex[]ï¼šå·²çŸ¥çš„æŸfollowerçš„logä¸Leaderçš„logæœ€å¤§åŒ¹é…åˆ°ç¬¬å‡ ä¸ªindex </p><p>ä»¥ä¸Šä¸¤ä¸ªå…ƒç´ éƒ½æ˜¯åœ¨followerå†…éƒ¨</p><p><strong>AppendEntries RPC</strong>ï¼ˆLog Replicationçš„è¿‡ç¨‹ï¼‰</p><p>prevLogIndexå’ŒprevLogTermç”¨æ¥å†³å®šä½ appendçš„ä½ç½®ï¼Œç¡®è®¤çŠ¶æ€ç”¨çš„ï¼Œä¿è¯ä½ æ•°æ®è®°å½•çš„ä¸€è‡´æ€§å’Œè¿ç»­æ€§ã€‚ä»–ä¼šä¸€ç‚¹ä¸€ç‚¹æŒ‰ç…§nextIndex[]è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸åŒ¹é…å°±å°†nextIndexâ€”ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„ä½ç½®å†å¼€å§‹æ’å…¥æ•°æ®ï¼Œå¦‚æœæ­¤æ—¶éå†äº†å…¨éƒ¨éƒ½æ²¡æœ‰å‘ç°åˆé€‚çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦å°†log entryä»åºå·ä¸‹æ ‡è®°0å¼€å§‹æ’å…¥ã€‚</p><p>ä»€ä¹ˆæ˜¯ Commit Index</p><p>Leaderçš„commit indexæŒ‡çš„æ˜¯æœ€åä¸€ä¸ªè¢«å¤§å¤šæ•°æœºå™¨éƒ½å¤åˆ¶çš„æ—¥å¿—çš„indexã€‚</p><p>å¦‚æœFolloweræ”¶åˆ°ä»Leaderå‘è¿‡æ¥çš„commitIndexå¤§äºè‡ªå·±è®°å½•çš„commitIndexï¼Œå°±å¯ä»¥æŠŠè‡ªå·±çš„commitIndexæ›´æ–°ï¼Œå¹¶å¼€å§‹æŠŠè¿™äº›æ—¥å¿—åº”ç”¨åˆ°çŠ¶æ€æœºé‡Œã€‚</p><p><strong>RequestVote RPC</strong></p><p>å¦‚æœä»–çš„logå’Œå‘èµ·æŠ•ç¥¨çš„candidateä¸åŒ¹é…çš„è¯ï¼Œæ˜¯ä¸å¯ä»¥æŠ•ç¥¨çš„ã€‚</p><h2 id="etcd"><a href="#etcd" class="headerlink" title="etcd"></a>etcd</h2><p><a href="https://etcd.io/">etcd</a>ï¼ˆè¯»ä½œ et-see-deeï¼‰æ˜¯ä¸€ç§å¼€æºçš„åˆ†å¸ƒå¼ç»Ÿä¸€é”®å€¼å­˜å‚¨ï¼Œç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿæˆ–è®¡ç®—æœºé›†ç¾¤çš„å…±äº«é…ç½®ã€æœåŠ¡å‘ç°å’Œçš„è°ƒåº¦åè°ƒã€‚etcd æœ‰åŠ©äºä¿ƒè¿›æ›´åŠ å®‰å…¨çš„è‡ªåŠ¨æ›´æ–°ï¼Œåè°ƒå‘ä¸»æœºè°ƒåº¦çš„å·¥ä½œï¼Œå¹¶å¸®åŠ©è®¾ç½®å®¹å™¨çš„è¦†ç›–ç½‘ç»œã€‚</p><p>etcd æ˜¯è®¸å¤šå…¶ä»–é¡¹ç›®çš„æ ¸å¿ƒç»„ä»¶ã€‚æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒæ˜¯Kubernetesçš„é¦–è¦æ•°æ®å­˜å‚¨ï¼Œä¹Ÿæ˜¯å®¹å™¨ç¼–æ’çš„å®é™…æ ‡å‡†ç³»ç»Ÿã€‚ä½¿ç”¨ etcdï¼Œ äº‘åŸç”Ÿåº”ç”¨å¯ä»¥ä¿æŒæ›´ä¸ºä¸€è‡´çš„è¿è¡Œæ—¶é—´ï¼Œè€Œä¸”åœ¨ä¸ªåˆ«æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚åº”ç”¨ä» etcd è¯»å–æ•°æ®å¹¶å†™å…¥åˆ°å…¶ä¸­ï¼›é€šè¿‡åˆ†æ•£é…ç½®æ•°æ®ï¼Œä¸ºèŠ‚ç‚¹é…ç½®æä¾›å†—ä½™å’Œå¼¹æ€§ã€‚</p><h1 id="ä¸ƒã€dokcerå®¹å™¨åŒ–"><a href="#ä¸ƒã€dokcerå®¹å™¨åŒ–" class="headerlink" title="ä¸ƒã€dokcerå®¹å™¨åŒ–"></a>ä¸ƒã€dokcerå®¹å™¨åŒ–</h1><p>dockerå®¹å™¨è½»é‡çš„åŸå› æ˜¯ä¸éœ€è¦è£…å…¥æ“ä½œç³»ç»Ÿ</p><p>dockefile â€”&gt; Image â€”-&gt; Container</p><p>dockerfileæ„å»ºimage</p><p>imageå¯åŠ¨container</p><p><strong>é•œåƒï¼ˆimageï¼‰</strong>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå…¥åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰</p><p>é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜</p><p><strong>å®¹å™¨ï¼ˆcontainerï¼‰</strong>dockerå®¹å™¨æ˜¯åœ¨è¿è¡Œçš„ä¸€ä¸ªDockeré•œåƒçš„instanceã€‚åŒ…æ‹¬æœåŠ¡æˆ–åº”ç”¨çš„çŠ¶æ€å’Œå…¶ä»–åŠ¨æ€æ•°æ®ã€‚</p><p><strong>Docker Compose</strong>ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚</p><h3 id="Dockerfileå…³é”®å­—è¯´æ˜"><a href="#Dockerfileå…³é”®å­—è¯´æ˜" class="headerlink" title="Dockerfileå…³é”®å­—è¯´æ˜"></a>Dockerfileå…³é”®å­—è¯´æ˜</h3><p>1.æœ¬äººåœ¨ä½¿ç”¨Dockerfileæ–‡ä»¶åˆ¶ä½œé•œåƒè¿‡ç¨‹ä¸­è¸©äº†ä¸å°‘å‘ï¼Œè¿™é‡Œå°†æˆ‘æ€»ç»“çš„ä¸€äº›æ³¨æ„ç‚¹è´´å‡ºæ¥ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p><p>2.Dockerfileå¤§è‡´æ ¼å¼ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> centos:<span class="hljs-number">7</span><br><span class="hljs-keyword">MAINTAINER</span> chuan<br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum install -y vim</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /usr</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> /bin/bash</span><br></code></pre></td></tr></table></figure><p>3.å…³é”®å­—è¯´æ˜ï¼š</p><ul><li>FROMï¼šåŸºäºå“ªä¸ªåŸºç¡€é•œåƒ</li><li>WORKDIRï¼šæŒ‡å®šshellå‘½ä»¤è¿è¡Œåœ¨å“ªä¸ªç›®å½•ä¸‹ã€‚ä¸ºåç»­çš„ RUNã€CMDã€COPYã€ADD ç­‰å‘½ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚æ¥ä¸‹æ¥çš„ COPY å’Œ ADD å‘½ä»¤ä¸­çš„ç›¸å¯¹è·¯å¾„å°±æ˜¯ç›¸å¯¹äº WORKDIR æŒ‡å®šçš„è·¯å¾„</li><li>COPYï¼šå°†å½“å‰å®¿ä¸»æœºçš„æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­å»ï¼ˆ<strong>copyçš„æ–‡ä»¶å¿…é¡»åœ¨buildå‘½ä»¤æœ€åæŒ‡å®šçš„è·¯å¾„å†…</strong>ï¼‰</li><li>ADDï¼šå’ŒCOPYä¸€æ ·ï¼Œå¹¶ä¸”è¿˜å¯ä»¥è§£å‹ç¼©ï¼Œæˆ–è€…ä» url æ‹·è´æ–‡ä»¶åˆ°é•œåƒä¸­ã€‚<strong>COPY å’Œ ADD å‘½ä»¤å…·æœ‰ç›¸åŒçš„ç‰¹ç‚¹ï¼šåªå¤åˆ¶ç›®å½•ä¸­çš„å†…å®¹è€Œä¸åŒ…å«ç›®å½•è‡ªèº«</strong>ã€‚</li><li>RUNï¼šæ„å»ºé•œåƒæ—¶è¿è¡Œçš„shellå‘½ä»¤</li><li>CMDï¼šå®¹å™¨è¿è¡Œæ—¶æ‰§è¡Œçš„shellå‘½ä»¤ï¼ˆ<strong>å¤šä¸ªCMDåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼Œè¦æƒ³éƒ½æ‰§è¡Œå¯ä»¥ä½¿ç”¨&amp;&amp;è¿æ¥å¤šä¸ªå‘½ä»¤</strong>ï¼‰ï¼ˆ<strong>å¦‚æœå®¹å™¨runæ—¶ï¼Œåé¢æŒ‡å®šäº†shellç‰ˆæœ¬ï¼ŒDockerfileä¸­çš„CMDä¹Ÿä¼šè¢«è¦†ç›–</strong>ï¼‰</li><li>ENTRYPOINTï¼šå’ŒCMDä¸€æ ·ï¼Œä½†æ˜¯å¯ä»¥è¿½åŠ ï¼ˆå¿…é¡»ä½¿ç”¨execæ ¼å¼ï¼Œå³ï¼šENTRYPOINT [./entrypoint.shï¼Œå‚æ•°1ï¼Œå‚æ•°2â€¦â€¦]ï¼‰</li></ul><hr><ul><li>EXPOSEï¼šæŒ‡å®šé•œåƒæš´éœ²å‡ºæ¥çš„ç«¯å£</li><li>VOLUMUï¼šæ•°æ®å®¹å™¨å·ï¼ŒæŒ‡å®šæ˜ å°„æ–‡ä»¶ï¼Œç”¨äºæ•°æ®æŒä¹…åŒ–</li><li>ENVï¼šæŒ‡å®šç¯å¢ƒå˜é‡</li><li>LABELï¼šæŒ‡å®šå®¹å™¨è¿è¡Œæ—¶æ ‡ç¤º</li><li>SHELLï¼šæŒ‡å®šshell</li><li>MAINTAINERï¼šé•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</li><li>ONBUILDï¼šå½“æ„å»ºä¸€ä¸ªçˆ¶é•œåƒæ—¶ï¼Œçˆ¶é•œåƒè¢«å­é•œåƒç»§æ‰¿æ—¶ï¼ŒONBUILDè¢«è§¦å‘</li></ul><p>4.æœ€åç”Ÿæˆé•œåƒæ—¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker build -t æ–°é•œåƒå -f centos\_dockerfile .<br></code></pre></td></tr></table></figure><p>æœ€åæœ‰ä¸ªç‚¹è¡¨ç¤ºå½“å‰ç›®å½•çš„centos_dockerfileæ–‡ä»¶ã€‚ï¼ˆå¦‚æœæ–‡ä»¶åå°±æ˜¯Dockerfileï¼Œåˆ™ç›´æ¥ï¼šdocker build -t æ–°é•œåƒå .ï¼‰</p><ol><li><code>docker image ls</code>æŸ¥çœ‹imageæœ‰å•¥ </li><li><code>docker run -d [image_name]</code>è¿è¡Œèµ·æ¥image ï¼›<code>docker run -d -p 8080:8080 [image_name]</code>æŒ‡å®šç«¯å£çš„è·‘èµ·æ¥</li><li><code>docker container ls</code>æŸ¥çœ‹è·‘èµ·æ¥çš„container</li><li><code>docker stop [contain_id]</code>åœæ­¢æŸä¸ªcontainer</li><li><code>docker container ls -a</code>æŸ¥çœ‹æ‰€æœ‰containerï¼ˆè·‘èµ·æ¥oråœæ‰çš„ï¼‰</li></ol><p><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a> dockerfileå†™æ³•</p>]]></content>
    
    
    <categories>
      
      <category>Backend development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Backend development</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»£ç éšæƒ³å½•</title>
    <link href="/2022/04/21/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/"/>
    <url>/2022/04/21/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬3ç« -æ•°ç»„"><a href="#ç¬¬3ç« -æ•°ç»„" class="headerlink" title="ç¬¬3ç«  æ•°ç»„"></a>ç¬¬3ç«  æ•°ç»„</h1><h2 id="3-2-äºŒåˆ†æŸ¥æ‰¾"><a href="#3-2-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="3.2 äºŒåˆ†æŸ¥æ‰¾"></a>3.2 äºŒåˆ†æŸ¥æ‰¾</h2><p><strong>704. Binary Search</strong></p><p><strong>Q:</strong> Given an array of integers <code>nums</code> which is sorted in ascending order, and an integer <code>target</code>, write a function to search <code>target</code> in <code>nums</code>. If <code>target</code> exists, then return its index. Otherwise, return <code>-1</code>.</p><p>You must write an algorithm with <code>O(log n)</code> runtime complexity.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> pivot, left = <span class="hljs-number">0</span>, right = nums.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (left &lt;= right) &#123;<br>      pivot = left + (right - left) / <span class="hljs-number">2</span>;<br>      <span class="hljs-keyword">if</span> (nums[pivot] == target) <span class="hljs-keyword">return</span> pivot;<br>      <span class="hljs-keyword">if</span> (target &lt; nums[pivot]) right = pivot - <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">else</span> left = pivot + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ (left + right) / 2 = left + (right / 2) - (left / 2) = left + (right - left) / 2</p><p>æˆ‘é‡‡ç”¨çš„æ˜¯ [left, right] é—­åŒºé—´ï¼Œæ‰€ä»¥åˆ¤æ–­æ¡ä»¶æ˜¯ &lt;= ï¼Œleftå’Œrightç›¸ç­‰çš„æ—¶å€™æœ‰æ„ä¹‰ã€‚</p><h2 id="3-3-ç§»é™¤å…ƒç´ "><a href="#3-3-ç§»é™¤å…ƒç´ " class="headerlink" title="3.3 ç§»é™¤å…ƒç´ "></a><strong>3.3 ç§»é™¤å…ƒç´ </strong></h2><p><strong>27. Remove Element</strong></p><p><strong>Q: </strong>Given an integer array <code>nums</code> and an integer <code>val</code>, remove all occurrences of <code>val</code> in <code>nums</code> <strong>in-place</strong>. The relative order of the elements may be changed.</p><p>Return <code>k</code> <em>after placing the final result in the first</em> <code>k</code> <em>slots of</em> <code>nums</code>.</p><p>Do <strong>not</strong> allocate extra space for another array. You must do this by <strong>modifying the input array in-place</strong> with O(1) extra memory.</p><p><strong>A: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">removeElement</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; nums.length; j++) &#123;<br>            <span class="hljs-keyword">if</span> (nums[j] != val) &#123;<br>                nums[i] = nums[j];<br>                i++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>1âƒ£ï¸ ç”±äºæœ‰ç©ºé—´å¤æ‚åº¦çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸èƒ½å»ºç«‹å¦å¤–ä¸€ä¸ªæ•°ç»„æ¥è¿›è¡Œèµ‹å€¼ï¼Œæš—ç¤ºæˆ‘ä»¬ç”¨åŒæŒ‡é’ˆæ³•ï¼ŒåŒæŒ‡é’ˆæ³•æ˜¯å¸¸ç”¨çš„é™ä½æ—¶é—´å¤æ‚åº¦çš„æ–¹æ³•ã€‚</p><p>2âƒ£ï¸ nums = [0, 1 ,4 ,0 ,3 , _ , _] å› ä¸ºæ•°ç»„ä¸­çš„å…ƒç´ åœ¨å†…å­˜åœ°å€ä¸Šæ˜¯è¿ç»­çš„ï¼Œä¸èƒ½å•ç‹¬åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåªèƒ½è¦†ç›–ã€‚</p><h2 id="3-4-é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#3-4-é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="3.4 é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>3.4 é•¿åº¦æœ€å°çš„å­æ•°ç»„</h2><p><strong>209. Minimum Size Subarray Sum</strong></p><p><strong>Q: </strong>Given an array of positive integers <code>nums</code> and a positive integer <code>target</code>, return the minimal length of a <strong>contiguous subarray</strong> <code>[numsl, numsl+1, ..., numsr-1, numsr]</code> of which the sum is greater than or equal to <code>target</code>. If there is no such subarray, return <code>0</code> instead.</p><p><strong>A1:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minSubArrayLen</span><span class="hljs-params">(<span class="hljs-type">int</span> target, <span class="hljs-type">int</span>[] nums)</span> &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">resultLength</span> <span class="hljs-operator">=</span> MAX;<br>        <span class="hljs-type">int</span> subSum;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">subLength</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªä½œä¸ºå¼€å¤´</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>            subSum = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &lt; nums.length; j++) &#123;<br>                <span class="hljs-comment">// æ±‚å­æ•°ç»„çš„å’Œ</span><br>                subSum += nums[j];<br>                <span class="hljs-keyword">if</span> (subSum &gt;= target) &#123;<br>                    subLength = j - i + <span class="hljs-number">1</span>;<br>                    resultLength = resultLength &gt; subLength ? subLength : resultLength;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">return</span> <span class="hljs-variable">resultLength</span> <span class="hljs-operator">=</span>= MAX ? <span class="hljs-number">0</span> : resultLength;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æš´åŠ›è§£æ³•ï¼Œä¸è¿‡ä¹Ÿæœ‰å·§å¦™æ€è·¯ï¼Œé€šè¿‡MAXè¿™ä¸ªå˜é‡å¢åŠ äº†åˆ¤æ–­æ˜¯å¦è¿”å›0çš„æ–¹æ³•ï¼Œæ˜¯flagçš„å¦ä¸€ç§ç”¨æ³•ã€‚</p><p><strong>A2:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minSubArrayLen</span><span class="hljs-params">(<span class="hljs-type">int</span> target, <span class="hljs-type">int</span>[] nums)</span> &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">resultLength</span> <span class="hljs-operator">=</span> MAX;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">subSum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ‡è®°å·¦è¾¹çš„èµ·å§‹ä½ç½®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">subLength</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// ç”¨jæ ‡è®°çš„æ˜¯çª—å£å³è¾¹æŒ‡é’ˆçš„ä½ç½®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; nums.length; j++) &#123;<br>            subSum += nums[j];<br>            <span class="hljs-comment">// ä¿è¯çª—å£å†…çš„sumå€¼æ°¸è¿œæ˜¯å¤§äºç­‰äºtargetçš„</span><br>            <span class="hljs-keyword">while</span> (subSum &gt;= target) &#123;<br>                <span class="hljs-comment">// è·å–å­æ•°ç»„çš„é•¿åº¦å¹¶åˆ¤æ–­æ˜¯å¦æ˜¯æœ€å°çš„ï¼Œ+1æ˜¯å› ä¸ºæ•°ç»„æ˜¯ä»0å¼€å§‹çš„</span><br>                subLength = j - i + <span class="hljs-number">1</span>;<br>                resultLength = resultLength &gt; subLength ? subLength : resultLength;<br>                <span class="hljs-comment">// æ”¶ç¼©å·¦è¾¹çš„æŒ‡é’ˆçš„ä½ç½®</span><br>                subSum -= nums[i++];<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">return</span> <span class="hljs-variable">resultLength</span> <span class="hljs-operator">=</span>= MAX ? <span class="hljs-number">0</span> : resultLength;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¦è€ƒè™‘ä¸‰ä¸ªé—®é¢˜ï¼š</p><p>1âƒ£ï¸ çª—å£å†…çš„å…ƒç´ æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>2âƒ£ï¸ çª—å£çš„èµ·å§‹ä½ç½®ï¼Ÿ</p><p>3âƒ£ï¸ çª—å£çš„ç»“æŸä½ç½®ï¼Ÿ</p><p>æ»‘åŠ¨çª—å£çš„ç²¾å¦™ä¹‹å¤„åœ¨äºæ ¹æ®å½“å‰å­æ•°ç»„å’Œçš„å¤§å°ï¼Œä¸æ–­è°ƒèŠ‚å­æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œä»è€Œå°†æ—¶é—´å¤æ‚åº¦ä»O(n^2)å˜æˆO(n)ã€‚</p><p>subLengthå’ŒresultLengthå¿…é¡»åœ¨æ»¡è¶³subSum &gt;= targetçš„æ—¶å€™æ‰æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æ”¾åœ¨å†…éƒ¨ã€‚</p><h2 id="3-5-èºæ—‹çŸ©é˜µ"><a href="#3-5-èºæ—‹çŸ©é˜µ" class="headerlink" title="3.5 èºæ—‹çŸ©é˜µ"></a>3.5 èºæ—‹çŸ©é˜µ</h2><p><strong>59. Spiral Matrix II</strong></p><p><strong>Q: </strong>Given a positive integer <code>n</code>, generate an <code>n x n</code> <code>matrix</code> filled with elements from <code>1</code> to <code>n2</code> in spiral order.</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/spiraln.jpg" alt="spiraln"></p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[][] generateMatrix(<span class="hljs-type">int</span> n) &#123;<br>        <span class="hljs-type">int</span>[][] Matrix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n][n];<br>        Matrix[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// å®šä¹‰åˆ—è¾¹ç•Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// å®šä¹‰è¡Œè¾¹ç•Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">up</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">down</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// å¡«å……å€¼</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> row;<br>        <span class="hljs-type">int</span> col;<br><br>        <span class="hljs-keyword">while</span> (value != (n * n) + <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-comment">// ä»å·¦å‘å³èµ°</span><br>            <span class="hljs-keyword">for</span> (col = left; col &lt;= right; col++) &#123;<br>                Matrix[up][col] = value;<br>                value++;<br>            &#125;<br>            up++;<br>            <span class="hljs-comment">// ä»ä¸Šå‘ä¸‹èµ°</span><br>            <span class="hljs-keyword">for</span> (row = up; row &lt;= down; row++) &#123;<br>                Matrix[row][right] = value;<br>                value++;<br>            &#125;<br>            right--;<br>            <span class="hljs-comment">// ä»å³å‘å·¦èµ°</span><br>            <span class="hljs-keyword">for</span> (col = right; col &gt;= left; col--) &#123;<br>                Matrix[down][col] = value;<br>                value++;<br>            &#125;<br>            down--;<br>            <span class="hljs-comment">// ä»ä¸‹å‘ä¸Šèµ°</span><br>            <span class="hljs-keyword">for</span> (row = down; row &gt;= up; row--) &#123;<br>                Matrix[row][left] = value;<br>                value++;<br>            &#125;<br>            left++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> Matrix;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è§„å®šå‡ºå››ä¸ªè¾¹ç•Œï¼Œæ¯ä¸ªæ–¹å‘éå†ä¸€æ¬¡ä»¥åé€šè¿‡ ++ æ“ä½œæ¥ä½¿æ­¤è¡Œæˆ–è€…æ­¤åˆ—ä¸å†éå†ã€‚å¾ªç¯ç»ˆæ­¢çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œå…¶ä¸€æ˜¯æ–¹é˜µçš„æƒ…å†µä¸‹è¿›è¡Œç‰¹æ®Šåˆ¤æ–­ï¼Œå…¶äºŒæ˜¯ä¸è§„åˆ™çŸ©é˜µçš„æƒ…å†µä¸‹è¿›è¡Œæ¯ä¸ªæ–¹å‘ä¸Šçš„åˆ¤æ–­ã€‚</p><h1 id="ç¬¬4ç« -é“¾è¡¨"><a href="#ç¬¬4ç« -é“¾è¡¨" class="headerlink" title="ç¬¬4ç«  é“¾è¡¨"></a>ç¬¬4ç«  é“¾è¡¨</h1><h2 id="4-2-è™šæ‹Ÿå¤´èŠ‚ç‚¹é“¾è¡¨åˆ é™¤"><a href="#4-2-è™šæ‹Ÿå¤´èŠ‚ç‚¹é“¾è¡¨åˆ é™¤" class="headerlink" title="4.2 è™šæ‹Ÿå¤´èŠ‚ç‚¹é“¾è¡¨åˆ é™¤"></a>4.2 è™šæ‹Ÿå¤´èŠ‚ç‚¹é“¾è¡¨åˆ é™¤</h2><p><strong>203. Remove Linked List Elements</strong></p><p><strong>Q: </strong>Given the <code>head</code> of a linked list and an integer <code>val</code>, remove all the nodes of the linked list that has <code>Node.val == val</code>, and return <em>the new head</em>.</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/removelinked-list.jpg" alt="removelinked-list"></p><p><strong>A1: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeElements</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-comment">// è™šæ‹Ÿå¤´ç»“ç‚¹</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">fakeHead</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>();<br>        fakeHead.next = head;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> fakeHead, cur = head;<br>        <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (cur.val == val) &#123;<br>                pre.next = cur.next;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                pre = pre.next;<br>            &#125;<br>            cur = cur.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡åŠ å…¥è™šæ‹Ÿå¤´èŠ‚ç‚¹æ¥è§£å†³å¦‚æœæ˜¯ç¬¬ä¸€ä½å°±è¦åˆ é™¤çš„preå’Œcurä¸å¥½æŒ‡å‘çš„é—®é¢˜</p><p><strong>A2:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeElements</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        head.next = removeElements(head.next, val);<br>        <span class="hljs-keyword">return</span> head.val == val ? head.next : head;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€’å½’çš„æ–¹æ³•å®ç°ï¼Œå…ˆé€’å½’åˆ°æœ€åº•å±‚ï¼Œç„¶åå¾€å›ä¸€ç‚¹ç‚¹èµ°ï¼Œæ¯æ¬¡éƒ½åˆ¤æ–­ï¼Œå¦‚æœæœ‰è¦åˆ é™¤çš„å€¼å°±è¿”å›å‰ä¸€ä¸ªï¼Œæ²¡æœ‰è¦åˆ é™¤çš„å°±è¿”å›å½“å‰çš„ç»“ç‚¹ï¼Œç›´åˆ°å›åˆ°æœ€åˆçš„ä½ç½®ã€‚</p><h2 id="4-3-é“¾è¡¨å¸¸è§çš„å…­ä¸ªæ“ä½œ"><a href="#4-3-é“¾è¡¨å¸¸è§çš„å…­ä¸ªæ“ä½œ" class="headerlink" title="4.3 é“¾è¡¨å¸¸è§çš„å…­ä¸ªæ“ä½œ"></a>4.3 é“¾è¡¨å¸¸è§çš„å…­ä¸ªæ“ä½œ</h2><p><strong>707. Design Linked List</strong></p><p><strong>Q: </strong>Design your implementation of the linked list. You can choose to use a singly or doubly linked list.<br>A node in a singly linked list should have two attributes: <code>val</code> and <code>next</code>. <code>val</code>is the value of the current node, and <code>next</code> is a pointer/reference to the next node.<br>If you want to use the doubly linked list, you will need one more attribute <code>prev</code>to indicate the previous node in the linked list. Assume all nodes in the linked list are <strong>0-indexed</strong>.</p><p>Implement the <code>MyLinkedList</code> class:</p><ul><li><code>MyLinkedList()</code> Initializes the <code>MyLinkedList</code> object.</li><li><code>int get(int index)</code> Get the value of the <code>indexth</code> node in the linked list. If the index is invalid, return <code>-1</code>.</li><li><code>void addAtHead(int val)</code> Add a node of value <code>val</code> before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.</li><li><code>void addAtTail(int val)</code> Append a node of value <code>val</code> as the last element of the linked list.</li><li><code>void addAtIndex(int index, int val)</code> Add a node of value <code>val</code>before the <code>indexth</code> node in the linked list. If <code>index</code> equals the length of the linked list, the node will be appended to the end of the linked list. If <code>index</code> is greater than the length, the node <strong>will not be inserted</strong>.</li><li><code>void deleteAtIndex(int index)</code> Delete the <code>indexth</code> node in the linked list, if the index is valid.</li></ul><p><strong>A:</strong> </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> MyLinkedList <span class="hljs-keyword">struct</span> &#123;<br>head *Node<br>&#125;<br><br><span class="hljs-keyword">type</span> Node <span class="hljs-keyword">struct</span> &#123;<br>Val  <span class="hljs-type">int</span><br>Next *Node<br>Prev *Node<br>&#125;<br><br><span class="hljs-comment">/** Initialize your data structure here. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Constructor</span><span class="hljs-params">()</span></span> MyLinkedList &#123;<br><span class="hljs-keyword">return</span> MyLinkedList&#123;&#125;<br>&#125;<br><br><span class="hljs-comment">/** Get the value of the index-th node in the linked list. If the index is invalid, return -1. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *MyLinkedList)</span></span> Get(index <span class="hljs-type">int</span>) <span class="hljs-type">int</span> &#123;<br>curr := this.head<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; index &amp;&amp; curr != <span class="hljs-literal">nil</span>; i++ &#123;<br>curr = curr.Next<br>&#125;<br><span class="hljs-keyword">if</span> curr != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> curr.Val<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br>&#125;<br><br><span class="hljs-comment">/** Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *MyLinkedList)</span></span> AddAtHead(val <span class="hljs-type">int</span>) &#123;<br>node := &amp;Node&#123;Val: val&#125;<br>node.Next = this.head<br><span class="hljs-keyword">if</span> this.head != <span class="hljs-literal">nil</span> &#123;<br>this.head.Prev = node<br>&#125;<br>this.head = node<br>&#125;<br><br><span class="hljs-comment">/** Append a node of value val to the last element of the linked list. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *MyLinkedList)</span></span> AddAtTail(val <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> this.head == <span class="hljs-literal">nil</span> &#123;<br>this.AddAtHead(val)<br><span class="hljs-keyword">return</span><br>&#125;<br>node := &amp;Node&#123;Val: val&#125;<br>curr := this.head<br><span class="hljs-keyword">for</span> curr != <span class="hljs-literal">nil</span> &amp;&amp; curr.Next != <span class="hljs-literal">nil</span> &#123;<br>curr = curr.Next<br>&#125;<br>node.Prev = curr<br>curr.Next = node<br>&#125;<br><br><span class="hljs-comment">/** Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *MyLinkedList)</span></span> AddAtIndex(index <span class="hljs-type">int</span>, val <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> index == <span class="hljs-number">0</span> &#123;<br>this.AddAtHead(val)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>node := &amp;Node&#123;Val: val&#125;<br>curr := this.head<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; index<span class="hljs-number">-1</span> &amp;&amp; curr != <span class="hljs-literal">nil</span>; i++ &#123;<br>curr = curr.Next<br>&#125;<br><span class="hljs-keyword">if</span> curr != <span class="hljs-literal">nil</span> &#123;<br>node.Next = curr.Next<br>node.Prev = curr<br><span class="hljs-keyword">if</span> node.Next != <span class="hljs-literal">nil</span> &#123;<br>node.Next.Prev = node<br>&#125;<br>curr.Next = node<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/** Delete the index-th node in the linked list, if the index is valid. */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(this *MyLinkedList)</span></span> DeleteAtIndex(index <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> index == <span class="hljs-number">0</span> &#123;<br>this.head = this.head.Next<br><span class="hljs-keyword">if</span> this.head != <span class="hljs-literal">nil</span> &#123;<br>this.head.Prev = <span class="hljs-literal">nil</span><br>&#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>curr := this.head<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; index<span class="hljs-number">-1</span> &amp;&amp; curr != <span class="hljs-literal">nil</span>; i++ &#123;<br>curr = curr.Next<br>&#125;<br><span class="hljs-keyword">if</span> curr != <span class="hljs-literal">nil</span> &amp;&amp; curr.Next != <span class="hljs-literal">nil</span> &#123;<br>curr.Next = curr.Next.Next<br><span class="hljs-keyword">if</span> curr.Next != <span class="hljs-literal">nil</span> &#123;<br>curr.Next.Prev = curr<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Your MyLinkedList object will be instantiated and called as such:</span><br><span class="hljs-comment"> * obj := Constructor();</span><br><span class="hljs-comment"> * param_1 := obj.Get(index);</span><br><span class="hljs-comment"> * obj.AddAtHead(val);</span><br><span class="hljs-comment"> * obj.AddAtTail(val);</span><br><span class="hljs-comment"> * obj.AddAtIndex(index,val);</span><br><span class="hljs-comment"> * obj.DeleteAtIndex(index);</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure><h2 id="4-4-åè½¬é“¾è¡¨"><a href="#4-4-åè½¬é“¾è¡¨" class="headerlink" title="4.4 åè½¬é“¾è¡¨"></a>4.4 åè½¬é“¾è¡¨</h2><p><strong>206. Reverse Linked List</strong></p><p><strong>Q:</strong> Given the <code>head</code> of a singly linked list, reverse the list, and return <em>the reversed list</em>.</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/rev1ex1.jpg" alt="rev1ex1"></p><p><strong>A:</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//åŒæŒ‡é’ˆ</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(head *ListNode)</span></span> *ListNode &#123;<br>    <span class="hljs-keyword">var</span> pre *ListNode<br>    cur := head<br>    <span class="hljs-keyword">for</span> cur != <span class="hljs-literal">nil</span> &#123;<br>        next := cur.Next<br>        cur.Next = pre<br>        pre = cur<br>        cur = next<br>    &#125;<br>    <span class="hljs-keyword">return</span> pre<br>&#125;<br><br><span class="hljs-comment">//é€’å½’</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(head *ListNode)</span></span> *ListNode &#123;<br>    <span class="hljs-keyword">return</span> help(<span class="hljs-literal">nil</span>, head)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">help</span><span class="hljs-params">(pre, head *ListNode)</span></span>*ListNode&#123;<br>    <span class="hljs-keyword">if</span> head == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> pre<br>    &#125;<br>    next := head.Next<br>    head.Next = pre<br>    <span class="hljs-keyword">return</span> help(head, next)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-5-åˆ é™¤å€’æ•°ç¬¬nä¸ªå­—èŠ‚"><a href="#4-5-åˆ é™¤å€’æ•°ç¬¬nä¸ªå­—èŠ‚" class="headerlink" title="4.5 åˆ é™¤å€’æ•°ç¬¬nä¸ªå­—èŠ‚"></a>4.5 åˆ é™¤å€’æ•°ç¬¬nä¸ªå­—èŠ‚</h2><p><strong>19. Remove Nth Node From End of List</strong></p><p><strong>Q: </strong>Given the <code>head</code> of a linked list, remove the <code>nth</code> node from the end of the list and return its head. </p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeNthFromEnd</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-comment">// fakeHead</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">fakeHead</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>();<br>        fakeHead.next = head;<br>        <span class="hljs-comment">// fast &amp; slow, fast pointer faster than slow pointer n steps.</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">slow</span> <span class="hljs-operator">=</span> fakeHead;<br>        <span class="hljs-comment">// set the position of the fast pointer.</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">fast</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-comment">// n represent the times of loop, if &#x27;i&#x27; start from 0.</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            fast = fast.next;<br>        &#125;<br>        <span class="hljs-keyword">while</span> (fast != <span class="hljs-literal">null</span>) &#123;<br>            fast = fast.next;<br>            slow = slow.next;<br>        &#125;<br>        slow.next = slow.next.next;<br>        <span class="hljs-keyword">return</span> fakeHead.next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡åŒæŒ‡é’ˆçš„é—´è·æ¥æ‰¾åˆ°å€’æ•°ç¬¬nä¸ªçš„ä½ç½®ï¼Œæˆ‘è®©fastæå‰ç­‰äºheadå†å¾€åèµ°ï¼Œæ˜¯ä¸ºäº†åœ¨æ‰¾åˆ°æœ€åçš„nullçš„æ—¶å€™ï¼Œslowæ­£å¥½æ˜¯è¦åˆ é™¤çš„ç»“ç‚¹çš„å‰ä¸€ä¸ªã€‚</p><h2 id="4-6-ç¯å½¢é“¾è¡¨"><a href="#4-6-ç¯å½¢é“¾è¡¨" class="headerlink" title="4.6 ç¯å½¢é“¾è¡¨"></a>4.6 ç¯å½¢é“¾è¡¨</h2><p><strong>142. Linked List Cycle II</strong></p><p><strong>Q: </strong>Given the <code>head</code> of a linked list, return <em>the node where the cycle begins. If there is no cycle, return</em> <code>null</code>.</p><p>There is a cycle in a linked list if there is some node in the list that can be reached again by continuously following the <code>next</code> pointer. Internally, <code>pos</code> is used to denote the index of the node that tailâ€™s <code>next</code> pointer is connected to (<strong>0-indexed</strong>). It is <code>-1</code> if there is no cycle. <strong>Note that</strong> <code>pos</code> <strong>is not passed as a parameter</strong>.</p><p><strong>Do not modify</strong> the linked list.</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/circularlinkedlist.png" alt="circularlinkedlist"></p><p><strong>A: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">detectCycle</span><span class="hljs-params">(ListNode head)</span> &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">slow</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">fast</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-keyword">while</span> (fast != <span class="hljs-literal">null</span> &amp;&amp; fast.next != <span class="hljs-literal">null</span>) &#123;<br>            slow = slow.next;<br>            fast = fast.next.next;<br>            <span class="hljs-keyword">if</span> (slow == fast) &#123;<span class="hljs-comment">// æœ‰ç¯</span><br>                <span class="hljs-type">ListNode</span> <span class="hljs-variable">index1</span> <span class="hljs-operator">=</span> fast;<br>                <span class="hljs-type">ListNode</span> <span class="hljs-variable">index2</span> <span class="hljs-operator">=</span> head;<br>                <span class="hljs-comment">// ä¸¤ä¸ªæŒ‡é’ˆï¼Œä»å¤´ç»“ç‚¹å’Œç›¸é‡ç»“ç‚¹ï¼Œå„èµ°ä¸€æ­¥ï¼Œç›´åˆ°ç›¸é‡ï¼Œç›¸é‡ç‚¹å³ä¸ºç¯å…¥å£</span><br>                <span class="hljs-keyword">while</span> (index1 != index2) &#123;<br>                    index1 = index1.next;<br>                    index2 = index2.next;<br>                &#125;<br>                <span class="hljs-keyword">return</span> index1;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæŒ‡é’ˆçš„æ€æƒ³ï¼Œå…·ä½“æ¨å¯¼è¿‡ç¨‹è§ä¹¦P66ã€‚</p><p>1âƒ£ï¸åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Ÿ</p><p>2âƒ£ï¸åˆ¤æ–­ç¯çš„å…¥å£åœ¨å“ªé‡Œï¼Ÿ</p><p>xä¸ºèµ·å§‹ä½ç½®åˆ°å¾ªç¯å…¥å£çš„è·ç¦»ï¼Œyä¸ºå¾ªç¯å…¥å£åˆ°fastå’Œslowçš„ç›¸é‡ä½ç½®ï¼Œzä¸ºç›¸é‡ä½ç½®åˆ°å¾ªç¯å…¥å£å¤„çš„è·ç¦»ã€‚</p><p><strong>x = (n - 1)(y + z) + z</strong>ï¼Œå½“n = 1æ—¶x = zã€‚ä»£è¡¨ç€èµ°äº†ä¸€åœˆå°±ç›¸é‡äº†ã€‚è‹¥n &gt; 1çš„è¯ï¼Œé“ç†ä¸€æ ·ï¼Œæ€»ä¹‹æ˜¯index2ä¼šæ¯”index1å°‘è½¬ä¸€åœˆå¹¶ä¸”ç›¸é‡ã€‚</p><p>zæ˜¯fastç›¸é‡çš„ä½ç½®å¼€å§‹èµ°ï¼Œæœ€èµ·ç è¦èµ°ä¸€åœˆï¼Œå¤šçš„å°±æ˜¯åœ¨å…¥å£ç‚¹å‰ç›¸é‡çš„æ—¶å€™ï¼Œè½¬äº†å‡ åœˆy + zä»£è¡¨çš„æ˜¯èµ°ä¸€åœˆè¦çš„è·ç¦»ã€‚</p><p>ps: nä¸€å®šå¤§äºç­‰äº1ï¼Œå› ä¸ºindex1å¿…é¡»æœ€èµ·ç èµ°ä¸€åœˆæ‰èƒ½å¤Ÿå’Œindex2ç›¸é‡ã€‚</p><h1 id="ç¬¬5ç« -å“ˆå¸Œè¡¨"><a href="#ç¬¬5ç« -å“ˆå¸Œè¡¨" class="headerlink" title="ç¬¬5ç«  å“ˆå¸Œè¡¨"></a>ç¬¬5ç«  å“ˆå¸Œè¡¨</h1><h2 id="5-2-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"><a href="#5-2-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯" class="headerlink" title="5.2 æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"></a>5.2 æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</h2><p><strong>242. Valid Anagram</strong></p><p><strong>Q: </strong>Given two strings <code>s</code> and <code>t</code>, return <code>true</code> <em>if</em> <code>t</code> <em>is an anagram of</em> <code>s</code><em>, and</em> <code>false</code><em>otherwise</em>.</p><p>An <strong>Anagram</strong> is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAnagram</span><span class="hljs-params">(String s, String t)</span> &#123;<br>        <span class="hljs-type">int</span>[] record = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">26</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>            record[s.charAt(i) - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; t.length(); i++) &#123;<br>            record[t.charAt(i) - <span class="hljs-string">&#x27;a&#x27;</span>]--;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (record[i] != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªå¸¸ç”¨çš„å¤„ç†å­—ç¬¦å‡ºç°æ¬¡æ•°çš„æ–¹æ³•ã€‚å­—ç¬¦ - â€˜aâ€™ä¹Ÿç®—æ˜¯ä¸€ç§å“ˆå¸Œå‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠå­—ç¬¦ä¸²é€šè¿‡ASCIIè½¬æ¢ï¼Œç”¨26ä½çš„æ•°ç»„å­˜å‚¨ä»–ä»¬å‡ºç°çš„æ¬¡æ•°ã€‚</p><h2 id="5-3-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"><a href="#5-3-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†" class="headerlink" title="5.3 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"></a>5.3 ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</h2><p><strong>349. Intersection of Two Arrays</strong></p><p><strong>Q: </strong>Given two integer arrays <code>nums1</code> and <code>nums2</code>, return <em>an array of their intersection</em>. Each element in the result must be <strong>unique</strong> and you may return the result in <strong>any order</strong>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] intersection(<span class="hljs-type">int</span>[] nums1, <span class="hljs-type">int</span>[] nums2) &#123;<br>        Set&lt;Integer&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>        Set&lt;Integer&gt; intersect = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums1.length; i++) &#123;<br>            set.add(nums1[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums2.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (set.contains(nums2[i])) &#123;<br>                intersect.add(nums2[i]);<br>            &#125;<br>        &#125;<br>  <span class="hljs-comment">// set turn to the int[]</span><br>        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[intersect.size()];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (Integer num : intersect) &#123;<br>            result[i++] = num;<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/java-hashset-hierarchy.png" alt="java-hashset-hierarchy"></p><ul><li><p>HashSet åŸºäº HashMap æ¥å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚</p></li><li><p>HashSet å…è®¸æœ‰ null å€¼ã€‚</p></li><li><p>HashSet æ˜¯æ— åºçš„ï¼Œå³ä¸ä¼šè®°å½•æ’å…¥çš„é¡ºåºã€‚</p></li><li><p>HashSet ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œ å¦‚æœå¤šä¸ªçº¿ç¨‹å°è¯•åŒæ—¶ä¿®æ”¹ HashSetï¼Œåˆ™æœ€ç»ˆç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚ æ‚¨å¿…é¡»åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶æ˜¾å¼åŒæ­¥å¯¹ HashSet çš„å¹¶å‘è®¿é—®ã€‚</p></li><li><p>HashSet å®ç°äº† Set æ¥å£ã€‚</p></li></ul><p>è¿›è¡Œäº†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥åˆç­›æœ‰å“ªäº›valueï¼Œç¬¬äºŒæ­¥ç¡®å®šç›¸äº¤çš„valueåˆæœ‰å“ªäº›ã€‚</p><h2 id="5-4-ä¸¤æ•°ä¹‹å’Œ"><a href="#5-4-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="5.4 ä¸¤æ•°ä¹‹å’Œ"></a>5.4 ä¸¤æ•°ä¹‹å’Œ</h2><p><strong>1. Two Sum</strong></p><p><strong>Q: </strong>Given an array of integers <code>nums</code> and an integer <code>target</code>, return <em>indices of the two numbers such that they add up to <code>target</code></em>.</p><p>You may assume that each input would have <strong>exactly one solution</strong>, and you may not use the <em>same</em> element twice.</p><p>You can return the answer in any order.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] twoSum(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target) &#123;<br>        Map&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i&lt; nums.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (map.containsKey(target - nums[i])) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;map.get(target - nums[i]), i&#125;;<br>            &#125;<br>            map.put(nums[i], i);<br>        &#125;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;No two sum solution&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€è·¯</p><p>æ ‡ç­¾ï¼šå“ˆå¸Œæ˜ å°„</p><ul><li>è¿™é“é¢˜æœ¬èº«å¦‚æœé€šè¿‡æš´åŠ›éå†çš„è¯ä¹Ÿæ˜¯å¾ˆå®¹æ˜“è§£å†³çš„ï¼Œæ—¶é—´å¤æ‚åº¦åœ¨ O(n^2)</li><li>ç”±äºå“ˆå¸ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨å“ˆå¸Œå®¹å™¨ map é™ä½æ—¶é—´å¤æ‚åº¦</li><li>éå†æ•°ç»„ nums, iä¸ºå½“å‰ä¸‹æ ‡ï¼Œæ¯ä¸ªå€¼éƒ½åˆ¤æ–­mapä¸­æ˜¯å¦å­˜åœ¨ target - nums[i] çš„ key å€¼</li><li>å¦‚æœå­˜åœ¨åˆ™æ‰¾åˆ°äº†ä¸¤ä¸ªå€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å°†å½“å‰çš„ (nums[i], i) å­˜å…¥ map ä¸­ï¼Œç»§ç»­éå†ç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</li></ul><p>æ¯æ¬¡éƒ½æ˜¯å…ˆåˆ¤æ–­å·²æœ‰çš„mapé‡Œé¢æ˜¯å¦æœ‰ç­”æ¡ˆï¼Œè‹¥æ²¡æœ‰ç­”æ¡ˆå°±æ”¾è¿›mapé‡Œï¼Œè¿™æ ·åªè¦æ‰¾åˆ°ç­”æ¡ˆç«‹é©¬å¯ä»¥å¾—åˆ°ç»“æœï¼ˆé€šè¿‡ target - nums[i] å’Œæ­¤æ—¶çš„ i å¾—åˆ°å¯¹åº”çš„ä¸‹æ ‡ï¼‰å¹¶ä¸”æœ‰æœ€ä¼˜çš„ç©ºé—´å¤æ‚åº¦ã€‚ä¹‹æ‰€ä»¥ç”¨mapä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦çš„ç­”æ¡ˆæ˜¯ä¸‹æ ‡ï¼Œmapå¯ä»¥å­˜å‚¨æ¯ä¸ªæ•°ç»„çš„ä¸‹æ ‡ï¼Œè€Œå•ä¸€çš„æ•°ç»„æ˜¯åšä¸åˆ°çš„ã€‚</p><h2 id="5-5-å››æ•°ç›¸åŠ "><a href="#5-5-å››æ•°ç›¸åŠ " class="headerlink" title="5.5 å››æ•°ç›¸åŠ "></a>5.5 å››æ•°ç›¸åŠ </h2><p><strong>454. 4Sum II</strong></p><p><strong>Q:</strong> Given four integer arrays <code>nums1</code>, <code>nums2</code>, <code>nums3</code>, and <code>nums4</code> all of length <code>n</code>, return the number of tuples <code>(i, j, k, l)</code> such that:</p><ul><li><code>0 &lt;= i, j, k, l &lt; n</code></li><li><code>nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0</code></li></ul><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fourSumCount</span><span class="hljs-params">(<span class="hljs-type">int</span>[] A, <span class="hljs-type">int</span>[] B, <span class="hljs-type">int</span>[] C, <span class="hljs-type">int</span>[] D)</span> &#123;<br>        Map&lt;Integer,Integer&gt; sums = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> a : A) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> b : B) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> a + b;<br>                <span class="hljs-keyword">if</span>(sums.containsKey(sum)) &#123;<br>                    sums.put(sum, sums.get(sum)+<span class="hljs-number">1</span>);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    sums.put(sum, <span class="hljs-number">1</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c : C) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> d : D)&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> -(c + d);<br>                <span class="hljs-keyword">if</span> (sums.containsKey(sum)) &#123;<br>                    count+=sums.get(sum);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>åˆ©ç”¨ä¸¤æ•°ä¹‹å’Œçš„æ€æƒ³ï¼Œå…ˆæŠŠå››ä¸ªæ•°ç»„èåˆæˆä¸¤ä¸ªï¼ŒæŠŠå‰ä¸¤ä¸ªæ•°ç»„å¯ä»¥ç»„æˆçš„æ‰€æœ‰éƒ½æ”¾åœ¨ä¸€ä¸ªmapé‡Œé¢ï¼Œåˆ©ç”¨åŒå±‚éå†æŠŠåç»­çš„ä¸¤ä¸ªæ•°ç»„éƒ½è¿›è¡Œåšå·®æŸ¥æ‰¾ã€‚</p><h2 id="5-6-ä¸‰æ•°ä¹‹å’Œ"><a href="#5-6-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="5.6 ä¸‰æ•°ä¹‹å’Œ"></a>5.6 ä¸‰æ•°ä¹‹å’Œ</h2><p><strong>15. 3Sum</strong></p><p><strong>Q: </strong>Given an integer array nums, return all the triplets <code>[nums[i], nums[j], nums[k]]</code> such that <code>i != j</code>, <code>i != k</code>, and <code>j != k</code>, and <code>nums[i] + nums[j] + nums[k] == 0</code>.</p><p>Notice that the solution set must not contain duplicate triplets.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">threeSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>    List&lt;List&lt;Integer&gt;&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    Arrays.sort(nums);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i + <span class="hljs-number">2</span> &lt; nums.length; i++) &#123;<br>        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>]) &#123;              <span class="hljs-comment">// skip same result</span><br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>, k = nums.length - <span class="hljs-number">1</span>;  <br>        <span class="hljs-type">int</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> -nums[i];<br>        <span class="hljs-keyword">while</span> (j &lt; k) &#123;<br>            <span class="hljs-keyword">if</span> (nums[j] + nums[k] == target) &#123;<br>                res.add(Arrays.asList(nums[i], nums[j], nums[k]));<br>                j++;<br>                k--;<br>                <span class="hljs-keyword">while</span> (j &lt; k &amp;&amp; nums[j] == nums[j - <span class="hljs-number">1</span>]) j++;  <span class="hljs-comment">// skip same result</span><br>                <span class="hljs-keyword">while</span> (j &lt; k &amp;&amp; nums[k] == nums[k + <span class="hljs-number">1</span>]) k--;  <span class="hljs-comment">// skip same result</span><br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[j] + nums[k] &gt; target) &#123;<br>                k--;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                j++;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure><p>Array.sort(int[] arr)ç”¨æ¥sortæ•°ç»„é»˜è®¤æ˜¯ä»å°åˆ°å¤§ã€‚</p><p>res.add(Arrays.asList(nums[i], nums[j], nums[k]));è¿™æ˜¯ListåŠ å…¥ä¸€ç³»åˆ—æ•°çš„æ–¹æ³•ã€‚</p><p>æŠŠä¸‰ä¸ªåŠ¨ç‚¹å˜æˆä¸€ä¸ªå®šç‚¹ï¼Œä¸¤ä¸ªåŠ¨ç‚¹ã€‚å®šç‚¹ä½œä¸ºå¾ªç¯æ¡ä»¶ï¼Œåœ¨å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œåˆ¤æ–­ï¼Œä¸€ä¸ªå·¦æŒ‡é’ˆå’Œä¸€ä¸ªå³æŒ‡é’ˆæ¥åˆ¤æ–­åœ¨å®šç‚¹åŸºç¡€ä¸Šï¼Œæœ‰æ²¡æœ‰ç»„åˆä½¿ç»“æœæˆç«‹ã€‚è¿™ä¸ªçš„ä¼˜ç‚¹æ˜¯åˆ¤æ–­äº†ä¸€ä¸ªé‡å¤çš„æƒ…å†µç›´æ¥è·³è¿‡ï¼Œå› ä¸ºé¢˜ç›®è¯´äº†ä¸èƒ½æœ‰é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><h2 id="5-7-å››æ•°ä¹‹å’Œ"><a href="#5-7-å››æ•°ä¹‹å’Œ" class="headerlink" title="5.7 å››æ•°ä¹‹å’Œ"></a>5.7 å››æ•°ä¹‹å’Œ</h2><p><strong>18. 4Sum</strong></p><p><strong>Q: </strong>Given an array <code>nums</code> of <code>n</code> integers, return <em>an array of all the <strong>unique</strong>quadruplets</em> <code>[nums[a], nums[b], nums[c], nums[d]]</code> such that:</p><ul><li><code>0 &lt;= a, b, c, d &lt; n</code></li><li><code>a</code>, <code>b</code>, <code>c</code>, and <code>d</code> are <strong>distinct</strong>.</li><li><code>nums[a] + nums[b] + nums[c] + nums[d] == target</code></li></ul><p>You may return the answer in <strong>any order</strong>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">fourSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        List&lt;List&lt;Integer&gt;&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> targetDiff;<br>        <span class="hljs-type">int</span> left, right;<br>        <span class="hljs-comment">// sort input</span><br>        Arrays.sort(nums);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length - <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-comment">// skip the same result, if the cur value is same as the former value, the skip the cur value.</span><br>            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>]) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-comment">// åœ¨ nums[i] åŸºç¡€ä¸Šï¼Œä» i + 1 å¤„å¼€å§‹éå†ï¼Œç»§ç»­ä¸‰æ•°ä¹‹å’Œçš„æ€æƒ³</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; nums.length - <span class="hljs-number">2</span>; j++) &#123;<br>                <span class="hljs-comment">// skip the same result</span><br>                <span class="hljs-keyword">if</span> (j &gt; i + <span class="hljs-number">1</span> &amp;&amp; nums[j] == nums[j - <span class="hljs-number">1</span>]) &#123;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                left = j + <span class="hljs-number">2</span>;<br>                right = nums.length - <span class="hljs-number">1</span>;<br>                targetDiff = target - nums[i] - nums[j];<br>                <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>                    <span class="hljs-comment">// è‹¥åŒ…å«çš„å…ƒç´ èƒ½å¤Ÿåšå·®æ»¡è¶³é—®é¢˜</span><br>                    <span class="hljs-keyword">if</span> (targetDiff - nums[left] - nums[right] == <span class="hljs-number">0</span>) &#123;<br>                        res.add(Arrays.asList(nums[i], nums[j], nums[left], nums[right]));<br>                        left++;<br>                        right--;<br>                        <span class="hljs-comment">// skip the same result</span><br>                        <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[left] == nums[left - <span class="hljs-number">1</span>]) &#123; left++; &#125;<br>                        <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[right] == nums[right + <span class="hljs-number">1</span>]) &#123; right--; &#125;<br>                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (targetDiff - nums[left] - nums[right] &gt; <span class="hljs-number">0</span>) &#123;<br>                        left++;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        right--;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸‰æ•°ä¹‹å’Œçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªç»´åº¦ï¼Œä»–çš„æ—¶é—´å¤æ‚åº¦çš„å¢åŠ å®Œå…¨æ˜¯å› ä¸ºå›ºå®šçš„å‰ä¸¤ä½ï¼Œè‹¥æ˜¯äº”æ•°ä¹‹å’Œæ—¶é—´å¤æ‚åº¦å†*nã€‚</p><h1 id="ç¬¬6ç« -å­—ç¬¦ä¸²"><a href="#ç¬¬6ç« -å­—ç¬¦ä¸²" class="headerlink" title="ç¬¬6ç«  å­—ç¬¦ä¸²"></a>ç¬¬6ç«  å­—ç¬¦ä¸²</h1><h2 id="6-2-åè½¬å­—ç¬¦ä¸²"><a href="#6-2-åè½¬å­—ç¬¦ä¸²" class="headerlink" title="6.2 åè½¬å­—ç¬¦ä¸²"></a>6.2 åè½¬å­—ç¬¦ä¸²</h2><p><strong>344. Reverse String</strong></p><p><strong>Q: </strong>Write a function that reverses a string. The input string is given as an array of characters <code>s</code>.</p><p>You must do this by modifying the input array <a href="https://en.wikipedia.org/wiki/In-place_algorithm">in-place</a> with <code>O(1)</code> extra memory.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reverseString</span><span class="hljs-params">(<span class="hljs-type">char</span>[] s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> s.length - <span class="hljs-number">1</span>;<br>        <span class="hljs-type">char</span> temp;<br>      <br>        <span class="hljs-keyword">while</span>(i &lt;= j)&#123;<br>            temp = s[i];<br>            s[i] = s[j];<br>            s[j] = temp;<br>            i++;<br>            j--;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŸºæœ¬çš„swapæ€æƒ³ï¼Œå…³æ³¨ç‚¹åœ¨äº i &lt;= j å’Œ i &lt; j éƒ½æ˜¯æˆç«‹çš„ï¼Œä½†æ˜¯åè€…å¯ä»¥å°‘åˆ¤æ–­ä¸€ä¸ªi = jï¼Œå¯ä»¥èŠ‚çœåˆ¤æ–­çš„ä¸€ç‚¹ç‚¹æ—¶é—´ã€‚</p><h2 id="6-3-åè½¬å­—ç¬¦ä¸²-II"><a href="#6-3-åè½¬å­—ç¬¦ä¸²-II" class="headerlink" title="6.3 åè½¬å­—ç¬¦ä¸² II"></a>6.3 åè½¬å­—ç¬¦ä¸² II</h2><p><strong>541. Reverse String II</strong></p><p><strong>Q: </strong>Given a string <code>s</code> and an integer <code>k</code>, reverse the first <code>k</code> characters for every <code>2k</code> characters counting from the start of the string.</p><p>If there are fewer than <code>k</code> characters left, reverse all of them. If there are less than <code>2k</code> but greater than or equal to <code>k</code> characters, then reverse the first <code>k</code>characters and leave the other as original.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">reverseStr</span><span class="hljs-params">(String s, <span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-type">char</span>[] charArr = s.toCharArray();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i += (<span class="hljs-number">2</span> * k)) &#123;<br>            <span class="hljs-comment">// the rest is less than the k, reverse all the rest</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">rest</span> <span class="hljs-operator">=</span> s.length() - i;<br>            <span class="hljs-keyword">if</span> (rest &lt; k) &#123;<br>                reverseChar(charArr, i, s.length() - <span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(charArr);<br>            &#125; <br><br>            <span class="hljs-comment">// äº¤æ¢çš„ä½ç½®æ˜¯å·¦è¾¹iï¼Œå³è¾¹i + (k - 1)</span><br>            reverseChar(charArr, i, (i + k) - <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(charArr);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reverseChar</span><span class="hljs-params">(<span class="hljs-type">char</span>[] arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> &#123;<br>        <span class="hljs-type">char</span> temp;<br>        <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>            temp = arr[left];<br>            arr[left] = arr[right];<br>            arr[right] = temp;<br>            left++;<br>            right--;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€è·¯ï¼šå…ˆåˆ†æå‡ºäº¤æ¢çš„æ–¹æ³•æ€»å…±å°±æœ‰ä¸¤ç§ï¼Œäº¤æ¢å‰kä¸ªå’Œäº¤æ¢æ‰€æœ‰ï¼Œäº¤æ¢å‰©ä½™æ‰€æœ‰æ˜¯ç‰¹æ®Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨å‰é¢å½“ä½œç‰¹æ®Šæ¡ä»¶ï¼Œåªè¦å‡ºç°äº†ç›´æ¥å¾—åˆ°ç»“æœä¸ç”¨è¿›è¡Œå¤šä½™çš„åˆ¤æ–­ã€‚</p><h2 id="6-4-åè½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯"><a href="#6-4-åè½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯" class="headerlink" title="6.4 åè½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯"></a>6.4 åè½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯</h2><p><strong>151. Reverse Words in a String</strong></p><p><strong>Q: </strong>Given an input string <code>s</code>, reverse the order of the <strong>words</strong>.</p><p>A <strong>word</strong> is defined as a sequence of non-space characters. The <strong>words</strong> in <code>s</code> will be separated by at least one space.</p><p>Return <em>a string of the words in reverse order concatenated by a single space.</em></p><p><strong>Note</strong> that <code>s</code> may contain leading or trailing spaces or multiple spaces between two words. The returned string should only have a single space separating the words. Do not include any extra spaces.</p><p><strong>A: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">reverseWords</span><span class="hljs-params">(String s)</span> &#123;<br>      <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br><br>      <span class="hljs-type">char</span>[] a = s.toCharArray();<br>      <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> a.length;<br><br>      <span class="hljs-comment">// step 1. reverse the whole string</span><br>      reverse(a, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>);<br>      <span class="hljs-comment">// step 2. reverse each word</span><br>      reverseWords(a, n);<br>      <span class="hljs-comment">// step 3. clean up spaces</span><br>      <span class="hljs-keyword">return</span> cleanSpaces(a, n);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reverseWords</span><span class="hljs-params">(<span class="hljs-type">char</span>[] a, <span class="hljs-type">int</span> n)</span> &#123;<br>      <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br><br>      <span class="hljs-keyword">while</span> (i &lt; n) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt; j || i &lt; n &amp;&amp; a[i] == <span class="hljs-string">&#x27; &#x27;</span>) i++; <span class="hljs-comment">// skip spaces</span><br>        <span class="hljs-keyword">while</span> (j &lt; i || j &lt; n &amp;&amp; a[j] != <span class="hljs-string">&#x27; &#x27;</span>) j++; <span class="hljs-comment">// skip non spaces</span><br>        reverse(a, i, j - <span class="hljs-number">1</span>);                      <span class="hljs-comment">// reverse the word</span><br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// trim leading, trailing and multiple spaces</span><br>    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">cleanSpaces</span><span class="hljs-params">(<span class="hljs-type">char</span>[] a, <span class="hljs-type">int</span> n)</span> &#123;<br>      <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br><br>      <span class="hljs-keyword">while</span> (j &lt; n) &#123;<br>        <span class="hljs-keyword">while</span> (j &lt; n &amp;&amp; a[j] == <span class="hljs-string">&#x27; &#x27;</span>) j++;             <span class="hljs-comment">// skip spaces</span><br>        <span class="hljs-keyword">while</span> (j &lt; n &amp;&amp; a[j] != <span class="hljs-string">&#x27; &#x27;</span>) a[i++] = a[j++]; <span class="hljs-comment">// keep non spaces</span><br>        <span class="hljs-keyword">while</span> (j &lt; n &amp;&amp; a[j] == <span class="hljs-string">&#x27; &#x27;</span>) j++;             <span class="hljs-comment">// skip spaces</span><br>        <span class="hljs-keyword">if</span> (j &lt; n) a[i++] = <span class="hljs-string">&#x27; &#x27;</span>;                      <span class="hljs-comment">// keep only one space</span><br>      &#125;<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(a).substring(<span class="hljs-number">0</span>, i);<br>    &#125;<br><br>    <span class="hljs-comment">// reverse a[] from a[i] to a[j]</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span>[] a, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>      <span class="hljs-keyword">while</span> (i &lt; j) &#123;<br>        <span class="hljs-type">char</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> a[i];<br>        a[i++] = a[j];<br>        a[j--] = t;<br>      &#125;<br>    &#125;<br>  <br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‰å¤§å…³é”®éƒ¨åˆ†ï¼šå­—ç¬¦ä¸²åè½¬ï¼Œå•è¯åè½¬ï¼Œå»é™¤ç©ºæ ¼ã€‚</p><p>reverseWordséƒ¨åˆ†ï¼Œiä»£è¡¨çš„æ˜¯å­—ç¬¦ä¸²çš„èµ·ç‚¹ï¼Œjä»£è¡¨çš„æ˜¯å­—ç¬¦ä¸²çš„ç»ˆç‚¹ï¼Œiå…ˆè·³è¿‡ç©ºæ ¼ï¼Œjå†è·³è¿‡æ‰€æœ‰å­—ç¬¦ã€‚</p><p>CleanSpaceéƒ¨åˆ†ï¼ŒæŠŠå¾ªç¯é‡Œé¢çš„æ­¥éª¤åˆ†ä¸ºï¼š1âƒ£ï¸ è·³è¿‡ç©ºæ ¼ï¼Œç›´åˆ°æ‰¾åˆ°éç©ºåœæ­¢ã€‚2âƒ£ï¸ æŠŠéç©ºçš„å€¼å¡«å…¥åˆ°æ•°ç»„çš„å¤´éƒ¨ï¼Œä¸€ç›´é‡å¤ï¼Œç›´åˆ°æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼ã€‚(j &lt; n) å°±æ˜¯ç”¨æ¥é˜²æ­¢å¦‚æœåé¢ä¸å†å‡ºç°ç©ºæ ¼äº†ï¼Œå¦‚ä½•é€€å‡ºå¾ªç¯ã€‚<3âƒ£ï¸ æ‰¾åˆ°ä¸‹æ¬¡éç©ºçš„è¯ï¼Œä»£è¡¨æœ‰ä¸‹ä¸€ä¸ªéœ€è¦è¿›è¡Œå¤„ç†çš„å­—æ¯ï¼Œå°±å°†ä¹‹å‰å¡«å……å¥½çš„å­—æ¯çš„ä¸‹ä¸€ä½å¡«å……ä¸€ä¸ªç©ºæ ¼ï¼Œç»“æŸæœ¬æ¬¡å¾ªç¯> </p><h2 id="6-6-ä½¿ç”¨KMPåŒ¹é…å­—ç¬¦ä¸²"><a href="#6-6-ä½¿ç”¨KMPåŒ¹é…å­—ç¬¦ä¸²" class="headerlink" title="6.6 ä½¿ç”¨KMPåŒ¹é…å­—ç¬¦ä¸²"></a>6.6 ä½¿ç”¨KMPåŒ¹é…å­—ç¬¦ä¸²</h2><p><strong>28. Implement strStr()</strong></p><p><strong>Q: </strong>Given two strings <code>needle</code> and <code>haystack</code>, return the index of the first occurrence of <code>needle</code> in <code>haystack</code>, or <code>-1</code> if <code>needle</code> is not part of <code>haystack</code>.</p><p><strong>Clarification:</strong></p><p>What should we return when <code>needle</code> is an empty string? This is a great question to ask during an interview.</p><p>For the purpose of this problem, we will return 0 when <code>needle</code> is an empty string. This is consistent to Câ€™s <a href="http://www.cplusplus.com/reference/cstring/strstr/">strstr()</a> and Javaâ€™s <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(java.lang.String">indexOf()</a>).</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">strStr</span><span class="hljs-params">(String haystack, String needle)</span> &#123;<br>        <span class="hljs-keyword">if</span>(haystack == <span class="hljs-literal">null</span> || needle == <span class="hljs-literal">null</span> || needle.length() &gt; haystack.length()) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        <br>        <span class="hljs-type">int</span>[] next = kmpPreprocess(needle);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i &lt; haystack.length() &amp;&amp; j &lt; needle.length()) &#123;<br>          <span class="hljs-comment">// æ‰¾åˆ°äº†å°±ç»§ç»­å¾€åæ‰¾</span><br>            <span class="hljs-keyword">if</span>(haystack.charAt(i) == needle.charAt(j)) &#123;<br>                i++; j++;<br>            <span class="hljs-comment">// å¦‚æœåŒ¹é…ä¸²ä¸­æ­¤ä½ç½®ä¸ç›¸ç­‰ï¼ŒåŒ¹é…ä¸²å°±å›é€€nextæ•°ç»„çš„j - 1ä½ç½®çš„å€¼</span><br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(j &gt; <span class="hljs-number">0</span>) &#123;<br>                j = next[j - <span class="hljs-number">1</span>];<br>            <span class="hljs-comment">// å¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰æ‰¾åˆ°åŒ¹é…ä¸²ä¸­çš„å€¼ï¼Œå¹¶ä¸”åŒ¹é…ä¸²è¿˜æœªæˆåŠŸåŒ¹é…</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                i++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">return</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span>= needle.length() ? i - j : -<span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] kmpPreprocess(String s) &#123;<br>        <span class="hljs-type">int</span>[] next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[s.length()];<br>        <span class="hljs-comment">// ç›´æ¥ç”¨å‰ç¼€è¡¨ä½œnextæ•°ç»„</span><br>        next[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; s.length(); i++) &#123;<br>          <span class="hljs-comment">// å‘å‰å›é€€ï¼Œåœ¨j = 0æˆ–è€…s[i] == s[j]æ—¶é€€å‡º</span><br>            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; s.charAt(i) != s.charAt(j)) &#123;<br>                j = next[j - <span class="hljs-number">1</span>];<br>            &#125;<br>            <span class="hljs-comment">// æ‰¾åˆ°ç›¸åŒçš„å‰åç¼€</span><br>            <span class="hljs-keyword">if</span> (s.charAt(i) == s.charAt(j)) &#123;<br>                j++;<br>            &#125;<br>            <span class="hljs-comment">// å°†j(å‰ç¼€çš„é•¿åº¦)èµ‹ç»™next[i]</span><br>            next[i] = j;<br>        &#125;<br>        <span class="hljs-keyword">return</span> next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>KMPæ€æƒ³ï¼Œåˆ©ç”¨nextæ•°ç»„ä½œä¸ºåŒ¹é…çš„æ–¹æ³•ã€‚ä¸¤ç§æ„é€ nextæ•°ç»„æ–¹æ³•çš„åŒºåˆ«å°±åœ¨äºåŒ¹é…çš„åœ°æ–¹ï¼Œå¦‚æœç”±å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€æ¥æ„é€ nextæ•°ç»„ï¼Œé‚£ä¹ˆé‡åˆ°ä¸åŒ¹é…çš„åœ°æ–¹ç›´æ¥å›å½’å¯¹åº”ä¸‹æ ‡çš„nextæ•°ç»„çš„æ•°å€¼å°±è¡Œäº†ï¼›ä¸å‡ä¸€çš„æ–¹æ³•ï¼Œé‡åˆ°ä¸åŒ¹é…çš„åœ°æ–¹å°±æŸ¥æ‰¾å‰ä¸€ä½ä¸‹æ ‡çš„nextæ•°ç»„å¯¹åº”çš„æ•°å€¼è¿›è¡Œå›é€€ã€‚</p><p>ä¹‹æ‰€ä»¥ä¸ºä»€ä¹ˆæ˜¯next[j - 1]æ˜¯å› ä¸ºï¼Œç”±äºå½“å‰jä½ç½®æ˜¯ä¸åŒ¹é…çš„ä½†j - 1çš„ä½ç½®ä¹‹å‰çš„éƒ½æ˜¯åŒ¹é…çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å›åˆ°å°½å¯èƒ½è¿œç¦»èµ·å§‹çš„ä½ç½®ï¼ˆæ ¹æ®ç›¸åŒå‰åç¼€ï¼‰ï¼Œä¹Ÿå°±æ˜¯next[j - 1]å­˜å‚¨çš„ä½ç½®ä¿¡æ¯ã€‚</p><h2 id="6-7-æ‰¾åˆ°é‡å¤çš„å­å­—ç¬¦ä¸²"><a href="#6-7-æ‰¾åˆ°é‡å¤çš„å­å­—ç¬¦ä¸²" class="headerlink" title="6.7 æ‰¾åˆ°é‡å¤çš„å­å­—ç¬¦ä¸²"></a>6.7 æ‰¾åˆ°é‡å¤çš„å­å­—ç¬¦ä¸²</h2><p><strong>459. Repeated Substring Pattern</strong></p><p><strong>Q: </strong>Given a string <code>s</code>, check if it can be constructed by taking a substring of it and appending multiple copies of the substring together.</p><p><strong>A: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">repeatedSubstringPattern</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s.length() == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-type">int</span>[] next = kmpPreprocess(s);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-keyword">if</span> (next[len - <span class="hljs-number">1</span>] != <span class="hljs-number">0</span> &amp;&amp; len % (len - (next[len - <span class="hljs-number">1</span>])) == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] kmpPreprocess(String s) &#123;<br>        <span class="hljs-type">int</span>[] next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[s.length()];<br>        <span class="hljs-comment">// ç›´æ¥ç”¨å‰ç¼€è¡¨ä½œnextæ•°ç»„</span><br>        next[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; s.length(); i++) &#123;<br>          <span class="hljs-comment">// å‘å‰å›é€€ï¼Œåœ¨j = 0æˆ–è€…s[i] == s[j]æ—¶é€€å‡º</span><br>            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; s.charAt(i) != s.charAt(j)) &#123;<br>                j = next[j - <span class="hljs-number">1</span>];<br>            &#125;<br>            <span class="hljs-comment">// æ‰¾åˆ°ç›¸åŒçš„å‰åç¼€</span><br>            <span class="hljs-keyword">if</span> (s.charAt(i) == s.charAt(j)) &#123;<br>                j++;<br>            &#125;<br>            <span class="hljs-comment">// å°†j(å‰ç¼€çš„é•¿åº¦)èµ‹ç»™next[i]</span><br>            next[i] = j;<br>        &#125;<br>        <span class="hljs-keyword">return</span> next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœlen % (len - (next[len - 1])) == 0ï¼Œåˆ™è¯´æ˜(æ•°ç»„é•¿åº¦ - æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦)æ­£å¥½å¯ä»¥è¢«æ•°ç»„çš„é•¿åº¦æ•´é™¤ï¼Œè¯¥å­—ç¬¦ä¸²ä¸­æœ‰é‡å¤çš„æ•°ç»„ã€‚</p><p>len - 1ä»£è¡¨çš„æ˜¯æœ€åä¸€ä½nextæ•°ç»„ã€‚ç”¨å‰ç¼€è¡¨ä¸ç”¨-1ï¼Œå› ä¸ºå‰ç¼€è¡¨æœ¬èº«å°±+1äº†ã€‚</p><p>Cralå“¥å†™çš„è¿™ç§æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä¸€ç›´è®©jå……å½“ç›¸åŒçš„jå‰ç¼€çš„é•¿åº¦ï¼Œå¦‚æœå¾€åéå†çš„iä¸€ç›´æ˜¯åç¼€çš„èµ·å§‹ä½ç½®ã€‚ä¸ç”¨è€ƒè™‘iå’Œjä¹‹é—´çš„å…ƒç´ ï¼Œåªéœ€è¦çœ‹iå’Œjçš„ä½ç½®ã€‚åŸºæœ¬æ­¥è°ƒæ˜¯(å’Œåˆå§‹æ˜¯ä¸€æ ·çš„)iåœ¨å‰é¢ï¼Œjåœ¨åé¢ï¼Œå¦‚æœç›¸åŒäº†j++è·Ÿä¸Šï¼Œiç»§ç»­èµ°ä¸€ä¸ªï¼Œå¦‚æœå‡ºç°äº†ä¸ä¸€æ ·çš„ï¼Œåˆ™ä¸€ç›´å¾€å‰å›é€€åˆ°æœ‰ç›¸åŒçš„(ä¹Ÿå¯èƒ½ä¸€ç›´å›é€€åˆ°å¼€å¤´)ï¼Œç„¶åç»§ç»­æŒ‰ä¹‹å‰çš„æ­¥è°ƒèµ°ï¼Œç›´åˆ°åç¼€éå†å®Œæˆã€‚</p><p>PSï¼šå…¶ä¸­å¯¹äºå‰ç¼€è¡¨å‡1çš„é‚£ç§æ–¹æ³•å’Œè¿™ç§æ–¹æ³•ä¸»è¦çš„åŒºåˆ«æ˜¯å‰ç¼€è¡¨é‚£ç§ï¼Œé¢„å¤„ç†æ–¹ä¾¿ï¼Œå‰ç¼€è¡¨å‡å°‘1é‚£ç§ï¼Œéå†çš„æ—¶å€™æ–¹ä¾¿ã€‚æ–¹ä¾¿æŒ‡å¥½æ€è€ƒã€‚</p><h1 id="ç¬¬7ç« -æ ˆä¸é˜Ÿåˆ—"><a href="#ç¬¬7ç« -æ ˆä¸é˜Ÿåˆ—" class="headerlink" title="ç¬¬7ç«  æ ˆä¸é˜Ÿåˆ—"></a>ç¬¬7ç«  æ ˆä¸é˜Ÿåˆ—</h1><h2 id="7-2-ç”¨æ ˆç»„æˆé˜Ÿåˆ—"><a href="#7-2-ç”¨æ ˆç»„æˆé˜Ÿåˆ—" class="headerlink" title="7.2 ç”¨æ ˆç»„æˆé˜Ÿåˆ—"></a>7.2 ç”¨æ ˆç»„æˆé˜Ÿåˆ—</h2><p><strong>232. Implement Queue using Stacks</strong></p><p><strong>Q: </strong>Implement a first in first out (FIFO) queue using only two stacks. The implemented queue should support all the functions of a normal queue (<code>push</code>, <code>peek</code>, <code>pop</code>, and <code>empty</code>).</p><p>Implement the <code>MyQueue</code> class:</p><ul><li><code>void push(int x)</code> Pushes element x to the back of the queue.</li><li><code>int pop()</code> Removes the element from the front of the queue and returns it.</li><li><code>int peek()</code> Returns the element at the front of the queue.</li><li><code>boolean empty()</code> Returns <code>true</code> if the queue is empty, <code>false</code>otherwise.</li></ul><p><strong>Notes:</strong></p><ul><li>You must use <strong>only</strong> standard operations of a stack, which means only <code>push to top</code>, <code>peek/pop from top</code>, <code>size</code>, and <code>is empty</code> operations are valid.</li><li>Depending on your language, the stack may not be supported natively. You may simulate a stack using a list or deque (double-ended queue) as long as you use only a stackâ€™s standard operations.</li></ul><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyQueue</span> &#123;<br>    <br>    <span class="hljs-comment">// å¾…å¤„ç†part</span><br>    <span class="hljs-type">Stack</span> <span class="hljs-variable">stkIn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>();<br>    <span class="hljs-comment">// é¢„å¤‡è¾“å‡ºpart</span><br>    <span class="hljs-type">Stack</span> <span class="hljs-variable">stkOut</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>();<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyQueue</span><span class="hljs-params">()</span> &#123;<br>        <br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        stkIn.push(x);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// åªæœ‰å½“stkOutä¸ºç©ºçš„æ—¶å€™æ‰å¯¼å…¥stkInçš„peek</span><br>        <span class="hljs-keyword">if</span> (stkOut.empty()) &#123;<br>            <span class="hljs-comment">// å¯¼å…¥å…¨éƒ¨çš„stkIn</span><br>            <span class="hljs-keyword">while</span> (!stkIn.empty()) &#123;<br>                stkOut.push(stkIn.peek());<br>                stkIn.pop();<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// è¾“å‡ºæ ˆä¸ä¸ºç©º</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) stkOut.peek();<br>        stkOut.pop();<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// åªæœ‰å½“stkOutä¸ºç©ºçš„æ—¶å€™æ‰å¯¼å…¥stkInçš„peek</span><br>        <span class="hljs-keyword">if</span> (stkOut.empty()) &#123;<br>            <span class="hljs-comment">// å¯¼å…¥å…¨éƒ¨çš„stkIn</span><br>            <span class="hljs-keyword">while</span> (!stkIn.empty()) &#123;<br>                stkOut.push(stkIn.peek());<br>                stkIn.pop();<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// è¾“å‡ºæ ˆä¸ä¸ºç©º</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) stkOut.peek();<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">empty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (stkIn.empty() &amp;&amp; stkOut.empty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¦ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªç”¨æ¥è¾“å…¥ä¸€ä¸ªç”¨æ¥è¾“å‡ºã€‚ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯å…³æ³¨è¾“å‡ºæ ˆæ˜¯ä¸æ˜¯ç©ºçš„ï¼Œå¦‚æœéç©ºè¦ä¼˜å…ˆå¤„ç†è¾“å‡ºæ ˆçš„ï¼ˆpopå’Œpeekæ–¹æ³•ï¼‰</p><h2 id="7-3-ç”¨é˜Ÿåˆ—ç»„æˆæ ˆ"><a href="#7-3-ç”¨é˜Ÿåˆ—ç»„æˆæ ˆ" class="headerlink" title="7.3 ç”¨é˜Ÿåˆ—ç»„æˆæ ˆ"></a>7.3 ç”¨é˜Ÿåˆ—ç»„æˆæ ˆ</h2><p><strong>225. Implement Stack using Queues</strong></p><p><strong>Q: </strong></p><p>Implement a last-in-first-out (LIFO) stack using only two queues. The implemented stack should support all the functions of a normal stack (<code>push</code>, <code>top</code>, <code>pop</code>, and <code>empty</code>).</p><p>Implement the <code>MyStack</code> class:</p><ul><li><code>void push(int x)</code> Pushes element x to the top of the stack.</li><li><code>int pop()</code> Removes the element on the top of the stack and returns it.</li><li><code>int top()</code> Returns the element on the top of the stack.</li><li><code>boolean empty()</code> Returns <code>true</code> if the stack is empty, <code>false</code>otherwise.</li></ul><p><strong>Notes:</strong></p><ul><li>You must use <strong>only</strong> standard operations of a queue, which means that only <code>push to back</code>, <code>peek/pop from front</code>, <code>size</code> and <code>is empty</code>operations are valid.</li><li>Depending on your language, the queue may not be supported natively. You may simulate a queue using a list or deque (double-ended queue) as long as you use only a queueâ€™s standard operations.</li></ul><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyStack</span> &#123;<br>    Queue&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br><br>    <span class="hljs-comment">// Push element x onto stack.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        queue.add(x);<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> queue.size();<br>        <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">1</span>)<br>            queue.add(queue.poll());<br>            n--;<br>    &#125;<br><br>    <span class="hljs-comment">// Removes the element on top of the stack.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        queue.poll();<br>    &#125;<br><br>    <span class="hljs-comment">// Get the top element.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">top</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> queue.peek();<br>    &#125;<br><br>    <span class="hljs-comment">// Return whether the stack is empty.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">empty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> queue.isEmpty();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå’Œä¹‹å‰çš„ç”¨æ ˆç»„æˆé˜Ÿåˆ—ä¸å¤ªä¸€æ ·ï¼Œå¯ä»¥åªä½¿ç”¨ä¸€ä¸ªï¼Œæ€»ä½“æ¥è®²æ˜¯ä¸ªç¼“å­˜çš„æ€æƒ³ï¼Œå°†é˜Ÿå¤´çš„å…ƒç´ é‡æ–°æ”¾å›åˆ°é˜Ÿå°¾(åŒé˜Ÿåˆ—ä¹Ÿå¦‚æ­¤)ã€‚</p><h2 id="7-4-åŒ¹é…æ‹¬å·"><a href="#7-4-åŒ¹é…æ‹¬å·" class="headerlink" title="7.4 åŒ¹é…æ‹¬å·"></a>7.4 åŒ¹é…æ‹¬å·</h2><p><strong>20. Valid Parentheses</strong></p><p><strong>Q: </strong>Given a string <code>s</code> containing just the characters <code>&#39;(&#39;</code>, <code>&#39;)&#39;</code>, <code>&#39;&#123;&#39;</code>, <code>&#39;&#125;&#39;</code>, <code>&#39;[&#39;</code>and <code>&#39;]&#39;</code>, determine if the input string is valid.</p><p>An input string is valid if:</p><ol><li>Open brackets must be closed by the same type of brackets.</li><li>Open brackets must be closed in the correct order.</li></ol><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(String s)</span> &#123;<br>    Stack&lt;Character&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;Character&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : s.toCharArray()) &#123;<br>      <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;(&#x27;</span>)<br>        stack.push(<span class="hljs-string">&#x27;)&#x27;</span>);<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;&#123;&#x27;</span>)<br>        stack.push(<span class="hljs-string">&#x27;&#125;&#x27;</span>);<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;[&#x27;</span>)<br>        stack.push(<span class="hljs-string">&#x27;]&#x27;</span>);<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stack.isEmpty() || stack.pop() != c)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> stack.isEmpty();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…ˆå­¦ä¼šä¸€ç‚¹ï¼ŒåŒ¹é…å¯¹çš„é—®é¢˜å¯ä»¥ç”¨æ ˆæ¥è§£å†³(å…ˆå‡ºç°çš„å·¦ç¬¦å·è¦æœ€ååŒ¹é…å³ç¬¦å·ï¼Œè¿™æ ·æ­£å¥½ç¬¦åˆæ ˆçš„ç‰¹ç‚¹)ã€‚å¯¹äºè¿™é“é¢˜æˆ‘ä»¬åè¿‡æ¥æƒ³ï¼Œå½“åŒ¹é…åˆ°å·¦ç¬¦å·ï¼Œå°±å°†å¯¹åº”çš„å³ç¬¦å·å‹å…¥æ ˆï¼Œç„¶åå¾€ååŒ¹é…çœ‹çœ‹åé¢æœ‰æ²¡æœ‰å¯¹åº”çš„å³ç¬¦å·ã€‚</p><h2 id="7-5-é€†æ³¢å…°è¡¨è¾¾å¼"><a href="#7-5-é€†æ³¢å…°è¡¨è¾¾å¼" class="headerlink" title="7.5 é€†æ³¢å…°è¡¨è¾¾å¼"></a>7.5 é€†æ³¢å…°è¡¨è¾¾å¼</h2><p><strong>150. Evaluate Reverse Polish Notation</strong></p><p><strong>Q: </strong>Evaluate the value of an arithmetic expression in <a href="http://en.wikipedia.org/wiki/Reverse_Polish_notation">Reverse Polish Notation</a>.</p><p>Valid operators are <code>+</code>, <code>-</code>, <code>*</code>, and <code>/</code>. Each operand may be an integer or another expression.</p><p><strong>Note</strong> that division between two integers should truncate toward zero.</p><p>It is guaranteed that the given RPN expression is always valid. That means the expression would always evaluate to a result, and there will not be any division by zero operation.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">evalRPN</span><span class="hljs-params">(String[] tokens)</span> &#123;<br>        <span class="hljs-type">int</span> a,b;<br>Stack&lt;Integer&gt; S = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;Integer&gt;();<br><span class="hljs-keyword">for</span> (String s : tokens) &#123;<br><span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;+&quot;</span>)) &#123;<br>S.add(S.pop()+S.pop());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;/&quot;</span>)) &#123;<br>b = S.pop();<br>a = S.pop();<br>S.add(a / b);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;*&quot;</span>)) &#123;<br>S.add(S.pop() * S.pop());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;-&quot;</span>)) &#123;<br>b = S.pop();<br>a = S.pop();<br>S.add(a - b);<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>S.add(Integer.parseInt(s));<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> S.pop();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨æ ˆæ¥å­˜ä¹‹å‰çš„è·¯å¾„ï¼Œå¦‚æœæ˜¯æ•°å­—å°±å…¥æ ˆï¼Œå¦‚æœæ˜¯ç¬¦å·å°±å‡ºæ ˆå‰ä¸¤ä½æ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå°†ç»“æœå†å…¥æ ˆã€‚</p><h2 id="7-6-æ»‘åŠ¨çª—å£æœ€å¤§å€¼"><a href="#7-6-æ»‘åŠ¨çª—å£æœ€å¤§å€¼" class="headerlink" title="7.6 æ»‘åŠ¨çª—å£æœ€å¤§å€¼"></a>7.6 æ»‘åŠ¨çª—å£æœ€å¤§å€¼</h2><p><strong>239. Sliding Window Maximum</strong></p><p><strong>Q: </strong>You are given an array of integers <code>nums</code>, there is a sliding window of size <code>k</code>which is moving from the very left of the array to the very right. You can only see the <code>k</code> numbers in the window. Each time the sliding window moves right by one position.</p><p>Return <em>the max sliding window</em>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è‡ªå®šä¹‰æ•°ç»„</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyQueue</span> &#123;<br>    Deque&lt;Integer&gt; deque = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>    <span class="hljs-comment">//å¼¹å‡ºå…ƒç´ æ—¶ï¼Œæ¯”è¾ƒå½“å‰è¦å¼¹å‡ºçš„æ•°å€¼æ˜¯å¦ç­‰äºé˜Ÿåˆ—å‡ºå£çš„æ•°å€¼ï¼Œå¦‚æœç›¸ç­‰åˆ™å¼¹å‡º</span><br>    <span class="hljs-comment">//åŒæ—¶åˆ¤æ–­é˜Ÿåˆ—å½“å‰æ˜¯å¦ä¸ºç©º</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">poll</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-keyword">if</span> (!deque.isEmpty() &amp;&amp; val == deque.peek()) &#123;<br>            deque.poll();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœè¦æ·»åŠ çš„å…ƒç´ å¤§äºå…¥å£å¤„çš„å…ƒç´ ï¼Œå°±å°†å…¥å£å…ƒç´ å¼¹å‡º</span><br>    <span class="hljs-comment">//ä¿è¯é˜Ÿåˆ—å…ƒç´ å•è°ƒé€’å‡</span><br>    <span class="hljs-comment">//æ¯”å¦‚æ­¤æ—¶é˜Ÿåˆ—å…ƒç´ 3,1ï¼Œ2å°†è¦å…¥é˜Ÿï¼Œæ¯”1å¤§ï¼Œæ‰€ä»¥1å¼¹å‡ºï¼Œæ­¤æ—¶é˜Ÿåˆ—ï¼š3,2</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-keyword">while</span> (!deque.isEmpty() &amp;&amp; val &gt; deque.getLast()) &#123;<br>            deque.removeLast();<br>        &#125;<br>        deque.add(val);<br>    &#125;<br>    <span class="hljs-comment">//é˜Ÿåˆ—é˜Ÿé¡¶å…ƒç´ å§‹ç»ˆä¸ºæœ€å¤§å€¼</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> deque.peek();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] maxSlidingWindow(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k) &#123;<br>        <span class="hljs-keyword">if</span> (nums.length == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span> nums;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> nums.length - k + <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">//å­˜æ”¾ç»“æœå…ƒç´ çš„æ•°ç»„</span><br>        <span class="hljs-type">int</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[len];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//è‡ªå®šä¹‰é˜Ÿåˆ—</span><br>        <span class="hljs-type">MyQueue</span> <span class="hljs-variable">myQueue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyQueue</span>();<br>        <span class="hljs-comment">//å…ˆå°†å‰kçš„å…ƒç´ æ”¾å…¥é˜Ÿåˆ—</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; k; i++) &#123;<br>            myQueue.add(nums[i]);<br>        &#125;<br>        res[num++] = myQueue.peek();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> k; i &lt; nums.length; i++) &#123;<br>            <span class="hljs-comment">//æ»‘åŠ¨çª—å£ç§»é™¤æœ€å‰é¢çš„å…ƒç´ ï¼Œç§»é™¤æ˜¯åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦æ”¾å…¥é˜Ÿåˆ—</span><br>            myQueue.poll(nums[i - k]);<br>            <span class="hljs-comment">//æ»‘åŠ¨çª—å£åŠ å…¥æœ€åé¢çš„å…ƒç´ </span><br>            myQueue.add(nums[i]);<br>            <span class="hljs-comment">//è®°å½•å¯¹åº”çš„æœ€å¤§å€¼</span><br>            res[num++] = myQueue.peek();<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è§£æ³•äºŒ</span><br><span class="hljs-comment">//åˆ©ç”¨åŒç«¯é˜Ÿåˆ—æ‰‹åŠ¨å®ç°å•è°ƒé˜Ÿåˆ—</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—æ¥å­˜å‚¨å¯¹åº”çš„ä¸‹æ ‡ï¼Œæ¯å½“çª—å£æ»‘åŠ¨çš„æ—¶å€™ï¼Œç›´æ¥å–é˜Ÿåˆ—çš„å¤´éƒ¨æŒ‡é’ˆå¯¹åº”çš„å€¼æ”¾å…¥ç»“æœé›†å³å¯</span><br><span class="hljs-comment"> * å•è°ƒé˜Ÿåˆ—ç±»ä¼¼ ï¼ˆtail --&gt;ï¼‰ 3 --&gt; 2 --&gt; 1 --&gt; 0 (--&gt; head) (å³è¾¹ä¸ºå¤´ç»“ç‚¹ï¼Œå…ƒç´ å­˜çš„æ˜¯ä¸‹æ ‡)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] maxSlidingWindow(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k) &#123;<br>        ArrayDeque&lt;Integer&gt; deque = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;<br>        <span class="hljs-type">int</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n - k + <span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-comment">// æ ¹æ®é¢˜æ„ï¼Œiä¸ºnumsä¸‹æ ‡ï¼Œæ˜¯è¦åœ¨[i - k + 1, i] ä¸­é€‰åˆ°æœ€å¤§å€¼ï¼Œåªéœ€è¦ä¿è¯ä¸¤ç‚¹</span><br>            <span class="hljs-comment">// 1.é˜Ÿåˆ—å¤´ç»“ç‚¹éœ€è¦åœ¨[i - k + 1, i]èŒƒå›´å†…ï¼Œä¸ç¬¦åˆåˆ™è¦å¼¹å‡º</span><br>            <span class="hljs-keyword">while</span>(!deque.isEmpty() &amp;&amp; deque.peek() &lt; i - k + <span class="hljs-number">1</span>)&#123;<br>                deque.poll();<br>            &#125;<br>            <span class="hljs-comment">// 2.æ—¢ç„¶æ˜¯å•è°ƒï¼Œå°±è¦ä¿è¯æ¯æ¬¡æ”¾è¿›å»çš„æ•°å­—è¦æ¯”æœ«å°¾çš„éƒ½å¤§ï¼Œå¦åˆ™ä¹Ÿå¼¹å‡º</span><br>            <span class="hljs-keyword">while</span>(!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] &lt; nums[i]) &#123;<br>                deque.pollLast();<br>            &#125;<br><br>            deque.offer(i);<br><br>            <span class="hljs-comment">// å› ä¸ºå•è°ƒï¼Œå½“iå¢é•¿åˆ°ç¬¦åˆç¬¬ä¸€ä¸ªkèŒƒå›´çš„æ—¶å€™ï¼Œæ¯æ»‘åŠ¨ä¸€æ­¥éƒ½å°†é˜Ÿåˆ—å¤´èŠ‚ç‚¹æ”¾å…¥ç»“æœå°±è¡Œäº†</span><br>            <span class="hljs-keyword">if</span>(i &gt;= k - <span class="hljs-number">1</span>)&#123;<br>                res[idx++] = nums[deque.peek()];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>deque åŒç«¯é˜Ÿåˆ—ï¼šå¦‚æœæŠŠæ¡ä»¶æ”¾æ¾ä¸€ä¸‹ï¼Œå…è®¸ä¸¤å¤´éƒ½è¿›ï¼Œä¸¤å¤´éƒ½å‡ºï¼Œè¿™ç§é˜Ÿåˆ—å«åŒç«¯é˜Ÿåˆ—ï¼ˆDouble Ended Queueï¼‰ï¼Œå­¦å <strong>Deque</strong> ã€‚ <strong>Java</strong>é›†åˆæä¾›äº†æ¥å£ <strong>Deque</strong> æ¥å®ç°ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ï¼š æ—¢å¯ä»¥æ·»åŠ åˆ°é˜Ÿå°¾ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°é˜Ÿé¦–ï¼› æ—¢å¯ä»¥ä»é˜Ÿé¦–è·å–ï¼Œåˆå¯ä»¥ä»é˜Ÿå°¾è·å–ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">Queue</th><th style="text-align:left">Deque</th></tr></thead><tbody><tr><td style="text-align:left">æ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾</td><td style="text-align:left">add(E e) / offer(E e)</td><td style="text-align:left">addLast(E e) / offerLast(E e)</td></tr><tr><td style="text-align:left">å–é˜Ÿé¦–å…ƒç´ å¹¶åˆ é™¤</td><td style="text-align:left">E remove() / E poll()</td><td style="text-align:left">E removeFirst() / E pollFirst()</td></tr><tr><td style="text-align:left">å–é˜Ÿé¦–å…ƒç´ ä½†ä¸åˆ é™¤</td><td style="text-align:left">E element() / E peek()</td><td style="text-align:left">E getFirst() / E peekFirst()</td></tr><tr><td style="text-align:left">æ·»åŠ å…ƒç´ åˆ°é˜Ÿé¦–</td><td style="text-align:left">æ— </td><td style="text-align:left">addFirst(E e) / offerFirst(E e)</td></tr><tr><td style="text-align:left">å–é˜Ÿå°¾å…ƒç´ å¹¶åˆ é™¤</td><td style="text-align:left">æ— </td><td style="text-align:left">E removeLast() / E pollLast()</td></tr><tr><td style="text-align:left">å–é˜Ÿå°¾å…ƒç´ ä½†ä¸åˆ é™¤</td><td style="text-align:left">æ— </td><td style="text-align:left">E getLast() / E peekLast()</td></tr></tbody></table></div><h2 id="7-7-å‰kä¸ªé«˜é¢‘å…ƒç´ "><a href="#7-7-å‰kä¸ªé«˜é¢‘å…ƒç´ " class="headerlink" title="7.7 å‰kä¸ªé«˜é¢‘å…ƒç´ "></a>7.7 å‰kä¸ªé«˜é¢‘å…ƒç´ </h2><p><strong>347. Top K Frequent Elements</strong></p><p><strong>Q: </strong>Given an integer array <code>nums</code> and an integer <code>k</code>, return <em>the</em> <code>k</code> <em>most frequent elements</em>. You may return the answer in <strong>any order</strong>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] topKFrequent(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k) &#123;<br>        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[k];<br>        <span class="hljs-comment">// è®°å½•é¢‘ç‡</span><br>        HashMap&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>            map.put(num, map.getOrDefault(num, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>        &#125;<br>        <br>        Set&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet();<br>        <span class="hljs-comment">// æ ¹æ®mapçš„valueå€¼æ­£åºæ’ï¼Œç›¸å½“äºä¸€ä¸ªå°é¡¶å †</span><br>        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;((o1, o2) -&gt; o1.getValue() - o2.getValue());<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : entries) &#123;<br>            queue.offer(entry);<br>            <span class="hljs-keyword">if</span> (queue.size() &gt; k) &#123;<br>                queue.poll();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> k - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            result[i] = queue.poll().getKey();<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é“é¢˜ç›®ä¸»è¦æ¶‰åŠåˆ°å¦‚ä¸‹ä¸‰å—å†…å®¹ï¼š</p><ol><li>è¦ç»Ÿè®¡å…ƒç´ å‡ºç°é¢‘ç‡</li><li>å¯¹é¢‘ç‡æ’åº</li><li>æ‰¾å‡ºå‰Kä¸ªé«˜é¢‘å…ƒç´ </li></ol><h2 id="7-8-æ¥é›¨æ°´"><a href="#7-8-æ¥é›¨æ°´" class="headerlink" title="7.8 æ¥é›¨æ°´"></a>7.8 æ¥é›¨æ°´</h2><p><strong>42. Trapping Rain Water</strong></p><p><strong>Q: </strong>Given <code>n</code> non-negative integers representing an elevation map where the width of each bar is <code>1</code>, compute how much water it can trap after raining.</p><p><strong>A: </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> height.length;<br>        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">3</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> leftMax[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span> rightMax[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        leftMax[<span class="hljs-number">0</span>] = height[<span class="hljs-number">0</span>];<br>        rightMax[n - <span class="hljs-number">1</span>] = height[n - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;i &lt; n;i++) &#123;<br>            leftMax[i] = Math.max(leftMax[i - <span class="hljs-number">1</span>], height[i]);<br>            rightMax[n - i - <span class="hljs-number">1</span>] = Math.max(rightMax[n - i], height[n - i - <span class="hljs-number">1</span>]);<br>        &#125;<br>        <br>        <span class="hljs-type">int</span> <span class="hljs-variable">trappedWater</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;i &lt; n;i++) &#123;<br>            trappedWater += Math.min(leftMax[i], rightMax[i]) - height[i];<br>        &#125;<br>        <br>        <span class="hljs-keyword">return</span> trappedWater;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯ä¸€åˆ—é›¨æ°´çš„é«˜åº¦ä¸»è¦å–å†³äºå·¦ä¾§æœ€é«˜çš„æŸ±å­å’Œå³ä¾§çš„æœ€é«˜çš„æŸ±å­ä¹‹é—´çš„æœ€çŸ®çš„æŸ±å­çš„é«˜åº¦</p><p>ç”±äºå†³å®šå½“å‰åæ ‡çš„ä½ç½®ç››æ°´çš„é«˜åº¦åªå–å†³äºå…¶å·¦å³ä¸¤è¾¹çš„å›´æ çš„æœ€å°å€¼ï¼ˆæœ¨æ¡¶æ•ˆåº”ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªæ•°ç»„ç”¨æ¥å­˜å‚¨å½“å‰ä½ç½®çš„å…¶å·¦å³ä¸¤è¾¹çš„æ°´æ¡¶çš„é«˜åº¦æœ€å¤§å€¼ã€‚</p><p>Step1: æˆ‘ä»¬å…ˆå°†åŒä¸€ä¸ªåæ ‡ä½ç½®ä¸‹çš„å·¦å³ä¸¤è¾¹æœ€å¤§çš„é«˜åº¦å­˜å‚¨ä¸‹æ¥</p><p>Step2: æˆ‘ä»¬æ±‚è§£æ°´é‡ Math.min(leftMax[i], rightMax[i]) - height[i]</p><h1 id="ç¬¬8ç« -äºŒå‰æ ‘"><a href="#ç¬¬8ç« -äºŒå‰æ ‘" class="headerlink" title="ç¬¬8ç«  äºŒå‰æ ‘"></a>ç¬¬8ç«  äºŒå‰æ ‘</h1><h2 id="8-1-äºŒå‰æ ‘å‰ä¸­ååºéå†"><a href="#8-1-äºŒå‰æ ‘å‰ä¸­ååºéå†" class="headerlink" title="8.1 äºŒå‰æ ‘å‰ä¸­ååºéå†"></a>8.1 äºŒå‰æ ‘å‰ä¸­ååºéå†</h2><h3 id="8-1-1-å‰åºéå†"><a href="#8-1-1-å‰åºéå†" class="headerlink" title="8.1.1 å‰åºéå†"></a>8.1.1 å‰åºéå†</h3><p><strong>144. Binary Tree Preorder Traversal</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, return <em>the preorder traversal of its nodesâ€™ values</em>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">preorderTraversal</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        List&lt;Integer&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        preorder(root, result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preorder</span><span class="hljs-params">(TreeNode root, List&lt;Integer&gt; result)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        result.add(root.val);   <span class="hljs-comment">// get value of root</span><br>        preorder(root.left, result); <span class="hljs-comment">// left</span><br>        preorder(root.right, result); <span class="hljs-comment">// right</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹å·¦å³é¡ºåºé€’å½’è¿›å»ï¼Œéå†æ ‘å’Œå›¾è¿˜æ˜¯æ¯”è¾ƒå¥½æƒ³çš„ï¼Œå› ä¸ºå¯ä»¥æ­£å‘æ€ç»´å¾€æ·±äº†èµ°ã€‚</p><h3 id="8-1-2-ä¸­åºéå†"><a href="#8-1-2-ä¸­åºéå†" class="headerlink" title="8.1.2 ä¸­åºéå†"></a><strong>8.1.2 ä¸­åºéå†</strong></h3><p><strong>94. Binary Tree Inorder Traversal</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, return <em>the inorder traversal of its nodesâ€™ values</em>.</p><p><strong>A:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">inorderTraversal</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        List&lt;Integer&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        inorder(root, result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inorder</span><span class="hljs-params">(TreeNode root, List&lt;Integer&gt; result)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        inorder(root.left, result);    <span class="hljs-comment">// left</span><br>        result.add(root.val); <span class="hljs-comment">// get value of root</span><br>        inorder(root.right, result); <span class="hljs-comment">// right</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å·¦æ ¹å³é¡ºåºé€’å½’è¿›å»</p><h3 id="8-1-3-ååºéå†"><a href="#8-1-3-ååºéå†" class="headerlink" title="8.1.3 ååºéå†"></a><strong>8.1.3 ååºéå†</strong></h3><p><strong>145. Binary Tree Postorder Traversal</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, return <em>the postorder traversal of its nodesâ€™ values</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">postorderTraversal</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        List&lt;Integer&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;();<br>        postorder(root, result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postorder</span><span class="hljs-params">(TreeNode root, List&lt;Integer&gt; result)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        postorder(root.left, result); <span class="hljs-comment">// left</span><br>        postorder(root.right, result); <span class="hljs-comment">// right</span><br>        result.add(root.val); <span class="hljs-comment">// get value of root</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-2-äºŒå‰æ ‘å±‚åºéå†"><a href="#8-2-äºŒå‰æ ‘å±‚åºéå†" class="headerlink" title="8.2 äºŒå‰æ ‘å±‚åºéå†"></a>8.2 äºŒå‰æ ‘å±‚åºéå†</h2><p><strong>102. Binary Tree Level Order Traversal</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, return <em>the level order traversal of its nodesâ€™ values</em>. (i.e., from left to right, level by level).</p><p><strong>Aï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">levelOrder</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        List&lt;List&lt;Integer&gt;&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> res;  <br>        Queue&lt;TreeNode&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();  <br>        queue.add(root);  <br>        <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;  <br>          List&lt;Integer&gt; itemList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <br>          <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> queue.size();  <br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;  <br>            <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> queue.poll();  <br>            itemList.add(node.val);  <br>            <span class="hljs-keyword">if</span> (node.left != <span class="hljs-literal">null</span>) &#123;  <br>              queue.offer(node.left);  <br>            &#125;<br>            <span class="hljs-keyword">if</span> (node.right != <span class="hljs-literal">null</span>) &#123;  <br>              queue.offer(node.right);  <br>            &#125;  <br>          &#125;  <br>          res.add(itemList);   <br>        &#125;  <br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å±‚åºéå†çš„å…³é”®åœ¨äºé˜Ÿåˆ—çš„ä½¿ç”¨ã€‚æˆ‘ä»¬å…ˆå°†æ ¹æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åç»ˆæ­¢åˆ¤å®šä¸ºé˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯ä»–ä¸ä¼šç©ºå‘¢ï¼Ÿç”±äºæ¯æ¬¡å‡ºæ ˆä¸€ä¸ªå…ƒç´ åå°±æŠŠä»–çš„å·¦å³å­æ ‘æ”¾è¿›é˜Ÿåˆ—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œè¿™æ ·å¯ä»¥ä¿è¯é˜Ÿåˆ—ä¸ä¼šç©ºè€Œé€€å‡ºå¾ªç¯ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§å·¦å³å­æ ‘çš„é¡ºåºä¹Ÿä¿è¯äº†åé¢çš„å±‚åºéå†ä»ç„¶æ˜¯ä»å·¦å¾€å³ã€‚</p><p>è·Ÿè¡Œæœ‰å…³çš„äºŒå‰æ ‘å¯ä»¥ä¼˜å…ˆé€‰æ‹©å±‚åºéå†ã€‚</p><p><strong>EXTEND QUESTIONS:</strong></p><p>107ã€199ã€637ã€429ã€515ã€116ã€104</p><h2 id="8-11-äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„"><a href="#8-11-äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„" class="headerlink" title="8.11 äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„"></a>8.11 äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„</h2><p><strong>257. Binary Tree Paths</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, return <em>all root-to-leaf paths in <strong>any order</strong></em>.</p><p>A <strong>leaf</strong> is a node with no children.</p><p><strong>A:</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">binaryTreePaths</span><span class="hljs-params">(root *TreeNode)</span></span> []<span class="hljs-type">string</span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>      <span class="hljs-keyword">return</span> []<span class="hljs-type">string</span>&#123;&#125;<br>    &#125;<br>    res := []<span class="hljs-type">string</span>&#123;&#125;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>      <span class="hljs-keyword">return</span> []<span class="hljs-type">string</span>&#123;strconv.Itoa(root.Val)&#125;<br>    &#125;<br>    tmpLeft := binaryTreePaths(root.Left)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(tmpLeft); i++ &#123;<br>      res = <span class="hljs-built_in">append</span>(res, strconv.Itoa(root.Val)+<span class="hljs-string">&quot;-&gt;&quot;</span>+tmpLeft[i])<br>    &#125;<br>    tmpRight := binaryTreePaths(root.Right)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(tmpRight); i++ &#123;<br>      res = <span class="hljs-built_in">append</span>(res, strconv.Itoa(root.Val)+<span class="hljs-string">&quot;-&gt;&quot;</span>+tmpRight[i])<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯é€’å½’çš„æ€æƒ³ï¼Œä»æ ¹å‘å­èŠ‚ç‚¹éå†çš„è¯ç”¨å‰åºéå†ï¼ˆæ ¹å·¦å³ï¼‰ã€‚tmpLeftä»£è¡¨çš„æ˜¯å·¦è¾¹æ”¶é›†åˆ°çš„è·¯å¾„ï¼ŒåŒç†tmpRightå°±æ˜¯å³è¾¹æ”¶é›†åˆ°çš„è·¯å¾„ã€‚</p><h2 id="8-12-è·¯å¾„æ€»å’Œ"><a href="#8-12-è·¯å¾„æ€»å’Œ" class="headerlink" title="8.12 è·¯å¾„æ€»å’Œ"></a>8.12 è·¯å¾„æ€»å’Œ</h2><p><strong>112. Path Sum</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree and an integer <code>targetSum</code>, return <code>true</code> if the tree has a <strong>root-to-leaf</strong> path such that adding up all the values along the path equals <code>targetSum</code>.</p><p>A <strong>leaf</strong> is a node with no children.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hasPathSum</span><span class="hljs-params">(root *TreeNode, targetSum <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    <span class="hljs-keyword">return</span> pathSum(root, targetSum - root.Val)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pathSum</span><span class="hljs-params">(root *TreeNode, count <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &amp;&amp; count == <span class="hljs-number">0</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125; <span class="hljs-comment">// é‡åˆ°å¶å­ç»“ç‚¹ï¼Œå¹¶ä¸”è®¡æ•°ä¸º0</span><br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125; <span class="hljs-comment">// é‡åˆ°å¶å­èŠ‚ç‚¹,Countä¸ä¸º0ï¼Œç›´æ¥è¿”å›</span><br>    <br>    <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>        count -= root.Left.Val  <span class="hljs-comment">// é€’å½’ï¼Œå¤„ç†èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> pathSum(root.Left, count) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125;<br>        count += root.Left.Val  <span class="hljs-comment">// å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>        count -= root.Right.Val  <span class="hljs-comment">// é€’å½’ï¼Œå¤„ç†èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> pathSum(root.Right, count) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125;<br>        count += root.Right.Val  <span class="hljs-comment">// å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><p>é€’å½’å’Œå›æº¯æ˜¯è¦åœ¨ä¸€èµ·çš„ï¼Œæ¯ä¸€æ¬¡é€’å½’éƒ½è¦æœ‰å¯¹åº”çš„å›æº¯ï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯æ ¹å·¦å³çš„å½¢å¼ã€‚é€’å½’çš„è¯ä¸è¦ä»”ç»†å»æƒ³å…·ä½“çš„æ¯ä¸€æ­¥æ˜¯æ€ä¹ˆæ ·çš„ï¼Œè€Œæ˜¯è¦å…³æ³¨ä¸‰éƒ¨æ›²ï¼Œ1âƒ£ï¸å…¥å£çš„æ ·å­ï¼Œ2âƒ£ï¸ç»ˆæ­¢æ¡ä»¶ï¼Œ3âƒ£ï¸ä¸­é—´çš„å¤„ç†é€»è¾‘ã€‚æœ¬ç¯‡é€šè¿‡leetcodeä¸Š <strong>112. è·¯å¾„æ€»å’Œ</strong> å’Œ <strong>113. è·¯å¾„æ€»å’Œii</strong> è¯¦ç»†çš„è®²è§£äº†é€’å½’å‡½æ•°ä»€ä¹ˆæ—¶å€™éœ€è¦è¿”å›å€¼ï¼Œä»€ä¹ˆä¸éœ€è¦è¿”å›å€¼ã€‚</p><p><strong>113. Path Sum II</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree and an integer <code>targetSum</code>, return <em>all <strong>root-to-leaf</strong> paths where the sum of the node values in the path equals</em> <code>targetSum</code><em>. Each path should be returned as a list of the node <strong>values</strong>, not node references</em>.</p><p>A <strong>root-to-leaf</strong> path is a path starting from the root and ending at any leaf node. A <strong>leaf</strong> is a node with no children.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pathSum</span><span class="hljs-params">(root *TreeNode, sum <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">var</span> slice [][]<span class="hljs-type">int</span><br>slice = findPath(root, sum, slice, []<span class="hljs-type">int</span>(<span class="hljs-literal">nil</span>))<br>    fmt.Println(slice)<br><span class="hljs-keyword">return</span> slice<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findPath</span><span class="hljs-params">(root *TreeNode, sum <span class="hljs-type">int</span>, slice [][]<span class="hljs-type">int</span>, path []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;    <br>      <span class="hljs-keyword">return</span> slice<br>    &#125;<br>    sum -= root.Val  <span class="hljs-comment">// è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹å°±ç”¨å½“å‰valå‡å°‘sumçš„å€¼</span><br>    path = <span class="hljs-built_in">append</span>(path, root.Val)  <span class="hljs-comment">// å°†å½“å‰valè¿™ä¸ªç»“æœåŠ å…¥ï¼ˆä¸€ä¸ªåˆ‡ç‰‡ï¼‰</span><br>    <span class="hljs-keyword">if</span> sum == <span class="hljs-number">0</span> &amp;&amp; root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;  <span class="hljs-comment">// å¦‚æœæ‘¸åˆ°äº†æœ€æœ«ç«¯ä¸€ä¸ªèŠ‚ç‚¹å¹¶ä¸”sumå·²ç»è¢«å‡å…‰</span><br>      slice = <span class="hljs-built_in">append</span>(slice, <span class="hljs-built_in">append</span>([]<span class="hljs-type">int</span>&#123;&#125;, path...))  <span class="hljs-comment">// æŠŠä¹‹å‰æ ˆçš„ç»“æœå…¨éƒ¨å¯¼å…¥åˆ°sliceé‡Œé¢</span><br>        <span class="hljs-keyword">return</span> slice<br>    &#125;<br>    slice = findPath(root.Left, sum, slice, path)<br>    slice = findPath(root.Right, sum, slice, path)<br>    <span class="hljs-keyword">return</span> slice<br>&#125;<br></code></pre></td></tr></table></figure><p>å­¦ä¹ çš„åˆ«äººçš„æ€è·¯ï¼Œæ•´ä½“é‡‡ç”¨çš„æ˜¯æ ¹å·¦å³ä¹Ÿå°±æ˜¯ä»ä¸Šå‘ä¸‹éå†çš„è¿‡ç¨‹ã€‚sliceæ˜¯è¦è¾“å‡ºçš„ç»“æœï¼Œpathç”¨æ¥å­˜å‚¨ä¹‹å‰èµ°è¿‡çš„è·¯å¾„ã€‚åªæœ‰å½“sum == 0å®Œå…¨ç¬¦åˆæ¡ä»¶çš„æ—¶å€™æ‰å°†ä¹‹å‰å­˜çš„æ‰€æœ‰è·¯å¾„éƒ½æ”¾å…¥åˆ‡ç‰‡ã€‚</p><p>PS: sliceçš„åˆ‡ç‰‡æ˜¯å·¦é—­å³å¼€çš„ï¼Œæ‰€ä»¥<code>len(stack) - 1</code>ç›¸å½“äºé€€å‡ºå»äº†ä¸€ä½æ•°ã€‚</p><h2 id="8-13-æ„é€ ä¸€é¢—äºŒå‰æ ‘"><a href="#8-13-æ„é€ ä¸€é¢—äºŒå‰æ ‘" class="headerlink" title="8.13 æ„é€ ä¸€é¢—äºŒå‰æ ‘"></a>8.13 æ„é€ ä¸€é¢—äºŒå‰æ ‘</h2><p><strong>106. Construct Binary Tree from Inorder and Postorder Traversal</strong></p><p><strong>Qï¼š</strong>Given two integer arrays <code>inorder</code> and <code>postorder</code> where <code>inorder</code> is the inorder traversal of a binary tree and <code>postorder</code> is the postorder traversal of the same tree, construct and return <em>the binary tree</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildTree</span><span class="hljs-params">(inorder []<span class="hljs-type">int</span>, postorder []<span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>   postorderLen := <span class="hljs-built_in">len</span>(postorder)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(inorder) == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    <br>root := &amp;TreeNode&#123;Val: postorder[postorderLen<span class="hljs-number">-1</span>]&#125;<br>    postorder = postorder[:postorderLen<span class="hljs-number">-1</span>]<br>    <br>    <span class="hljs-keyword">for</span> pos, node := <span class="hljs-keyword">range</span> inorder &#123;<br>        <span class="hljs-keyword">if</span> node == root.Val &#123;<br>            root.Left = buildTree(inorder[:pos], postorder[:<span class="hljs-built_in">len</span>(inorder[:pos])])<br>            root.Right = buildTree(inorder[pos+<span class="hljs-number">1</span>:], postorder[<span class="hljs-built_in">len</span>(inorder[:pos]):])<br>        &#125;<br>&#125;<br>  <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥çœ‹ä¸€ä¸‹ä¸€å…±åˆ†å‡ æ­¥ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šå¦‚æœæ•°ç»„å¤§å°ä¸ºé›¶çš„è¯ï¼Œè¯´æ˜æ˜¯ç©ºèŠ‚ç‚¹äº†ã€‚</li><li>ç¬¬äºŒæ­¥ï¼šå¦‚æœä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå–ååºæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºèŠ‚ç‚¹å…ƒç´ ã€‚</li><li>ç¬¬ä¸‰æ­¥ï¼šæ‰¾åˆ°å½“å‰èŠ‚ç‚¹åœ¨ä¸­åºçš„ä½ç½®ï¼Œæ­¤å¤„èŠ‚ç‚¹çœ‹ä¸ºæ ¹</li><li>ç¬¬å››æ­¥ï¼š<code>root.Left = buildTree(inorder[:pos], postorder[:len(inorder[:pos])])</code>åŒºé—´æ˜¯å·¦é—­å³å¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œåˆ‡ç‰‡ï¼Œå–ä¸­åºä¸­æ­¤ç‚¹çš„å·¦ä¾§ï¼Œå’Œååºä¸­çš„å·¦è¾¹ã€‚</li><li>ç¬¬äº”æ­¥ï¼š<code>root.Right = buildTree(inorder[pos+1:], postorder[len(inorder[:pos]):])</code>åŒºé—´æ˜¯å·¦é—­å³å¼€ï¼Œè¿›è¡Œåˆ‡ç‰‡ï¼Œå–ä¸­åºä¸­æ­¤ç‚¹çš„å³ä¾§ï¼Œå’Œååºåˆ—ä¸­çš„å³è¾¹ï¼ˆå› ä¸ºå·²ç»æŠ›å¼€äº†æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥å³ä¾§çš„æ‰€æœ‰éƒ½æ˜¯å³å­æ ‘çš„æ‰€æœ‰å†…å®¹ã€‚</li></ul><p>å…¨ç¨‹éƒ½æ˜¯æŠ å‡ºæ¥ååºéå†ä¸­çš„æ•°å€¼åˆ¶ä½œèŠ‚ç‚¹ï¼Œroot.Left = [ return root ] åŒç†rightä¹Ÿæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬æ¯ä¸€å±‚å æˆ´çš„éƒ½æ˜¯ä¸‹ä¸€å±‚çš„æŸä¸€ä¸ªæ ¹èŠ‚ç‚¹</p><p><strong>105. Construct Binary Tree from Preorder and Inorder Traversal</strong></p><p><strong>Qï¼š</strong>Given two integer arrays <code>preorder</code> and <code>inorder</code> where <code>preorder</code> is the preorder traversal of a binary tree and <code>inorder</code> is the inorder traversal of the same tree, construct and return <em>the binary tree</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildTree</span><span class="hljs-params">(preorder []<span class="hljs-type">int</span>, inorder []<span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(inorder) == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    root := &amp;TreeNode&#123; Val: preorder[<span class="hljs-number">0</span>] &#125;    <br>    preorder = preorder[<span class="hljs-number">1</span>:]  <span class="hljs-comment">// poll the first preorder value</span><br>    <br>    <span class="hljs-keyword">for</span> pos, node := <span class="hljs-keyword">range</span> inorder &#123; <span class="hljs-comment">// preorder:(before) N L R (now) L R</span><br>        <span class="hljs-keyword">if</span> node == root.Val &#123;<br>            root.Left = buildTree(preorder[:pos], inorder[:pos])<br>            root.Right = buildTree(preorder[pos:], inorder[pos+<span class="hljs-number">1</span>:])<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒç†ä¸Šé¢çš„ä¸åŒçš„æ˜¯ï¼Œposè¿™é‡Œæ˜¯inorderä¸­Lçš„é•¿åº¦ã€‚</p><h2 id="8-14-åˆå¹¶ä¸¤ä¸ªäºŒå‰æ ‘"><a href="#8-14-åˆå¹¶ä¸¤ä¸ªäºŒå‰æ ‘" class="headerlink" title="8.14 åˆå¹¶ä¸¤ä¸ªäºŒå‰æ ‘"></a>8.14 åˆå¹¶ä¸¤ä¸ªäºŒå‰æ ‘</h2><p><strong>617. Merge Two Binary Trees</strong></p><p><strong>Qï¼š</strong>You are given two binary trees <code>root1</code> and <code>root2</code>.</p><p>Imagine that when you put one of them to cover the other, some nodes of the two trees are overlapped while the others are not. You need to merge the two trees into a new binary tree. The merge rule is that if two nodes overlap, then sum node values up as the new value of the merged node. Otherwise, the NOT null node will be used as the node of the new tree.</p><p>Return <em>the merged tree</em>.</p><p><strong>Note:</strong> The merging process must start from the root nodes of both trees.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mergeTrees</span><span class="hljs-params">(root1 *TreeNode, root2 *TreeNode)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root1 == <span class="hljs-literal">nil</span> &#123; <span class="hljs-keyword">return</span> root2 &#125;<br>    <span class="hljs-keyword">if</span> root2 == <span class="hljs-literal">nil</span> &#123; <span class="hljs-keyword">return</span> root1 &#125;<br>    <br>    root1.Val += root2.Val<br>    root1.Left = mergeTrees(root1.Left, root2.Left)<br>    root1.Right = mergeTrees(root1.Right, root2.Right)<br>    <span class="hljs-keyword">return</span> root1<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥å…¶ä¸­ä¸€ä¸ªä¸ºæ ¹ï¼Œä»¥å…¶ä¸­ä¸€ä¸ªä¸ºå‚ç…§ç‰©è¿›è¡Œåˆå¹¶ã€‚</p><ul><li>ç®€å•é¢˜ã€‚é‡‡ç”¨æ·±æœçš„æ€è·¯ï¼Œåˆ†åˆ«ä»æ ¹èŠ‚ç‚¹å¼€å§‹åŒæ—¶éå†ä¸¤ä¸ªäºŒå‰æ ‘ï¼Œå¹¶å°†å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œåˆå¹¶ã€‚ä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹å¯èƒ½å­˜åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š<ul><li>å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹ä¹Ÿä¸ºç©ºï¼›</li><li>å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹ä¸ºå…¶ä¸­çš„éç©ºèŠ‚ç‚¹ï¼›</li><li>å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹çš„å€¼ä¸ºä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹çš„å€¼ä¹‹å’Œï¼Œæ­¤æ—¶éœ€è¦æ˜¾æ€§åˆå¹¶ä¸¤ä¸ªèŠ‚ç‚¹ã€‚</li></ul></li><li>å¯¹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆå¹¶ä¹‹åï¼Œè¿˜è¦å¯¹è¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘åˆ†åˆ«è¿›è¡Œåˆå¹¶ã€‚ç”¨é€’å½’å®ç°å³å¯</li></ul><h2 id="8-15-äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"><a href="#8-15-äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢" class="headerlink" title="8.15 äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"></a>8.15 äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢</h2><p><strong>700. Search in a Binary Search Tree</strong></p><p><strong>Qï¼š</strong>You are given the <code>root</code> of a binary search tree (BST) and an integer <code>val</code>.</p><p>Find the node in the BST that the nodeâ€™s value equals <code>val</code> and return the subtree rooted with that node. If such a node does not exist, return <code>null</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">searchBST</span><span class="hljs-params">(root *TreeNode, val <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> || root.Val == val &#123; <span class="hljs-keyword">return</span> root &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Val &gt; val &#123;<br>        <span class="hljs-keyword">return</span> searchBST(root.Left, val)<br>    &#125;<br>    <span class="hljs-keyword">if</span> root.Val &lt; val &#123;<br>        <span class="hljs-keyword">return</span> searchBST(root.Right, val)<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><p>äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ä¸ªæœ‰åºæ ‘ï¼š</p><ul><li>è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼›</li><li>è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼›</li><li>å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æœç´¢æ ‘</li></ul><p><strong>å› ä¸ºæœç´¢åˆ°ç›®æ ‡èŠ‚ç‚¹äº†ï¼Œå°±è¦ç«‹å³returnäº†ï¼Œè¿™æ ·æ‰æ˜¯æ‰¾åˆ°èŠ‚ç‚¹å°±è¿”å›ï¼ˆæœç´¢æŸä¸€æ¡è¾¹ï¼‰ï¼Œå¦‚æœä¸åŠ returnï¼Œå°±æ˜¯éå†æ•´æ£µæ ‘äº†ã€‚</strong></p><p>ï¼ˆå¦‚æœä½ æ²¡æœ‰å†™returné‚£ä¹ˆå°±ç®—æ‰¾åˆ°äº†æˆ‘ä»¬ä¹Ÿæ²¡æœ‰å›å»çš„è·¯äº†ï¼Œç›¸å½“äºæ˜¯åœåœ¨äº†æ‰¾åˆ°çš„ç‚¹é‚£é‡Œï¼‰</p><h2 id="8-16-éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#8-16-éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="8.16 éªŒè¯äºŒå‰æœç´¢æ ‘"></a>8.16 éªŒè¯äºŒå‰æœç´¢æ ‘</h2><p><strong>98. Validate Binary Search Tree</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary tree, <em>determine if it is a valid binary search tree (BST)</em>.</p><p>A <strong>valid BST</strong> is defined as follows:</p><ul><li>The left subtree of a node contains only nodes with keys <strong>less than</strong> the nodeâ€™s key.</li><li>The right subtree of a node contains only nodes with keys <strong>greater than</strong>the nodeâ€™s key.</li><li>Both the left and right subtrees must also be binary search trees.</li></ul><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValidBST</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">bool</span> &#123;<br>    arr := []<span class="hljs-type">int</span>&#123;&#125;<br>    inOrder(root, &amp;arr)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(arr); i++ &#123;<br>        <span class="hljs-keyword">if</span> arr[i - <span class="hljs-number">1</span>] &gt;= arr[i] &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inOrder</span><span class="hljs-params">(root *TreeNode, arr *[]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    inOrder(root.Left, arr)<br>    *arr = <span class="hljs-built_in">append</span>(*arr, root.Val)<br>    inOrder(root.Right, arr)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æˆ‘ä»¬è¦æ¯”è¾ƒçš„æ˜¯ å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å°äºä¸­é—´èŠ‚ç‚¹ï¼Œå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å¤§äºä¸­é—´èŠ‚ç‚¹ã€‚</strong></p><p>ä¸­åºéå†ï¼ŒéªŒè¯éå†çš„å…ƒç´ æ˜¯ä¸æ˜¯ä»å°åˆ°å¤§ã€‚æˆ‘ä»¬å…ˆå­˜å‚¨å·¦æ ¹å³çš„æ•°ç»„åºåˆ—ï¼Œç„¶åcheckä»–çš„é¡ºåºæ˜¯å¦æ˜¯å¯¹çš„ã€‚</p><p><code>*arr = append(*arr, root.Val)</code>è¿™é‡Œå¦‚æœä¸åŠ *çš„è¯ï¼Œä»£è¡¨arrå°±æ˜¯ä¸ªæŒ‡å‘isValidBSTçš„arrçš„ä¸€ä¸ªæŒ‡é’ˆï¼ŒåŠ äº†æ˜Ÿå·æ‰èƒ½æå–åˆ°ä»–æŒ‡å‘çš„å†…å®¹ï¼Œå¹¶ä¸”æ“ä½œä»–æŒ‡å‘çš„å†…å®¹ï¼</p><h2 id="8-17-äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å€¼å·®"><a href="#8-17-äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å€¼å·®" class="headerlink" title="8.17 äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å€¼å·®"></a>8.17 äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å€¼å·®</h2><p><strong>530. Minimum Absolute Difference in BST</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a Binary Search Tree (BST), return <em>the minimum absolute difference between the values of any two different nodes in the tree</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getMinimumDifference</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">int</span> &#123;<br>    arr := []<span class="hljs-type">int</span>&#123;&#125;<br>    inOrder(root, &amp;arr)<br>    diff := []<span class="hljs-type">int</span>&#123;&#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(arr); i++ &#123;<br>        diff = <span class="hljs-built_in">append</span>(diff, abs(arr[i - <span class="hljs-number">1</span>] - arr[i]))<br>    &#125;<br>    fmt.Print(<span class="hljs-string">&quot;diff: &quot;</span>)<br>    fmt.Println(diff)<br>    min := diff[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt; <span class="hljs-built_in">len</span>(diff); j++ &#123;<br>        <span class="hljs-keyword">if</span> diff[j] &lt; min &#123;<br>            min = diff[j]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> min<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">abs</span><span class="hljs-params">(a <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> -a<br>    &#125;<br>    <span class="hljs-keyword">return</span> a<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inOrder</span><span class="hljs-params">(root *TreeNode, arr *[]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    inOrder(root.Left, arr)<br>    *arr = <span class="hljs-built_in">append</span>(*arr, root.Val)<br>    inOrder(root.Right, arr)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç”±äºæ˜¯ BST æ ‘ï¼Œåˆ©ç”¨å®ƒæœ‰åºçš„æ€§è´¨ï¼Œä¸­æ ¹éå†çš„ç»“æœæ˜¯æœ‰åºçš„ã€‚ä¸­æ ¹éå†è¿‡ç¨‹ä¸­åŠ¨æ€ç»´æŠ¤å‰åä¸¤ä¸ªèŠ‚ç‚¹çš„å·®å€¼ï¼Œå³å¯æ‰¾åˆ°æœ€å°å·®å€¼ã€‚</li><li>æ­¤é¢˜ä¸ç¬¬ 783 é¢˜å®Œå…¨ç›¸åŒã€‚</li></ul><h2 id="8-18-äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"><a href="#8-18-äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°" class="headerlink" title="8.18 äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"></a>8.18 äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°</h2><p><strong>501. Find Mode in Binary Search Tree</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary search tree (BST) with duplicates, return <em>all the <a href="https://en.wikipedia.org/wiki/Mode_(statistics">mode(s)</a>) (i.e., the most frequently occurred element) in it</em>.</p><p>If the tree has more than one mode, return them in <strong>any order</strong>.</p><p>Assume a BST is defined as follows:</p><ul><li>The left subtree of a node contains only nodes with keys <strong>less than or equal to</strong> the nodeâ€™s key.</li><li>The right subtree of a node contains only nodes with keys <strong>greater than or equal to</strong> the nodeâ€™s key.</li><li>Both the left and right subtrees must also be binary search trees.</li></ul><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findMode</span><span class="hljs-params">(root *TreeNode)</span></span> []<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">var</span> res []<span class="hljs-type">int</span><br>    m := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span>)<br>    inOrder(root, m)<br>    max := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> _, val := <span class="hljs-keyword">range</span> m &#123;<br>        <span class="hljs-keyword">if</span> val &gt;= max &#123;<br>            max = val<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> key, val := <span class="hljs-keyword">range</span> m &#123;<br>        <span class="hljs-keyword">if</span> val == max &#123;<br>            res = <span class="hljs-built_in">append</span>(res, key)<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inOrder</span><span class="hljs-params">(root *TreeNode, m <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    inOrder(root.Left, m)<br>    <span class="hljs-keyword">if</span> _, exist := m[root.Val]; !exist &#123;<br>        m[root.Val] = <span class="hljs-number">1</span><br>    &#125;<br>    m[root.Val] += <span class="hljs-number">1</span><br>    inOrder(root.Right, m)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-19-äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#8-19-äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="8.19 äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>8.19 äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><p><strong>236. Lowest Common Ancestor of a Binary Tree</strong></p><p><strong>Qï¼š</strong>Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree.</p><p>According to the <a href="https://en.wikipedia.org/wiki/Lowest_common_ancestor">definition of LCA on Wikipedia</a>: â€œThe lowest common ancestor is defined between two nodes <code>p</code> and <code>q</code> as the lowest node in <code>T</code> that has both <code>p</code> and <code>q</code> as descendants (where we allow <strong>a node to be a descendant of itself</strong>).â€</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lowestCommonAncestor</span><span class="hljs-params">(root, p, q *TreeNode)</span></span> *TreeNode &#123;<br>    <span class="hljs-comment">// stop</span><br>    <span class="hljs-keyword">if</span> root == p || root == q || root == <span class="hljs-literal">nil</span> &#123;<br>       <span class="hljs-keyword">return</span> root<br>    &#125;<br>    <span class="hljs-comment">// left</span><br>    left := lowestCommonAncestor(root.Left, p, q)<br>    <span class="hljs-comment">// right</span><br>    right := lowestCommonAncestor(root.Right, p, q)<br>    <span class="hljs-comment">// root</span><br>    <span class="hljs-keyword">if</span> left != <span class="hljs-literal">nil</span> &amp;&amp; right != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> root<br>    &#125;<br>    <span class="hljs-keyword">if</span> left == <span class="hljs-literal">nil</span> &amp;&amp; right != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> right<br>    &#125;<br>    <span class="hljs-keyword">if</span> right == <span class="hljs-literal">nil</span> &amp;&amp; left != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> left<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// æœç´¢ä¸€æ¡è¾¹çš„å†™æ³•ï¼š</span><br><span class="hljs-keyword">if</span> (é€’å½’å‡½æ•°(root.left)) <span class="hljs-keyword">return</span> <br><br><span class="hljs-keyword">if</span> (é€’å½’å‡½æ•°(root.right)) <span class="hljs-keyword">return</span> <br><br><span class="hljs-comment">// æœç´¢æ•´ä¸ªæ ‘å†™æ³•ï¼š</span><br>left = é€’å½’å‡½æ•°(root.left)<br>right = é€’å½’å‡½æ•°(root.right)<br>leftä¸rightçš„é€»è¾‘å¤„ç†<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>1ã€på’Œqå¦‚æœå†™äº†è‚¯å®šæ˜¯åœ¨è¿™ä¸ªBSTé‡Œé¢çš„ï¼Œæ‰€ä»¥å¿…ç„¶ä¸ä¼šæœ‰nilçš„ç»“æœã€‚</p><p>2ã€æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å›æº¯æŸä¸€ä¸ªrightæˆ–è€…leftï¼Ÿå¦‚æœæ˜¯æœ€ç®€å•çš„æƒ…å†µï¼Œæˆ‘ä»¬æ‰¾çš„på’Œqåœ¨åŒä¸€ä¸ªå­æ ‘ä¸Šé¢ï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯ä»–ä»¬çš„ç¥–å…ˆï¼Œå¦‚æœä¸åœ¨åŒä¸€ä¸ªå­æ ‘ä¸Šé¢ï¼Œè¿”å›çš„å°±æ˜¯ä»–ä»¬çš„æ ¹èŠ‚ç‚¹ã€‚çŸ¥é“äº†è¿™ä¸ªè§„åˆ™ä»¥åï¼Œå°±å¾ˆå¥½ç†è§£äº†ä¸ºä»€ä¹ˆè¦è¿”å›rightæˆ–è€…leftäº†ï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆæ˜¯ä»ä¸‹å¾€ä¸Šæ‰¾è€Œä¸æ˜¯ä»ä¸Šå¾€ä¸‹æ‰¾ã€‚é€»è¾‘å°±æ˜¯ï¼Œæˆ‘ä»ä¸‹å¾€ä¸Šå·¦å³å»æ‰¾æ˜¯å¦æœ‰æ»¡è¶³çš„på’Œqå¦‚æœéƒ½æ»¡è¶³äº†é‚£ä¹ˆæ­¤æ—¶çš„rootå°±æ˜¯på’Œqçš„ç¥–çˆ¶ï¼Œå¦‚æœæ²¡æœ‰æ»¡è¶³å°±æ˜¯nilï¼Œç»§ç»­å¾€ä¸Šæ‰¾ã€‚</p><h2 id="8-20-åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹"><a href="#8-20-åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹" class="headerlink" title="8.20 åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹"></a>8.20 åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹</h2><p><strong>701. Insert into a Binary Search Tree</strong></p><p><strong>Qï¼š</strong>You are given the <code>root</code> node of a binary search tree (BST) and a <code>value</code> to insert into the tree. Return <em>the root node of the BST after the insertion</em>. It is <strong>guaranteed</strong> that the new value does not exist in the original BST.</p><p><strong>Notice</strong> that there may exist multiple valid ways for the insertion, as long as the tree remains a BST after insertion. You can return <strong>any of them</strong>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">insertIntoBST</span><span class="hljs-params">(root *TreeNode, val <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> &amp;TreeNode&#123;Val: val&#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> val &lt; root.Val &#123;<br>        root.Left = insertIntoBST(root.Left, val)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        root.Right = insertIntoBST(root.Right, val)<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶å®è¿™é“é¢˜ç›®å…¶å®æ˜¯ä¸€é“ç®€å•é¢˜ç›®ï¼Œ<strong>ä½†æ˜¯é¢˜ç›®ä¸­çš„æç¤ºï¼šæœ‰å¤šç§æœ‰æ•ˆçš„æ’å…¥æ–¹å¼ï¼Œè¿˜å¯ä»¥é‡æ„äºŒå‰æœç´¢æ ‘ï¼Œä¸€ä¸‹å­å“é€€äº†ä¸å°‘äºº</strong>ï¼Œç¬é—´æ„Ÿè§‰é¢˜ç›®å¤æ‚äº†å¾ˆå¤šã€‚</p><p>å…¶å®<strong>å¯ä»¥ä¸è€ƒè™‘é¢˜ç›®ä¸­æç¤ºæ‰€è¯´çš„æ”¹å˜æ ‘çš„ç»“æ„çš„æ’å…¥æ–¹å¼ã€‚</strong></p><p><strong>æœ‰è¿”å›å€¼çš„è¯ï¼Œå¯ä»¥åˆ©ç”¨è¿”å›å€¼å®Œæˆæ–°åŠ å…¥çš„èŠ‚ç‚¹ä¸å…¶çˆ¶èŠ‚ç‚¹çš„èµ‹å€¼æ“ä½œ</strong>ã€‚</p><p>æ€è·¯ï¼šæˆ‘ä»¬æ‰¾çš„æ˜¯ä¸€æ¡è¾¹ï¼Œå¦‚æœæ˜¯ç©ºçš„èŠ‚ç‚¹çš„è¯å°±æ˜¯æ‰¾åˆ°äº†è¯¥æ’å…¥çš„ä½ç½®ï¼Œæ’å…¥å³å¯ï¼Œå‰©ä¸‹çš„è¿”å›çš„éƒ½æ˜¯ç°å­˜çš„èŠ‚ç‚¹å€¼ã€‚</p><h2 id="8-21-åœ¨äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹"><a href="#8-21-åœ¨äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹" class="headerlink" title="8.21 åœ¨äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹"></a>8.21 åœ¨äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹</h2><p><strong>450. Delete Node in a BST</strong></p><p><strong>Qï¼š</strong>Given a root node reference of a BST and a key, delete the node with the given key in the BST. Return <em>the <strong>root node reference</strong> (possibly updated) of the BST</em>.</p><p>Basically, the deletion can be divided into two stages:</p><ol><li>Search for a node to remove.</li><li>If the node is found, delete the node.</li></ol><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">deleteNode</span><span class="hljs-params">(root *TreeNode, key <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> root.Val == key &#123;<br>        <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right != <span class="hljs-literal">nil</span> &#123;<br>            <span class="hljs-keyword">return</span> root.Right<br>        &#125;<br>        <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>            <span class="hljs-keyword">return</span> root.Left<br>        &#125;<br>        tmp := root.Right<br>        <span class="hljs-keyword">for</span> tmp.Left != <span class="hljs-literal">nil</span> &#123;<br>            tmp = tmp.Left<br>        &#125;<br>        tmp.Left = root.Left<br>        <span class="hljs-keyword">return</span> root.Right<br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> key &lt; root.Val &#123;<br>        root.Left = deleteNode(root.Left, key)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        root.Right = deleteNode(root.Right, key)<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¦çš„ç‚¹åœ¨äºè€ƒè™‘åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®ï¼Œæœ‰ä»¥ä¸‹äº”ç§æƒ…å†µï¼š</p><ul><li>ç¬¬ä¸€ç§æƒ…å†µï¼šæ²¡æ‰¾åˆ°åˆ é™¤çš„èŠ‚ç‚¹ï¼Œéå†åˆ°ç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›äº†</li><li>æ‰¾åˆ°åˆ é™¤çš„èŠ‚ç‚¹<ul><li>ç¬¬äºŒç§æƒ…å†µï¼šå·¦å³å­©å­éƒ½ä¸ºç©ºï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼Œç›´æ¥åˆ é™¤èŠ‚ç‚¹ï¼Œ è¿”å›NULLä¸ºæ ¹èŠ‚ç‚¹</li><li>ç¬¬ä¸‰ç§æƒ…å†µï¼šåˆ é™¤èŠ‚ç‚¹çš„å·¦å­©å­ä¸ºç©ºï¼Œå³å­©å­ä¸ä¸ºç©ºï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œå³å­©å­è¡¥ä½ï¼Œè¿”å›å³å­©å­ä¸ºæ ¹èŠ‚ç‚¹</li><li>ç¬¬å››ç§æƒ…å†µï¼šåˆ é™¤èŠ‚ç‚¹çš„å³å­©å­ä¸ºç©ºï¼Œå·¦å­©å­ä¸ä¸ºç©ºï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œå·¦å­©å­è¡¥ä½ï¼Œè¿”å›å·¦å­©å­ä¸ºæ ¹èŠ‚ç‚¹</li><li>ç¬¬äº”ç§æƒ…å†µï¼šå·¦å³å­©å­èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆ™å°†åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘å¤´ç»“ç‚¹ï¼ˆå·¦å­©å­ï¼‰æ”¾åˆ°åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘çš„æœ€å·¦é¢èŠ‚ç‚¹çš„å·¦å­©å­ä¸Šï¼Œè¿”å›åˆ é™¤èŠ‚ç‚¹å³å­©å­ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹ã€‚</li></ul></li></ul><h2 id="8-22-ä¿®å‰ªäºŒå‰æœç´¢æ ‘"><a href="#8-22-ä¿®å‰ªäºŒå‰æœç´¢æ ‘" class="headerlink" title="8.22 ä¿®å‰ªäºŒå‰æœç´¢æ ‘"></a>8.22 ä¿®å‰ªäºŒå‰æœç´¢æ ‘</h2><p><strong>669. Trim a Binary Search Tree</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary search tree and the lowest and highest boundaries as <code>low</code> and <code>high</code>, trim the tree so that all its elements lies in <code>[low, high]</code>. Trimming the tree should <strong>not</strong> change the relative structure of the elements that will remain in the tree (i.e., any nodeâ€™s descendant should remain a descendant). It can be proven that there is a <strong>unique answer</strong>.</p><p>Return <em>the root of the trimmed binary search tree</em>. Note that the root may change depending on the given bounds.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trimBST</span><span class="hljs-params">(root *TreeNode, low <span class="hljs-type">int</span>, high <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> &#125;<br>    <br>    <span class="hljs-keyword">if</span> root.Val &lt; low &#123;<br>        right := trimBST(root.Right, low, high)<br>        <span class="hljs-keyword">return</span> right<br>    &#125;<br>    <span class="hljs-keyword">if</span> root.Val &gt; high &#123;<br>        left := trimBST(root.Left, low, high)<br>        <span class="hljs-keyword">return</span> left<br>    &#125;<br>    <br>    root.Right = trimBST(root.Right, low, high)<br>    root.Left = trimBST(root.Left, low, high)<br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç¡®å®šç»ˆæ­¢æ¡ä»¶</li></ul><p>ä¿®å‰ªçš„æ“ä½œå¹¶ä¸æ˜¯åœ¨ç»ˆæ­¢æ¡ä»¶ä¸Šè¿›è¡Œçš„ï¼Œæ‰€ä»¥å°±æ˜¯é‡åˆ°ç©ºèŠ‚ç‚¹è¿”å›å°±å¯ä»¥äº†ã€‚</p><p>æ€è·¯ï¼š</p><p>1ã€å¦‚æœæ­¤æ—¶çš„èŠ‚ç‚¹å€¼å°äºäº†æœ€å°è¾¹ç•Œï¼ˆå› ä¸ºæ˜¯é—­åŒºé—´ï¼‰ï¼Œé‚£è¿™ä¸ªèŠ‚ç‚¹å°±åºŸæ‰ï¼Œæˆ‘ä»¬æ‰¾æ¯”ä»–å¤§çš„ï¼ˆä»–çš„å³å­æ ‘ä¸­æ˜¯å¦æœ‰ç¬¦åˆçš„èŠ‚ç‚¹ï¼‰</p><p>2ã€å¦‚æœæ­¤æ—¶çš„èŠ‚ç‚¹å€¼å¤§äºäº†æœ€å¤§è¾¹ç•Œï¼ˆå› ä¸ºæ˜¯é—­åŒºé—´ï¼‰ï¼Œé‚£è¿™ä¸ªèŠ‚ç‚¹å°±åºŸæ‰ï¼Œæˆ‘ä»¬æ‰¾æ¯”ä»–å°çš„ï¼ˆä»–çš„å·¦å­æ ‘ä¸­æ˜¯å¦æœ‰ç¬¦åˆçš„èŠ‚ç‚¹ï¼‰</p><p>3ã€æ‹¼æ¥åˆ†æ”¯ï¼Œç±»ä¼¼äºä¹‹å‰çš„ç”¨æ³•ï¼Œå¦‚æœæ²¡æœ‰è£å‰ªå°±è¿”å›çš„æ˜¯rootï¼ˆå½“å‰çš„èŠ‚ç‚¹ï¼‰å¦‚æœæœ‰è£å‰ªï¼Œè¿”å›çš„å°±æ˜¯è·å–çš„leftæˆ–è€…right</p><h2 id="8-23-æ„å»ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘"><a href="#8-23-æ„å»ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="8.23 æ„å»ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘"></a>8.23 æ„å»ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘</h2><p><strong>108. Convert Sorted Array to Binary Search Tree</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code> where the elements are sorted in <strong>ascending order</strong>, convert <em>it to a <strong>height-balanced</strong> binary search tree</em>.</p><p>A <strong>height-balanced</strong> binary tree is a binary tree in which the depth of the two subtrees of every node never differs by more than one.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sortedArrayToBST</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">return</span> &amp;TreeNode&#123;<br>        Val: nums[<span class="hljs-built_in">len</span>(nums)/<span class="hljs-number">2</span>], <br>        Left: sortedArrayToBST(nums[:<span class="hljs-built_in">len</span>(nums)/<span class="hljs-number">2</span>]), <br>        Right: sortedArrayToBST(nums[<span class="hljs-built_in">len</span>(nums)/<span class="hljs-number">2</span>+<span class="hljs-number">1</span>:])<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ é™¤äºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå¢åŠ äºŒå‰æ ‘èŠ‚ç‚¹ï¼Œéƒ½æ˜¯ç”¨é€’å½’å‡½æ•°çš„è¿”å›å€¼æ¥å®Œæˆï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚</p><ul><li>ç¡®å®šé€’å½’ç»ˆæ­¢æ¡ä»¶</li></ul><p>å¦‚æœnumsçš„é•¿åº¦ä¸º0ï¼Œåˆ™è¯´æ˜æ²¡æœ‰æ•°éœ€è¦æ”¾å…¥äº†ï¼Œåˆ©ç”¨äº†goçš„åˆ‡ç‰‡ï¼Œæ³¨æ„åˆ‡ç‰‡æ˜¯å·¦é—­å³å¼€</p><p>Stepï¼š</p><p>1ã€å°†æ­¤æ—¶çš„èŠ‚ç‚¹å€¼å†™æˆnumsçš„ä¸­å¿ƒ</p><p>2ã€å·¦æ”¯æ˜¯æ­¤ç‚¹çš„å·¦è¾¹æ‰€æœ‰æ•°ç»„</p><p>3ã€å³æ”¯æ˜¯æ­¤ç‚¹å³è¾¹çš„æ‰€æœ‰æ•°ç»„</p><p>4ã€è¿­ä»£ï¼Œç»ˆæ­¢æ¡ä»¶å¦‚ä¸Š</p><h1 id="ç¬¬9ç« -å›æº¯ç®—æ³•"><a href="#ç¬¬9ç« -å›æº¯ç®—æ³•" class="headerlink" title="ç¬¬9ç«  å›æº¯ç®—æ³•"></a>ç¬¬9ç«  å›æº¯ç®—æ³•</h1><p>å›æº¯é—®é¢˜çš„æ¨¡æ¿</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go">backtracking(å‚æ•°) &#123;<br>    <span class="hljs-keyword">if</span> (ç»ˆæ­¢æ¡ä»¶) &#123;<br>        å­˜æ”¾ç»“æœ;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (é€‰æ‹©ï¼šæœ¬å±‚é›†åˆä¸­å…ƒç´ ï¼ˆæ ‘ä¸­èŠ‚ç‚¹å­©å­çš„æ•°é‡å°±æ˜¯é›†åˆçš„å¤§å°ï¼‰) &#123;<br>        å¤„ç†èŠ‚ç‚¹;<br>        backtracking(è·¯å¾„ï¼Œé€‰æ‹©åˆ—è¡¨); <span class="hljs-comment">// é€’å½’</span><br>        å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-1-ç»„åˆé—®é¢˜"><a href="#9-1-ç»„åˆé—®é¢˜" class="headerlink" title="9.1 ç»„åˆé—®é¢˜"></a>9.1 ç»„åˆé—®é¢˜</h2><p><strong>77. Combinations</strong></p><p><strong>Qï¼š</strong>Given two integers <code>n</code> and <code>k</code>, return <em>all possible combinations of</em> <code>k</code> <em>numbers out of the range</em> <code>[1, n]</code>.</p><p>You may return the answer in <strong>any order</strong>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">combine</span><span class="hljs-params">(n <span class="hljs-type">int</span>, k <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">0</span> || k &lt;= <span class="hljs-number">0</span> || k &gt; n &#123;<br>        <span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>    &#125;<br>    c, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;  <span class="hljs-comment">// c is combine</span><br>    generateCombinations(n, k, <span class="hljs-number">1</span>, c, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateCombinations</span><span class="hljs-params">(n, k, start <span class="hljs-type">int</span>, c []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == k &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-comment">// for i := start; i &lt;= n; i++ ä¸å‰ªæå¤´çš„å†™æ³•</span><br>    <span class="hljs-keyword">for</span> i := start; i &lt;= n - (k - <span class="hljs-built_in">len</span>(c)) + <span class="hljs-number">1</span>; i++ &#123;<br>        c = <span class="hljs-built_in">append</span>(c, i)<br>        generateCombinations(n, k, i + <span class="hljs-number">1</span>, c, res)<br>        c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ¯æ¬¡ä»é›†åˆä¸­é€‰å–å…ƒç´ ï¼Œå¯é€‰æ‹©çš„èŒƒå›´éšç€é€‰æ‹©çš„è¿›è¡Œè€Œæ”¶ç¼©ï¼Œè°ƒæ•´å¯é€‰æ‹©çš„èŒƒå›´ï¼Œå°±æ˜¯è¦é startIndex</strong>ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201123195242899.png" alt="77. Combinations"></p><p><code>i &lt;= n - (k - len(c)) + 1</code>è¿™ä¸ªæ¡ä»¶å¾ˆå…³é”®ä»–å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°‘åˆ†æ”¯ï¼Œå»é™¤é‚£äº›æœ¬èº«ä¸ºç©ºçš„ç­”æ¡ˆã€‚n æœ¬èº«æ˜¯æˆ‘ä»¬å¯é€‰é¡¹çš„ä¸Šé™ï¼Œæˆ‘ä»¬åªé startæ¥æ§åˆ¶ä¸é‡å¤ã€‚</p><ol><li>å·²ç»é€‰æ‹©çš„å…ƒç´ ä¸ªæ•°ï¼šlen(c)</li><li>è¿˜éœ€è¦çš„å…ƒç´ ä¸ªæ•°ä¸º: k - len(c)          ï¼ˆä»åå¾€å‰æ•°ï¼Œæœ€å¼€å§‹ä¸€å±‚å°±æ˜¯kï¼Œæ‰€ä»¥å€’æ•°åkä¸ªæ•°æ˜¯æœ€è¿œçš„èµ·å§‹ä½ç½®ï¼‰</li><li><p>åœ¨é›†åˆnä¸­è‡³å¤šè¦ä»è¯¥èµ·å§‹ä½ç½® : n - (k - len(c)) + 1(start)ï¼Œå¼€å§‹éå†  </p><p>(ç¿»è¯‘è¿‡æ¥å°±æ˜¯å¦‚æœæ€»å…±çš„nä¸ªæ•°å‡å»æˆ‘ä»¬è¿˜éœ€è¦çš„å…ƒç´ åå‰©ä½™çš„æœ€å¤§ä¸ªæ•°ï¼Œä½œä¸ºæˆ‘ä»¬èµ·å§‹ä½ç½®çš„æœ€è¿œç«¯)</p></li></ol><p>ä¸ºä»€ä¹ˆæœ‰ä¸ª+1å‘¢ï¼Œå› ä¸ºåŒ…æ‹¬èµ·å§‹ä½ç½®ï¼Œæˆ‘ä»¬è¦æ˜¯ä¸€ä¸ªå·¦é—­çš„é›†åˆã€‚</p><h2 id="9-2-ç»„åˆæ€»å’Œ-III"><a href="#9-2-ç»„åˆæ€»å’Œ-III" class="headerlink" title="9.2 ç»„åˆæ€»å’Œ III"></a>9.2 ç»„åˆæ€»å’Œ III</h2><p><strong>216. Combination Sum III</strong></p><p><strong>Qï¼š</strong>Find all valid combinations of <code>k</code> numbers that sum up to <code>n</code> such that the following conditions are true:</p><ul><li>Only numbers <code>1</code> through <code>9</code> are used.</li><li>Each number is used <strong>at most once</strong>.</li></ul><p>Return <em>a list of all possible valid combinations</em>. The list must not contain the same combination twice, and the combinations may be returned in any order.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">combinationSum3</span><span class="hljs-params">(k <span class="hljs-type">int</span>, n <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">0</span> || k &lt;= <span class="hljs-number">0</span> || k &gt; n &#123;<br>        <span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>    &#125;<br>    c, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    generateCombinations(k, n, <span class="hljs-number">1</span>, c, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateCombinations</span><span class="hljs-params">(k, target, start <span class="hljs-type">int</span>, c []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == k &amp;&amp; target == <span class="hljs-number">0</span>&#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>  <br>  <span class="hljs-keyword">if</span> target &lt; <span class="hljs-number">0</span> &#123; <span class="hljs-keyword">return</span> &#125;<br><br>    <span class="hljs-keyword">for</span> i := start; i &lt;= <span class="hljs-number">9</span>; i++ &#123;<br>        c = <span class="hljs-built_in">append</span>(c, i)<br>        generateCombinations(k, target - i, i + <span class="hljs-number">1</span>, c, res)<br>        c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é›·åŒ77é¢˜ï¼Œä¸è¿‡é‡åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“å¯¹iè¿›è¡Œå‰ªæçš„æ—¶å€™ï¼Œä»–ä¼šçˆ†æ ˆã€‚</p><h2 id="9-3-ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"><a href="#9-3-ç”µè¯å·ç çš„å­—æ¯ç»„åˆ" class="headerlink" title="9.3 ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"></a>9.3 ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</h2><p><strong>17. Letter Combinations of a Phone Number</strong></p><p><strong>Qï¼š</strong>Given a string containing digits from <code>2-9</code> inclusive, return all possible letter combinations that the number could represent. Return the answer in <strong>any order</strong>.</p><p>A mapping of digits to letters (just like on the telephone buttons) is given below. Note that 1 does not map to any letters.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> result []<span class="hljs-type">string</span><br><span class="hljs-keyword">var</span> dict = <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>][]<span class="hljs-type">string</span>&#123;<br>    <span class="hljs-string">&quot;2&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;3&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-string">&quot;f&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;4&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;g&quot;</span>, <span class="hljs-string">&quot;h&quot;</span>, <span class="hljs-string">&quot;i&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;5&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;j&quot;</span>, <span class="hljs-string">&quot;k&quot;</span>, <span class="hljs-string">&quot;l&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;6&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;m&quot;</span>, <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;o&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;7&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;p&quot;</span>, <span class="hljs-string">&quot;q&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-string">&quot;s&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;8&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;u&quot;</span>, <span class="hljs-string">&quot;v&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;9&quot;</span> : []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;w&quot;</span>, <span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-string">&quot;z&quot;</span>&#125;,<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">letterCombinations</span><span class="hljs-params">(digits <span class="hljs-type">string</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br>    result = []<span class="hljs-type">string</span>&#123;&#125;<br>    <span class="hljs-keyword">if</span> digits == <span class="hljs-string">&quot;&quot;</span> &#123;<br>      <span class="hljs-keyword">return</span> result<br>    &#125;<br>    letterFunc(<span class="hljs-string">&quot;&quot;</span>, digits)<br>    <span class="hljs-keyword">return</span> result<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">letterFunc</span><span class="hljs-params">(res <span class="hljs-type">string</span>, digits <span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> digits == <span class="hljs-string">&quot;&quot;</span> &#123;<br>        result = <span class="hljs-built_in">append</span>(result, res)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    k := digits[<span class="hljs-number">0</span>:<span class="hljs-number">1</span>]<span class="hljs-comment">// é€‰å–ç¬¬ä¸€ä¸ªå­—æ¯</span><br>    digits = digits[<span class="hljs-number">1</span>:] <span class="hljs-comment">// å‰”é™¤ç¬¬ä¸€ä¸ªå­—æ¯</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(dict[k]); i++ &#123;<br>        res += dict[k][i]<br>        letterFunc(res, digits)<br>        res = res[:<span class="hljs-built_in">len</span>(res) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äºgoä¸­stringçš„ç†è§£ä¸å¤Ÿæ·±ã€‚stringçš„å¤„ç†ä½¿ç”¨åˆ‡ç‰‡çš„ï¼Œå¹¶ä¸”åˆ‡ç‰‡ä»¥åæ‰èƒ½sliceæ‰æ˜¯å¯ä»¥ç”¨appendçš„ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201123200304469.png" alt="17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"></p><p>å‰©ä¸‹çš„å°±æ˜¯æŒ‰ç…§å›æº¯çš„å…¬å¼å»å¥—é¢˜ã€‚foré‡Œé¢è£…çš„æ˜¯æ¯å±‚è¦å¤„ç†çš„å­é›†ã€‚</p><h2 id="9-4-ç»„åˆæ€»å’Œï¼ˆäºŒï¼‰"><a href="#9-4-ç»„åˆæ€»å’Œï¼ˆäºŒï¼‰" class="headerlink" title="9.4 ç»„åˆæ€»å’Œï¼ˆäºŒï¼‰"></a>9.4 ç»„åˆæ€»å’Œï¼ˆäºŒï¼‰</h2><p><strong>39. Combination Sum</strong></p><p><strong>Qï¼š</strong>Given an array of <strong>distinct</strong> integers <code>candidates</code> and a target integer <code>target</code>, return <em>a list of all <strong>unique combinations</strong> of</em> <code>candidates</code> <em>where the chosen numbers sum to</em> <code>target</code><em>.</em> You may return the combinations in <strong>any order</strong>.</p><p>The <strong>same</strong> number may be chosen from <code>candidates</code> an <strong>unlimited number of times</strong>. Two combinations are unique if the frequency of at least one of the chosen numbers is different.</p><p>It is <strong>guaranteed</strong> that the number of unique combinations that sum up to <code>target</code> is less than <code>150</code> combinations for the given input.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">combinationSum</span><span class="hljs-params">(candidates []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    c, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    findCombination(candidates, c, target, <span class="hljs-number">0</span>, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findCombination</span><span class="hljs-params">(cand, c []<span class="hljs-type">int</span>, target, index <span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> target == <span class="hljs-number">0</span> &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> target &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := index; i &lt; <span class="hljs-built_in">len</span>(cand); i++ &#123;<br>        c = <span class="hljs-built_in">append</span>(c, cand[i])<br>        findCombination(cand, c, target - cand[i], i, res)<br>        c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å› ä¸ºå…ƒç´ å¯ä»¥é‡å¤ï¼Œæ‰€ä»¥indexå’Œiç»„åˆä¿è¯ä»–ä¸å¾€å›å¤´ï¼ˆå‘å‰ï¼‰æ‰¾å…ƒç´ å°±å¯ä»¥äº†ã€‚</p><p>âœ¨<strong>å…¶ä¸­ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰cé™„é­”ç»™bå‘¢ï¼Ÿ</strong>è¿™é‡Œæ˜¯æ·±å¤åˆ¶å’Œæµ…å¤åˆ¶çš„é—®é¢˜ã€‚å¦‚æœä¸ copy ä¸€ä»½ï¼Œç›´æ¥æŠŠ c åŠ å…¥åˆ° res ç»“æœæ•°ç»„ä¸­ï¼Œä¸‹ä¸€è½®é€’å½’è¿‡ç¨‹ä¸­ï¼Œc ä¼šå˜ï¼Œè¿™ä¸ªå˜åŒ–ä¹Ÿä¼šå½±å“åˆ° res é‡Œé¢çš„å€¼ã€‚å¦‚æœè¿˜ä¸æ˜ç™½çš„è¯ï¼Œä½ å¯ä»¥æŠŠ copy c çš„é‚£ 2 è¡Œä»£ç æ³¨é‡Šæ‰ï¼Œç›´æ¥æŠŠ c append åˆ° res ä¸­ï¼Œä½ å†çœ‹è¾“å‡ºç»“æœå°±èƒ½çœ‹åˆ°åŸå› äº†ã€‚</p><p><strong>æµ…æ‹·è´</strong>: å¯¹äºä»…ä»…æ˜¯å¤åˆ¶äº†å¼•ç”¨ï¼ˆåœ°å€ï¼‰ï¼Œæ¢å¥è¯è¯´ï¼Œå¤åˆ¶äº†ä¹‹åï¼ŒåŸæ¥çš„å˜é‡å’Œæ–°çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªä¸œè¥¿ï¼Œå½¼æ­¤ä¹‹é—´çš„æ“ä½œä¼šäº’ç›¸å½±å“ï¼Œä¸º<strong>æµ…æ‹·è´</strong>ã€‚ <strong>æ·±æ‹·è´</strong>ï¼šè€Œå¦‚æœæ˜¯åœ¨å †ä¸­é‡æ–°åˆ†é…å†…å­˜ï¼Œæ‹¥æœ‰ä¸åŒçš„åœ°å€ï¼Œä½†æ˜¯å€¼æ˜¯ä¸€æ ·çš„ï¼Œå¤åˆ¶åçš„å¯¹è±¡ä¸åŸæ¥çš„å¯¹è±¡æ˜¯å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“ï¼Œä¸º<strong>æ·±æ‹·è´</strong></p><p>ï¼ˆç®€è€Œè¨€ä¹‹ï¼šæµ…æ‹·è´æ‹·è´çš„æ˜¯å€¼ï¼Œä»–å’ŒåŸæœ¬çš„æŒ‡é’ˆæŒ‡çš„æ˜¯åŒä¸€ä¸ªåœ°æ–¹ï¼Œç±»ä¼¼å¼•ç”¨ï¼Œå½“æŒ‡é’ˆæ‰€æŒ‡å†…å®¹å˜äº†è¿™ä¸ªæ‹·è´å€¼ä¹Ÿå˜ï¼›è€Œæ·±æ‹·è´æ‹·è´çš„æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ä½†æ˜¯å ç”¨çš„å¦ä¸€ä¸ªç©ºé—´ï¼Œè¿™æ ·å°±ç®—å‰è€…å†å˜ä¹Ÿä¸ä¼šå½±å“æ–°æ‹·è´å‡ºæ¥çš„å¯¹è±¡ï¼‰</p><h2 id="9-5-ç»„åˆæ€»å’Œï¼ˆä¸‰ï¼‰"><a href="#9-5-ç»„åˆæ€»å’Œï¼ˆä¸‰ï¼‰" class="headerlink" title="9.5 ç»„åˆæ€»å’Œï¼ˆä¸‰ï¼‰"></a>9.5 ç»„åˆæ€»å’Œï¼ˆä¸‰ï¼‰</h2><p><strong>40. Combination Sum II</strong></p><p><strong>Qï¼š</strong>Given a collection of candidate numbers (<code>candidates</code>) and a target number (<code>target</code>), find all unique combinations in <code>candidates</code> where the candidate numbers sum to <code>target</code>.</p><p>Each number in <code>candidates</code> may only be used <strong>once</strong> in the combination.</p><p><strong>Note:</strong> The solution set must not contain duplicate combinations.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">combinationSum2</span><span class="hljs-params">(candidates []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(candidates) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>c, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>sort.Ints(candidates) <span class="hljs-comment">// è¿™é‡Œæ˜¯å»é‡çš„å…³é”®é€»è¾‘</span><br>    findCombination(candidates, c, target, <span class="hljs-number">0</span>, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findCombination</span><span class="hljs-params">(cand, c []<span class="hljs-type">int</span>, target, index <span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> target == <span class="hljs-number">0</span> &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> target &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := index; i &lt; <span class="hljs-built_in">len</span>(cand); i++ &#123;<br>        <span class="hljs-comment">// è¿™é‡Œæ˜¯å»é‡çš„å…³é”®é€»è¾‘,æœ¬æ¬¡ä¸å–é‡å¤æ•°å­—ï¼Œä¸‹æ¬¡å¾ªç¯å¯èƒ½ä¼šå–é‡å¤æ•°å­—</span><br>        <span class="hljs-keyword">if</span> i &gt; index &amp;&amp; cand[i] == cand[i<span class="hljs-number">-1</span>] &#123; <br><span class="hljs-keyword">continue</span><br>&#125;<br>        c = <span class="hljs-built_in">append</span>(c, cand[i])<br>        findCombination(cand, c, target - cand[i], i + <span class="hljs-number">1</span>, res)<br>        c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é¢˜ç›®è¦æ±‚å‡ºæ€»å’Œä¸º sum çš„æ‰€æœ‰ç»„åˆï¼Œç»„åˆéœ€è¦å»é‡ã€‚è¿™ä¸€é¢˜æ˜¯ç¬¬ 39 é¢˜çš„åŠ å¼ºç‰ˆï¼Œç¬¬ 39 é¢˜ä¸­å…ƒç´ å¯ä»¥é‡å¤åˆ©ç”¨(é‡å¤å…ƒç´ å¯æ— é™æ¬¡ä½¿ç”¨)ï¼Œè¿™ä¸€é¢˜ä¸­å…ƒç´ åªèƒ½æœ‰é™æ¬¡æ•°çš„åˆ©ç”¨ï¼Œå› ä¸ºå­˜åœ¨é‡å¤å…ƒç´ ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡(é‡å¤å…ƒç´ åªèƒ½ä½¿ç”¨æœ‰é™æ¬¡)</li><li>è¿™ä¸€é¢˜å’Œç¬¬ 47 é¢˜ç±»ä¼¼ï¼Œåªä¸è¿‡å…ƒç´ å¯ä»¥åå¤ä½¿ç”¨ã€‚</li><li>æ€»ä½“æ¥è¯´éœ€è¦æ³¨æ„çš„ä¸¤ä¸ªé‡å¤ä½ç½®ï¼Œç¬¬ä¸€ä¸ªæ˜¯é€šè¿‡å–å¾—é‡å¤çš„æ ¹ï¼Œä»è€Œå¾—åˆ°ä¸¤ä¸ªåŒæ ·çš„ç»“æœï¼Œç¬¬äºŒä¸ªå°±æ˜¯å‡ºç°å‰åé¢ å€’ä½†é›†åˆç›¸åŒçš„é—®é¢˜ã€‚</li></ul><p>æ‰€ä»¥å…ˆæ’å¥½åºï¼ˆä¿è¯äº†ç»“æœè‚¯å®šæ˜¯é€’å¢çš„é¡ºåºï¼Œä¸ä¼šå‡ºç° [1, 7] å’Œ [7, 1] è¿™ç§ç»„åˆï¼Œå†åˆ¤æ–­ã€‚i &gt; index è¡¨ç¤ºé™¤äº†æœ¬å±‚çš„ç¬¬ä¸€ä¸ªé€‰å–çš„æ•°ä»¥å¤–çš„æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°å’Œå‰ä¸€ä¸ªæ•°ç›¸åŒçš„è¯è·³è¿‡ã€‚æœ¬è´¨ä¸Šè¿™ä¸ªåˆ¤æ–­æ˜¯å»é™¤åŒä¸€å±‚é‡å¤è·å–çš„æ•°å­—æ˜¯forbiddençš„ã€‚</p><p>é€‰æ‹©è¿‡ç¨‹æ ‘å½¢ç»“æ„å¦‚å›¾æ‰€ç¤º</p><p><img src="https://img-blog.csdnimg.cn/20201123202736384.png" alt="40.ç»„åˆæ€»å’ŒII"></p><h2 id="9-6-åˆ†å‰²å›æ–‡ä¸²"><a href="#9-6-åˆ†å‰²å›æ–‡ä¸²" class="headerlink" title="9.6 åˆ†å‰²å›æ–‡ä¸²"></a>9.6 åˆ†å‰²å›æ–‡ä¸²</h2><p><strong>131. Palindrome Partitioning</strong></p><p><strong>Qï¼š</strong>Given a string <code>s</code>, partition <code>s</code> such that every substring of the partition is a <strong>palindrome</strong>. Return all possible palindrome partitioning of <code>s</code>.</p><p>A <strong>palindrome</strong> string is a string that reads the same backward as forward.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">partition</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> [][]<span class="hljs-type">string</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s) == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    c, res := []<span class="hljs-type">string</span>&#123;&#125;, [][]<span class="hljs-type">string</span>&#123;&#125;<br>    findPartition(<span class="hljs-number">0</span>, s, c, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findPartition</span><span class="hljs-params">(start <span class="hljs-type">int</span>, s <span class="hljs-type">string</span>, c []<span class="hljs-type">string</span>, res *[][]<span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> start == <span class="hljs-built_in">len</span>(s) &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := start; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        sub := s[start : i + <span class="hljs-number">1</span>]  <span class="hljs-comment">// partition</span><br>        <span class="hljs-keyword">if</span> IsPalindrome(sub) &#123; <span class="hljs-comment">// combine</span><br>            c = <span class="hljs-built_in">append</span>(c, sub)<br>            findPartition(i + <span class="hljs-number">1</span>, s, c, res)<br>            c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsPalindrome</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    length := <span class="hljs-built_in">len</span>(s)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= length/<span class="hljs-number">2</span>; i++ &#123;<br>      <span class="hljs-keyword">if</span> s[i] != s[length - <span class="hljs-number">1</span> - i] &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶æ ‘å½¢ç»“æ„ä¸ºä¸‹å›¾</p><p><img src="https://code-thinking.cdn.bcebos.com/pics/131.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2.jpg" alt="131.åˆ†å‰²å›æ–‡ä¸²"></p><p>è¿™ä¸€é¢˜çš„å…³é”®åœ¨äºåˆ†å‰²å’Œç»„åˆçš„æ€æƒ³ã€‚è¦å…ˆåˆ‡å‰²ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆå›æ–‡ä¸²ï¼Ÿç¬¦åˆçš„è¯æ‰ç»§ç»­è¿›è¡Œç»„åˆé€’å½’ä¸‹ä¸€å±‚ã€‚</p><h2 id="9-7-å¤åŸIPåœ°å€"><a href="#9-7-å¤åŸIPåœ°å€" class="headerlink" title="9.7 å¤åŸIPåœ°å€"></a>9.7 å¤åŸIPåœ°å€</h2><p><strong>93. Restore IP Addresses</strong></p><p><strong>Qï¼š</strong>A <strong>valid IP address</strong> consists of exactly four integers separated by single dots. Each integer is between <code>0</code> and <code>255</code> (<strong>inclusive</strong>) and cannot have leading zeros.</p><ul><li>For example, <code>&quot;0.1.2.201&quot;</code> and <code>&quot;192.168.1.1&quot;</code> are <strong>valid</strong> IP addresses, but <code>&quot;0.011.255.245&quot;</code>, <code>&quot;192.168.1.312&quot;</code> and <code>&quot;192.168@1.1&quot;</code> are <strong>invalid</strong> IP addresses.</li></ul><p>Given a string <code>s</code> containing only digits, return <em>all possible valid IP addresses that can be formed by inserting dots into</em> <code>s</code>. You are <strong>not</strong> allowed to reorder or remove any digits in <code>s</code>. You may return the valid IP addresses in <strong>any</strong> order.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">restoreIpAddresses</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br>    <span class="hljs-keyword">if</span> s == <span class="hljs-string">&quot;&quot;</span> &#123;<br><span class="hljs-keyword">return</span> []<span class="hljs-type">string</span>&#123;&#125;<br>&#125;<br>res, ip := []<span class="hljs-type">string</span>&#123;&#125;, []<span class="hljs-type">int</span>&#123;&#125;<br>    dfs(s, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, ip, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(s <span class="hljs-type">string</span>, start, cut <span class="hljs-type">int</span>, ip []<span class="hljs-type">int</span>, res *[]<span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> cut == <span class="hljs-number">4</span> &amp;&amp; start == <span class="hljs-built_in">len</span>(s) &#123;<br>        tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(ip))<br>        <span class="hljs-built_in">copy</span>(tmp, ip)<br>        resIp := getIp(tmp)<br>        *res = <span class="hljs-built_in">append</span>(*res, resIp)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> cut &gt; <span class="hljs-number">4</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := start; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        sub := s[start : i + <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> isValid(sub) &#123;<br>            tmp, _ := strconv.Atoi(sub)<br>            ip = <span class="hljs-built_in">append</span>(ip, tmp)<br>            cut++<br>            dfs(s, i + <span class="hljs-number">1</span>, cut, ip, res)<br>            ip = ip[:<span class="hljs-built_in">len</span>(ip) - <span class="hljs-number">1</span>]<br>            cut--<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValid</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; <span class="hljs-built_in">len</span>(s) != <span class="hljs-number">1</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125; <span class="hljs-comment">// 0å¼€å¤´çš„ä¸å¯ä»¥</span><br>    tmp, _ := strconv.Atoi(s)<br>    <span class="hljs-keyword">if</span> (tmp &gt; <span class="hljs-number">255</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getIp</span><span class="hljs-params">(ip []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>    resIp := strconv.Itoa(ip[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(ip); i++ &#123;<br>      resIp += <span class="hljs-string">&quot;.&quot;</span> + strconv.Itoa(ip[i])<br>    &#125;<br><span class="hljs-keyword">return</span> resIp<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¦è€ƒè™‘åˆ°å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>æ®µä½ä»¥0ä¸ºå¼€å¤´çš„æ•°å­—ä¸åˆæ³•</li><li>æ®µä½é‡Œæœ‰éæ­£æ•´æ•°å­—ç¬¦ä¸åˆæ³•</li><li>æ®µä½å¦‚æœå¤§äº255äº†ä¸åˆæ³•</li></ul><p><img src="https://img-blog.csdnimg.cn/20201123203735933.png" alt="93.å¤åŸIPåœ°å€"></p><p>å¯¹äºè¯­æ³•çš„ä¸€äº›æ³¨æ„ç‚¹ï¼Œé¦–å…ˆintè½¬stringï¼ˆstrconv.Itoaï¼‰æ˜¯è¿”å›ä¸€ä¸ªå€¼çš„ï¼›stringè½¬intï¼ˆstrconv.Atoiï¼‰æ˜¯è¿”å›ä¸¤ä¸ªå€¼çš„ã€‚</p><p>ä¸€äº›æ³¨æ„ç‚¹ï¼Œè¿™é“é¢˜å’Œåˆ†å‰²å›æ–‡ä¸²æ˜¯å¾ˆç±»ä¼¼çš„ï¼Œæ€æƒ³æ˜¯ä¸€æ ·çš„ã€‚é¦–å…ˆæˆ‘ä»¬è¦åˆ†å‰²ï¼Œæ¥ç€æˆ‘ä»¬è¦åˆ¤æ–­åˆ†å‰²çš„subæ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œå¦‚æœç¬¦åˆæ‰ç»§ç»­æ·±å…¥åˆ°ä¸‹ä¸€å±‚ï¼Œå¦‚æœä¸ç¬¦åˆå°±ä¸ç»§ç»­ã€‚</p><h2 id="9-8-å­é›†é—®é¢˜ï¼ˆä¸€ï¼‰"><a href="#9-8-å­é›†é—®é¢˜ï¼ˆä¸€ï¼‰" class="headerlink" title="9.8 å­é›†é—®é¢˜ï¼ˆä¸€ï¼‰"></a>9.8 å­é›†é—®é¢˜ï¼ˆä¸€ï¼‰</h2><p><strong>78. Subsets</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code> of <strong>unique</strong> elements, return <em>all possible subsets (the power set)</em>.</p><p>The solution set <strong>must not</strong> contain duplicate subsets. Return the solution in <strong>any order</strong>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">subsets</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    cur, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    dfs(<span class="hljs-number">0</span>, nums, cur, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(start <span class="hljs-type">int</span>, nums, cur []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>  <span class="hljs-comment">// å’Œä¹‹å‰æœ€ä¸ä¸€æ ·çš„åœ°æ–¹å°±æ˜¯è¿™é‡Œï¼Œä¸é™åˆ¶åˆ°å¶å­ç»“ç‚¹æ‰åŠ å…¥res</span><br>    tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(cur))<br>    <span class="hljs-built_in">copy</span>(tmp, cur)<br>    *res = <span class="hljs-built_in">append</span>(*res, tmp)<br>    <br>    <span class="hljs-keyword">if</span> start == <span class="hljs-built_in">len</span>(nums) &#123; <span class="hljs-keyword">return</span> &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := start; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        cur = <span class="hljs-built_in">append</span>(cur, nums[i]) <span class="hljs-comment">// åŸæ¥æ˜¯åˆ‡æ‰ä¸€éƒ¨åˆ†ï¼Œç°åœ¨æ˜¯æ‰¾æŸä¸€ä¸ªå€¼</span><br>        dfs(i + <span class="hljs-number">1</span>, nums, cur, res)<br>        cur = cur[:<span class="hljs-built_in">len</span>(cur) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæŠŠ å­é›†é—®é¢˜ã€ç»„åˆé—®é¢˜ã€åˆ†å‰²é—®é¢˜éƒ½æŠ½è±¡ä¸ºä¸€æ£µæ ‘çš„è¯ï¼Œ<strong>é‚£ä¹ˆç»„åˆé—®é¢˜å’Œåˆ†å‰²é—®é¢˜éƒ½æ˜¯æ”¶é›†æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œè€Œå­é›†é—®é¢˜æ˜¯æ‰¾æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼</strong></p><p>å…¶å®å­é›†ä¹Ÿæ˜¯ä¸€ç§ç»„åˆé—®é¢˜ï¼Œå› ä¸ºå®ƒçš„é›†åˆæ˜¯æ— åºçš„ï¼Œå­é›†{1,2} å’Œ å­é›†{2,1}æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>é‚£ä¹ˆæ—¢ç„¶æ˜¯æ— åºï¼Œå–è¿‡çš„å…ƒç´ ä¸ä¼šé‡å¤å–ï¼Œå†™å›æº¯ç®—æ³•çš„æ—¶å€™ï¼Œforå°±è¦ä»startIndexå¼€å§‹ï¼Œè€Œä¸æ˜¯ä»0å¼€å§‹ï¼</strong></p><p><img src="https://img-blog.csdnimg.cn/202011232041348.png" alt="78.å­é›†"></p><p>ä»å›¾ä¸­çº¢çº¿éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹å‡º<strong>éå†è¿™ä¸ªæ ‘çš„æ—¶å€™ï¼ŒæŠŠæ‰€æœ‰èŠ‚ç‚¹éƒ½è®°å½•ä¸‹æ¥ï¼Œå°±æ˜¯è¦æ±‚çš„å­é›†é›†åˆ</strong>ã€‚</p><h2 id="9-9-å­é›†é—®é¢˜ï¼ˆäºŒï¼‰"><a href="#9-9-å­é›†é—®é¢˜ï¼ˆäºŒï¼‰" class="headerlink" title="9.9 å­é›†é—®é¢˜ï¼ˆäºŒï¼‰"></a><strong>9.9 å­é›†é—®é¢˜ï¼ˆäºŒï¼‰</strong></h2><p><strong>90. Subsets II</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code> that may contain duplicates, return <em>all possible subsets (the power set)</em>.</p><p>The solution set <strong>must not</strong> contain duplicate subsets. Return the solution in <strong>any order</strong>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">subsetsWithDup</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    cur, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    sort.Ints(nums)<br>    dfs(<span class="hljs-number">0</span>, nums, cur, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(start <span class="hljs-type">int</span>, nums, cur []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(cur))<br>    <span class="hljs-built_in">copy</span>(tmp, cur)<br>    *res = <span class="hljs-built_in">append</span>(*res, tmp)<br>    <br>    <span class="hljs-comment">// if start == len(nums) &#123; return &#125;</span><br>    <br>    <span class="hljs-keyword">for</span> i := start; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">if</span> i &gt; start &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>] &#123;<br>            <span class="hljs-keyword">continue</span><br>        &#125;<br>        cur = <span class="hljs-built_in">append</span>(cur, nums[i]) <br>        dfs(i + <span class="hljs-number">1</span>, nums, cur, res)<br>        cur = cur[:<span class="hljs-built_in">len</span>(cur) - <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äº []int, []float, []string è¿™ç§å…ƒç´ ç±»å‹æ˜¯åŸºç¡€ç±»å‹çš„åˆ‡ç‰‡ä½¿ç”¨ sort åŒ…æä¾›çš„ä¸‹é¢å‡ ä¸ªå‡½æ•°è¿›è¡Œæ’åºã€‚</p><p>sort.Ints<br>sort.Floats<br>sort.Strings</p><p>ç”¨åˆ°äº†ä¹‹å‰å‰ªæçš„æ–¹æ³•ï¼Œå…ˆæ’åºï¼Œè¿™æ ·ä¿è¯å¦‚æœé‡å¤çš„å…ƒç´ éƒ½æ˜¯æŒ¨ç€çš„</p><h2 id="9-10-é€’å¢å­åºåˆ—"><a href="#9-10-é€’å¢å­åºåˆ—" class="headerlink" title="9.10 é€’å¢å­åºåˆ—"></a>9.10 é€’å¢å­åºåˆ—</h2><p><strong>491. Increasing Subsequences</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code>, return all the different possible increasing subsequences of the given array with <strong>at least two elements</strong>. You may return the answer in <strong>any order</strong>.</p><p>The given array may contain duplicates, and two equal integers should also be considered a special case of increasing sequence.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findSubsequences</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    c, visited, res := []<span class="hljs-type">int</span>&#123;&#125;, <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span>; i++ &#123;<br>        <span class="hljs-keyword">if</span> _, ok := visited[nums[i]]; ok &#123;<br>          <span class="hljs-keyword">continue</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            visited[nums[i]] = <span class="hljs-literal">true</span><br>            generateIncSubsets(nums, i, c, &amp;res)<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateIncSubsets</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, current <span class="hljs-type">int</span>, c []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    c = <span class="hljs-built_in">append</span>(c, nums[current])<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) &gt;= <span class="hljs-number">2</span> &#123;<br>        b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(b, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, b)<br>    &#125;<br>    visited := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>&#123;&#125;<br>    <span class="hljs-keyword">for</span> i := current + <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>      <span class="hljs-comment">// å¦‚æœå½“å‰æ•°å€¼å¤§äºå‰ä¸€ä¸ªæ•°å€¼ï¼Œå¹¶ä¸”æ²¡æœ‰ç”¨è¿‡ï¼Œè¿›å…¥DFSä¸‹ä¸€å±‚</span><br>        <span class="hljs-keyword">if</span> nums[current] &lt;= nums[i] &#123;<br>            <span class="hljs-keyword">if</span> _, ok := visited[nums[i]]; ok &#123;<br>              <span class="hljs-keyword">continue</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                visited[nums[i]] = <span class="hljs-literal">true</span><br>                generateIncSubsets(nums, i, c, res)<br>            &#125;<br>        &#125;<br>    &#125;<br>    c = c[:<span class="hljs-built_in">len</span>(c)<span class="hljs-number">-1</span>]<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç»™å‡ºä¸€ä¸ªæ•°ç»„ï¼Œè¦æ±‚æ‰¾å‡ºè¿™ä¸ªæ•°ç»„ä¸­æ‰€æœ‰é•¿åº¦å¤§äº 2 çš„éé€’å‡å­åºåˆ—ã€‚å­åºåˆ—é¡ºåºå’ŒåŸæ•°ç»„å…ƒç´ ä¸‹æ ‡å¿…é¡»æ˜¯é¡ºåºçš„ï¼Œä¸èƒ½æ˜¯é€†åºçš„ã€‚</li><li>è¿™ä¸€é¢˜å’Œç¬¬ 78 é¢˜å’Œç¬¬ 90 é¢˜æ˜¯ç±»ä¼¼çš„é¢˜ç›®ã€‚ç¬¬ 78 é¢˜å’Œç¬¬ 90 é¢˜æ˜¯æ±‚æ‰€æœ‰å­åºåˆ—ï¼Œè¿™ä¸€é¢˜åœ¨è¿™ä¸¤é¢˜çš„åŸºç¡€ä¸Šå¢åŠ äº†éé€’å‡å’Œé•¿åº¦å¤§äº 2 çš„æ¡ä»¶ã€‚éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹æ˜¯ï¼ŒåŸæ•°ç»„ä¸­å…ƒç´ å¯èƒ½ä¼šé‡å¤ï¼Œæœ€ç»ˆç»“æœè¾“å‡ºçš„æ—¶å€™éœ€è¦å»é‡ã€‚æœ€ç»ˆç»“æœè¾“å‡ºçš„å»é‡ç”¨ map å¤„ç†ï¼Œæ•°ç»„ä¸­é‡å¤å…ƒç´ ç”¨ DFS éå†æœç´¢ã€‚åœ¨æ¯æ¬¡ DFS ä¸­ï¼Œç”¨ map è®°å½•éå†è¿‡çš„å…ƒç´ ï¼Œä¿è¯æœ¬è½® DFS ä¸­ä¸å‡ºç°é‡å¤çš„å…ƒç´ ï¼Œé€’å½’åˆ°ä¸‹ä¸€å±‚è¿˜å¯ä»¥é€‰æ‹©å€¼ç›¸åŒï¼Œä½†æ˜¯ä¸‹æ ‡ä¸åŒçš„å¦å¤–ä¸€ä¸ªå…ƒç´ ã€‚å¤–å±‚å¾ªç¯ä¹Ÿè¦åŠ ä¸€ä¸ª mapï¼Œè¿™ä¸ª map æ˜¯è¿‡æ»¤æ¯ç»„è§£å› ä¸ºé‡å¤å…ƒç´ å¯¼è‡´çš„é‡å¤è§£ï¼Œç»è¿‡è¿‡æ»¤ä»¥åï¼Œèµ·ç‚¹ä¸åŒäº†ï¼Œæœ€ç»ˆçš„è§£ä¹Ÿä¼šä¸åŒã€‚</li><li>é‡ç‚¹åœ¨äºå¯¹äºåŒä¸€å±‚ä¸èƒ½å¤Ÿé‡å¤</li></ul><p>æ ‘ç»“æ„</p><p><img src="https://img-blog.csdnimg.cn/20201124200229824.png" alt="491. é€’å¢å­åºåˆ—1"></p><h2 id="9-11-æ’åˆ—é—®é¢˜ï¼ˆä¸€ï¼‰"><a href="#9-11-æ’åˆ—é—®é¢˜ï¼ˆä¸€ï¼‰" class="headerlink" title="9.11 æ’åˆ—é—®é¢˜ï¼ˆä¸€ï¼‰"></a>9.11 æ’åˆ—é—®é¢˜ï¼ˆä¸€ï¼‰</h2><p><strong>46. Permutations</strong></p><p><strong>Qï¼š</strong>Given an array <code>nums</code> of distinct integers, return <em>all the possible permutations</em>. You can return the answer in <strong>any order</strong>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">permute</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">0</span> &#123;<br>      <span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>    c, used, res := []<span class="hljs-type">int</span>&#123;&#125;, <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    dfs(nums, c, used, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, c []<span class="hljs-type">int</span>, used <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == <span class="hljs-built_in">len</span>(nums) &#123;<br>        tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(tmp, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, tmp)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">if</span> !used[nums[i]] &#123;<br>          used[nums[i]] = <span class="hljs-literal">true</span><br>            c = <span class="hljs-built_in">append</span>(c, nums[i])<br>            dfs(nums, c, used, res)<br>            c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>            used[nums[i]] = <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ‘çŠ¶å›¾</p><p><img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20211027181706.png" alt="46.å…¨æ’åˆ—"></p><p>å¤§å®¶æ­¤æ—¶å¯ä»¥æ„Ÿå—å‡ºæ’åˆ—é—®é¢˜çš„ä¸åŒï¼š</p><ul><li>æ¯å±‚éƒ½æ˜¯ä»0å¼€å§‹æœç´¢è€Œä¸æ˜¯startIndex</li><li>éœ€è¦usedæ•°ç»„è®°å½•pathé‡Œéƒ½æ”¾äº†å“ªäº›å…ƒç´ äº†</li></ul><p>æ’åˆ—é—®é¢˜æ˜¯å›æº¯ç®—æ³•è§£å†³çš„ç»å…¸é¢˜ç›®ã€‚</p><p>æ³¨æ„map[key]çš„è¿”å›å€¼ï¼ˆvalueï¼ŒisExistï¼‰</p><h2 id="9-12-æ’åˆ—é—®é¢˜ï¼ˆäºŒï¼‰"><a href="#9-12-æ’åˆ—é—®é¢˜ï¼ˆäºŒï¼‰" class="headerlink" title="9.12 æ’åˆ—é—®é¢˜ï¼ˆäºŒï¼‰"></a>9.12 æ’åˆ—é—®é¢˜ï¼ˆäºŒï¼‰</h2><p><strong>47. Permutations II</strong></p><p><strong>Qï¼š</strong>Given a collection of numbers, <code>nums</code>, that might contain duplicates, return <em>all possible unique permutations <strong>in any order</strong>.</em></p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">permuteUnique</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">0</span> &#123;<br>      <span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>    c, used, res := []<span class="hljs-type">int</span>&#123;&#125;, <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>&#123;&#125;, [][]<span class="hljs-type">int</span>&#123;&#125;<br>    sort.Ints(nums)<br>    dfs(nums, c, used, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, c []<span class="hljs-type">int</span>, used <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">bool</span>, res *[][]<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == <span class="hljs-built_in">len</span>(nums) &#123;<br>        tmp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(c))<br>        <span class="hljs-built_in">copy</span>(tmp, c)<br>        *res = <span class="hljs-built_in">append</span>(*res, tmp)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">if</span> !used[i] &#123;<br>          <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>] &amp;&amp; !used[i - <span class="hljs-number">1</span>] &#123; <span class="hljs-comment">// å…³é”®å»é‡è¯­å¥</span><br>              <span class="hljs-comment">// å½“å‰æ•°å€¼çš„æ•°åœ¨å‰é¢å·²ç»å‡ºç°è¿‡ï¼Œå¹¶ä¸”ä»–çš„å‰ä¸€ä¸ªæ•°æ²¡æœ‰è¢«ç”¨è¿‡æ‰è·³è¿‡</span><br>                <span class="hljs-keyword">continue</span><br>            &#125;<br>            used[i] = <span class="hljs-literal">true</span><br>            c = <span class="hljs-built_in">append</span>(c, nums[i])<br>            dfs(nums, c, used, res)<br>            c = c[:<span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>]<br>            used[i] = <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ‘çŠ¶å›¾</p><p><img src="https://img-blog.csdnimg.cn/20201124201331223.png" alt="47.å…¨æ’åˆ—II1"></p><p>å’Œ 9.11 ä¸åŒçš„æ˜¯æˆ‘ä»¬ä¸ä½†è¦æ¶ˆé™¤çºµå‘çš„é‡å¤ï¼Œä¹Ÿè¦æ¶ˆé™¤æ¨ªå‘çš„é‡å¤ã€‚çºµå‘çš„é‡å¤å°±ä¸èƒ½å•å•åªæ˜¯æ¶ˆé™¤ã€‚</p><p><code>i &gt; 0 &amp;&amp; nums[i] == nums[i - 1] &amp;&amp; !used[i - 1]</code>ä¸ºä»€ä¹ˆè¦åŠ  !used[i - 1] å‘¢ï¼Ÿå› ä¸ºæ¯ä¸€å±‚éƒ½è¦éå†æ‰€æœ‰çš„æ•°ï¼Œå¦‚æœåªæ˜¯å•å•çš„nums[i] == nums[i-1] å°±è·³è¿‡çš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å±‚éƒ½ä¼šè·³è¿‡ï¼ŒåŠ å…¥ !used[i - 1] åä»£è¡¨ç€ï¼Œåœ¨åŒä¸€å±‚çš„æƒ…å†µä¸‹ï¼ˆå› ä¸ºåŒä¸€å±‚å¦‚æœç›¸åŒçš„è¯åªèƒ½é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥ç›¸åŒçš„æ•°å­—åªèƒ½æœ‰ä¸€ä½æ˜¯ true å…¶ä»–éƒ½æ˜¯ falseï¼‰å¦‚æœå½“å‰æ•°å­—å’Œå‰ä¸€ä¸ªç›¸åŒçš„æ—¶å€™è·³è¿‡ã€‚</p><h2 id="9-13-N-çš‡åé—®é¢˜"><a href="#9-13-N-çš‡åé—®é¢˜" class="headerlink" title="9.13 N çš‡åé—®é¢˜"></a>9.13 N çš‡åé—®é¢˜</h2><p><strong>51. N-Queens</strong></p><p><strong>Qï¼š</strong>The <strong>n-queens</strong> puzzle is the problem of placing <code>n</code> queens on an <code>n x n</code>chessboard such that no two queens attack each other.</p><p>Given an integer <code>n</code>, return <em>all distinct solutions to the <strong>n-queens puzzle</strong></em>. You may return the answer in <strong>any order</strong>.</p><p>Each solution contains a distinct board configuration of the n-queensâ€™ placement, where <code>&#39;Q&#39;</code> and <code>&#39;.&#39;</code> both indicate a queen and an empty space, respectively.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">solveNQueens</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">string</span> &#123;<br>    idx, res := []<span class="hljs-type">int</span>&#123;&#125;, [][]<span class="hljs-type">string</span>&#123;&#125;<br>    dfs(n, <span class="hljs-number">0</span>, idx, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(n, row <span class="hljs-type">int</span>, idx []<span class="hljs-type">int</span>, res *[][]<span class="hljs-type">string</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> row == n &#123;<br>        *res = <span class="hljs-built_in">append</span>(*res, generateBoard(n, idx))<br>        fmt.Println()<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> col := <span class="hljs-number">0</span>; col &lt; n; col++ &#123;<br>        <span class="hljs-keyword">if</span> isValid(row, col, n, idx) &#123;<br>            idx = <span class="hljs-built_in">append</span>(idx, col)<br>            dfs(n, row + <span class="hljs-number">1</span>, idx, res)<br>            idx = idx[:<span class="hljs-built_in">len</span>(idx) - <span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValid</span><span class="hljs-params">(row, col, n <span class="hljs-type">int</span>, idx []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    col45 := col<br>    col135 := col<br>    <span class="hljs-comment">// æ£€æŸ¥åˆ—</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(idx); i++ &#123;<br>        <span class="hljs-keyword">if</span> col == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-comment">// æ£€æŸ¥45Ëš</span><br>    <span class="hljs-keyword">for</span> i := row - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        col45++<br>        <span class="hljs-keyword">if</span> col45 == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-comment">// æ£€æŸ¥135Ëš</span><br>    <span class="hljs-keyword">for</span> i := row - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        col135--<br>        <span class="hljs-keyword">if</span> col135 == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateBoard</span><span class="hljs-params">(n <span class="hljs-type">int</span>, idx []<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br>    board := []<span class="hljs-type">string</span>&#123;&#125;<br>    res := <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> col := <span class="hljs-number">0</span>; col &lt; n; col++ &#123;<br>      res += <span class="hljs-string">&quot;.&quot;</span><br>    &#125;<br>    <span class="hljs-comment">// ç”Ÿæˆæ£‹ç›˜è®©æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯...</span><br>    <span class="hljs-keyword">for</span> row := <span class="hljs-number">0</span>; row &lt; n; row++ &#123;<br>      board = <span class="hljs-built_in">append</span>(board, res)<br>    &#125;<br>    <span class="hljs-comment">// æŒ‰ç…§æ”¶é›†åˆ°çš„ä½ç½®ï¼Œè¿›è¡Œæ”¹å†™æœ‰çš‡åçš„ä½ç½®</span><br>    <span class="hljs-keyword">for</span> row := <span class="hljs-number">0</span>; row &lt; n; row++ &#123;<br>        tmp := []<span class="hljs-type">byte</span>(board[row]) <span class="hljs-comment">// byteæ‰èƒ½å¤Ÿä¿®æ”¹stringçš„æŸä¸€ä½</span><br>        tmp[idx[row]] = <span class="hljs-string">&#x27;Q&#x27;</span><br>        board[row] = <span class="hljs-type">string</span>(tmp)<br>    &#125;<br>    <span class="hljs-keyword">return</span> board<br>&#125;<br></code></pre></td></tr></table></figure><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹çš‡åä»¬çš„çº¦æŸæ¡ä»¶ï¼š</p><ol><li>ä¸èƒ½åŒè¡Œ</li><li>ä¸èƒ½åŒåˆ—</li><li>ä¸èƒ½åŒæ–œçº¿</li></ol><p>æ ‘ç»“æ„</p><p><img src="https://img-blog.csdnimg.cn/20210130182532303.jpg" alt="51.Nçš‡å"></p><p>è¿™ç§é¢˜çš„å¤§æ¦‚dfsæµç¨‹æ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆç¡®å®šç»ˆæ­¢æ¡ä»¶ï¼Œç„¶åæ˜¯éš¾ç‚¹åœ¨äºè¦åˆ¤æ–­æ˜¯å¦è¦è¿›å…¥ä¸‹ä¸€å±‚è¿™ä¸ªåˆ¤æ–­æ¡ä»¶æ˜¯ä¸€ä¸ªéš¾ç‚¹ï¼Œç¬¬äºŒä¸ªéš¾ç‚¹å°±æ˜¯ç”Ÿæˆæ£‹ç›˜çš„æ—¶é—´ï¼Œæˆ‘æ˜¯å…ˆè®°å½•è¦æ”¾æ£‹å­çš„ä½ç½®å†æ”¾åœ¨æœ€åæ¥ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ä»å§‹è‡³ç»ˆå°±ç”Ÿæˆä¸€ç‚¹ç‚¹å¡«å……ã€‚æ€»ä½“æ¥è¯´è¿™ä¸¤ç§æ–¹æ³•ä¸åŒçš„ç‚¹åœ¨äºåˆ¤æ–­çš„è¿‡ç¨‹ä¸åŒã€‚</p><h2 id="9-14-è§£æ•°ç‹¬"><a href="#9-14-è§£æ•°ç‹¬" class="headerlink" title="9.14 è§£æ•°ç‹¬"></a>9.14 è§£æ•°ç‹¬</h2><p><strong>37. Sudoku Solver</strong></p><p><strong>Qï¼š</strong>Write a program to solve a Sudoku puzzle by filling the empty cells.</p><p>A sudoku solution must satisfy <strong>all of the following rules</strong>:</p><ol><li>Each of the digits <code>1-9</code> must occur exactly once in each row.</li><li>Each of the digits <code>1-9</code> must occur exactly once in each column.</li><li>Each of the digits <code>1-9</code> must occur exactly once in each of the 9 <code>3x3</code>sub-boxes of the grid.</li></ol><p>The <code>&#39;.&#39;</code> character indicates empty cells.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">solveSudoku</span><span class="hljs-params">(board [][]<span class="hljs-type">byte</span>)</span></span>  &#123;<br>    dfs(&amp;board)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(board *[][]<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-comment">// scan</span><br>    <span class="hljs-keyword">for</span> row := <span class="hljs-number">0</span>; row &lt; <span class="hljs-number">9</span>; row++ &#123;<br>        <span class="hljs-keyword">for</span> col := <span class="hljs-number">0</span>; col &lt; <span class="hljs-number">9</span>; col++ &#123;<br>            <span class="hljs-keyword">if</span> (*board)[row][col] != <span class="hljs-string">&#x27;.&#x27;</span> &#123; <span class="hljs-keyword">continue</span> &#125;<br>            <span class="hljs-comment">// fill</span><br>            <span class="hljs-keyword">var</span> num <span class="hljs-type">byte</span><br>            <span class="hljs-keyword">for</span> num = <span class="hljs-string">&#x27;1&#x27;</span>; num &lt;= <span class="hljs-string">&#x27;9&#x27;</span>; num++ &#123;<br>                <span class="hljs-keyword">if</span> isValid(row, col, num, board) &#123;<br>                  (*board)[row][col] = num   <span class="hljs-comment">// å¡«å……</span><br>                  <span class="hljs-keyword">if</span> dfs(board) == <span class="hljs-literal">true</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125; <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°åˆé€‚ä¸€ç»„ç«‹åˆ»è¿”å›</span><br>                  (*board)[row][col] = <span class="hljs-string">&#x27;.&#x27;</span>   <span class="hljs-comment">// å›æº¯</span><br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// 9ä¸ªæ•°éƒ½è¯•å®Œäº†ï¼Œéƒ½ä¸è¡Œï¼Œé‚£ä¹ˆå°±è¿”å›false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// éå†å®Œäº†éƒ½æ²¡æœ‰falseï¼Œè¿”å›true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValid</span><span class="hljs-params">(row, col <span class="hljs-type">int</span>, num <span class="hljs-type">byte</span>, board *[][]<span class="hljs-type">byte</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-comment">// check row</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++ &#123;<br>        <span class="hljs-keyword">if</span> num == (*board)[i][col] &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// check col</span><br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span>; j++ &#123;<br>        <span class="hljs-keyword">if</span> num == (*board)[row][j] &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// check inner-9</span><br>    startRow := (row / <span class="hljs-number">3</span>) * <span class="hljs-number">3</span><br>    startCol := (col / <span class="hljs-number">3</span>) * <span class="hljs-number">3</span><br>    <span class="hljs-keyword">for</span> i := startRow; i &lt; startRow + <span class="hljs-number">3</span>; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := startCol; j &lt; startCol + <span class="hljs-number">3</span>; j++ &#123;<br>            <span class="hljs-keyword">if</span> num == (*board)[i][j] &#123;<br>              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ ‘çŠ¶å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/2020111720451790.png" alt="37.è§£æ•°ç‹¬"></p><p><strong>ä¸€ä¸ªforå¾ªç¯éå†æ£‹ç›˜çš„è¡Œï¼Œä¸€ä¸ªforå¾ªç¯éå†æ£‹ç›˜çš„åˆ—ï¼Œä¸€è¡Œä¸€åˆ—ç¡®å®šä¸‹æ¥ä¹‹åï¼Œé€’å½’éå†è¿™ä¸ªä½ç½®æ”¾9ä¸ªæ•°å­—çš„å¯èƒ½æ€§ï¼</strong></p><p>åˆ¤æ–­æ£‹ç›˜æ˜¯å¦åˆæ³•æœ‰å¦‚ä¸‹ä¸‰ä¸ªç»´åº¦ï¼š</p><ul><li>åŒè¡Œæ˜¯å¦é‡å¤</li><li>åŒåˆ—æ˜¯å¦é‡å¤</li><li>9å®«æ ¼é‡Œæ˜¯å¦é‡å¤</li></ul><p>æ³¨æ„å¦‚æœè¦æå–äºŒç»´æ•°ç»„çš„åœ°å€çš„å…ƒç´ çš„è¯è¦å†™ (*a)[ ] [ ] è¿™æ ·ã€‚</p><p>åœ¨ check inner-9 çš„æ—¶å€™é‡åˆ°æ£€æŸ¥é‚£9å—çš„é—®é¢˜ã€‚é¦–å…ˆä»–ä»¬çš„èµ·å§‹ç‚¹æœ‰ (0, 0) (3, 3) (6, 6)â€¦..é€šè¿‡é™¤ 3 ä»¥åå‘ç°åœ¨ç¬¬ä¸€å—ï¼Œä½†å…·ä½“çš„åæ ‡è¦ä¹˜ 3 å› ä¸ºæ¯•ç«Ÿé™¤æ³•è¿‡ï¼ˆ0ï¼Œ1ï¼Œ2æ¥è¿›è¡Œä¹˜æ³•ï¼‰</p><p>ç­”æ¡ˆæœ‰å¯èƒ½ä¸å”¯ä¸€ï¼ŒçœŸæ­£é€€å‡ºçš„ä½ç½®æ˜¯åœ¨<code>if dfs(board) == true &#123; return true &#125; // å¦‚æœæ‰¾åˆ°åˆé€‚ä¸€ç»„ç«‹åˆ»è¿”å›</code>è¿™ä¸€è¡Œã€‚</p><h1 id="ç¬¬10ç« -è´ªå¿ƒç®—æ³•"><a href="#ç¬¬10ç« -è´ªå¿ƒç®—æ³•" class="headerlink" title="ç¬¬10ç«  è´ªå¿ƒç®—æ³•"></a>ç¬¬10ç«  è´ªå¿ƒç®—æ³•</h1><ul><li>å°†é—®é¢˜åˆ†è§£ä¸ºè‹¥å­é—®é¢˜ã€‚</li><li>æ‰¾å‡ºé€‚åˆçš„è´ªå¿ƒç­–ç•¥ã€‚</li><li>æ±‚è§£æ¯ä¸€ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</li><li>å°†å±€éƒ¨æœ€ä¼˜å †å æˆå…¨å±€æœ€ä¼˜</li></ul><h2 id="10-1-åˆ†å‘é¥¼å¹²"><a href="#10-1-åˆ†å‘é¥¼å¹²" class="headerlink" title="10.1 åˆ†å‘é¥¼å¹²"></a>10.1 åˆ†å‘é¥¼å¹²</h2><p><strong>455. Assign Cookie</strong></p><p><strong>Qï¼š</strong>Assume you are an awesome parent and want to give your children some cookies. But, you should give each child at most one cookie.</p><p>Each child <code>i</code> has a greed factor <code>g[i]</code>, which is the minimum size of a cookie that the child will be content with; and each cookie <code>j</code> has a size <code>s[j]</code>. If <code>s[j] &gt;= g[i]</code>, we can assign the cookie <code>j</code> to the child <code>i</code>, and the child <code>i</code>will be content. Your goal is to maximize the number of your content children and output the maximum number.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findContentChildren</span><span class="hljs-params">(g []<span class="hljs-type">int</span>, s []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>sort.Ints(g)<br>sort.Ints(s)<br>gi, si, res := <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> gi &lt; <span class="hljs-built_in">len</span>(g) &amp;&amp; si &lt; <span class="hljs-built_in">len</span>(s) &#123;<br><span class="hljs-keyword">if</span> s[si] &gt;= g[gi] &#123;<br>res++<br>si++<br>gi++<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>si++<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>ä¸ºäº†æ»¡è¶³æ›´å¤šçš„å°å­©ï¼Œå°±ä¸è¦é€ æˆé¥¼å¹²å°ºå¯¸çš„æµªè´¹ã€‚</p><p>å¤§å°ºå¯¸çš„é¥¼å¹²æ—¢å¯ä»¥æ»¡è¶³èƒƒå£å¤§çš„å­©å­ä¹Ÿå¯ä»¥æ»¡è¶³èƒƒå£å°çš„å­©å­ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¼˜å…ˆæ»¡è¶³èƒƒå£å¤§çš„ã€‚</p><p><strong>è¿™é‡Œçš„å±€éƒ¨æœ€ä¼˜å°±æ˜¯å¤§é¥¼å¹²å–‚ç»™èƒƒå£å¤§çš„ï¼Œå……åˆ†åˆ©ç”¨é¥¼å¹²å°ºå¯¸å–‚é¥±ä¸€ä¸ªï¼Œå…¨å±€æœ€ä¼˜å°±æ˜¯å–‚é¥±å°½å¯èƒ½å¤šçš„å°å­©</strong>ã€‚</p><p>å¯ä»¥å°è¯•ä½¿ç”¨è´ªå¿ƒç­–ç•¥ï¼Œå…ˆå°†é¥¼å¹²æ•°ç»„å’Œå°å­©æ•°ç»„æ’åºã€‚</p><p>ç„¶åä»åå‘å‰éå†å°å­©æ•°ç»„ï¼Œç”¨å¤§é¥¼å¹²ä¼˜å…ˆæ»¡è¶³èƒƒå£å¤§çš„ï¼Œå¹¶ç»Ÿè®¡æ»¡è¶³å°å­©æ•°é‡ã€‚</p><ul><li>å‡è®¾ä½ æƒ³ç»™å°æœ‹å‹ä»¬é¥¼å¹²ï¼Œæ¯ä¸ªå°æœ‹å‹æœ€å¤šèƒ½å¤Ÿç»™ä¸€å—é¥¼å¹²ã€‚æ¯ä¸ªå°æœ‹å‹éƒ½æœ‰ä¸€ä¸ªâ€œè´ªå¿ƒæŒ‡æ•°â€ï¼Œç§°ä¸º <code>g[i]</code>ï¼Œ<code>g[i]</code> è¡¨ç¤ºçš„æ˜¯è¿™åå°æœ‹å‹éœ€è¦çš„é¥¼å¹²å¤§å°çš„æœ€å°å€¼ã€‚åŒæ—¶ï¼Œæ¯ä¸ªé¥¼å¹²éƒ½æœ‰ä¸€ä¸ªå¤§å°å€¼ <code>s[i]</code>ï¼Œå¦‚æœ <code>s[j] â‰¥ g[i]</code>ï¼Œæˆ‘ä»¬å°†é¥¼å¹² <code>j</code> åˆ†ç»™å°æœ‹å‹ <code>i</code> åï¼Œå°æœ‹å‹ä¼šå¾ˆå¼€å¿ƒã€‚ç»™å®šæ•°ç»„ <code>g[]</code> å’Œ <code>s[]</code>ï¼Œé—®å¦‚ä½•åˆ†é…é¥¼å¹²ï¼Œèƒ½è®©æ›´å¤šçš„å°æœ‹å‹å¼€å¿ƒã€‚</li><li>è¿™æ˜¯ä¸€é“å…¸å‹çš„ç®€å•è´ªå¿ƒé¢˜ã€‚è´ªå¿ƒé¢˜ä¸€èˆ¬éƒ½ä¼´éšç€æ’åºã€‚å°† <code>g[]</code> å’Œ <code>s[]</code> åˆ†åˆ«æ’åºã€‚æŒ‰ç…§æœ€éš¾æ»¡è¶³çš„å°æœ‹å‹å¼€å§‹ç»™é¥¼å¹²ï¼Œä¾æ¬¡å¾€ä¸‹æ»¡è¶³ï¼Œæœ€ç»ˆèƒ½æ»¡è¶³çš„å°æœ‹å‹æ•°å°±æ˜¯æœ€ç»ˆè§£ã€‚</li></ul><p>æ³¨æ„ä¸€ä¸ªé¥¼å¹²æœ€å¤šç»™ä¸€ä¸ªå­©å­ã€‚</p><h2 id="10-2-æ‘†åŠ¨æ’åº"><a href="#10-2-æ‘†åŠ¨æ’åº" class="headerlink" title="10.2 æ‘†åŠ¨æ’åº"></a>10.2 æ‘†åŠ¨æ’åº</h2><p><strong>376. Wiggle Subsequence</strong></p><p><strong>Qï¼š</strong>A <strong>wiggle sequence</strong> is a sequence where the differences between successive numbers strictly alternate between positive and negative. The first difference (if one exists) may be either positive or negative. A sequence with one element and a sequence with two non-equal elements are trivially wiggle sequences.</p><ul><li>For example, <code>[1, 7, 4, 9, 2, 5]</code> is a <strong>wiggle sequence</strong> because the differences <code>(6, -3, 5, -7, 3)</code> alternate between positive and negative.</li><li>In contrast, <code>[1, 4, 7, 2, 5]</code> and <code>[1, 7, 4, 5, 5]</code> are not wiggle sequences. The first is not because its first two differences are positive, and the second is not because its last difference is zero.</li></ul><p>A <strong>subsequence</strong> is obtained by deleting some elements (possibly zero) from the original sequence, leaving the remaining elements in their original order.</p><p>Given an integer array <code>nums</code>, return <em>the length of the longest <strong>wiggle subsequence</strong> of</em> <code>nums</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">wiggleMaxLength</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) &lt; <span class="hljs-number">2</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(nums)<br>&#125;<br>res := <span class="hljs-number">1</span><br>prevDiff := nums[<span class="hljs-number">1</span>] - nums[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">if</span> prevDiff != <span class="hljs-number">0</span> &#123;<br>res = <span class="hljs-number">2</span><br>&#125;<br>    <span class="hljs-comment">// ä»ç¬¬ä¸‰ä¸ªæ•°å¼€å§‹ï¼Œiä¸‹æ ‡çš„ä½ç½®æ˜¯ å‰ä¸­å çš„å</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        diff := nums[i] - nums[i - <span class="hljs-number">1</span>]<br>        <span class="hljs-comment">// å¦‚æœæ˜¯æ³¢å³°æˆ–è€…æ³¢è°·çš„è¯</span><br>        <span class="hljs-keyword">if</span> diff &gt; <span class="hljs-number">0</span> &amp;&amp; prevDiff &lt;= <span class="hljs-number">0</span> || diff &lt; <span class="hljs-number">0</span> &amp;&amp; prevDiff &gt;= <span class="hljs-number">0</span> &#123;<br>            res++<br>            prevDiff = diff<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é¢˜ç›®è¦æ±‚æ‰¾åˆ°æ‘†åŠ¨åºåˆ—æœ€é•¿çš„å­åºåˆ—ã€‚æœ¬é¢˜å¯ä»¥ç”¨è´ªå¿ƒçš„æ€è·¯ï¼Œè®°å½•å½“å‰åºåˆ—çš„ä¸Šå‡å’Œä¸‹é™çš„è¶‹åŠ¿ã€‚æ‰«ææ•°ç»„è¿‡ç¨‹ä¸­ï¼Œæ¯æ‰«æä¸€ä¸ªå…ƒç´ éƒ½åˆ¤æ–­æ˜¯â€œå³°â€è¿˜æ˜¯â€œè°·â€ï¼Œæ ¹æ®å‰ä¸€ä¸ªæ˜¯â€œå³°â€è¿˜æ˜¯â€œè°·â€åšå‡ºå¯¹åº”çš„å†³å®šã€‚åˆ©ç”¨è´ªå¿ƒçš„æ€æƒ³æ‰¾åˆ°æœ€é•¿çš„æ‘†åŠ¨å­åºåˆ—ã€‚</li></ul><p><code>diff &gt; 0 &amp;&amp; prevDiff &lt;= 0 || diff &lt; 0 &amp;&amp; prevDiff &gt;= 0</code>è¿™å¥çš„åˆ¤æ–­é‡Œé¢ä¸ºä»€ä¹ˆè¦æœ‰ç­‰å·å‘¢ï¼Ÿå› ä¸ºå…¶å®ä½ åªè¦ä¿è¯åœ¨ i - 1 ä½ç½®ä¹‹å‰çš„éƒ½æ˜¯å¹³çš„ï¼Œæˆ–è€…ä¸å…¶åé¢çš„å•è°ƒè¶‹åŠ¿æ˜¯ç›¸åçš„ï¼Œå°±å¯ä»¥ä¿è¯å•è°ƒæ€§çš„ä¸åŒï¼ˆå¹³ to å¢å‡ï¼Œå¢ to å‡ï¼Œå‡ to å¢ï¼‰</p><h2 id="10-3-æœ€å¤§å­åºå’Œ"><a href="#10-3-æœ€å¤§å­åºå’Œ" class="headerlink" title="10.3 æœ€å¤§å­åºå’Œ"></a>10.3 æœ€å¤§å­åºå’Œ</h2><p><strong>53. Maximum Subarray</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code>, find the contiguous subarray (containing at least one number) which has the largest sum and return <em>its sum</em>.</p><p>A <strong>subarray</strong> is a <strong>contiguous</strong> part of an array.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxSubArray</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    maxSum := nums[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>      <span class="hljs-comment">// å°±åŠ æ­£æ•°</span><br>        <span class="hljs-keyword">if</span> nums[i] + nums[i<span class="hljs-number">-1</span>] &gt; nums[i] &#123;<br>            nums[i] += nums[i<span class="hljs-number">-1</span>]<br>        &#125;<br>      <span class="hljs-comment">// å¦‚æœå½“å‰å­åºåˆ—å¤§äºäº†ä¹‹å‰å­˜çš„æ€»å’Œå°±å­˜ä¸‹</span><br>        <span class="hljs-keyword">if</span> nums[i] &gt; maxSum &#123;<br>            maxSum = nums[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> maxSum<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å±€éƒ¨æœ€ä¼˜ï¼š</strong>å½“å‰â€œè¿ç»­å’Œâ€ä¸ºè´Ÿæ•°çš„æ—¶å€™ç«‹åˆ»æ”¾å¼ƒï¼Œä»ä¸‹ä¸€ä¸ªå…ƒç´ é‡æ–°è®¡ç®—â€œè¿ç»­å’Œâ€ï¼Œå› ä¸ºè´Ÿæ•°åŠ ä¸Šä¸‹ä¸€ä¸ªå…ƒç´  â€œè¿ç»­å’Œâ€åªä¼šè¶Šæ¥è¶Šå°ã€‚</p><p>å…¨å±€æœ€ä¼˜ï¼šé€‰å–æœ€å¤§â€œè¿ç»­å’Œâ€</p><p>è¿™ä¸ªæ€æƒ³ä¸»è¦æ˜¯ä¸åˆ©ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚ä¸¾ä¾‹ï¼Œ[-2,1,-3,4,-1,2,1,-5,4] æˆ‘ä»¬è´ªå¿ƒçš„ç‚¹åœ¨äºå¿…é¡»è¦å­åºåˆ—è¦æ˜¯åœ¨å¢åŠ çš„æ‰åŠ ä¸Šã€‚å°½ç®¡å€’æ•°ç¬¬äºŒä¸ª -5 + 6 = 1 æ˜¯æ¯”è‡ªèº«å¤§çš„ä½†æ˜¯æ²¡æœ‰å¤§è¿‡ maxSumï¼Œä¹Ÿæ— æ‰€è°“ã€‚æ‰€ä»¥æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œæˆ‘ä»¬è¦åŠ å…¥å½“å‰æ•°çš„å‰ä¸€ä¸ªæ•°ï¼Œå¦‚æœæ˜¯ä¸Šå‡çš„å€¼å°±ä¿å­˜ï¼Œå¹¶ä¸”å¦‚æœå½“å‰ sum åæ•´ä½“å¤§äºäº†ç»Ÿè®¡çš„ maxï¼Œå°±æ›´æ–° max è¦ä¸å°±ç»§ç»­éå†ã€‚å°±åƒæˆ‘ä»¬çš„äººç”Ÿä¸€æ ·ï¼Œæˆ‘ä»¬å°±è®°å½•æˆ‘ä»¬èƒ½å‰è¿›çš„å€¼ï¼Œå¿˜æ‰é‚£äº›é€€æ­¥çš„åœ°æ–¹ï¼Œå¹¶ä¸”è®°å½•ä¸‹æˆ‘ä»¬maxçš„é‡Œç¨‹ç¢‘ã€‚</p><p>golangçš„æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å®šä¹‰ <a href="https://blog.csdn.net/lishanleilixin/article/details/103269904">https://blog.csdn.net/lishanleilixin/article/details/103269904</a></p><h2 id="10-4-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II"><a href="#10-4-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II" class="headerlink" title="10.4 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"></a>10.4 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</h2><p><strong>122. Best Time to Buy and Sell Stock II</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day.</p><p>On each day, you may decide to buy and/or sell the stock. You can only hold <strong>at most one</strong> share of the stock at any time. However, you can buy it then immediately sell it on the <strong>same day</strong>.</p><p>Find and return <em>the <strong>maximum</strong> profit you can achieve</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(prices) == <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    &#125;<br>    profit := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(prices); i++ &#123;<br>        <span class="hljs-keyword">if</span> prices[i] - prices[i - <span class="hljs-number">1</span>] &gt; <span class="hljs-number">0</span> &#123;<br>            profit += prices[i] - prices[i - <span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> profit<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2020112917480858.png" alt="122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII"></p><p>ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œå…¶å®æˆ‘ä»¬éœ€è¦æ”¶é›†æ¯å¤©çš„æ­£åˆ©æ¶¦å°±å¯ä»¥ï¼Œ<strong>æ”¶é›†æ­£åˆ©æ¶¦çš„åŒºé—´ï¼Œå°±æ˜¯è‚¡ç¥¨ä¹°å–çš„åŒºé—´ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æœ€ç»ˆåˆ©æ¶¦ï¼Œä¸éœ€è¦è®°å½•åŒºé—´</strong>ã€‚</p><p>é‚£ä¹ˆåªæ”¶é›†æ­£åˆ©æ¶¦å°±æ˜¯è´ªå¿ƒæ‰€è´ªçš„åœ°æ–¹ï¼</p><p><strong>å±€éƒ¨æœ€ä¼˜ï¼šæ”¶é›†æ¯å¤©çš„æ­£åˆ©æ¶¦ï¼Œå…¨å±€æœ€ä¼˜ï¼šæ±‚å¾—æœ€å¤§åˆ©æ¶¦</strong>ã€‚</p><h2 id="10-5-è·³è·ƒæ¸¸æˆ"><a href="#10-5-è·³è·ƒæ¸¸æˆ" class="headerlink" title="10.5 è·³è·ƒæ¸¸æˆ"></a>10.5 è·³è·ƒæ¸¸æˆ</h2><p><strong>55. Jump Game</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>nums</code>. You are initially positioned at the arrayâ€™s <strong>first index</strong>, and each element in the array represents your maximum jump length at that position.</p><p>Return <code>true</code> <em>if you can reach the last index, or</em> <code>false</code> <em>otherwise</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canJump</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    cover := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">1</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125; <span class="hljs-comment">// å¦‚æœæ˜¯è·³è·ƒæ•°ç»„çš„é•¿åº¦ä¸º1</span><br>    <span class="hljs-comment">// æ¯æ¬¡åœ¨å½“å‰èŒƒå›´é‡Œé¢æ‰¾æ¯ä¸ªæ•°</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= cover; i++ &#123;<br>        cover = max(i + nums[i], cover) <span class="hljs-comment">// è¦†ç›–é¢çš„é€‰æ‹©ï¼Œä»å½“å‰coverèŒƒå›´å’Œå½“å‰ä½ç½®ä»£è¡¨çš„æœªæ¥coverèŒƒå›´äºŒé€‰ä¸€</span><br>        <span class="hljs-keyword">if</span> cover &gt;= <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> &#125; <span class="hljs-comment">// å¦‚æœèƒ½åŒ…å«åˆ°æœ€åä¸€ä¸ªä½ç½®å°±ä»£è¡¨èƒ½è·³åˆ°</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// æ²¡æ‰¾åˆ°å°±false</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123; <span class="hljs-keyword">return</span> a &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>å›¾ç‰‡åŠ¿åŠ›</p><p><img src="https://img-blog.csdnimg.cn/20201124154758229.png" alt="55.è·³è·ƒæ¸¸æˆ"></p><h2 id="10-6-è·³è·ƒæ¸¸æˆ-II"><a href="#10-6-è·³è·ƒæ¸¸æˆ-II" class="headerlink" title="10.6 è·³è·ƒæ¸¸æˆ II"></a>10.6 è·³è·ƒæ¸¸æˆ II</h2><p><strong>45. Jump Game II</strong></p><p><strong>Qï¼š</strong>Given an array of non-negative integers <code>nums</code>, you are initially positioned at the first index of the array.</p><p>Each element in the array represents your maximum jump length at that position.</p><p>Your goal is to reach the last index in the minimum number of jumps.</p><p>You can assume that you can always reach the last index.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">jump</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    curDistance := <span class="hljs-number">0</span> <span class="hljs-comment">// å½“å‰è¦†ç›–çš„æœ€è¿œè·ç¦»ä¸‹æ ‡</span><br>    step := <span class="hljs-number">0</span> <span class="hljs-comment">// è®°å½•èµ°çš„æœ€å¤§æ­¥æ•°</span><br>    nextDistance := <span class="hljs-number">0</span> <span class="hljs-comment">// ä¸‹ä¸€æ­¥è¦†ç›–çš„æœ€è¿œè·ç¦»ä¸‹æ ‡</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span>; i++ &#123; <span class="hljs-comment">// æ³¨æ„è¿™é‡Œæ˜¯å°äºç­‰äºnums.size() - 2ï¼Œè¿™æ˜¯å…³é”®æ‰€åœ¨</span><br>        nextDistance = max(i + nums[i], nextDistance) <span class="hljs-comment">// æ›´æ–°ä¸‹ä¸€æ­¥è¦†ç›–çš„æœ€è¿œè·ç¦»ä¸‹æ ‡</span><br>        <span class="hljs-keyword">if</span> i == curDistance &#123; <span class="hljs-comment">// é‡åˆ°å½“å‰è¦†ç›–çš„æœ€è¿œè·ç¦»ä¸‹æ ‡</span><br>            curDistance = nextDistance <span class="hljs-comment">// æ›´æ–°å½“å‰è¦†ç›–çš„æœ€è¿œè·ç¦»ä¸‹æ ‡</span><br>            step++<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> step<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123; <span class="hljs-keyword">return</span> a &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>ç†è§£æœ¬é¢˜çš„å…³é”®åœ¨äºï¼š<strong>ä»¥æœ€å°çš„æ­¥æ•°å¢åŠ æœ€å¤§çš„è¦†ç›–èŒƒå›´ï¼Œç›´åˆ°è¦†ç›–èŒƒå›´è¦†ç›–äº†ç»ˆç‚¹</strong>ï¼Œè¿™ä¸ªèŒƒå›´å†…æœ€å°æ­¥æ•°ä¸€å®šå¯ä»¥è·³åˆ°ï¼Œä¸ç”¨ç®¡å…·ä½“æ˜¯æ€ä¹ˆè·³çš„ï¼Œä¸çº ç»“äºä¸€æ­¥ç©¶ç«Ÿè·³ä¸€ä¸ªå•ä½è¿˜æ˜¯ä¸¤ä¸ªå•ä½ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201201232445286.png" alt="45.è·³è·ƒæ¸¸æˆII2"></p><p>ä¸€ä¸ªä¸ªæ‰¾ï¼Œæ‰¾æ¯ä¸ªèŒƒå›´å†…çš„æœ€è¿œè·ç¦»ã€‚cur è®°å½•çš„æ˜¯å½“å‰å¯ä»¥è·³çš„æœ€è¿œè·ç¦»ï¼Œæ‰€ä»¥ä¸€æ—¦ i = cur çš„æ—¶å€™è¯´æ˜è¦èµ°ä¸‹ä¸€è·³äº†</p><p>ï¼ˆåªæœ‰ i åˆ°è¾¾äº†ä¸Šä¸€æ¬¡è®°å½•çš„æœ€è¿œè·ç¦»çš„æ—¶å€™ï¼Œæ‰æ›´æ–° cur = next çš„æœ€è¿œè·ç¦»ï¼‰</p><h2 id="10-7-åŠ æ²¹ç«™"><a href="#10-7-åŠ æ²¹ç«™" class="headerlink" title="10.7 åŠ æ²¹ç«™"></a>10.7 åŠ æ²¹ç«™</h2><p><strong>134. Gas Station</strong></p><p><strong>Qï¼š</strong>There are <code>n</code> gas stations along a circular route, where the amount of gas at the <code>ith</code> station is <code>gas[i]</code>.</p><p>You have a car with an unlimited gas tank and it costs <code>cost[i]</code> of gas to travel from the <code>ith</code> station to its next <code>(i + 1)th</code> station. You begin the journey with an empty tank at one of the gas stations.</p><p>Given two integer arrays <code>gas</code> and <code>cost</code>, return <em>the starting gas stationâ€™s index if you can travel around the circuit once in the clockwise direction, otherwise return</em> <code>-1</code>. If there exists a solution, it is <strong>guaranteed</strong> to be <strong>unique</strong></p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canCompleteCircuit</span><span class="hljs-params">(gas []<span class="hljs-type">int</span>, cost []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>curSum := <span class="hljs-number">0</span><br>totalSum := <span class="hljs-number">0</span><br>start := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(gas); i++ &#123;<br>curSum += gas[i] - cost[i]<br>totalSum += gas[i] - cost[i]<br><span class="hljs-keyword">if</span> curSum &lt; <span class="hljs-number">0</span> &#123;<br>start = i+<span class="hljs-number">1</span><br>curSum = <span class="hljs-number">0</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> totalSum &lt; <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br><span class="hljs-keyword">return</span> start<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é‚£ä¹ˆå±€éƒ¨æœ€ä¼˜ï¼šå½“å‰ç´¯åŠ rest[j]çš„å’ŒcurSumä¸€æ—¦å°äº0ï¼Œèµ·å§‹ä½ç½®è‡³å°‘è¦æ˜¯j+1ï¼Œå› ä¸ºä»jå¼€å§‹ä¸€å®šä¸è¡Œã€‚å…¨å±€æœ€ä¼˜ï¼šæ‰¾åˆ°å¯ä»¥è·‘ä¸€åœˆçš„èµ·å§‹ä½ç½®</strong>ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201213162821958.png" alt="134.åŠ æ²¹ç«™"></p><p>æˆ‘æŠŠæ‰€æœ‰çš„å·®å€¼åŠ ä¸€éåªè¦æ˜¯èƒ½æ€»å’Œå¤§äº0è‚¯å®šèƒ½è·‘å®Œï¼Œç„¶åæ‰¾ç¬¬ä¸€ä¸ªå¯ä»¥ gas - cost &gt; 0 çš„ä½ç½®ä½œä¸ºèµ·ç‚¹</p><h2 id="10-8-åˆ†å‘ç³–æœ"><a href="#10-8-åˆ†å‘ç³–æœ" class="headerlink" title="10.8 åˆ†å‘ç³–æœ"></a>10.8 åˆ†å‘ç³–æœ</h2><p><strong>135. Candy</strong></p><p><strong>Qï¼š</strong>There are <code>n</code> children standing in a line. Each child is assigned a rating value given in the integer array <code>ratings</code>.</p><p>You are giving candies to these children subjected to the following requirements:</p><ul><li>Each child must have at least one candy.</li><li>Children with a higher rating get more candies than their neighbors.</li></ul><p>Return <em>the minimum number of candies you need to have to distribute the candies to the children</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">candy</span><span class="hljs-params">(ratings []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">// initialization</span><br>    candy := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(ratings))<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(ratings); i++ &#123;<br>        candy[i] = <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-comment">// front to back</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(ratings); i++ &#123;<br>        <span class="hljs-keyword">if</span> ratings[i] &gt; ratings[i - <span class="hljs-number">1</span>] &#123;<br>            candy[i] = candy[i - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>    fmt.Println(candy)<br>    <span class="hljs-comment">// back to front</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-built_in">len</span>(ratings) - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        <span class="hljs-keyword">if</span> ratings[i] &gt; ratings[i + <span class="hljs-number">1</span>] &#123;<br>            candy[i] = max(candy[i], candy[i + <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>) <span class="hljs-comment">// å› ä¸ºæ˜¯æ›´æ–°æ•°å€¼ï¼Œæ‰€ä»¥ç”¨maxï¼Œå¹¶ä¸æ˜¯å•çº¯çš„è¦†ç›–</span><br>        &#125;<br>    &#125;<br>    fmt.Println(candy)<br>    res := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> candy &#123;<br>        res += v<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™åœ¨leetcodeä¸Šæ˜¯ä¸€é“å›°éš¾çš„é¢˜ç›®ï¼Œå…¶éš¾ç‚¹å°±åœ¨äºè´ªå¿ƒçš„ç­–ç•¥ï¼Œå¦‚æœåœ¨è€ƒè™‘å±€éƒ¨çš„æ—¶å€™æƒ³ä¸¤è¾¹å…¼é¡¾ï¼Œå°±ä¼šé¡¾æ­¤å¤±å½¼ã€‚</p><p>é‚£ä¹ˆæœ¬é¢˜æˆ‘é‡‡ç”¨äº†ä¸¤æ¬¡è´ªå¿ƒçš„ç­–ç•¥ï¼š</p><ul><li>ä¸€æ¬¡æ˜¯ä»å·¦åˆ°å³éå†ï¼Œåªæ¯”è¾ƒå³è¾¹å­©å­è¯„åˆ†æ¯”å·¦è¾¹å¤§çš„æƒ…å†µã€‚</li><li>ä¸€æ¬¡æ˜¯ä»å³åˆ°å·¦éå†ï¼Œåªæ¯”è¾ƒå·¦è¾¹å­©å­è¯„åˆ†æ¯”å³è¾¹å¤§çš„æƒ…å†µã€‚</li></ul><p>è¿™æ ·ä»å±€éƒ¨æœ€ä¼˜æ¨å‡ºäº†å…¨å±€æœ€ä¼˜ï¼Œå³ï¼šç›¸é‚»çš„å­©å­ä¸­ï¼Œè¯„åˆ†é«˜çš„å­©å­è·å¾—æ›´å¤šçš„ç³–æœã€‚</p><h2 id="10-9-æŸ æª¬æ°´æ‰¾é›¶"><a href="#10-9-æŸ æª¬æ°´æ‰¾é›¶" class="headerlink" title="10.9 æŸ æª¬æ°´æ‰¾é›¶"></a>10.9 æŸ æª¬æ°´æ‰¾é›¶</h2><p><strong>860. Lemonade Change</strong></p><p><strong>Qï¼š</strong>At a lemonade stand, each lemonade costs <code>$5</code>. Customers are standing in a queue to buy from you and order one at a time (in the order specified by bills). Each customer will only buy one lemonade and pay with either a <code>$5</code>, <code>$10</code>, or <code>$20</code> bill. You must provide the correct change to each customer so that the net transaction is that the customer pays <code>$5</code>.</p><p>Note that you do not have any change in hand at first.</p><p>Given an integer array <code>bills</code> where <code>bills[i]</code> is the bill the <code>ith</code> customer pays, return <code>true</code> <em>if you can provide every customer with the correct change, or</em> <code>false</code> <em>otherwise</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lemonadeChange</span><span class="hljs-params">(bills []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    count5 := <span class="hljs-number">0</span><br>    count10 := <span class="hljs-number">0</span><br>    count20 := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(bills); i++ &#123;<br>        <span class="hljs-keyword">if</span> bills[i] == <span class="hljs-number">5</span> &#123;<br>            count5++<br>        &#125;<br>        <span class="hljs-keyword">if</span> bills[i] == <span class="hljs-number">10</span> &#123;<br>            <span class="hljs-keyword">if</span> count5 &lt;= <span class="hljs-number">0</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>&#125;<br>            count5--<br>            count10++<br>        &#125;<br>        <span class="hljs-keyword">if</span> bills[i] == <span class="hljs-number">20</span> &#123;<br>          <span class="hljs-comment">// ä¼˜å…ˆå¤„ç†10å—çš„ï¼Œå†å¤„ç†5å—çš„</span><br>            <span class="hljs-keyword">if</span> count5 &gt; <span class="hljs-number">0</span> &amp;&amp; count10 &gt; <span class="hljs-number">0</span> &#123;<br>                count5--<br>                count10--<br>                count20++<br>                <span class="hljs-keyword">continue</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> count10 == <span class="hljs-number">0</span> &amp;&amp; count5 &gt;= <span class="hljs-number">3</span> &#123;<br>                count5 -= <span class="hljs-number">3</span><br>                count20++<br>                <span class="hljs-keyword">continue</span><br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ul><li>æƒ…å†µä¸€ï¼šè´¦å•æ˜¯5ï¼Œç›´æ¥æ”¶ä¸‹ã€‚</li><li>æƒ…å†µäºŒï¼šè´¦å•æ˜¯10ï¼Œæ¶ˆè€—ä¸€ä¸ª5ï¼Œå¢åŠ ä¸€ä¸ª10</li><li>æƒ…å†µä¸‰ï¼šè´¦å•æ˜¯20ï¼Œä¼˜å…ˆæ¶ˆè€—ä¸€ä¸ª10å’Œä¸€ä¸ª5ï¼Œå¦‚æœä¸å¤Ÿï¼Œå†æ¶ˆè€—ä¸‰ä¸ª5</li></ul><p>å±€éƒ¨æœ€ä¼˜æ¨ç®—å‡ºå…¨å±€æœ€ä¼˜</p><h2 id="10-10-ç”¨æœ€å°‘æ•°é‡çš„ç®­å°„çˆ†æ°”çƒ"><a href="#10-10-ç”¨æœ€å°‘æ•°é‡çš„ç®­å°„çˆ†æ°”çƒ" class="headerlink" title="10.10 ç”¨æœ€å°‘æ•°é‡çš„ç®­å°„çˆ†æ°”çƒ"></a>10.10 ç”¨æœ€å°‘æ•°é‡çš„ç®­å°„çˆ†æ°”çƒ</h2><p><strong>452. Minimum Number of Arrows to Burst Balloons</strong></p><p><strong>Qï¼š</strong>There are some spherical balloons taped onto a flat wall that represents the XY-plane. The balloons are represented as a 2D integer array <code>points</code> where <code>points[i] = [xstart, xend]</code> denotes a balloon whose <strong>horizontal diameter</strong>stretches between <code>xstart</code> and <code>xend</code>. You do not know the exact y-coordinates of the balloons.</p><p>Arrows can be shot up <strong>directly vertically</strong> (in the positive y-direction) from different points along the x-axis. A balloon with <code>xstart</code> and <code>xend</code> is <strong>burst</strong> by an arrow shot at <code>x</code> if <code>xstart &lt;= x &lt;= xend</code>. There is <strong>no limit</strong> to the number of arrows that can be shot. A shot arrow keeps traveling up infinitely, bursting any balloons in its path.</p><p>Given the array <code>points</code>, return <em>the <strong>minimum</strong> number of arrows that must be shot to burst all balloons</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findMinArrowShots</span><span class="hljs-params">(points [][]<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">var</span> res <span class="hljs-type">int</span> = <span class="hljs-number">1</span> <span class="hljs-comment">// å¼“ç®­æ•°</span><br>    <span class="hljs-comment">// å…ˆæŒ‰ç…§ç¬¬ä¸€ä½æ’åº</span><br>    sort.Slice(points, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span>&#123;<br>        <span class="hljs-keyword">return</span> points[i][<span class="hljs-number">0</span>] &lt; points[j][<span class="hljs-number">0</span>]<br>    &#125;)<br><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(points); i++&#123;<br>        <span class="hljs-keyword">if</span> points[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] &lt; points[i][<span class="hljs-number">0</span>] &#123; <span class="hljs-comment">// å¦‚æœå‰ä¸€ä½çš„å³è¾¹ç•Œå°äºåä¸€ä½çš„å·¦è¾¹ç•Œï¼Œåˆ™ä¸€å®šä¸é‡åˆ</span><br>            res++<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            points[i][<span class="hljs-number">1</span>] = min(points[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], points[i][<span class="hljs-number">1</span>]); <span class="hljs-comment">// æ›´æ–°é‡å æ°”çƒæœ€å°å³è¾¹ç•Œ,è¦†ç›–è¯¥ä½ç½®çš„å€¼ï¼Œç•™åˆ°ä¸‹ä¸€æ­¥ä½¿ç”¨</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<br>        <span class="hljs-keyword">return</span> b<br>    &#125;<br>    <span class="hljs-keyword">return</span> a<br>&#125;<br></code></pre></td></tr></table></figure><p>è´ªå¿ƒï¼Œå…ˆç¡®å®šä¸€ä¸ªæ€è·¯ï¼Œå†çœ‹è¿™ä¸ªæ€è·¯æ˜¯å¦æœ‰bugï¼Œæ²¡æœ‰bugå°±å¯ä»¥ä½¿ç”¨è´ªå¿ƒ</p><p>ç›´è§‰ä¸Šæ¥çœ‹ï¼Œè²Œä¼¼åªå°„é‡å æœ€å¤šçš„æ°”çƒï¼Œç”¨çš„å¼“ç®­ä¸€å®šæœ€å°‘ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å½“å‰é‡å äº†ä¸‰ä¸ªæ°”çƒï¼Œæˆ‘å°„ä¸¤ä¸ªï¼Œç•™ä¸‹ä¸€ä¸ªå’Œåé¢çš„ä¸€èµ·å°„è¿™æ ·å¼“ç®­ç”¨çš„æ›´å°‘çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>å°è¯•ä¸€ä¸‹ä¸¾åä¾‹ï¼Œå‘ç°æ²¡æœ‰è¿™ç§æƒ…å†µã€‚</p><p>sort.Sliceä½¿ç”¨æŒ‡å—<a href="http://books.studygolang.com/Mastering_Go_ZH_CN/eBook/chapter3/03.3.7.html">http://books.studygolang.com/Mastering_Go_ZH_CN/eBook/chapter3/03.3.7.html</a></p><h2 id="10-11-åˆå¹¶åŒºé—´"><a href="#10-11-åˆå¹¶åŒºé—´" class="headerlink" title="10.11 åˆå¹¶åŒºé—´"></a>10.11 åˆå¹¶åŒºé—´</h2><p><strong>56. Merge Intervals</strong></p><p><strong>Qï¼š</strong>Given an array of <code>intervals</code> where <code>intervals[i] = [starti, endi]</code>, merge all overlapping intervals, and return <em>an array of the non-overlapping intervals that cover all the intervals in the input</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">merge</span><span class="hljs-params">(intervals [][]<span class="hljs-type">int</span>)</span></span> [][]<span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">//å…ˆä»å°åˆ°å¤§æ’åº</span><br>    sort.Slice(intervals,<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i,j <span class="hljs-type">int</span>)</span></span><span class="hljs-type">bool</span>&#123;<br>        <span class="hljs-keyword">return</span> intervals[i][<span class="hljs-number">0</span>]&lt;intervals[j][<span class="hljs-number">0</span>]<br>    &#125;)<br>    <span class="hljs-comment">//å†å¼„é‡å¤çš„</span><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(intervals)<span class="hljs-number">-1</span>;i++&#123;<br>        <span class="hljs-keyword">if</span> intervals[i][<span class="hljs-number">1</span>] &gt;= intervals[i+<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]&#123;<br>            intervals[i][<span class="hljs-number">1</span>] = max(intervals[i][<span class="hljs-number">1</span>],intervals[i+<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])<span class="hljs-comment">//èµ‹å€¼æœ€å¤§å€¼</span><br>            intervals = <span class="hljs-built_in">append</span>(intervals[:i+<span class="hljs-number">1</span>],intervals[i+<span class="hljs-number">2</span>:]...)<br>            i--<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> intervals<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a &gt; b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘æŒ‰ç…§å·¦è¾¹ç•Œæ’åºï¼Œæ’åºä¹‹åå±€éƒ¨æœ€ä¼˜ï¼šæ¯æ¬¡åˆå¹¶éƒ½å–æœ€å¤§çš„å³è¾¹ç•Œï¼Œè¿™æ ·å°±å¯ä»¥åˆå¹¶æ›´å¤šçš„åŒºé—´äº†ï¼Œæ•´ä½“æœ€ä¼˜ï¼šåˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ã€‚</p><p><code>intervals = append(intervals[:i+1],intervals[i+2:]...)</code>å°†ç¬¬ä¸€ä½æå–å‡ºæ¥ï¼Œåé¢è·³è¿‡ä¸‹ä¸€ä½æŠŠåé¢çš„æ¥è¿‡æ¥ï¼Œç›¸å½“äºå‰”é™¤äº†ç¬¬äºŒä½ã€‚</p><h2 id="10-12-å•è°ƒé€’å¢çš„æ•°å­—"><a href="#10-12-å•è°ƒé€’å¢çš„æ•°å­—" class="headerlink" title="10.12 å•è°ƒé€’å¢çš„æ•°å­—"></a>10.12 å•è°ƒé€’å¢çš„æ•°å­—</h2><p><strong>738. Monotone Increasing Digits</strong></p><p><strong>Qï¼š</strong>An integer has <strong>monotone increasing digits</strong> if and only if each pair of adjacent digits <code>x</code> and <code>y</code> satisfy <code>x &lt;= y</code>.</p><p>Given an integer <code>n</code>, return <em>the largest number that is less than or equal to</em> <code>n</code><em>with <strong>monotone increasing digits</strong></em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">monotoneIncreasingDigits</span><span class="hljs-params">(N <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    s := strconv.Itoa(N) <span class="hljs-comment">// å°†æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿ä½¿ç”¨ä¸‹æ ‡</span><br>    ss := []<span class="hljs-type">byte</span>(s) <span class="hljs-comment">// å°†å­—ç¬¦ä¸²è½¬ä¸ºbyteæ•°ç»„ï¼Œæ–¹ä¾¿æ›´æ”¹ã€‚</span><br>    n := <span class="hljs-built_in">len</span>(ss)<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-keyword">return</span> N<br>    &#125;<br>    <span class="hljs-keyword">for</span> i := n - <span class="hljs-number">1</span> ; i &gt; <span class="hljs-number">0</span>; i-- &#123;<br>        <span class="hljs-keyword">if</span> ss[i - <span class="hljs-number">1</span>] &gt; ss[i] &#123; <span class="hljs-comment">// å‰ä¸€ä¸ªå¤§äºåä¸€ä½,å‰ä¸€ä½å‡1ï¼Œåé¢çš„å…¨éƒ¨ç½®ä¸º9</span><br>            ss[i - <span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">for</span> j := i ; j &lt; n; j++ &#123; <span class="hljs-comment">// åé¢çš„å…¨éƒ¨ç½®ä¸º9</span><br>                ss[j] = <span class="hljs-string">&#x27;9&#x27;</span><br>            &#125;<br>        &#125; <br>    &#125;<br>    res, _ := strconv.Atoi(<span class="hljs-type">string</span>(ss))<br>    <span class="hljs-keyword">return</span> res <br>&#125;<br></code></pre></td></tr></table></figure><p>ä»å‰å¾€åéå†ä¸è¡Œï¼Œå› ä¸ºä¼šä¿®æ”¹åŸæœ¬çš„å€¼ï¼Œä½†æ˜¯ä»åå¾€å‰ä¸ä¼šã€‚</p><p>å¯¹äºgoè¯­è¨€å¦‚æœè¦ä¿®æ”¹stringçš„å†…å®¹æœ€å¥½å…ˆè½¬åŒ–æˆbyteæ•°ç»„ã€‚</p><p>å‰ä¸€ä¸ªå¤§äºåä¸€ä½,å‰ä¸€ä½å‡1ï¼Œåé¢çš„å…¨éƒ¨ç½®ä¸º9ï¼ˆå› ä¸ºè¦æ±‚æœ€å¤§ï¼‰ï¼</p><h1 id="ç¬¬11ç« -åŠ¨æ€è§„åˆ’"><a href="#ç¬¬11ç« -åŠ¨æ€è§„åˆ’" class="headerlink" title="ç¬¬11ç«  åŠ¨æ€è§„åˆ’"></a>ç¬¬11ç«  åŠ¨æ€è§„åˆ’</h1><p>åŠ¨è§„äº”éƒ¨æ›²ï¼š</p><p>è¿™é‡Œæˆ‘ä»¬è¦ç”¨ä¸€ä¸ªä¸€ç»´dpæ•°ç»„æ¥ä¿å­˜é€’å½’çš„ç»“æœ</p><ol><li>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>dp[i]çš„å®šä¹‰ä¸ºï¼šç¬¬iä¸ªæ•°çš„æ–æ³¢é‚£å¥‘æ•°å€¼æ˜¯dp[i]</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>ä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€é“éå¸¸ç®€å•çš„å…¥é—¨é¢˜ç›®å‘¢ï¼Ÿ</p><p><strong>å› ä¸ºé¢˜ç›®å·²ç»æŠŠé€’æ¨å…¬å¼ç›´æ¥ç»™æˆ‘ä»¬äº†ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ dp[i] = dp[i - 1] + dp[i - 2];</strong></p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p><strong>é¢˜ç›®ä¸­æŠŠå¦‚ä½•åˆå§‹åŒ–ä¹Ÿç›´æ¥ç»™æˆ‘ä»¬äº†ï¼Œå¦‚ä¸‹ï¼š</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">dp[0] = 0;<br>dp[1] = 1;<br></code></pre></td></tr></table></figure><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>ä»é€’å½’å…¬å¼dp[i] = dp[i - 1] + dp[i - 2];ä¸­å¯ä»¥çœ‹å‡ºï¼Œdp[i]æ˜¯ä¾èµ– dp[i - 1] å’Œ dp[i - 2]ï¼Œé‚£ä¹ˆéå†çš„é¡ºåºä¸€å®šæ˜¯ä»å‰åˆ°åéå†çš„</p><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><p>æŒ‰ç…§è¿™ä¸ªé€’æ¨å…¬å¼dp[i] = dp[i - 1] + dp[i - 2]ï¼Œæˆ‘ä»¬æ¥æ¨å¯¼ä¸€ä¸‹ï¼Œå½“Nä¸º10çš„æ—¶å€™ï¼Œdpæ•°ç»„åº”è¯¥æ˜¯å¦‚ä¸‹çš„æ•°åˆ—ï¼š</p><p>0 1 1 2 3 5 8 13 21 34 55</p><p>å¦‚æœä»£ç å†™å‡ºæ¥ï¼Œå‘ç°ç»“æœä¸å¯¹ï¼Œå°±æŠŠdpæ•°ç»„æ‰“å°å‡ºæ¥çœ‹çœ‹å’Œæˆ‘ä»¬æ¨å¯¼çš„æ•°åˆ—æ˜¯ä¸æ˜¯ä¸€è‡´çš„ã€‚</p><h2 id="11-1-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#11-1-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="11.1 æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>11.1 æ–æ³¢é‚£å¥‘æ•°åˆ—</h2><p><strong>509. Fibonacci Number</strong></p><p><strong>Qï¼š</strong>The <strong>Fibonacci numbers</strong>, commonly denoted <code>F(n)</code> form a sequence, called the <strong>Fibonacci sequence</strong>, such that each number is the sum of the two preceding ones, starting from <code>0</code> and <code>1</code>. That is,</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">F</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span> = <span class="hljs-number">0</span>, <span class="hljs-built_in">F</span>(<span class="hljs-number">1</span>) = <span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">F</span><span class="hljs-params">(n)</span></span> = <span class="hljs-built_in">F</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-built_in">F</span>(n - <span class="hljs-number">2</span>), <span class="hljs-keyword">for</span> n &gt; <span class="hljs-number">1</span>.<br></code></pre></td></tr></table></figure><p>Given <code>n</code>, calculate <code>F(n)</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fib</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> &#123;<span class="hljs-keyword">return</span> n&#125;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt;= n; i++ &#123;<br>      dp[i] = dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-2-çˆ¬æ¥¼æ¢¯"><a href="#11-2-çˆ¬æ¥¼æ¢¯" class="headerlink" title="11.2 çˆ¬æ¥¼æ¢¯"></a>11.2 çˆ¬æ¥¼æ¢¯</h2><p><strong>70. Climbing Stairs</strong></p><p><strong>Qï¼š</strong>You are climbing a staircase. It takes <code>n</code> steps to reach the top.</p><p>Each time you can either climb <code>1</code> or <code>2</code> steps. In how many distinct ways can you climb to the top?</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">climbStairs</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> &#123;<span class="hljs-keyword">return</span> n&#125;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span> <span class="hljs-comment">// ç¬¬ä¸€å±‚çš„æ–¹æ³•æ•°é‡</span><br>    dp[<span class="hljs-number">2</span>] = <span class="hljs-number">2</span> <span class="hljs-comment">// ç¬¬äºŒå±‚çš„æ–¹æ³•æ•°é‡</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">3</span>; i &lt;= n; i++ &#123;<br>        dp[i] = dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n]<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆå§‹åŒ–ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ï¼Œç„¶åé€’å½’åé¢çš„æ­¥å­ï¼Œå…³é”®åœ¨äºé€’æ¨å…¬å¼çš„ç”Ÿæˆ</p><p>é¦–å…ˆæ˜¯dp[i - 1]ï¼Œä¸Ši-1å±‚æ¥¼æ¢¯ï¼Œæœ‰dp[i - 1]ç§æ–¹æ³•ï¼Œé‚£ä¹ˆå†ä¸€æ­¥è·³ä¸€ä¸ªå°é˜¶ä¸å°±æ˜¯dp[i]äº†ä¹ˆã€‚</p><p>è¿˜æœ‰å°±æ˜¯dp[i - 2]ï¼Œä¸Ši-2å±‚æ¥¼æ¢¯ï¼Œæœ‰dp[i - 2]ç§æ–¹æ³•ï¼Œé‚£ä¹ˆå†ä¸€æ­¥è·³ä¸¤ä¸ªå°é˜¶ä¸å°±æ˜¯dp[i]äº†ä¹ˆã€‚</p><p>èµ°ä¸€æ­¥å’Œèµ°ä¸¤æ­¥çš„æ–¹æ³•æ€»å’Œ</p><h2 id="11-3-ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯"><a href="#11-3-ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯" class="headerlink" title="11.3 ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯"></a>11.3 ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯</h2><p><strong>746. Min Cost Climbing Stairs</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>cost</code> where <code>cost[i]</code> is the cost of <code>ith</code> step on a staircase. Once you pay the cost, you can either climb one or two steps.</p><p>You can either start from the step with index <code>0</code>, or the step with index <code>1</code>.</p><p>Return <em>the minimum cost to reach the top of the floor</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">minCostClimbingStairs</span><span class="hljs-params">(cost []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(cost))<br>    dp[<span class="hljs-number">0</span>] = cost[<span class="hljs-number">0</span>]<br>    dp[<span class="hljs-number">1</span>] = cost[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt; <span class="hljs-built_in">len</span>(cost); i++ &#123;<br>        dp[i] = min(dp[i - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">2</span>]) + cost[i]<br>    &#125;<br>    <span class="hljs-keyword">return</span> min(dp[<span class="hljs-built_in">len</span>(dp) - <span class="hljs-number">1</span>], dp[<span class="hljs-built_in">len</span>(dp) - <span class="hljs-number">2</span>]) <span class="hljs-comment">// è¿”å›çš„æ˜¯è¸ä¸Šæ¥¼é¡¶çš„å‰ä¸€æ­¥æˆ–è€…å‰ä¸¤æ­¥</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>dp[i]çš„å®šä¹‰ï¼šåˆ°è¾¾ç¬¬iä¸ªå°é˜¶æ‰€èŠ±è´¹çš„æœ€å°‘ä½“åŠ›ä¸ºdp[i]</strong>ã€‚</p><p><strong>å¯ä»¥æœ‰ä¸¤ä¸ªé€”å¾„å¾—åˆ°dp[i]ï¼Œä¸€ä¸ªæ˜¯dp[i-1] ä¸€ä¸ªæ˜¯dp[i-2]</strong>ã€‚</p><p>é‚£ä¹ˆç©¶ç«Ÿæ˜¯é€‰dp[i-1]è¿˜æ˜¯dp[i-2]å‘¢ï¼Ÿ</p><p>ä¸€å®šæ˜¯é€‰æœ€å°çš„ï¼Œæ‰€ä»¥dp[i] = min(dp[i - 1], dp[i - 2]) + cost[i];</p><p><strong>æ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯åŠ cost[i]ï¼Œè€Œä¸æ˜¯cost[i-1],cost[i-2]ä¹‹ç±»çš„</strong>ï¼Œå› ä¸ºé¢˜ç›®ä¸­è¯´äº†ï¼šæ¯å½“ä½ çˆ¬ä¸Šä¸€ä¸ªé˜¶æ¢¯ä½ éƒ½è¦èŠ±è´¹å¯¹åº”çš„ä½“åŠ›å€¼</p><h2 id="11-4-ä¸åŒè·¯å¾„-I"><a href="#11-4-ä¸åŒè·¯å¾„-I" class="headerlink" title="11.4 ä¸åŒè·¯å¾„ I"></a>11.4 ä¸åŒè·¯å¾„ I</h2><p><strong>62. Unique Paths</strong></p><p><strong>Qï¼š</strong>There is a robot on an <code>m x n</code> grid. The robot is initially located at the <strong>top-left corner</strong> (i.e., <code>grid[0][0]</code>). The robot tries to move to the <strong>bottom-right corner</strong> (i.e., <code>grid[m - 1][n - 1]</code>). The robot can only move either down or right at any point in time.</p><p>Given the two integers <code>m</code> and <code>n</code>, return <em>the number of possible unique paths that the robot can take to reach the bottom-right corner</em>.</p><p>The test cases are generated so that the answer will be less than or equal to <code>2 * 109</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">uniquePaths</span><span class="hljs-params">(m <span class="hljs-type">int</span>, n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m)<br><span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>&#125;<br>    <span class="hljs-keyword">for</span> j := <span class="hljs-keyword">range</span> dp[<span class="hljs-number">0</span>] &#123;<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt; n; j++ &#123;<br>            dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i][j - <span class="hljs-number">1</span>] <span class="hljs-comment">// ä»å·¦è¾¹æ¥çš„å’Œå³è¾¹æ¥çš„æ•°é‡çš„æ€»å’Œ</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>æŒ‰ç…§åŠ¨è§„äº”éƒ¨æ›²æ¥åˆ†æï¼š</p><ol><li>ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>dp[i] [j] ï¼šè¡¨ç¤ºä»ï¼ˆ0 ï¼Œ0ï¼‰å‡ºå‘ï¼Œåˆ°(i, j) æœ‰dp[i] [j]æ¡ä¸åŒçš„è·¯å¾„ã€‚</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>æƒ³è¦æ±‚dp[i] [j]ï¼Œåªèƒ½æœ‰ä¸¤ä¸ªæ–¹å‘æ¥æ¨å¯¼å‡ºæ¥ï¼Œå³dp[i - 1] [j] å’Œ dp[i] [j - 1]ã€‚</p><p>æ­¤æ—¶åœ¨å›é¡¾ä¸€ä¸‹ dp[i - 1] [j] è¡¨ç¤ºå•¥ï¼Œæ˜¯ä»(0, 0)çš„ä½ç½®åˆ°(i - 1, j)æœ‰å‡ æ¡è·¯å¾„ï¼Œdp[i][j - 1]åŒç†ã€‚</p><p>é‚£ä¹ˆå¾ˆè‡ªç„¶ï¼Œdp[i] [j] = dp[i - 1] [j] + dp[i] [j - 1]ï¼Œå› ä¸ºdp[i] [j]åªæœ‰è¿™ä¸¤ä¸ªæ–¹å‘è¿‡æ¥ã€‚</p><ol><li>dpæ•°ç»„çš„åˆå§‹åŒ–</li></ol><p>å¦‚ä½•åˆå§‹åŒ–å‘¢ï¼Œé¦–å…ˆdp[i] [0]ä¸€å®šéƒ½æ˜¯1ï¼Œå› ä¸ºä»(0, 0)çš„ä½ç½®åˆ°(i, 0)çš„è·¯å¾„åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆdp[0] [j]ä¹ŸåŒç†ã€‚</p><p>æ‰€ä»¥åˆå§‹åŒ–ä»£ç ä¸ºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>è¿™é‡Œè¦çœ‹ä¸€ä¸‹é€’å½’å…¬å¼dp[i] [j] = dp[i - 1] [j] + dp[i] [j - 1]ï¼Œdp[i] [j]éƒ½æ˜¯ä»å…¶ä¸Šæ–¹å’Œå·¦æ–¹æ¨å¯¼è€Œæ¥ï¼Œé‚£ä¹ˆä»å·¦åˆ°å³ä¸€å±‚ä¸€å±‚éå†å°±å¯ä»¥äº†ã€‚</p><p>è¿™æ ·å°±å¯ä»¥ä¿è¯æ¨å¯¼dp[i] [j]çš„æ—¶å€™ï¼Œdp[i - 1] [j] å’Œ dp[i] [j - 1]ä¸€å®šæ˜¯æœ‰æ•°å€¼çš„ã€‚</p><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><h2 id="11-5-ä¸åŒè·¯å¾„-II"><a href="#11-5-ä¸åŒè·¯å¾„-II" class="headerlink" title="11.5 ä¸åŒè·¯å¾„ II"></a>11.5 ä¸åŒè·¯å¾„ II</h2><p><strong>63. Unique Paths II</strong></p><p><strong>Qï¼š</strong>You are given an <code>m x n</code> integer array <code>grid</code>. There is a robot initially located at the <strong>top-left corner</strong> (i.e., <code>grid[0][0]</code>). The robot tries to move to the <strong>bottom-right corner</strong> (i.e., <code>grid[m-1][n-1]</code>). The robot can only move either down or right at any point in time.</p><p>An obstacle and space are marked as <code>1</code> or <code>0</code> respectively in <code>grid</code>. A path that the robot takes cannot include <strong>any</strong> square that is an obstacle.</p><p>Return <em>the number of possible unique paths that the robot can take to reach the bottom-right corner</em>.</p><p>The testcases are generated so that the answer will be less than or equal to <code>2 * 109</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">uniquePathsWithObstacles</span><span class="hljs-params">(obstacleGrid [][]<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(obstacleGrid)<br>    n := <span class="hljs-built_in">len</span>(obstacleGrid[<span class="hljs-number">0</span>])<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; m; i++ &#123;<br>        <span class="hljs-keyword">if</span> obstacleGrid[i][<span class="hljs-number">0</span>] == <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">for</span> k := i; k &lt; m; k++ &#123;<br>                dp[k][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span> <span class="hljs-comment">// å¦‚æœå‘ç°äº†è¿™ä¸€è¡Œæœ‰ä¸€ä¸ªçŸ³å¤´ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œä»çŸ³å¤´å¼€å§‹åé¢çš„å…¨éƒ¨åˆ°è¾¾ä¸äº†</span><br>            &#125;<br>            <span class="hljs-keyword">break</span><br>        &#125;<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; n; j++ &#123;<br>        <span class="hljs-keyword">if</span> obstacleGrid[<span class="hljs-number">0</span>][j] == <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">for</span> k := j; k &lt; n; k++ &#123;<br>                dp[<span class="hljs-number">0</span>][k] = <span class="hljs-number">0</span> <span class="hljs-comment">// å¦‚æœå‘ç°äº†è¿™ä¸€åˆ—æœ‰ä¸€ä¸ªçŸ³å¤´ï¼Œé‚£ä¹ˆè¿™ä¸€åˆ—ä»çŸ³å¤´å¼€å§‹åé¢çš„å…¨éƒ¨åˆ°è¾¾ä¸äº†</span><br>            &#125;<br>            <span class="hljs-keyword">break</span><br>        &#125;<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt; n; j++ &#123;<br>            <span class="hljs-keyword">if</span> obstacleGrid[i][j] == <span class="hljs-number">1</span> &#123;   <br>                dp[i][j] = <span class="hljs-number">0</span> <span class="hljs-comment">// å¦‚æœæ­¤ç‚¹æœ‰éšœç¢ç‰©ï¼Œé‚£ä¹ˆè¿™ç‚¹å°±ä¸æ˜¯é€šè·¯å°±ä¸º0</span><br>                <span class="hljs-keyword">continue</span><br>            &#125;<br>            dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i][j - <span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯åˆå§‹åŒ–çš„æ—¶å€™è¦æ³¨æ„ï¼Œå¦‚æœå‡ºç°äº†éšœç¢ç‰©ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ä¸€è¡Œæˆ–è€…ä¸€åˆ—å°†éƒ½æ˜¯0ï¼›ç¬¬äºŒä¸ªæ˜¯å½“è¿›è¡Œçš„æ—¶å€™å¦‚æœå½“å‰ç‚¹æ˜¯éšœç¢ç‚¹äº†ï¼Œé‚£ä¹ˆå°±æŠŠå®ƒç½®0ï¼Œå› ä¸ºå¯¹äºä¸‹ä¸€ä¸ªç‚¹æ¥è¯´ï¼Œä»–å¹¶ä¸èƒ½å¸®åŠ©ä¸‹ä¸€ç‚¹åˆ°è¾¾è‡ªå·±çš„ç›®çš„åœ°ã€‚</p><h2 id="11-6-æ•´æ•°æ‹†åˆ†"><a href="#11-6-æ•´æ•°æ‹†åˆ†" class="headerlink" title="11.6 æ•´æ•°æ‹†åˆ†"></a>11.6 æ•´æ•°æ‹†åˆ†</h2><p><strong>343. Integer Break</strong></p><p><strong>Qï¼š</strong>Given an integer <code>n</code>, break it into the sum of <code>k</code> <strong>positive integers</strong>, where <code>k &gt;= 2</code>, and maximize the product of those integers.</p><p>Return <em>the maximum product you can get</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">integerBreak</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">3</span>; i &lt;= n; i++ &#123; <span class="hljs-comment">// çœŸæ­£dpåºåˆ—çš„å¾ªç¯ï¼ŒæŠŠnè¿™ä¸ªæ•°æ‹†å‡ºæ¥ä¸€ä¸ªç„¶ååˆ†æçœ‹çœ‹è¿™ä¹ˆæ‹†æ˜¯ä¸æ˜¯æœ€å°çš„ä¹˜ç§¯</span><br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= i - <span class="hljs-number">1</span>; j++ &#123; <span class="hljs-comment">// æ­£æ•´æ•°æ‰€ä»¥jä»1å¼€å§‹ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åˆ°è¾¾i-1ï¼Œæ¯”å¦‚næ˜¯10ï¼Œé‚£ä¹ˆæˆ‘èƒ½æ‹†å¼€çš„ä¸¤ä¸ªæ•°å°±æ˜¯9å’Œ1</span><br>            dp[i] = max(dp[i], max((i - j) * j, dp[i - j] * j)) <span class="hljs-comment">// j * (i - j) æ˜¯å•çº¯çš„æŠŠæ•´æ•°æ‹†åˆ†ä¸ºä¸¤ä¸ªæ•°ç›¸ä¹˜ï¼Œè€Œj * dp[i - j]æ˜¯æ‹†åˆ†æˆä¸¤ä¸ªä»¥åŠä¸¤ä¸ªä»¥ä¸Šçš„ä¸ªæ•°ç›¸ä¹˜</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n] <span class="hljs-comment">// ç”±äºå‰é¢åœ¨æ¯”è¾ƒçš„åŒæ—¶éœ€è¦ç»™dp[n]èµ‹å€¼ï¼Œå¿…é¡»ä¿è¯å½“åˆ°è¾¾dp[n]çš„æ—¶å€™ï¼Œå…¶æ•°å€¼æ˜¯æœ€å¤§çš„ï¼Œæ‰€ä»¥åœ¨é€’æ¨å…¬å¼ä¸­æœ‰dp[n]</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>åŠ¨è§„äº”éƒ¨æ›²ï¼Œåˆ†æå¦‚ä¸‹ï¼š</p><ol><li>ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>dp[i]ï¼šåˆ†æ‹†æ•°å­—iï¼Œå¯ä»¥å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯ä¸ºdp[i]ã€‚</p><p>dp[i]çš„å®šä¹‰è®²è´¯å½»æ•´ä¸ªè§£é¢˜è¿‡ç¨‹ï¼Œä¸‹é¢å“ªä¸€æ­¥æƒ³ä¸æ‡‚äº†ï¼Œå°±æƒ³æƒ³dp[i]ç©¶ç«Ÿè¡¨ç¤ºçš„æ˜¯å•¥ï¼</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼ğŸŒŸ</li></ol><p>å¯ä»¥æƒ³ dp[i]æœ€å¤§ä¹˜ç§¯æ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ï¼Ÿ</p><p>å…¶å®å¯ä»¥ä»1éå†jï¼Œç„¶åæœ‰ä¸¤ç§æ¸ é“å¾—åˆ°dp[i].</p><p>ä¸€ä¸ªæ˜¯j * (i - j) ç›´æ¥ç›¸ä¹˜ã€‚</p><p>ä¸€ä¸ªæ˜¯j * dp[i - j]ï¼Œç›¸å½“äºæ˜¯æ‹†åˆ†(i - j)ï¼Œå¯¹è¿™ä¸ªæ‹†åˆ†ä¸ç†è§£çš„è¯ï¼Œå¯ä»¥å›æƒ³dpæ•°ç»„çš„å®šä¹‰ã€‚</p><p><strong>ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œj <em> (i - j) æ˜¯å•çº¯çš„æŠŠæ•´æ•°æ‹†åˆ†ä¸ºä¸¤ä¸ªæ•°ç›¸ä¹˜ï¼Œè€Œj </em> dp[i - j]æ˜¯æ‹†åˆ†æˆä¸¤ä¸ªä»¥åŠä¸¤ä¸ªä»¥ä¸Šçš„ä¸ªæ•°ç›¸ä¹˜ã€‚</strong></p><p>å¦‚æœå®šä¹‰dp[i - j] * dp[j] ä¹Ÿæ˜¯é»˜è®¤å°†ä¸€ä¸ªæ•°å¼ºåˆ¶æ‹†æˆ4ä»½ä»¥åŠ4ä»½ä»¥ä¸Šäº†</p><ol><li>dpçš„åˆå§‹åŒ–</li></ol><p>ä¸å°‘åŒå­¦åº”è¯¥ç–‘æƒ‘ï¼Œdp[0] dp[1]åº”è¯¥åˆå§‹åŒ–å¤šå°‘å‘¢ï¼Ÿ</p><p>æœ‰çš„é¢˜è§£é‡Œä¼šç»™å‡ºdp[0] = 1ï¼Œdp[1] = 1çš„åˆå§‹åŒ–ï¼Œä½†è§£é‡Šæ¯”è¾ƒç‰µå¼ºï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºè¿™ä¹ˆåˆå§‹åŒ–å¯ä»¥æŠŠé¢˜ç›®è¿‡äº†ã€‚</p><p>ä¸¥æ ¼ä»dp[i]çš„å®šä¹‰æ¥è¯´ï¼Œdp[0] dp[1] å°±ä¸åº”è¯¥åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ„ä¹‰çš„æ•°å€¼ã€‚</p><p>æ‹†åˆ†0å’Œæ‹†åˆ†1çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿ</p><p>è¿™æ˜¯æ— è§£çš„ã€‚</p><p>è¿™é‡Œæˆ‘åªåˆå§‹åŒ–dp[2] = 1ï¼Œä»dp[i]çš„å®šä¹‰æ¥è¯´ï¼Œæ‹†åˆ†æ•°å­—2ï¼Œå¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯1ï¼Œè¿™ä¸ªæ²¡æœ‰ä»»ä½•å¼‚è®®ï¼</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>ç¡®å®šéå†é¡ºåºï¼Œå…ˆæ¥çœ‹çœ‹é€’å½’å…¬å¼ï¼šdp[i] = max(dp[i], max((i - j) <em> j, dp[i - j] </em> j));</p><p>dp[i] æ˜¯ä¾é  dp[i - j]çš„çŠ¶æ€ï¼Œæ‰€ä»¥éå†iä¸€å®šæ˜¯ä»å‰å‘åéå†ï¼Œå…ˆæœ‰dp[i - j]å†æœ‰dp[i]ã€‚</p><p>æšä¸¾jçš„æ—¶å€™ï¼Œæ˜¯ä»1å¼€å§‹çš„ã€‚iæ˜¯ä»3å¼€å§‹ï¼Œè¿™æ ·dp[i - j]å°±æ˜¯dp[2]æ­£å¥½å¯ä»¥é€šè¿‡æˆ‘ä»¬åˆå§‹åŒ–çš„æ•°å€¼æ±‚å‡ºæ¥ã€‚</p><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><h2 id="11-7-ä¸åŒçš„äºŒå‰æ ‘æœç´¢æ ‘"><a href="#11-7-ä¸åŒçš„äºŒå‰æ ‘æœç´¢æ ‘" class="headerlink" title="11.7 ä¸åŒçš„äºŒå‰æ ‘æœç´¢æ ‘"></a>11.7 ä¸åŒçš„äºŒå‰æ ‘æœç´¢æ ‘</h2><p><strong>96. Unique Binary Search Trees</strong></p><p><strong>Qï¼š</strong>Given an integer <code>n</code>, return <em>the number of structurally unique <strong>BSTâ€™</strong>s (binary search trees) which has exactly</em> <code>n</code> <em>nodes of unique values from</em> <code>1</code> <em>to</em> <code>n</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">numTrees</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>  dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>) <span class="hljs-comment">// åŒ…å« 0 + (1 to n)</span><br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= n; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= i; j++ &#123; <span class="hljs-comment">// å‡å¦‚åªæœ‰å·¦å­æ ‘æˆ–è€…å³å­æ ‘çš„æ—¶å€™å°±ä¼š j = i</span><br>            dp[i] += dp[j - <span class="hljs-number">1</span>] * dp[i - j]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n]<br>&#125;<br></code></pre></td></tr></table></figure><p>dp[3]ï¼Œå°±æ˜¯ å…ƒç´ 1ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ + å…ƒç´ 2ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ + å…ƒç´ 3ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡</p><ol><li>ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p><strong>dp[i] ï¼š 1åˆ°iä¸ºèŠ‚ç‚¹ç»„æˆçš„äºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°ä¸ºdp[i]</strong>ã€‚</p><p>ä¹Ÿå¯ä»¥ç†è§£æ˜¯iä¸ªçš„ä¸åŒå…ƒç´ èŠ‚ç‚¹ç»„æˆçš„äºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°ä¸ºdp[i] ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä»¥ä¸‹åˆ†æå¦‚æœæƒ³ä¸æ¸…æ¥šï¼Œå°±æ¥å›æƒ³ä¸€ä¸‹dp[i]çš„å®šä¹‰</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>åœ¨ä¸Šé¢çš„åˆ†æä¸­ï¼Œå…¶å®å·²ç»çœ‹å‡ºå…¶é€’æ¨å…³ç³»ï¼Œ dp[i] += dp[ä»¥jä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡] * dp[ä»¥jä¸ºå¤´ç»“ç‚¹å³å­æ ‘èŠ‚ç‚¹æ•°é‡]</p><p>jç›¸å½“äºæ˜¯å¤´ç»“ç‚¹çš„å…ƒç´ ï¼Œä»1éå†åˆ°iä¸ºæ­¢ã€‚</p><p>æ‰€ä»¥é€’æ¨å…¬å¼ï¼šdp[i] += dp[j - 1] * dp[i - j]; ï¼Œj-1 ä¸ºjä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡ï¼Œi-j ä¸ºä»¥jä¸ºå¤´ç»“ç‚¹å³å­æ ‘èŠ‚ç‚¹æ•°é‡</p><p>å…¶ä¸­ç¬¬äºŒä¸ªå¾ªç¯for jçš„é‚£ä¸ªå°±æ˜¯ä¸ºäº†æ‰¾å¯»ä¸åŒçš„æ•°é‡çš„å·¦å­æ ‘ã€‚ä¹‹æ‰€ä»¥å³å­æ ‘çš„æ•°é‡ä¸º i - j æ˜¯å› ä¸ºå·¦å­æ ‘åŠ ä¸Šå³å­æ ‘çš„æ€»å’Œä¸º i - 1</p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p>åˆå§‹åŒ–ï¼Œåªéœ€è¦åˆå§‹åŒ–dp[0]å°±å¯ä»¥äº†ï¼Œæ¨å¯¼çš„åŸºç¡€ï¼Œéƒ½æ˜¯dp[0]ã€‚</p><p>é‚£ä¹ˆdp[0]åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ</p><p>ä»å®šä¹‰ä¸Šæ¥è®²ï¼Œç©ºèŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œä¹Ÿæ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¿™æ˜¯å¯ä»¥è¯´å¾—é€šçš„ã€‚</p><p>ä»é€’å½’å…¬å¼ä¸Šæ¥è®²ï¼Œdp[ä»¥jä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡] * dp[ä»¥jä¸ºå¤´ç»“ç‚¹å³å­æ ‘èŠ‚ç‚¹æ•°é‡] ä¸­ä»¥jä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡ä¸º0ï¼Œä¹Ÿéœ€è¦dp[ä»¥jä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡] = 1ï¼Œ å¦åˆ™ä¹˜æ³•çš„ç»“æœå°±éƒ½å˜æˆ0äº†ã€‚</p><p>æ‰€ä»¥åˆå§‹åŒ–dp[0] = 1</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>é¦–å…ˆä¸€å®šæ˜¯éå†èŠ‚ç‚¹æ•°ï¼Œä»é€’å½’å…¬å¼ï¼šdp[i] += dp[j - 1] * dp[i - j]å¯ä»¥çœ‹å‡ºï¼ŒèŠ‚ç‚¹æ•°ä¸ºiçš„çŠ¶æ€æ˜¯ä¾é  iä¹‹å‰èŠ‚ç‚¹æ•°çš„çŠ¶æ€ã€‚</p><p>é‚£ä¹ˆéå†ié‡Œé¢æ¯ä¸€ä¸ªæ•°ä½œä¸ºå¤´ç»“ç‚¹çš„çŠ¶æ€ï¼Œç”¨jæ¥éå†ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= i; j++) &#123;<br>        dp[i] += dp[j - <span class="hljs-number">1</span>] * dp[i - j];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><p>nä¸º5æ—¶å€™çš„dpæ•°ç»„çŠ¶æ€å¦‚å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210107093253987.png" alt="96.ä¸åŒçš„äºŒå‰æœç´¢æ ‘3"></p><h2 id="11-8-0-1èƒŒåŒ…ç†è®ºåŸºç¡€"><a href="#11-8-0-1èƒŒåŒ…ç†è®ºåŸºç¡€" class="headerlink" title="11.8 0 - 1èƒŒåŒ…ç†è®ºåŸºç¡€"></a>11.8 0 - 1èƒŒåŒ…ç†è®ºåŸºç¡€</h2><p>ä¾ç„¶åŠ¨è§„äº”éƒ¨æ›²åˆ†æä¸€æ³¢ã€‚</p><ol><li>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>å¯¹äºèƒŒåŒ…é—®é¢˜ï¼Œæœ‰ä¸€ç§å†™æ³•ï¼Œ æ˜¯ä½¿ç”¨äºŒç»´æ•°ç»„ï¼Œå³<strong>dp[i][j] è¡¨ç¤ºä»ä¸‹æ ‡ä¸º[0-i]çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œä»·å€¼æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘</strong>ã€‚</p><p>åªçœ‹è¿™ä¸ªäºŒç»´æ•°ç»„çš„å®šä¹‰ï¼Œå¤§å®¶ä¸€å®šä¼šæœ‰ç‚¹æ‡µï¼Œçœ‹ä¸‹é¢è¿™ä¸ªå›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210110103003361.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜1"></p><p><strong>è¦æ—¶åˆ»è®°ç€è¿™ä¸ªdpæ•°ç»„çš„å«ä¹‰ï¼Œä¸‹é¢çš„ä¸€äº›æ­¥éª¤éƒ½å›´ç»•è¿™dpæ•°ç»„çš„å«ä¹‰è¿›è¡Œçš„</strong>ï¼Œå¦‚æœå“ªé‡Œçœ‹æ‡µäº†ï¼Œå°±æ¥å›é¡¾ä¸€ä¸‹iä»£è¡¨ä»€ä¹ˆï¼Œjåˆä»£è¡¨ä»€ä¹ˆã€‚</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>å†å›é¡¾ä¸€ä¸‹dp[i] [j]çš„å«ä¹‰ï¼šä»ä¸‹æ ‡ä¸º[0-i]çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œä»·å€¼æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘ã€‚</p><p>é‚£ä¹ˆå¯ä»¥æœ‰ä¸¤ä¸ªæ–¹å‘æ¨å‡ºæ¥dp[i] [j]ï¼Œ</p><ul><li><strong>ä¸æ”¾ç‰©å“i</strong>ï¼šç”±dp[i - 1] [j]æ¨å‡ºï¼Œå³èƒŒåŒ…å®¹é‡ä¸ºjï¼Œé‡Œé¢ä¸æ”¾ç‰©å“içš„æœ€å¤§ä»·å€¼ï¼Œæ­¤æ—¶dp[i] [j]å°±æ˜¯dp[i - 1] [j]ã€‚(å…¶å®å°±æ˜¯å½“ç‰©å“içš„é‡é‡å¤§äºèƒŒåŒ…jçš„é‡é‡æ—¶ï¼Œç‰©å“iæ— æ³•æ”¾è¿›èƒŒåŒ…ä¸­ï¼Œæ‰€ä»¥è¢«èƒŒåŒ…å†…çš„ä»·å€¼ä¾ç„¶å’Œå‰é¢ç›¸åŒã€‚)</li><li><strong>æ”¾ç‰©å“i</strong>ï¼šç”±dp[i - 1] [j - weight[i]]æ¨å‡ºï¼Œdp[i - 1] [j - weight[i]] ä¸ºèƒŒåŒ…å®¹é‡ä¸ºj - weight[i]çš„æ—¶å€™ä¸æ”¾ç‰©å“içš„æœ€å¤§ä»·å€¼ï¼Œé‚£ä¹ˆdp[i - 1] [j - weight[i]] + value[i] ï¼ˆç‰©å“içš„ä»·å€¼ï¼‰ï¼Œå°±æ˜¯èƒŒåŒ…æ”¾ç‰©å“iå¾—åˆ°çš„æœ€å¤§ä»·å€¼</li></ul><p>æ‰€ä»¥é€’å½’å…¬å¼ï¼š dp[i] [j] = max(dp[i - 1] [j], dp[i - 1] [j - weight[i]] + value[i]);</p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p><strong>å…³äºåˆå§‹åŒ–ï¼Œä¸€å®šè¦å’Œdpæ•°ç»„çš„å®šä¹‰å»åˆï¼Œå¦åˆ™åˆ°é€’æ¨å…¬å¼çš„æ—¶å€™å°±ä¼šè¶Šæ¥è¶Šä¹±</strong>ã€‚</p><p>é¦–å…ˆä»dp[i][j]çš„å®šä¹‰å‡ºå‘ï¼Œå¦‚æœèƒŒåŒ…å®¹é‡jä¸º0çš„è¯ï¼Œå³dp[i][0]ï¼Œæ— è®ºæ˜¯é€‰å–å“ªäº›ç‰©å“ï¼ŒèƒŒåŒ…ä»·å€¼æ€»å’Œä¸€å®šä¸º0ã€‚å¦‚å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/2021011010304192.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜2"></p><p>åœ¨çœ‹å…¶ä»–æƒ…å†µã€‚</p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ dp[i][j] = max(dp[i - 1] [j], dp[i - 1] [j - weight[i]] + value[i]); å¯ä»¥çœ‹å‡ºi æ˜¯ç”± i-1 æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆiä¸º0çš„æ—¶å€™å°±ä¸€å®šè¦åˆå§‹åŒ–ã€‚</p><p>dp[0] [j]ï¼Œå³ï¼šiä¸º0ï¼Œå­˜æ”¾ç¼–å·0çš„ç‰©å“çš„æ—¶å€™ï¼Œå„ä¸ªå®¹é‡çš„èƒŒåŒ…æ‰€èƒ½å­˜æ”¾çš„æœ€å¤§ä»·å€¼ã€‚</p><p>é‚£ä¹ˆå¾ˆæ˜æ˜¾å½“ j &lt; weight[0]çš„æ—¶å€™ï¼Œdp[0] [j] åº”è¯¥æ˜¯ 0ï¼Œå› ä¸ºèƒŒåŒ…å®¹é‡æ¯”ç¼–å·0çš„ç‰©å“é‡é‡è¿˜å°ã€‚</p><p>å½“j &gt;= weight[0]æ—¶ï¼Œdp[0] [j] åº”è¯¥æ˜¯value[0]ï¼Œå› ä¸ºèƒŒåŒ…å®¹é‡æ”¾è¶³å¤Ÿæ”¾ç¼–å·0ç‰©å“ã€‚</p><p>ä»£ç åˆå§‹åŒ–å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span> ; j &lt; weight[<span class="hljs-number">0</span>]; j++) &#123;  <span class="hljs-comment">// å½“ç„¶è¿™ä¸€æ­¥ï¼Œå¦‚æœæŠŠdpæ•°ç»„é¢„å…ˆåˆå§‹åŒ–ä¸º0äº†ï¼Œè¿™ä¸€æ­¥å°±å¯ä»¥çœç•¥ï¼Œä½†å¾ˆå¤šåŒå­¦åº”è¯¥æ²¡æœ‰æƒ³æ¸…æ¥šè¿™ä¸€ç‚¹ã€‚</span><br>    dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// æ­£åºéå†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = weight[<span class="hljs-number">0</span>]; j &lt;= bagweight; j++) &#123;<br>    dp[<span class="hljs-number">0</span>][j] = value[<span class="hljs-number">0</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶dpæ•°ç»„åˆå§‹åŒ–æƒ…å†µå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210110103109140.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜7"></p><p>dp[0] [j] å’Œ dp[i] [0] éƒ½å·²ç»åˆå§‹åŒ–äº†ï¼Œé‚£ä¹ˆå…¶ä»–ä¸‹æ ‡åº”è¯¥åˆå§‹åŒ–å¤šå°‘å‘¢ï¼Ÿ</p><p>å…¶å®ä»é€’å½’å…¬å¼ï¼š dp[i] [j] = max(dp[i - 1] [j], dp[i - 1] [j - weight[i]] + value[i]); å¯ä»¥çœ‹å‡ºdp[i][j] æ˜¯ç”±å·¦ä¸Šæ–¹æ•°å€¼æ¨å¯¼å‡ºæ¥äº†ï¼Œé‚£ä¹ˆ å…¶ä»–ä¸‹æ ‡åˆå§‹ä¸ºä»€ä¹ˆæ•°å€¼éƒ½å¯ä»¥ï¼Œå› ä¸ºéƒ½ä¼šè¢«è¦†ç›–ã€‚</p><p><strong>åˆå§‹-1ï¼Œåˆå§‹-2ï¼Œåˆå§‹100ï¼Œéƒ½å¯ä»¥ï¼</strong></p><p>ä½†åªä¸è¿‡ä¸€å¼€å§‹å°±ç»Ÿä¸€æŠŠdpæ•°ç»„ç»Ÿä¸€åˆå§‹ä¸º0ï¼Œæ›´æ–¹ä¾¿ä¸€äº›ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="https://code-thinking.cdn.bcebos.com/pics/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%9810.jpg" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜10"></p><p>æœ€ååˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">// åˆå§‹åŒ– dp<br>vector&lt;vector&lt;int&gt;&gt; dp(weight.size(), vector&lt;int&gt;(bagweight + 1, 0));<br>for (int j = weight[0]; j &lt;= bagweight; j++) &#123;<br>    dp[0][j] = value[0];<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è´¹äº†è¿™ä¹ˆå¤§çš„åŠŸå¤«ï¼Œæ‰æŠŠå¦‚ä½•åˆå§‹åŒ–è®²æ¸…æ¥šï¼Œç›¸ä¿¡ä¸å°‘åŒå­¦å¹³æ—¶åˆå§‹åŒ–dpæ•°ç»„æ˜¯å‡­æ„Ÿè§‰æ¥çš„ï¼Œä½†æœ‰æ—¶å€™æ„Ÿè§‰æ˜¯ä¸é è°±çš„</strong>ã€‚</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>åœ¨å¦‚ä¸‹å›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸¤ä¸ªéå†çš„ç»´åº¦ï¼šç‰©å“ä¸èƒŒåŒ…é‡é‡</p><p><img src="https://img-blog.csdnimg.cn/2021011010314055.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜3"></p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<strong>å…ˆéå† ç‰©å“è¿˜æ˜¯å…ˆéå†èƒŒåŒ…é‡é‡å‘¢ï¼Ÿ</strong></p><p><strong>å…¶å®éƒ½å¯ä»¥ï¼ï¼ ä½†æ˜¯å…ˆéå†ç‰©å“æ›´å¥½ç†è§£</strong>ã€‚</p><p>é‚£ä¹ˆæˆ‘å…ˆç»™å‡ºå…ˆéå†ç‰©å“ï¼Œç„¶åéå†èƒŒåŒ…é‡é‡çš„ä»£ç ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// weightæ•°ç»„çš„å¤§å° å°±æ˜¯ç‰©å“ä¸ªæ•°</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; weight.size(); i++) &#123; <span class="hljs-comment">// éå†ç‰©å“</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= bagweight; j++) &#123; <span class="hljs-comment">// éå†èƒŒåŒ…å®¹é‡</span><br>        <span class="hljs-keyword">if</span> (j &lt; weight[i]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]; <br>        <span class="hljs-keyword">else</span> dp[i][j] = max(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weight[i]] + value[i]);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å…ˆéå†èƒŒåŒ…ï¼Œå†éå†ç‰©å“ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼ï¼ˆæ³¨æ„æˆ‘è¿™é‡Œä½¿ç”¨çš„äºŒç»´dpæ•°ç»„ï¼‰</strong></p><p>ä¾‹å¦‚è¿™æ ·ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// weightæ•°ç»„çš„å¤§å° å°±æ˜¯ç‰©å“ä¸ªæ•°</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= bagweight; j++) &#123; <span class="hljs-comment">// éå†èƒŒåŒ…å®¹é‡</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; weight.size(); i++) &#123; <span class="hljs-comment">// éå†ç‰©å“</span><br>        <span class="hljs-keyword">if</span> (j &lt; weight[i]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];<br>        <span class="hljs-keyword">else</span> dp[i][j] = max(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weight[i]] + value[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¹Ÿæ˜¯å¯ä»¥çš„å‘¢ï¼Ÿ</p><p><strong>è¦ç†è§£é€’å½’çš„æœ¬è´¨å’Œé€’æ¨çš„æ–¹å‘</strong>ã€‚</p><p>dp[i] [j] = max(dp[i - 1] [j], dp[i - 1] [j - weight[i]] + value[i]); é€’å½’å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºdp[i] [j]æ˜¯é dp[i-1] [j]å’Œdp[i - 1] [j - weight[i]]æ¨å¯¼å‡ºæ¥çš„ã€‚</p><p>dp[i-1] [j]å’Œdp[i - 1] [j - weight[i]] éƒ½åœ¨dp[i] [j]çš„å·¦ä¸Šè§’æ–¹å‘ï¼ˆåŒ…æ‹¬æ­£ä¸Šæ–¹å‘ï¼‰ï¼Œé‚£ä¹ˆå…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…çš„è¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/202101101032124.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜5"></p><p>å†æ¥çœ‹çœ‹å…ˆéå†èƒŒåŒ…ï¼Œå†éå†ç‰©å“å‘¢ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210110103244701.png" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜6"></p><p><strong>å¤§å®¶å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ä¸¤ä¸ªforå¾ªç¯éå†çš„æ¬¡åºä¸åŒï¼Œä½†æ˜¯dp[i][j]æ‰€éœ€è¦çš„æ•°æ®å°±æ˜¯å·¦ä¸Šè§’ï¼Œæ ¹æœ¬ä¸å½±å“dp[i][j]å…¬å¼çš„æ¨å¯¼ï¼</strong></p><p>ä½†å…ˆéå†ç‰©å“å†éå†èƒŒåŒ…è¿™ä¸ªé¡ºåºæ›´å¥½ç†è§£ã€‚</p><p><strong>å…¶å®èƒŒåŒ…é—®é¢˜é‡Œï¼Œä¸¤ä¸ªforå¾ªç¯çš„å…ˆåå¾ªåºæ˜¯éå¸¸æœ‰è®²ç©¶çš„ï¼Œç†è§£éå†é¡ºåºå…¶å®æ¯”ç†è§£æ¨å¯¼å…¬å¼éš¾å¤šäº†</strong>ã€‚</p><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><p>æ¥çœ‹ä¸€ä¸‹å¯¹åº”çš„dpæ•°ç»„çš„æ•°å€¼ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210118163425129.jpg" alt="åŠ¨æ€è§„åˆ’-èƒŒåŒ…é—®é¢˜4"></p><p>æœ€ç»ˆç»“æœå°±æ˜¯dp[2] [4]ã€‚</p><p>å»ºè®®å¤§å®¶æ­¤æ—¶è‡ªå·±åœ¨çº¸ä¸Šæ¨å¯¼ä¸€éï¼Œçœ‹çœ‹dpæ•°ç»„é‡Œæ¯ä¸€ä¸ªæ•°å€¼æ˜¯ä¸æ˜¯è¿™æ ·çš„ã€‚</p><p><strong>åšåŠ¨æ€è§„åˆ’çš„é¢˜ç›®ï¼Œæœ€å¥½çš„è¿‡ç¨‹å°±æ˜¯è‡ªå·±åœ¨çº¸ä¸Šä¸¾ä¸€ä¸ªä¾‹å­æŠŠå¯¹åº”çš„dpæ•°ç»„çš„æ•°å€¼æ¨å¯¼ä¸€ä¸‹ï¼Œç„¶ååœ¨åŠ¨æ‰‹å†™ä»£ç ï¼</strong></p><p>äºŒç»´å˜æˆä¸€ç»´åçš„ä¸»è¦å˜åŒ–åœ¨éå†é¡ºåºä¸Šã€‚</p><p><strong>å€’åºéå†æ˜¯ä¸ºäº†ä¿è¯ç‰©å“iåªè¢«æ”¾å…¥ä¸€æ¬¡ï¼</strong>ã€‚ä½†å¦‚æœä¸€æ—¦æ­£åºéå†äº†ï¼Œé‚£ä¹ˆç‰©å“0å°±ä¼šè¢«é‡å¤åŠ å…¥å¤šæ¬¡ï¼</p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼šç‰©å“0çš„é‡é‡weight[0] = 1ï¼Œä»·å€¼value[0] = 15</p><p>å¦‚æœæ­£åºéå†</p><p>dp[1] = dp[1 - weight[0]] + value[0] = 15</p><p>dp[2] = dp[2 - weight[0]] + value[0] = 30</p><p>æ­¤æ—¶dp[2]å°±å·²ç»æ˜¯30äº†ï¼Œæ„å‘³ç€ç‰©å“0ï¼Œè¢«æ”¾å…¥äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥ä¸èƒ½æ­£åºéå†ã€‚</p><p>ä¸ºä»€ä¹ˆå€’åºéå†ï¼Œå°±å¯ä»¥ä¿è¯ç‰©å“åªæ”¾å…¥ä¸€æ¬¡å‘¢ï¼Ÿ</p><p>å€’åºå°±æ˜¯å…ˆç®—dp[2]</p><p>dp[2] = dp[2 - weight[0]] + value[0] = 15 ï¼ˆdpæ•°ç»„å·²ç»éƒ½åˆå§‹åŒ–ä¸º0ï¼‰</p><p>dp[1] = dp[1 - weight[0]] + value[0] = 15</p><p>æ­£åºå°±æ˜¯è¿­ä»£çš„è¿‡ç¨‹ï¼Œä¸ä¼šè€ƒè™‘ä¸Šå±‚æœ‰ä»€ä¹ˆä¼šéšæœºæ·»åŠ ï¼Œä»–ä¼šæ·»åŠ åŒæ ·çš„ä¸œè¥¿ï¼›è€Œå€’åºæ˜¯é€’å½’ï¼Œä»–ä¼šæ ¹æ®å½“å‰çŠ¶æ€å»å¾€ä¸‹æ‰¾çŠ¶æ€ï¼Œä»–éœ€è¦åº•å±‚çš„å†…å®¹æ”¯æŒï¼Œæ˜¯æœ‰è§„åˆ™è§„å®šçš„ã€‚</p><p>äºŒç»´æ•°ç»„æ•°æ®æ˜¯éš”ç¦»çš„ï¼Œè€Œä¸€ç»´çš„éƒ½åœ¨åŒä¸€è¡Œï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿæ­£åºéå†ã€‚</p><h2 id="11-9-åˆ†å‰²ç­‰å’Œå­é›†"><a href="#11-9-åˆ†å‰²ç­‰å’Œå­é›†" class="headerlink" title="11.9 åˆ†å‰²ç­‰å’Œå­é›†"></a>11.9 åˆ†å‰²ç­‰å’Œå­é›†</h2><p><strong>416. Partition Equal Subset Sum</strong></p><p><strong>Qï¼š</strong>Given a <strong>non-empty</strong> array <code>nums</code> containing <strong>only positive integers</strong>, find if the array can be partitioned into two subsets such that the sum of elements in both subsets is equal.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// åˆ†å‰²ç­‰å’Œå­é›† åŠ¨æ€è§„åˆ’</span><br><span class="hljs-comment">// æ—¶é—´å¤æ‚åº¦O(n^2) ç©ºé—´å¤æ‚åº¦O(n)</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canPartition</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    sum := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> _, num := <span class="hljs-keyword">range</span> nums &#123;<br>        sum += num<br>    &#125;<br>    <span class="hljs-comment">// å¦‚æœ nums çš„æ€»å’Œä¸ºå¥‡æ•°åˆ™ä¸å¯èƒ½å¹³åˆ†æˆä¸¤ä¸ªå­é›†</span><br>    <span class="hljs-keyword">if</span> sum % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <br>    target := sum / <span class="hljs-number">2</span><br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, target + <span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">for</span> _, num := <span class="hljs-keyword">range</span> nums &#123;<br>        <span class="hljs-keyword">for</span> j := target; j &gt;= num; j-- &#123;<br>            <span class="hljs-keyword">if</span> dp[j] &lt; dp[j - num] + num &#123; <span class="hljs-comment">// å¦‚æœèƒ½èƒ½æ”¾ä¸‹numï¼ˆé‡é‡j - numï¼‰å¹¶ä¸”ä»·å€¼å¢åŠ ä¸ºnumåå¤§äºå½“å‰çš„ä»·å€¼ï¼Œé‚£ä¹ˆå°±æ›´æ–°</span><br>                dp[j] = dp[j - num] + num<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[target] == target<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canPartition</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">    åŠ¨æ€äº”éƒ¨æ›²ï¼š</span><br><span class="hljs-comment">        1.ç¡®å®šdpæ•°ç»„å’Œä¸‹æ ‡å«ä¹‰</span><br><span class="hljs-comment">        2.ç¡®å®šé€’æ¨å…¬å¼</span><br><span class="hljs-comment">        3.dpæ•°ç»„åˆå§‹åŒ–</span><br><span class="hljs-comment">        4.dpéå†é¡ºåº</span><br><span class="hljs-comment">        5.æ‰“å°</span><br><span class="hljs-comment">    **/</span><br>    <span class="hljs-comment">//ç¡®å®šå’Œ</span><br>    <span class="hljs-keyword">var</span> sum <span class="hljs-type">int</span><br>    <span class="hljs-keyword">for</span> _,v:=<span class="hljs-keyword">range</span> nums&#123;<br>        sum+=v<br>    &#125;<br>    <span class="hljs-keyword">if</span> sum%<span class="hljs-number">2</span>!=<span class="hljs-number">0</span>&#123;   <span class="hljs-comment">//å¦‚æœå’Œä¸ºå¥‡æ•°ï¼Œåˆ™ä¸å¯èƒ½åˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„æ•°ç»„</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    sum/=<span class="hljs-number">2</span><br>    <span class="hljs-comment">//ç¡®å®šdpæ•°ç»„å’Œä¸‹æ ‡å«ä¹‰</span><br>    <span class="hljs-keyword">var</span> dp [][]<span class="hljs-type">bool</span> <span class="hljs-comment">//dp[i][j] è¡¨ç¤ºï¼š å‰iä¸ªçŸ³å¤´æ˜¯å¦æ€»å’Œä¸å¤§äºj</span><br>    <span class="hljs-comment">//åˆå§‹åŒ–æ•°ç»„</span><br>    dp=<span class="hljs-built_in">make</span>([][]<span class="hljs-type">bool</span>,<span class="hljs-built_in">len</span>(nums)+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i,_:=<span class="hljs-keyword">range</span> dp&#123;<br>        dp[i]=<span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>,sum+<span class="hljs-number">1</span>)<br>        dp[i][<span class="hljs-number">0</span>]=<span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-built_in">len</span>(nums);i++&#123;<br>        <span class="hljs-keyword">for</span> j:=<span class="hljs-number">1</span>;j&lt;=sum;j++&#123;<span class="hljs-comment">//jæ˜¯å›ºå®šæ€»é‡</span><br>            <span class="hljs-keyword">if</span> j&gt;=nums[i<span class="hljs-number">-1</span>]&#123;<span class="hljs-comment">//å¦‚æœå®¹é‡å¤Ÿç”¨åˆ™å¯æ”¾å…¥èƒŒåŒ…</span><br>                dp[i][j]=dp[i<span class="hljs-number">-1</span>][j]||dp[i<span class="hljs-number">-1</span>][j-nums[i<span class="hljs-number">-1</span>]]<br>            &#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-comment">//å¦‚æœå®¹é‡ä¸å¤Ÿç”¨åˆ™ä¸æ‹¿ï¼Œç»´æŒå‰ä¸€ä¸ªçŠ¶æ€</span><br>                dp[i][j]=dp[i<span class="hljs-number">-1</span>][j]<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(nums)][sum]<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåªè¦æ‰¾åˆ°é›†åˆé‡Œèƒ½å¤Ÿå‡ºç° sum / 2 çš„å­é›†æ€»å’Œï¼Œå°±ç®—æ˜¯å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªç›¸åŒå…ƒç´ å’Œå­é›†äº†ã€‚</p><p>å…³é”®ç‚¹åˆ¤æ–­èƒ½ä¸èƒ½é‡å¤æ”¾å…¥ï¼ˆæˆ‘ä»¬éœ€è¦ä¸å¯é‡å¤æ”¾å…¥ï¼‰</p><p><strong>åªæœ‰ç¡®å®šäº†å¦‚ä¸‹å››ç‚¹ï¼Œæ‰èƒ½æŠŠ01èƒŒåŒ…é—®é¢˜å¥—åˆ°æœ¬é¢˜ä¸Šæ¥ã€‚</strong></p><ul><li>èƒŒåŒ…çš„ä½“ç§¯ä¸ºsum / 2</li><li>èƒŒåŒ…è¦æ”¾å…¥çš„å•†å“ï¼ˆé›†åˆé‡Œçš„å…ƒç´ ï¼‰é‡é‡ä¸º å…ƒç´ çš„æ•°å€¼ï¼Œä»·å€¼ä¹Ÿä¸ºå…ƒç´ çš„æ•°å€¼</li><li>èƒŒåŒ…å¦‚æœæ­£å¥½è£…æ»¡ï¼Œè¯´æ˜æ‰¾åˆ°äº†æ€»å’Œä¸º sum / 2 çš„å­é›†ã€‚</li><li>èƒŒåŒ…ä¸­æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸å¯é‡å¤æ”¾å…¥ã€‚</li></ul><ol><li>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>â€‹       <strong>dp[j]è¡¨ç¤º èƒŒåŒ…æ€»å®¹é‡æ˜¯jï¼Œæœ€å¤§å¯ä»¥å‡‘æˆjçš„å­é›†æ€»å’Œä¸ºdp[j]</strong>ã€‚ä½†æ˜¯dp[j]æ˜¯è‚¯å®šå°äºç­‰äºsum/2çš„ã€‚jä»£è¡¨èƒ½å­˜æ”¾çš„æ‰€æœ‰å¯èƒ½æ€§</p><ol><li><p>ç¡®å®šé€’æ¨å…¬å¼</p><p>dp[j] = max(dp[j], dp[j - 1] + nums[i])</p></li><li><p>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</p><p>dp[0] = 0</p><p>dp[1] = nums[0]</p></li><li><p>ç¡®å®šéå†é¡ºåº</p><p>é€‰æ•°å­—æ˜¯ä»å‰å¾€åï¼Œé€‰æ•°å€¼æ˜¯ä»åå¾€å‰</p></li><li><p>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</p></li></ol><p>01èƒŒåŒ…ç›¸å¯¹äºæœ¬é¢˜ï¼Œä¸»è¦è¦ç†è§£ï¼Œé¢˜ç›®ä¸­ç‰©å“æ˜¯nums[i]ï¼Œé‡é‡æ˜¯nums[i]ï¼Œä»·å€¼ä¹Ÿæ˜¯nums[i]ï¼ŒèƒŒåŒ…ä½“ç§¯æ˜¯sum/2ã€‚</p><h2 id="11-10-ç›®æ ‡å’Œ"><a href="#11-10-ç›®æ ‡å’Œ" class="headerlink" title="11.10 ç›®æ ‡å’Œ"></a>11.10 ç›®æ ‡å’Œ</h2><p><strong>494. Target Sum</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>nums</code> and an integer <code>target</code>.</p><p>You want to build an <strong>expression</strong> out of nums by adding one of the symbols <code>&#39;+&#39;</code> and <code>&#39;-&#39;</code> before each integer in nums and then concatenate all the integers.</p><ul><li>For example, if <code>nums = [2, 1]</code>, you can add a <code>&#39;+&#39;</code> before <code>2</code> and a <code>&#39;-&#39;</code> before <code>1</code> and concatenate them to build the expression <code>&quot;+2-1&quot;</code>.</li></ul><p>Return the number of different <strong>expressions</strong> that you can build, which evaluates to <code>target</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findTargetSumWays</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>sum := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> nums &#123;<br>sum += v<br>&#125;<br><span class="hljs-keyword">if</span> abs(target) &gt; sum &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">if</span> (sum+target)%<span class="hljs-number">2</span> == <span class="hljs-number">1</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-comment">// è®¡ç®—èƒŒåŒ…å¤§å°</span><br>bag := (sum + target) / <span class="hljs-number">2</span><br><span class="hljs-comment">// å®šä¹‰dpæ•°ç»„</span><br>dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, bag+<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åˆå§‹åŒ–</span><br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment">// éå†é¡ºåº</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br><span class="hljs-keyword">for</span> j := bag; j &gt;= nums[i]; j-- &#123;<br><span class="hljs-comment">//æ¨å¯¼å…¬å¼</span><br>dp[j] += dp[j-nums[i]]<br><span class="hljs-comment">//fmt.Println(dp)</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dp[bag]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">abs</span><span class="hljs-params">(x <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-type">int</span>(math.Abs(<span class="hljs-type">float64</span>(x)))<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç»„åˆçš„é—®é¢˜</p><p>é¢˜ç›®è¦æ±‚åœ¨æ•°ç»„å…ƒç´ å‰åŠ ä¸Š + æˆ–è€… - å·ï¼Œå…¶å®ç›¸å½“äºæŠŠæ•°ç»„åˆ†æˆäº† 2 ç»„ï¼Œä¸€ç»„å…¨éƒ¨éƒ½åŠ  + å·ï¼Œä¸€ç»„éƒ½åŠ  - å·ã€‚è®° + å·çš„ä¸€ç»„ P ï¼Œè®° - å·çš„ä¸€ç»„ Nï¼Œé‚£ä¹ˆå¯ä»¥æ¨å‡ºä»¥ä¸‹çš„å…³ç³»ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">sum(P) - sum(N) = target<br>sum(P) + sum(N) + sum(P) - sum(N) = target + sum(P) + sum(N)<br>                       <span class="hljs-number">2</span> * sum(P) = target + sum(nums)<br></code></pre></td></tr></table></figure><p>ç­‰å·ä¸¤è¾¹éƒ½åŠ ä¸Š <code>sum(N) + sum(P)</code>ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ°ç»“æœ <code>2 * sum(P) = target + sum(nums)</code>ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±è½¬æ¢æˆäº†ï¼Œèƒ½å¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªé›†åˆï¼Œå’Œç­‰äº <code>(target + sum(nums)) / 2</code>ã€‚é‚£ä¹ˆè¿™é¢˜å°±è½¬åŒ–ä¸ºäº†ç¬¬ 416 é¢˜äº†ã€‚<code>dp[i]</code> ä¸­å­˜å‚¨çš„æ˜¯èƒ½ä½¿å’Œä¸º <code>i</code>çš„æ–¹æ³•ä¸ªæ•°ã€‚</p><h2 id="11-11-ä¸€å’Œé›¶"><a href="#11-11-ä¸€å’Œé›¶" class="headerlink" title="11.11 ä¸€å’Œé›¶"></a>11.11 ä¸€å’Œé›¶</h2><p><strong>474. Ones and Zeroes</strong></p><p><strong>Qï¼š</strong>You are given an array of binary strings <code>strs</code> and two integers <code>m</code> and <code>n</code>.</p><p>Return <em>the size of the largest subset of <code>strs</code> such that there are <strong>at most</strong></em> <code>m``0</code><em>â€˜s and</em> <code>n</code> <code>1</code><em>â€˜s in the subset</em>.</p><p>A set <code>x</code> is a <strong>subset</strong> of a set <code>y</code> if all elements of <code>x</code> are also elements of <code>y</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findMaxForm</span><span class="hljs-params">(strs []<span class="hljs-type">string</span>, m <span class="hljs-type">int</span>, n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-comment">// å®šä¹‰æ•°ç»„</span><br>dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i,_ := <span class="hljs-keyword">range</span> dp &#123;<br>dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span> )<br>&#125;<br><span class="hljs-comment">// éå†</span><br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(strs);i++ &#123;<br>zeroNum,oneNum := <span class="hljs-number">0</span> , <span class="hljs-number">0</span><br><span class="hljs-comment">//è®¡ç®—0,1 ä¸ªæ•°</span><br><span class="hljs-comment">//æˆ–è€…ç›´æ¥strings.Count(strs[i],&quot;0&quot;)</span><br><span class="hljs-keyword">for</span> _,v := <span class="hljs-keyword">range</span> strs[i] &#123;<br><span class="hljs-keyword">if</span> v == <span class="hljs-string">&#x27;0&#x27;</span> &#123;<br>zeroNum++<br>&#125;<br>&#125;<br>oneNum = <span class="hljs-built_in">len</span>(strs[i])-zeroNum<br><span class="hljs-comment">// ä»åå¾€å‰ éå†èƒŒåŒ…å®¹é‡</span><br><span class="hljs-keyword">for</span> j:= m ; j &gt;= zeroNum;j-- &#123;<br><span class="hljs-keyword">for</span> k:=n ; k &gt;= oneNum;k-- &#123;<br><span class="hljs-comment">// æ¨å¯¼å…¬å¼</span><br>dp[j][k] = max(dp[j][k],dp[j-zeroNum][k-oneNum]+<span class="hljs-number">1</span>)<br>&#125;<br>&#125;<br><span class="hljs-comment">//fmt.Println(dp)</span><br>&#125;<br><span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> a &gt; b &#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210117171307407.png" alt="416.åˆ†å‰²ç­‰å’Œå­é›†1"></p><p>0 1èƒŒåŒ…çš„é—®é¢˜ï¼Œå¤§ä½“æ„Ÿè§‰å°±æ˜¯æˆ‘æœ¬èº«æ²¡æœ‰ä¸œè¥¿ï¼Œæˆ‘ä¸€ç‚¹ç‚¹æ”¾ä¸œè¥¿æ‰€ä»¥åˆå§‹å€¼å¯ä»¥ä¸º0ï¼Œè¿­ä»£å…¬å¼å°±æ˜¯xxx + 1</p><p>çŠ¶æ€å›¾</p><p><img src="https://img-blog.csdnimg.cn/20210120111201512.jpg" alt="474.ä¸€å’Œé›¶"></p><p>æ­¤æ—¶dp[j]æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯å–è‡ªå·±dp[j] ç›¸å½“äº äºŒç»´dpæ•°ç»„ä¸­çš„dp[i-1] [j]ï¼Œå³ä¸æ”¾ç‰©å“iï¼Œä¸€ä¸ªæ˜¯å–dp[j - weight[i]] + value[i]ï¼Œå³æ”¾ç‰©å“iï¼ŒæŒ‡å®šæ˜¯å–æœ€å¤§çš„ï¼Œæ¯•ç«Ÿæ˜¯æ±‚æœ€å¤§ä»·å€¼ã€‚å‹ç¼©ä»¥åè¡Œæ²¡æœ‰äº†ï¼Œæ‰€ä»¥åªå‰©ä¸‹dp[j]ã€‚</p><h2 id="11-12-é›¶é’±å…‘æ¢-II"><a href="#11-12-é›¶é’±å…‘æ¢-II" class="headerlink" title="11.12 é›¶é’±å…‘æ¢ II"></a>11.12 é›¶é’±å…‘æ¢ II</h2><p><strong>518. Coin Change 2</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>coins</code> representing coins of different denominations and an integer <code>amount</code> representing a total amount of money.</p><p>Return <em>the number of combinations that make up that amount</em>. If that amount of money cannot be made up by any combination of the coins, return <code>0</code>.</p><p>You may assume that you have an infinite number of each kind of coin.</p><p>The answer is <strong>guaranteed</strong> to fit into a signed <strong>32-bit</strong> integer.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">change</span><span class="hljs-params">(amount <span class="hljs-type">int</span>, coins []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-comment">// å®šä¹‰dpæ•°ç»„</span><br>dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, amount+<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åˆå§‹åŒ–,0å¤§å°çš„èƒŒåŒ…, å½“ç„¶æ˜¯ä¸è£…ä»»ä½•ä¸œè¥¿äº†, å°±æ˜¯1ç§æ–¹æ³•</span><br>dp[<span class="hljs-number">0</span>]  = <span class="hljs-number">1</span><br><span class="hljs-comment">// éå†é¡ºåº</span><br><span class="hljs-comment">// éå†ç‰©å“</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span> ;i &lt; <span class="hljs-built_in">len</span>(coins);i++ &#123;<br><span class="hljs-comment">// éå†èƒŒåŒ…</span><br><span class="hljs-keyword">for</span> j:= coins[i] ; j &lt;= amount ;j++ &#123;<br><span class="hljs-comment">// æ¨å¯¼å…¬å¼</span><br>dp[j] += dp[j-coins[i]]<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dp[amount]<br>&#125;<br></code></pre></td></tr></table></figure><p>éå†é¡ºåº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; coins.<span class="hljs-built_in">size</span>(); i++) &#123; <span class="hljs-comment">// éå†ç‰©å“</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = coins[i]; j &lt;= amount; j++) &#123; <span class="hljs-comment">// éå†èƒŒåŒ…å®¹é‡</span><br>        dp[j] += dp[j - coins[i]];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡è®¾ï¼šcoins[0] = 1ï¼Œcoins[1] = 5ã€‚</p><p>é‚£ä¹ˆå°±æ˜¯å…ˆæŠŠ1åŠ å…¥è®¡ç®—ï¼Œç„¶åå†æŠŠ5åŠ å…¥è®¡ç®—ï¼Œå¾—åˆ°çš„æ–¹æ³•æ•°é‡åªæœ‰{1, 5}è¿™ç§æƒ…å†µã€‚è€Œä¸ä¼šå‡ºç°{5, 1}çš„æƒ…å†µã€‚</p><p><strong>æ‰€ä»¥è¿™ç§éå†é¡ºåºä¸­dp[j]é‡Œè®¡ç®—çš„æ˜¯ç»„åˆæ•°ï¼</strong></p><p>å¦‚æœæŠŠä¸¤ä¸ªforäº¤æ¢é¡ºåºï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">for (int j = 0; j &lt;= amount; j++) &#123; // éå†èƒŒåŒ…å®¹é‡<br>    for (int i = 0; i &lt; coins.size(); i++) &#123; // éå†ç‰©å“<br>        if (j - coins[i] &gt;= 0) dp[j] += dp[j - coins[i]];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>èƒŒåŒ…å®¹é‡çš„æ¯ä¸€ä¸ªå€¼ï¼Œéƒ½æ˜¯ç»è¿‡ 1 å’Œ 5 çš„è®¡ç®—ï¼ŒåŒ…å«äº†{1, 5} å’Œ {5, 1}ä¸¤ç§æƒ…å†µã€‚</p><p><strong>æ­¤æ—¶dp[j]é‡Œç®—å‡ºæ¥çš„å°±æ˜¯æ’åˆ—æ•°ï¼</strong></p><p>dpæ¨å¯¼</p><p><img src="https://img-blog.csdnimg.cn/20210120181331461.jpg" alt="518.é›¶é’±å…‘æ¢II"></p><p>åœ¨æ±‚è£…æ»¡èƒŒåŒ…æœ‰å‡ ç§æ–¹æ¡ˆçš„æ—¶å€™ï¼Œè®¤æ¸…éå†é¡ºåºæ˜¯éå¸¸å…³é”®çš„ã€‚</p><p><strong>å¦‚æœæ±‚ã€ç»„åˆæ•°ã€‘å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…</strong>ã€‚</p><p><strong>å¦‚æœæ±‚ã€æ’åˆ—æ•°ã€‘å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“</strong>ã€‚</p><p>ç»„åˆå†…å®¹ä¸èƒ½é‡å¤ï¼Œæ’åˆ—å†…å®¹å¯ä»¥é‡å¤ã€‚</p><h2 id="11-13-æ‹¼å‡‘ä¸€ä¸ªæ­£æ•´æ•°"><a href="#11-13-æ‹¼å‡‘ä¸€ä¸ªæ­£æ•´æ•°" class="headerlink" title="11.13 æ‹¼å‡‘ä¸€ä¸ªæ­£æ•´æ•°"></a>11.13 æ‹¼å‡‘ä¸€ä¸ªæ­£æ•´æ•°</h2><p><strong>377. Combination Sum IV</strong></p><p><strong>Qï¼š</strong>Given an array of <strong>distinct</strong> integers <code>nums</code> and a target integer <code>target</code>, return <em>the number of possible combinations that add up to</em> <code>target</code>.</p><p>The test cases are generated so that the answer can fit in a <strong>32-bit</strong> integer.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">combinationSum4</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-comment">//å®šä¹‰dpæ•°ç»„</span><br>dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, target+<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åˆå§‹åŒ–</span><br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment">// éå†é¡ºåº, å…ˆéå†èƒŒåŒ…,å†å¾ªç¯éå†ç‰©å“</span><br><span class="hljs-keyword">for</span> j:=<span class="hljs-number">0</span>;j&lt;=target;j++ &#123;<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span> ;i &lt; <span class="hljs-built_in">len</span>(nums);i++ &#123;<br><span class="hljs-keyword">if</span> j &gt;= nums[i] &#123;<br>dp[j] += dp[j-nums[i]] <span class="hljs-comment">// jå®¹é‡ä¸‹ï¼Œæˆ‘æ”¾å…¥ä¸åŒçš„nums[i]çš„é‡ï¼Œå¦‚æœå¯ä»¥æ”¾è¿›å»çœ‹çœ‹ï¼Œå½“å‰jå®¹é‡ä¸‹å¯ä»¥æ”¾å‡ ç§</span><br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dp[target]<br>&#125;<br></code></pre></td></tr></table></figure><p>å¼„æ¸…ä»€ä¹ˆæ˜¯ç»„åˆï¼Œä»€ä¹ˆæ˜¯æ’åˆ—å¾ˆé‡è¦ã€‚</p><p>ç»„åˆä¸å¼ºè°ƒé¡ºåºï¼Œ(1,5)å’Œ(5,1)æ˜¯åŒä¸€ä¸ªç»„åˆã€‚</p><p>æ’åˆ—å¼ºè°ƒé¡ºåºï¼Œ(1,5)å’Œ(5,1)æ˜¯ä¸¤ä¸ªä¸åŒçš„æ’åˆ—ã€‚</p><p>ä¸ªæ•°å¯ä»¥ä¸é™ä½¿ç”¨ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªå®Œå…¨èƒŒåŒ…ã€‚</p><p>å¾—åˆ°çš„é›†åˆæ˜¯æ’åˆ—ï¼Œè¯´æ˜éœ€è¦è€ƒè™‘å…ƒç´ ä¹‹é—´çš„é¡ºåºã€‚</p><p>æœ¬é¢˜è¦æ±‚çš„æ˜¯æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªforå¾ªç¯åµŒå¥—çš„é¡ºåºå¯ä»¥æœ‰è¯´æ³•äº†ã€‚</p><p><strong>å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…</strong>ã€‚</p><p><strong>å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“</strong>ã€‚</p><p>è¿™é“é¢˜èƒŒåŒ…å®¹é‡å¯ä»¥æ˜¯ä»1å¼€å§‹çš„å› ä¸º0å®¹é‡çš„æ—¶å€™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè‚¯å®šåˆ°è¾¾ä¸äº†targetã€‚</p><h2 id="11-14-é›¶é’±å…‘æ¢"><a href="#11-14-é›¶é’±å…‘æ¢" class="headerlink" title="11.14 é›¶é’±å…‘æ¢"></a>11.14 é›¶é’±å…‘æ¢</h2><p><strong>322. Coin Change</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>coins</code> representing coins of different denominations and an integer <code>amount</code> representing a total amount of money.</p><p>Return <em>the fewest number of coins that you need to make up that amount</em>. If that amount of money cannot be made up by any combination of the coins, return <code>-1</code>.</p><p>You may assume that you have an infinite number of each kind of coin.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">coinChange</span><span class="hljs-params">(coins []<span class="hljs-type">int</span>, amount <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, amount+<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åˆå§‹åŒ–dp[0]</span><br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-comment">// éå†èƒŒåŒ…,ä»1å¼€å§‹</span><br><span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= amount; j++ &#123;<br><span class="hljs-comment">// åˆå§‹åŒ–ä¸ºmath.MaxInt32</span><br>dp[j] = math.MaxInt32<br><span class="hljs-comment">// éå†ç‰©å“</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(coins); i++ &#123;<br><span class="hljs-keyword">if</span> j &gt;= coins[i] &#123;<br><span class="hljs-comment">// æ¨å¯¼å…¬å¼</span><br>dp[j] = min(dp[j], dp[j-coins[i]]+<span class="hljs-number">1</span>)<br><span class="hljs-comment">//fmt.Println(dp)</span><br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">// æ²¡æ‰¾åˆ°èƒ½è£…æ»¡èƒŒåŒ…çš„, å°±è¿”å›-1</span><br><span class="hljs-keyword">if</span> dp[amount] == math.MaxInt32 &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>&#125;<br><span class="hljs-keyword">return</span> dp[amount]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>math.MaxInt32ï¼Œæœ€å¤§å¯ä»¥æ˜¯64</p><ol><li>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p><strong>dp[j]ï¼šå‡‘è¶³æ€»é¢ä¸ºjæ‰€éœ€é’±å¸çš„æœ€å°‘ä¸ªæ•°ä¸ºdp[j]</strong></p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>å¾—åˆ°dp[j]ï¼ˆè€ƒè™‘coins[i]ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªæ¥æºï¼Œdp[j - coins[i]]ï¼ˆæ²¡æœ‰è€ƒè™‘coins[i]ï¼‰ã€‚</p><p>å‡‘è¶³æ€»é¢ä¸ºj - coins[i]çš„æœ€å°‘ä¸ªæ•°ä¸ºdp[j - coins[i]]ï¼Œé‚£ä¹ˆåªéœ€è¦åŠ ä¸Šä¸€ä¸ªé’±å¸coins[i]å³dp[j - coins[i]] + 1å°±æ˜¯dp[j]ï¼ˆè€ƒè™‘coins[i]ï¼‰</p><p>æ‰€ä»¥dp[j] è¦å–æ‰€æœ‰ dp[j - coins[i]] + 1 ä¸­æœ€å°çš„ã€‚</p><p>é€’æ¨å…¬å¼ï¼šdp[j] = min(dp[j - coins[i]] + 1, dp[j]);</p><p><code>dp[j] = min(dp[j], dp[j-coins[i]]+1)</code> åœ¨å½“å‰å®¹é‡jä¸‹ï¼ŒæŠ•æ”¾ç¡¬å¸æ‰€æœ‰å¯èƒ½æ€§coins[i]ï¼ˆå¦‚æœä½ é€‰æ‹©ä¸€ä¸ªå¾ˆå¤§çš„ï¼Œä»–å°±ä¼šå¾€å‰è·³å¾ˆå¤šå»æ‰¾ï¼Œè¿™æ ·è·³çš„æ­¥é•¿å¤§ï¼Œèµ°çš„æ¬¡æ•°å°±å°‘ï¼‰ï¼Œå°†ä¸dp[j]ï¼ˆå¦‚æœæ²¡æœ‰æ›´æ–°è¿‡ä¸ºMaxï¼‰æ›´å°çš„æ•°é‡ä¸ºdp[j]çš„æ•°é‡</p><h2 id="11-15-å®Œå…¨å¹³æ–¹æ•°"><a href="#11-15-å®Œå…¨å¹³æ–¹æ•°" class="headerlink" title="11.15 å®Œå…¨å¹³æ–¹æ•°"></a>11.15 å®Œå…¨å¹³æ–¹æ•°</h2><p><strong>279. Perfect Squares</strong></p><p><strong>Qï¼š</strong>Given an integer <code>n</code>, return <em>the least number of perfect square numbers that sum to</em> <code>n</code>.</p><p>A <strong>perfect square</strong> is an integer that is the square of an integer; in other words, it is the product of some integer with itself. For example, <code>1</code>, <code>4</code>, <code>9</code>, and <code>16</code>are perfect squares while <code>3</code> and <code>11</code> are not.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">numSquares</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= n; i++ &#123;<br>        dp[i] = math.MaxInt32<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j * j &lt;= i; j++ &#123;<br>            dp[i] = min(dp[i], dp[i - (j * j)] + <span class="hljs-number">1</span>)<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p><strong>dp[j]ï¼šå’Œä¸ºjçš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡ä¸ºdp[j]</strong></p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>dp[j] = min(dp[j], dp[j - (i * i)] + 1)ï¼Œæ˜¯ä¸æ”¾è¿˜æ˜¯æ”¾å½“å‰çš„æ•°çœ‹çœ‹ç»„åˆå‡ºæ¥çš„æ•°é‡å“ªä¸ªå°ï¼Œé€‰å“ªä¸ªä½œä¸ºå½“å‰çš„æ•°é‡ã€‚</p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p>dp[0] = 0 å› ä¸ºå¹³æ–¹æ•°æ˜¯ä»1å¼€å§‹çš„</p><h2 id="11-16-å•è¯æ‹†åˆ†"><a href="#11-16-å•è¯æ‹†åˆ†" class="headerlink" title="11.16 å•è¯æ‹†åˆ†"></a>11.16 å•è¯æ‹†åˆ†</h2><p><strong>139. Word Break</strong></p><p><strong>Qï¼š</strong>Given a string <code>s</code> and a dictionary of strings <code>wordDict</code>, return <code>true</code> if <code>s</code> can be segmented into a space-separated sequence of one or more dictionary words.</p><p><strong>Note</strong> that the same word in the dictionary may be reused multiple times in the segmentation.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">wordBreak</span><span class="hljs-params">(s <span class="hljs-type">string</span>, wordDict []<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    wordDictSet := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">bool</span>)<br>    <span class="hljs-keyword">for</span> _, w := <span class="hljs-keyword">range</span> wordDict&#123;<br>        wordDictSet[w] = <span class="hljs-literal">true</span><br>    &#125;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>, <span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; i; j++ &#123;<br>            <span class="hljs-keyword">if</span> dp[j] &amp;&amp; wordDictSet[s[j:i]] &#123; <span class="hljs-comment">// dp[j]ç”¨æ¥ç¡®ä¿ä¹‹å‰çš„éƒ½æ˜¯å·²ç»åŒ¹é…åˆ°çš„ï¼Œiæ˜¯ä¸‹æ¬¡åŒ¹é…çš„èµ·ç‚¹</span><br>                dp[i] = <span class="hljs-literal">true</span><br>                <span class="hljs-keyword">break</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(s)]<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p><strong>dp[i] : å­—ç¬¦ä¸²é•¿åº¦ä¸ºiçš„è¯ï¼Œdp[i]ä¸ºtrueï¼Œè¡¨ç¤ºå¯ä»¥æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯</strong>ã€‚</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>å¦‚æœç¡®å®šdp[j] æ˜¯trueï¼Œä¸” [j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œï¼Œé‚£ä¹ˆdp[i]ä¸€å®šæ˜¯trueã€‚ï¼ˆj &lt; i ï¼‰ã€‚</p><p>æ‰€ä»¥é€’æ¨å…¬å¼æ˜¯ if([j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œ &amp;&amp; dp[j]æ˜¯true) é‚£ä¹ˆ dp[i] = trueã€‚</p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p>ä»é€’å½’å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œdp[i] çš„çŠ¶æ€ä¾é  dp[j]æ˜¯å¦ä¸ºtrueï¼Œé‚£ä¹ˆdp[0]å°±æ˜¯é€’å½’çš„æ ¹åŸºï¼Œdp[0]ä¸€å®šè¦ä¸ºtrueï¼Œå¦åˆ™é€’å½’ä¸‹å»åé¢éƒ½éƒ½æ˜¯falseäº†ã€‚</p><p>é‚£ä¹ˆdp[0]æœ‰æ²¡æœ‰æ„ä¹‰å‘¢ï¼Ÿ</p><p>dp[0]è¡¨ç¤ºå¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºçš„è¯ï¼Œè¯´æ˜å‡ºç°åœ¨å­—å…¸é‡Œã€‚</p><p>ä½†é¢˜ç›®ä¸­è¯´äº†â€œç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² sâ€ æ‰€ä»¥æµ‹è¯•æ•°æ®ä¸­ä¸ä¼šå‡ºç°iä¸º0çš„æƒ…å†µï¼Œé‚£ä¹ˆdp[0]åˆå§‹ä¸ºtrueå®Œå…¨å°±æ˜¯ä¸ºäº†æ¨å¯¼å…¬å¼ã€‚</p><p>ä¸‹æ ‡é0çš„dp[i]åˆå§‹åŒ–ä¸ºfalseï¼Œåªè¦æ²¡æœ‰è¢«è¦†ç›–è¯´æ˜éƒ½æ˜¯ä¸å¯æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>é¢˜ç›®ä¸­è¯´æ˜¯æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ï¼Œæ‰€ä»¥è¿™æ˜¯å®Œå…¨èƒŒåŒ…ã€‚</p><p>è¿˜è¦è®¨è®ºä¸¤å±‚forå¾ªç¯çš„å‰åå¾ªåºã€‚</p><p><strong>å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…</strong>ã€‚</p><p><strong>å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“</strong>ã€‚</p><h2 id="11-17-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#11-17-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="11.17 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>11.17 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h2><p><strong>121. Best Time to Buy and Sell Stock</strong></p><p><strong>Qï¼š</strong>You are given an array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day.</p><p>You want to maximize your profit by choosing a <strong>single day</strong> to buy one stock and choosing a <strong>different day in the future</strong> to sell that stock.</p><p>Return <em>the maximum profit you can achieve from this transaction</em>. If you cannot achieve any profit, return <code>0</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// è´ªå¿ƒ</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    low := math.MaxInt32<br>    rlt := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> prices&#123;<br>        low = min(low, prices[i])<br>        rlt = max(rlt, prices[i]-low)<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> rlt<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>length:=<span class="hljs-built_in">len</span>(prices)<br><span class="hljs-keyword">if</span> length==<span class="hljs-number">0</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>dp:=<span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>,length)<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;length;i++&#123;<br>dp[i]=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">2</span>)<br>&#125;<br><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=-prices[<span class="hljs-number">0</span>]<br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;length;i++&#123;<br>dp[i][<span class="hljs-number">0</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>],-prices[i])<br>dp[i][<span class="hljs-number">1</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]+prices[i])<br>&#125;<br><span class="hljs-keyword">return</span> dp[length<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a <br>    &#125;<br>    <span class="hljs-keyword">return</span> b <br>&#125;<br></code></pre></td></tr></table></figure><ol><li>ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li></ol><p>dp[i] [0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ ï¼Œ<strong>è¿™é‡Œå¯èƒ½æœ‰åŒå­¦ç–‘æƒ‘ï¼Œæœ¬é¢˜ä¸­åªèƒ½ä¹°å–ä¸€æ¬¡ï¼ŒæŒæœ‰è‚¡ç¥¨ä¹‹åå“ªè¿˜æœ‰ç°é‡‘å‘¢ï¼Ÿ</strong></p><p>å…¶å®ä¸€å¼€å§‹ç°é‡‘æ˜¯0ï¼Œé‚£ä¹ˆåŠ å…¥ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ç°é‡‘å°±æ˜¯ -prices[i]ï¼Œ è¿™æ˜¯ä¸€ä¸ªè´Ÿæ•°ã€‚</p><p>dp[i] [1] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘</p><p><strong>æ³¨æ„è¿™é‡Œè¯´çš„æ˜¯â€œæŒæœ‰â€ï¼Œâ€œæŒæœ‰â€ä¸ä»£è¡¨å°±æ˜¯å½“å¤©â€œä¹°å…¥â€ï¼ä¹Ÿæœ‰å¯èƒ½æ˜¯æ˜¨å¤©å°±ä¹°å…¥äº†ï¼Œä»Šå¤©ä¿æŒæŒæœ‰çš„çŠ¶æ€</strong></p><p>å¾ˆå¤šåŒå­¦æŠŠâ€œæŒæœ‰â€å’Œâ€œä¹°å…¥â€æ²¡åˆ†åŒºåˆ†æ¸…æ¥šã€‚</p><p>åœ¨ä¸‹é¢é€’æ¨å…¬å¼åˆ†æä¸­ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥è®²è§£ã€‚</p><ol><li>ç¡®å®šé€’æ¨å…¬å¼</li></ol><p>å¦‚æœç¬¬iå¤©æŒæœ‰è‚¡ç¥¨å³dp[i] [0]ï¼Œ é‚£ä¹ˆå¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥</p><ul><li>ç¬¬i-1å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [0]</li><li>ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯ä¹°å…¥ä»Šå¤©çš„è‚¡ç¥¨åæ‰€å¾—ç°é‡‘å³ï¼š-prices[i]</li></ul><p>é‚£ä¹ˆdp[i] [0]åº”è¯¥é€‰æ‰€å¾—ç°é‡‘æœ€å¤§çš„ï¼Œæ‰€ä»¥dp[i] [0] = max(dp[i - 1] [0], -prices[i]);</p><p>å¦‚æœç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨å³dp[i][1]ï¼Œ ä¹Ÿå¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥</p><ul><li>ç¬¬i-1å¤©å°±ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [1]</li><li>ç¬¬iå¤©å–å‡ºè‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æŒ‰ç…§ä»Šå¤©è‚¡ç¥¨ä½³ä»·æ ¼å–å‡ºåæ‰€å¾—ç°é‡‘å³ï¼šprices[i] + dp[i - 1] [0]</li></ul><p>åŒæ ·dp[i] [1]å–æœ€å¤§çš„ï¼Œdp[i] [1] = max(dp[i - 1] [1], prices[i] + dp[i - 1] [0]);</p><p>è¿™æ ·é€’å½’å…¬å¼æˆ‘ä»¬å°±åˆ†æå®Œäº†</p><ol><li>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li></ol><p>ç”±é€’æ¨å…¬å¼ dp[i] [0] = max(dp[i - 1] [0], -prices[i]); å’Œ dp[i] [1] = max(dp[i - 1] [1], prices[i] + dp[i - 1] [0]);å¯ä»¥çœ‹å‡º</p><p>å…¶åŸºç¡€éƒ½æ˜¯è¦ä»dp[0] [0]å’Œdp[0] [1]æ¨å¯¼å‡ºæ¥ã€‚</p><p>é‚£ä¹ˆdp[0] [0]è¡¨ç¤ºç¬¬0å¤©æŒæœ‰è‚¡ç¥¨ï¼Œæ­¤æ—¶çš„æŒæœ‰è‚¡ç¥¨å°±ä¸€å®šæ˜¯ä¹°å…¥è‚¡ç¥¨äº†ï¼Œå› ä¸ºä¸å¯èƒ½æœ‰å‰ä¸€å¤©æ¨å‡ºæ¥ï¼Œæ‰€ä»¥dp[0][0] -= prices[0];</p><p>dp[0] [1]è¡¨ç¤ºç¬¬0å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä¸æŒæœ‰è‚¡ç¥¨é‚£ä¹ˆç°é‡‘å°±æ˜¯0ï¼Œæ‰€ä»¥dp[0][1] = 0;</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºdp[i]éƒ½æ˜¯æœ‰dp[i - 1]æ¨å¯¼å‡ºæ¥çš„ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯ä»å‰å‘åéå†ã€‚</p><ol><li>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</li></ol><p>ä»¥ç¤ºä¾‹1ï¼Œè¾“å…¥ï¼š[7,1,5,3,6,4]ä¸ºä¾‹ï¼Œdpæ•°ç»„çŠ¶æ€å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210224225642465.png" alt="121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></p><p>dp[5] [1]å°±æ˜¯æœ€ç»ˆç»“æœã€‚</p><p>ä¸ºä»€ä¹ˆä¸æ˜¯dp[5] [0]å‘¢ï¼Ÿ</p><p><strong>å› ä¸ºæœ¬é¢˜ä¸­ä¸æŒæœ‰è‚¡ç¥¨çŠ¶æ€æ‰€å¾—é‡‘é’±ä¸€å®šæ¯”æŒæœ‰è‚¡ç¥¨çŠ¶æ€å¾—åˆ°çš„å¤šï¼</strong></p><p>æ­¤é¢˜åªä¹°å–è‚¡ç¥¨ä¸€æ¬¡ï¼ç›¸å½“äºç”¨åŒä¸€ä¸ªæ—¶é—´æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼ŒæŒæœ‰è‚¡ç¥¨ç»™ä¸æŒæœ‰è‚¡ç¥¨æœåŠ¡ï¼Œå¦‚ä½•æœåŠ¡å‘¢ï¼Ÿå°±æ˜¯åœ¨ä¸æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µä¸‹è‚¯å®šæ˜¯æ¯”æŒæœ‰çš„å¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ ¹æ®ä¸æŒæœ‰è‚¡ç¥¨çš„çš„å€¼è¿›è¡Œå”®å–çœ‹çœ‹ç°åœ¨çš„å·®ä»·æ˜¯ï¼Œç›´æ¥æ‘†çƒ‚çš„å¤šè¿˜æ˜¯å–å‡ºä»¥åå¤šï¼Œæœ€åæ¨ç§»åˆ°æœ€åå¾—åˆ°ç»“æœã€‚</p><h2 id="11-18-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II"><a href="#11-18-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II" class="headerlink" title="11.18 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"></a>11.18 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</h2><p><strong>122. Best Time to Buy and Sell Stock II</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day.</p><p>On each day, you may decide to buy and/or sell the stock. You can only hold <strong>at most one</strong> share of the stock at any time. However, you can buy it then immediately sell it on the <strong>same day</strong>.</p><p>Find and return <em>the <strong>maximum</strong> profit you can achieve</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºâ…¡ åŠ¨æ€è§„åˆ’</span><br><span class="hljs-comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦ï¼šO(n)</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(prices))<br>    status := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(prices) * <span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>        dp[i] = status[:<span class="hljs-number">2</span>]<br>        status = status[<span class="hljs-number">2</span>:]<br>    &#125;<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = -prices[<span class="hljs-number">0</span>]<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(prices); i++ &#123;<br>        dp[i][<span class="hljs-number">0</span>] = max(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] - prices[i])<br>        dp[i][<span class="hljs-number">1</span>] = max(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + prices[i])<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(prices) - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>å’Œä¸Šä¸€é¢˜ä¸åŒçš„æ˜¯å¯ä»¥å¤šæ¬¡ä¹°å–è‚¡ç¥¨ä»¥è°‹æ±‚æœ€å¤§åˆ©æ¶¦</p><p>å”¯ä¸€çš„åŒºåˆ«<code>dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i]);</code></p><p>å°±æ˜¯å½“ä½ ä¹°å…¥çš„æ—¶å€™ä¸€å®šæ˜¯å‰ä¸€ä¸ªçŠ¶æ€å”®å‡ºåæ‰èƒ½å¤Ÿä¹°å…¥ã€‚</p><h2 id="11-19-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III"><a href="#11-19-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III" class="headerlink" title="11.19 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III"></a>11.19 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III</h2><p><strong>123. Best Time to Buy and Sell Stock III</strong></p><p><strong>Qï¼š</strong>You are given an array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day.</p><p>Find the maximum profit you can achieve. You may complete <strong>at most two transactions</strong>.</p><p><strong>Note:</strong> You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp:=<span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>,<span class="hljs-built_in">len</span>(prices))<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(prices);i++&#123;<br>        dp[i]=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">5</span>)<br>    &#125;<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">0</span><br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=-prices[<span class="hljs-number">0</span>]<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>]=<span class="hljs-number">0</span><br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">3</span>]=-prices[<span class="hljs-number">0</span>]<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">4</span>]=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;<span class="hljs-built_in">len</span>(prices);i++&#123;<br>        dp[i][<span class="hljs-number">0</span>]=dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]<span class="hljs-comment">// æ²¡æœ‰æ“ä½œ</span><br>        dp[i][<span class="hljs-number">1</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]-prices[i]) <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ä¹°å…¥</span><br>        dp[i][<span class="hljs-number">2</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]+prices[i]) <span class="hljs-comment">// ç¬¬ä¸€æ¬¡å–å‡º</span><br>        dp[i][<span class="hljs-number">3</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>]-prices[i]) <span class="hljs-comment">// ç¬¬äºŒæ¬¡ä¹°å…¥</span><br>        dp[i][<span class="hljs-number">4</span>]=max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">4</span>],dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>]+prices[i]) <span class="hljs-comment">// ç¬¬äºŒæ¬¡å–å‡º</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(prices)<span class="hljs-number">-1</span>][<span class="hljs-number">4</span>]<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„</strong></p><p>ä»¥è¾“å…¥[1,2,3,4,5]ä¸ºä¾‹</p><p><img src="https://img-blog.csdnimg.cn/20201228181724295.png" alt="123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII"></p><p>å¤§å®¶å¯ä»¥çœ‹åˆ°çº¢è‰²æ¡†ä¸ºæœ€åä¸¤æ¬¡å–å‡ºçš„çŠ¶æ€ã€‚</p><p>ç°åœ¨æœ€å¤§çš„æ—¶å€™ä¸€å®šæ˜¯å–å‡ºçš„çŠ¶æ€ï¼Œè€Œä¸¤æ¬¡å–å‡ºçš„çŠ¶æ€ç°é‡‘æœ€å¤§ä¸€å®šæ˜¯æœ€åä¸€æ¬¡å–å‡ºã€‚</p><p>æ‰€ä»¥æœ€ç»ˆæœ€å¤§åˆ©æ¶¦æ˜¯dp[4] [4]</p><h2 id="11-20-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV"><a href="#11-20-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV" class="headerlink" title="11.20 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV"></a>11.20 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</h2><p><strong>188. Best Time to Buy and Sell Stock IV</strong></p><p><strong>Qï¼š</strong>You are given an integer array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day, and an integer <code>k</code>.</p><p>Find the maximum profit you can achieve. You may complete at most <code>k</code>transactions.</p><p><strong>Note:</strong> You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-string">``</span><span class="hljs-string">`</span><br><span class="hljs-string"></span><br><span class="hljs-string">## 11.21 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ</span><br><span class="hljs-string"></span><br><span class="hljs-string">**309. Best Time to Buy and Sell Stock with Cooldown**</span><br><span class="hljs-string"></span><br><span class="hljs-string">**Qï¼š**You are given an array `</span>prices<span class="hljs-string">` where `</span>prices[i]<span class="hljs-string">` is the price of a given stock on the `</span>ith<span class="hljs-string">` day.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Find the maximum profit you can achieve. You may complete as many transactions as you like (i.e., buy one and sell one share of the stock multiple times) with the following restrictions:</span><br><span class="hljs-string"></span><br><span class="hljs-string">- After you sell your stock, you cannot buy stock on the next day (i.e., cooldown one day).</span><br><span class="hljs-string"></span><br><span class="hljs-string">**Note:** You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).</span><br><span class="hljs-string"></span><br><span class="hljs-string">**Aï¼š**</span><br><span class="hljs-string"></span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    n := <span class="hljs-built_in">len</span>(prices)<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, n)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">4</span>)<br>    &#125;<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = -prices[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; n; i++ &#123;<br>        dp[i][<span class="hljs-number">0</span>] = max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>], max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>], dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]) - prices[i])<br>        dp[i][<span class="hljs-number">1</span>] = max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>], dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>])<br>        dp[i][<span class="hljs-number">2</span>] = dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + prices[i]<br>        dp[i][<span class="hljs-number">3</span>] = dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>]<br>    &#125;<br>    <span class="hljs-keyword">return</span> max(dp[n<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>], max(dp[n<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>], dp[n<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>]))<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</p><p>dp[i] [j]ï¼Œç¬¬iå¤©çŠ¶æ€ä¸ºjï¼Œæ‰€å‰©çš„æœ€å¤šç°é‡‘ä¸ºdp[i] [j]ã€‚</p><p><strong>å…¶å®æœ¬é¢˜å¾ˆå¤šåŒå­¦æçš„æ¯”è¾ƒæ‡µï¼Œæ˜¯å› ä¸ºå‡ºç°å†·å†»æœŸä¹‹åï¼ŒçŠ¶æ€å…¶å®æ˜¯æ¯”è¾ƒå¤æ‚åº¦</strong>ï¼Œä¾‹å¦‚ä»Šå¤©ä¹°å…¥è‚¡ç¥¨ã€ä»Šå¤©å–å‡ºè‚¡ç¥¨ã€ä»Šå¤©æ˜¯å†·å†»æœŸï¼Œéƒ½æ˜¯ä¸èƒ½æ“ä½œè‚¡ç¥¨çš„ã€‚ å…·ä½“å¯ä»¥åŒºåˆ†å‡ºå¦‚ä¸‹å››ä¸ªçŠ¶æ€ï¼š</p><ul><li>çŠ¶æ€ä¸€ï¼šä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæˆ–è€…æ˜¯ä¹‹å‰å°±ä¹°å…¥äº†è‚¡ç¥¨ç„¶åæ²¡æœ‰æ“ä½œï¼‰</li><li>å–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼Œè¿™é‡Œå°±æœ‰ä¸¤ç§å–å‡ºè‚¡ç¥¨çŠ¶æ€<ul><li>çŠ¶æ€äºŒï¼šä¸¤å¤©å‰å°±å–å‡ºäº†è‚¡ç¥¨ï¼Œåº¦è¿‡äº†å†·å†»æœŸï¼›ä¸€ç›´æ²¡æ“ä½œï¼Œä»Šå¤©ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€</li><li>çŠ¶æ€ä¸‰ï¼šä»Šå¤©å–å‡ºäº†è‚¡ç¥¨</li></ul></li><li>çŠ¶æ€å››ï¼šä»Šå¤©ä¸ºå†·å†»æœŸçŠ¶æ€ï¼Œä½†å†·å†»æœŸçŠ¶æ€ä¸å¯æŒç»­ï¼Œåªæœ‰ä¸€å¤©ï¼(å†·å†»æœŸä¹Ÿå±äºå–å‡ºè‚¡ç¥¨çš„ä¸€ç§)</li></ul><p>è½¬ç§»æ–¹ç¨‹ï¼š</p><p>è¾¾åˆ°ä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰å³ï¼šdp[i] [0]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š</p><ul><li>æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œdp[i] [0] = dp[i - 1] [0]</li><li>æ“ä½œäºŒï¼šä»Šå¤©ä¹°å…¥äº†ï¼Œæœ‰ä¸¤ç§æƒ…å†µ<ul><li>å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰ï¼Œdp[i - 1] [3] - prices[i]</li><li>å‰ä¸€å¤©æ˜¯ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰ï¼Œdp[i - 1] [1] - prices[i]</li></ul></li></ul><p>æ‰€ä»¥æ“ä½œäºŒå–æœ€å¤§å€¼ï¼Œå³ï¼šmax(dp[i - 1] [3], dp[i - 1] [1]) - prices[i]</p><p>é‚£ä¹ˆdp[i] [0] = max(dp[i - 1] [0], max(dp[i - 1] [3], dp[i - 1] [1]) - prices[i]);</p><p>è¾¾åˆ°ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰å³ï¼šdp[i] [1]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š</p><ul><li>æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯çŠ¶æ€äºŒ</li><li>æ“ä½œäºŒï¼šå‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰</li></ul><p>dp[i][1] = max(dp[i - 1] [1], dp[i - 1] [3]);</p><p>è¾¾åˆ°ä»Šå¤©å°±å–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸‰ï¼‰ï¼Œå³ï¼šdp[i][2] ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š</p><ul><li>æ“ä½œä¸€ï¼šæ˜¨å¤©ä¸€å®šæ˜¯ä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œä»Šå¤©å–å‡º</li></ul><p>å³ï¼šdp[i] [2] = dp[i - 1] [0] + prices[i];</p><p>è¾¾åˆ°å†·å†»æœŸçŠ¶æ€ï¼ˆçŠ¶æ€å››ï¼‰ï¼Œå³ï¼šdp[i] [3]ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š</p><ul><li>æ“ä½œä¸€ï¼šæ˜¨å¤©å–å‡ºäº†è‚¡ç¥¨ï¼ˆçŠ¶æ€ä¸‰ï¼‰</li></ul><p>dp[i] [3] = dp[i - 1] [2];</p><h2 id="11-22-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"><a href="#11-22-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹" class="headerlink" title="11.22 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"></a>11.22 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</h2><p><strong>714. Best Time to Buy and Sell Stock with Transaction Fee</strong></p><p><strong>Qï¼š</strong>You are given an array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>ith</code> day, and an integer <code>fee</code> representing a transaction fee.</p><p>Find the maximum profit you can achieve. You may complete as many transactions as you like, but you need to pay the transaction fee for each transaction.</p><p><strong>Note:</strong> You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(prices []<span class="hljs-type">int</span>, fee <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    n := <span class="hljs-built_in">len</span>(prices)<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>    dp := <span class="hljs-built_in">make</span>([][<span class="hljs-number">2</span>]<span class="hljs-type">int</span>, n) <span class="hljs-comment">// ä¸¤ç§åˆå§‹åŒ–çš„æ–¹æ³•</span><br><span class="hljs-comment">//    for i := 0; i &lt; n; i++ &#123;</span><br><span class="hljs-comment">//        dp[i] = make([]int, 2)</span><br><span class="hljs-comment">//    &#125;</span><br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = -prices[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; n; i++ &#123;<br>        dp[i][<span class="hljs-number">0</span>] = max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>], dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>] - prices[i]) <span class="hljs-comment">// æŒæœ‰è‚¡ç¥¨</span><br>        dp[i][<span class="hljs-number">1</span>] = max(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>], dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + prices[i] - fee) <span class="hljs-comment">// æœªæŒæœ‰è‚¡ç¥¨</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[n<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬é¢˜åªéœ€è¦åœ¨è®¡ç®—å–å‡ºæ“ä½œçš„æ—¶å€™å‡å»æ‰‹ç»­è´¹å°±å¯ä»¥äº†</p><p>çŠ¶æ€1 ä¹°å…¥ï¼ŒæŒæœ‰è‚¡ç¥¨ï¼ˆæ˜¨å¤©å·²ç»ä¹°å…¥äº†ï¼›æ˜¨å¤©æ²¡æœ‰ä¹°å…¥ï¼Œä»Šå¤©ä¹°å…¥ï¼‰</p><p>çŠ¶æ€2 å–å‡ºï¼ŒæœªæŒæœ‰è‚¡ç¥¨ï¼ˆæ˜¨å¤©å–å‡ºäº†ï¼›ä»Šå¤©å–å‡ºï¼‰</p><h2 id="11-23-æœ€é•¿é€’å¢å­åºåˆ—"><a href="#11-23-æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="11.23 æœ€é•¿é€’å¢å­åºåˆ—"></a>11.23 æœ€é•¿é€’å¢å­åºåˆ—</h2><p><strong>300. Longest Increasing Subsequence</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code>, return the length of the longest strictly increasing subsequence.</p><p>A <strong>subsequence</strong> is a sequence that can be derived from an array by deleting some or no elements without changing the order of the remaining elements. For example, <code>[3,6,2,7]</code> is a subsequence of the array <code>[0,3,1,6,2,2,7]</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// åŠ¨æ€è§„åˆ’æ±‚è§£</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lengthOfLIS</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-comment">// dpæ•°ç»„çš„å®šä¹‰ dp[i]è¡¨ç¤ºå–ç¬¬iä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œè¡¨ç¤ºå­åºåˆ—çš„é•¿åº¦ï¼Œå…¶ä¸­åŒ…æ‹¬ nums[i] è¿™ä¸ªå…ƒç´ </span><br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(nums))<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½åº”è¯¥åˆå§‹åŒ–ä¸º1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>        dp[i] = <span class="hljs-number">1</span><br>    &#125;<br><br>    ans := dp[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">len</span>(nums); i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; i; j++ &#123;<br>            <span class="hljs-keyword">if</span> nums[i] &gt; nums[j] &#123;<br>                dp[i] = max(dp[i], dp[j] + <span class="hljs-number">1</span>)<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> dp[i] &gt; ans &#123;<br>            ans = dp[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> x &gt; y &#123;<br>        <span class="hljs-keyword">return</span> x<br>    &#125;<br>    <span class="hljs-keyword">return</span> y<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>dp[i]çš„å®šä¹‰</li></ol><p><strong>dp[i]è¡¨ç¤ºiä¹‹å‰åŒ…æ‹¬içš„ä»¥nums[i]ç»“å°¾æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</strong></p><ol><li>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</li></ol><p>ä½ç½®içš„æœ€é•¿å‡åºå­åºåˆ—ç­‰äºjä»0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿å‡åºå­åºåˆ— + 1 çš„æœ€å¤§å€¼ã€‚</p><p>æ‰€ä»¥ï¼šif (nums[i] &gt; nums[j]) dp[i] = max(dp[i], dp[j] + 1);</p><p><strong>æ³¨æ„è¿™é‡Œä¸æ˜¯è¦dp[i] ä¸ dp[j] + 1è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ˜¯æˆ‘ä»¬è¦å–dp[j] + 1çš„æœ€å¤§å€¼</strong>ã€‚</p><ol><li>dp[i]çš„åˆå§‹åŒ–</li></ol><p>æ¯ä¸€ä¸ªiï¼Œå¯¹åº”çš„dp[i]ï¼ˆå³æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼‰èµ·å§‹å¤§å°è‡³å°‘éƒ½æ˜¯1.</p><ol><li>ç¡®å®šéå†é¡ºåº</li></ol><p>dp[i] æ˜¯æœ‰0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿å‡åºå­åºåˆ— æ¨å¯¼è€Œæ¥ï¼Œé‚£ä¹ˆéå†iä¸€å®šæ˜¯ä»å‰å‘åéå†ã€‚</p><p>æœ€é•¿è‡ªå¢å­åºåˆ—çš„å®šä¹‰ï¼Œåªè¦æœ‰æ¯”ä»–å°çš„å°±ç®—ä¸Šã€‚</p><h2 id="11-24-æœ€é•¿è¿ç»­é€’å¢åºåˆ—"><a href="#11-24-æœ€é•¿è¿ç»­é€’å¢åºåˆ—" class="headerlink" title="11.24 æœ€é•¿è¿ç»­é€’å¢åºåˆ—"></a>11.24 æœ€é•¿è¿ç»­é€’å¢åºåˆ—</h2><p><strong>674. Longest Continuous Increasing Subsequence</strong></p><p><strong>Qï¼š</strong>Given an unsorted array of integers <code>nums</code>, return <em>the length of the longest <strong>continuous increasing subsequence</strong> (i.e. subarray)</em>. The subsequence must be <strong>strictly</strong> increasing.</p><p>A <strong>continuous increasing subsequence</strong> is defined by two indices <code>l</code> and <code>r</code>(<code>l &lt; r</code>) such that it is <code>[nums[l], nums[l + 1], ..., nums[r - 1], nums[r]]</code> and for each <code>l &lt;= i &lt; r</code>, <code>nums[i] &lt; nums[i + 1]</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findLengthOfLCIS</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    n := <span class="hljs-built_in">len</span>(nums)<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>        dp[i] = <span class="hljs-number">1</span><br>    &#125;<br>    res := <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; n; i++ &#123;<br>        <span class="hljs-keyword">if</span> nums[i] &gt; nums[i<span class="hljs-number">-1</span>] &#123;<br>            dp[i] = dp[i<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> dp[i] &gt; res &#123;<br>            res = dp[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºè¦æ±‚è¿ç»­æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€å±‚å¾ªç¯å°±å¯ä»¥äº†ã€‚</p><h2 id="11-25-æœ€é•¿é‡å¤å­æ•°ç»„"><a href="#11-25-æœ€é•¿é‡å¤å­æ•°ç»„" class="headerlink" title="11.25 æœ€é•¿é‡å¤å­æ•°ç»„"></a>11.25 æœ€é•¿é‡å¤å­æ•°ç»„</h2><p><strong>718. Maximum Length of Repeated Subarray</strong></p><p><strong>Qï¼š</strong>Given two integer arrays <code>nums1</code> and <code>nums2</code>, return <em>the maximum length of a subarray that appears in <strong>both</strong> arrays</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findLength</span><span class="hljs-params">(nums1 []<span class="hljs-type">int</span>, nums2 []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(nums1)<br>    n := <span class="hljs-built_in">len</span>(nums2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>    &#125;<br>    res := <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> nums1[i<span class="hljs-number">-1</span>] == nums2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> dp[i][j] &gt; res &#123;<br>                res = dp[i][j]<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//fmt.Println(dp[i][1:])</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é“é¢˜çŠ¶æ€å›¾æ¯”è¾ƒé‡è¦</p><p>dp[i] [j] ï¼šä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j - 1ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ä¸ºdp[i] [j]ã€‚ ï¼ˆ<strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼š â€œä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aâ€ æ ‡æ˜ä¸€å®šæ˜¯ ä»¥A[i-1]ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² ï¼‰</p><p>ä¹‹æ‰€ä»¥ä¸ºäº†å¢åŠ ä¸€ä½æ˜¯å› ä¸ºè¿™æ ·çš„è¯ä»–çš„æ£‹ç›˜æ ¼å°±å¾ˆæ¸…æ™°ã€‚</p><p><code>nums1[i-1] == nums2[j-1]</code>ä¹‹æ‰€ä»¥è¿™é‡Œæ¯”è¾ƒçš„æ˜¯i-1å’Œj-1æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬å¤šåŠ äº†ä¸€ä½æ‰€ä»¥ä»ä¸‹å›¾å°±å¯ä»¥çœ‹åˆ°ä»–æ˜¯åç§»äº†ä¸€ä½ï¼Œæƒ³è¦è·å¾—å¯¹åº”çš„å€¼éœ€è¦è®©åºåˆ—å·-1</p><p><img src="https://img-blog.csdnimg.cn/2021011215282060.jpg" alt="718.æœ€é•¿é‡å¤å­æ•°ç»„"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é€šè¿‡ä¸€ä¸ªå·§å¦™çš„ç›¸åŒçš„æ•°å­—ä¸ºæ ‡å‡†ï¼Œå¦‚æœè¿ç»­çš„å­åˆ—çš„è¯ä»–ä¼šæ˜¯æˆæ–œçº¿çš„ã€‚</p><h2 id="11-26-æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#11-26-æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="11.26 æœ€é•¿å…¬å…±å­åºåˆ—"></a>11.26 æœ€é•¿å…¬å…±å­åºåˆ—</h2><p><strong>1143. Longest Common Subsequence</strong></p><p><strong>Qï¼š</strong>Given two strings <code>text1</code> and <code>text2</code>, return <em>the length of their longest <strong>common subsequence</strong>.</em> If there is no <strong>common subsequence</strong>, return <code>0</code>.</p><p>A <strong>subsequence</strong> of a string is a new string generated from the original string with some characters (can be none) deleted without changing the relative order of the remaining characters.</p><ul><li>For example, <code>&quot;ace&quot;</code> is a subsequence of <code>&quot;abcde&quot;</code>.</li></ul><p>A <strong>common subsequence</strong> of two strings is a subsequence that is common to both strings.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">longestCommonSubsequence</span><span class="hljs-params">(text1 <span class="hljs-type">string</span>, text2 <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(text1)<br>    n := <span class="hljs-built_in">len</span>(text2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> text1[i<span class="hljs-number">-1</span>] == text2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>])<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¦å°±æ˜¯ä¸¤å¤§æƒ…å†µï¼š text1[i - 1] ä¸ text2[j - 1]ç›¸åŒï¼Œtext1[i - 1] ä¸ text2[j - 1]ä¸ç›¸åŒ</p><p>å¦‚æœtext1[i - 1] ä¸ text2[j - 1]ç›¸åŒï¼Œé‚£ä¹ˆæ‰¾åˆ°äº†ä¸€ä¸ªå…¬å…±å…ƒç´ ï¼Œæ‰€ä»¥dp[i] [j] = dp[i - 1] [j - 1] + 1;</p><p>å¦‚æœtext1[i - 1] ä¸ text2[j - 1]ä¸ç›¸åŒï¼Œé‚£å°±çœ‹çœ‹text1[0, i - 2]ä¸text2[0, j - 1]çš„æœ€é•¿å…¬å…±å­åºåˆ— å’Œ text1[0, i - 1]ä¸text2[0, j - 2]çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå–æœ€å¤§çš„ã€‚</p><p>å³ï¼šdp[i] [j] = max(dp[i - 1] [j], dp[i] [j - 1]);</p><p>ä¸11.24ä¸åŒçš„æ˜¯ä»–ä¸éœ€è¦è€ƒè™‘è¿ç»­ï¼Œåªè¦ç›¸åŒå°±å¯ä»¥äº†ã€‚ç”±äºæ˜¯å­˜åœ¨å³å¯è®¡ç®—çš„æƒ…å†µï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬å¯ä»¥å•çº¯çš„è®°å½•å½“å‰æœ€å¤§çš„é‡å¤é‡ã€‚ä½†11.24ä¸å¯ä»¥ï¼Œä»–è¦æ±‚æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥åªè¦æœ‰ä¸åŒçš„äº†å°±æ¸…é›¶ï¼ˆåœ¨ä»£ç ä¸­å°±æ˜¯ä¸èµ‹å€¼ï¼‰</p><p><img src="https://img-blog.csdnimg.cn/20210210150215918.jpg" alt="1143.æœ€é•¿å…¬å…±å­åºåˆ—1"></p><h2 id="11-27-ä¸ç›¸äº¤çš„çº¿"><a href="#11-27-ä¸ç›¸äº¤çš„çº¿" class="headerlink" title="11.27 ä¸ç›¸äº¤çš„çº¿"></a>11.27 ä¸ç›¸äº¤çš„çº¿</h2><p><strong>1035. Uncrossed Lines</strong></p><p><strong>Qï¼š</strong>You are given two integer arrays <code>nums1</code> and <code>nums2</code>. We write the integers of <code>nums1</code> and <code>nums2</code> (in the order they are given) on two separate horizontal lines.</p><p>We may draw connecting lines: a straight line connecting two numbers <code>nums1[i]</code> and <code>nums2[j]</code> such that:</p><ul><li><code>nums1[i] == nums2[j]</code>, and</li><li>the line we draw does not intersect any other connecting (non-horizontal) line.</li></ul><p>Note that a connecting line cannot intersect even at the endpoints (i.e., each number can only belong to one connecting line).</p><p>Return <em>the maximum number of connecting lines we can draw in this way</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxUncrossedLines</span><span class="hljs-params">(nums1 []<span class="hljs-type">int</span>, nums2 []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(nums1)<br>    n := <span class="hljs-built_in">len</span>(nums2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> nums1[i<span class="hljs-number">-1</span>] == nums2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>])<br>            &#125;<br>        &#125;<br>      <span class="hljs-comment">//fmt.Println(dp[i][1:])</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æœ¬é¢˜è¯´æ˜¯æ±‚ç»˜åˆ¶çš„æœ€å¤§è¿çº¿æ•°ï¼Œå…¶å®å°±æ˜¯æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ï¼</strong></p><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼Œæˆ‘ä»¬æŒ‰ç…§åˆ—æ‰«æï¼Œè¡Œä»£è¡¨æˆ‘ä»¬ä¾¦æŸ¥å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹é•¿åº¦ã€‚é‡ç‚¹åœ¨äºæˆ‘ä»¬å¦‚ä½•æ§åˆ¶æ•°æ®ä¸å¾€å›çœ‹ï¼ˆé€šè¿‡ä»å‰å¾€åéå†ï¼‰</p><h2 id="11-28-æœ€å¤§å­åºå’Œ"><a href="#11-28-æœ€å¤§å­åºå’Œ" class="headerlink" title="11.28 æœ€å¤§å­åºå’Œ"></a>11.28 æœ€å¤§å­åºå’Œ</h2><p><strong>53. Maximum Subarray</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code>, find the contiguous subarray (containing at least one number) which has the largest sum and return <em>its sum</em>.</p><p>A <strong>subarray</strong> is a <strong>contiguous</strong> part of an array.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxSubArray</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    n := <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&#125;<br>    dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n)<br>    dp[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>]<br>    res := dp[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; n; i++ &#123;<br>        dp[i] = max(dp[i<span class="hljs-number">-1</span>] + nums[i], nums[i]) <span class="hljs-comment">// é€‰ or ä¸ç»§ç»­ç´¯åŠ æ¸…é›¶</span><br>        <span class="hljs-keyword">if</span> dp[i] &gt; res &#123;<br>            res = dp[i]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-29-åˆ¤æ–­å­åºå’Œ"><a href="#11-29-åˆ¤æ–­å­åºå’Œ" class="headerlink" title="11.29 åˆ¤æ–­å­åºå’Œ"></a>11.29 åˆ¤æ–­å­åºå’Œ</h2><p><strong>392. Is Subsequence</strong></p><p><strong>Qï¼š</strong>Given two strings <code>s</code> and <code>t</code>, return <code>true</code> <em>if</em> <code>s</code> <em>is a <strong>subsequence</strong> of</em> <code>t</code><em>, or</em> <code>false</code> <em>otherwise</em>.</p><p>A <strong>subsequence</strong> of a string is a new string that is formed from the original string by deleting some (can be none) of the characters without disturbing the relative positions of the remaining characters. (i.e., <code>&quot;ace&quot;</code> is a subsequence of <code>&quot;abcde&quot;</code> while <code>&quot;aec&quot;</code> is not).</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isSubsequence</span><span class="hljs-params">(s <span class="hljs-type">string</span>, t <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(s)<br>    n := <span class="hljs-built_in">len</span>(t)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n + <span class="hljs-number">1</span>)<br>    &#125;<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> s[i<span class="hljs-number">-1</span>] == t[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>])<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> dp[m][n] == m &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &gt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>dp[i] [j] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²sï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tï¼Œç›¸åŒå­åºåˆ—çš„é•¿åº¦ä¸ºdp[i] [j]</strong>ã€‚</p><p>æ³¨æ„è¿™é‡Œæ˜¯åˆ¤æ–­sæ˜¯å¦ä¸ºtçš„å­åºåˆ—ã€‚å³tçš„é•¿åº¦æ˜¯å¤§äºç­‰äºsçš„ã€‚</p><p>æœ‰åŒå­¦é—®äº†ï¼Œä¸ºå•¥è¦è¡¨ç¤ºä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Œä¸ºå•¥ä¸è¡¨ç¤ºä¸‹æ ‡iä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿ</p><p>ç”¨iæ¥è¡¨ç¤ºä¹Ÿå¯ä»¥ï¼</p><p>ä½†æˆ‘ç»Ÿä¸€ä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²æ¥è®¡ç®—ï¼Œè¿™æ ·åœ¨ä¸‹é¢çš„é€’å½’å…¬å¼ä¸­ä¼šå®¹æ˜“ç†è§£ä¸€äº›ï¼Œå¦‚æœè¿˜æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><p>è¿™é“é¢˜å’Œæœ€é•¿å…¬å…±å­åºåˆ—å¾ˆåƒä¸è¿‡æ˜¯åŠ äº†ä¸€ä¸ªåˆ¤æ–­è€Œå·²ã€‚æ³¨æ„ç”±äºæ²¡æœ‰è¦æ±‚è¿ç»­ï¼Œæ‰€ä»¥è¦èµ‹å€¼æ‰€æœ‰éœ€è¦ä¸ç›¸ç­‰çš„ä½ç½®ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20210303173115966.png" alt="392.åˆ¤æ–­å­åºåˆ—"></p><h2 id="11-30-ä¸åŒçš„å­åºåˆ—"><a href="#11-30-ä¸åŒçš„å­åºåˆ—" class="headerlink" title="11.30 ä¸åŒçš„å­åºåˆ—"></a>11.30 ä¸åŒçš„å­åºåˆ—</h2><p><strong>115. Distinct Subsequences</strong></p><p><strong>Qï¼š</strong>Given two strings <code>s</code> and <code>t</code>, return <em>the number of distinct subsequences of <code>s</code>which equals <code>t</code></em>.</p><p>A stringâ€™s <strong>subsequence</strong> is a new string formed from the original string by deleting some (can be none) of the characters without disturbing the remaining charactersâ€™ relative positions. (i.e., <code>&quot;ACE&quot;</code> is a subsequence of <code>&quot;ABCDE&quot;</code> while <code>&quot;AEC&quot;</code> is not).</p><p>The test cases are generated so that the answer fits on a 32-bit signed integer.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">numDistinct</span><span class="hljs-params">(s <span class="hljs-type">string</span>, t <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    dp:= <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>,<span class="hljs-built_in">len</span>(s)+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(dp);i++&#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-built_in">len</span>(t)+<span class="hljs-number">1</span>)<br>    &#125;<br>    <span class="hljs-comment">// åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(dp);i++&#123;<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-comment">// dp[0][j] ä¸º 0ï¼Œé»˜è®¤å€¼ï¼Œå› æ­¤ä¸éœ€è¦åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;<span class="hljs-built_in">len</span>(dp);i++&#123;<br>        <span class="hljs-keyword">for</span> j:=<span class="hljs-number">1</span>;j&lt;<span class="hljs-built_in">len</span>(dp[i]);j++&#123;<br>            <span class="hljs-keyword">if</span> s[i<span class="hljs-number">-1</span>] == t[j<span class="hljs-number">-1</span>]&#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + dp[i<span class="hljs-number">-1</span>][j]<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j]<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(dp)<span class="hljs-number">-1</span>][<span class="hljs-built_in">len</span>(dp[<span class="hljs-number">0</span>])<span class="hljs-number">-1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>dp[i] [j]ï¼šä»¥i-1ä¸ºç»“å°¾çš„så­åºåˆ—ä¸­å‡ºç°ä»¥j-1ä¸ºç»“å°¾çš„tçš„ä¸ªæ•°ä¸ºdp[i] [j]ã€‚</p><p>è¿™ä¸€ç±»é—®é¢˜ï¼ŒåŸºæœ¬æ˜¯è¦åˆ†æä¸¤ç§æƒ…å†µ</p><ul><li>s[i - 1] ä¸ t[j - 1]ç›¸ç­‰</li><li>s[i - 1] ä¸ t[j - 1] ä¸ç›¸ç­‰</li></ul><p>å½“s[i - 1] ä¸ t[j - 1]ç›¸ç­‰æ—¶ï¼Œdp[i] [j]å¯ä»¥æœ‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><p>ä¸€éƒ¨åˆ†æ˜¯ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œé‚£ä¹ˆä¸ªæ•°ä¸ºdp[i - 1] [j - 1]ã€‚</p><p>ä¸€éƒ¨åˆ†æ˜¯ä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œä¸ªæ•°ä¸ºdp[i - 1] [j]ã€‚</p><p>è¿™é‡Œå¯èƒ½æœ‰åŒå­¦ä¸æ˜ç™½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è€ƒè™‘ ä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œéƒ½ç›¸åŒäº†æŒ‡å®šè¦åŒ¹é…å•Šã€‚</p><p>ä¾‹å¦‚ï¼š sï¼šbagg å’Œ tï¼šbag ï¼Œs[3] å’Œ t[2]æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å­—ç¬¦ä¸²sä¹Ÿå¯ä»¥ä¸ç”¨s[3]æ¥åŒ¹é…ï¼Œå³ç”¨s[0]s[1]s[2]ç»„æˆçš„bagã€‚</p><p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨s[3]æ¥åŒ¹é…ï¼Œå³ï¼šs[0]s[1]s[3]ç»„æˆçš„bagã€‚</p><p>æ‰€ä»¥å½“s[i - 1] ä¸ t[j - 1]ç›¸ç­‰æ—¶ï¼Œdp[i] [j] = dp[i - 1] [j - 1] + dp[i - 1] [j];</p><p>å½“s[i - 1] ä¸ t[j - 1]ä¸ç›¸ç­‰æ—¶ï¼Œdp[i] [j]åªæœ‰ä¸€éƒ¨åˆ†ç»„æˆï¼Œä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œå³ï¼šdp[i - 1] [j]</p><p>æ‰€ä»¥é€’æ¨å…¬å¼ä¸ºï¼šdp[i] [j] = dp[i - 1] [j];</p><p><img src="https://code-thinking.cdn.bcebos.com/pics/115.%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97.jpg" alt="115.ä¸åŒçš„å­åºåˆ—"></p><p>æ­¤é¢˜å…³é”®åœ¨äºç”¨ä¸ç”¨å½“å‰æ‰«æçš„è¿™ä¸€ä½æ¥åŒ¹é…ã€‚ä¸ç”¨çš„è¯ç›´æ¥j-1å˜æˆjè·³è¿‡å½“å‰ä½ç›´æ¥æ‰«æä¸‹ä¸€ä¸ªæœ‰æ²¡æœ‰ã€‚</p><h2 id="11-31-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ"><a href="#11-31-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ" class="headerlink" title="11.31 ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ"></a>11.31 ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ</h2><p><strong>583. Delete Operation for Two Strings</strong></p><p><strong>Qï¼š</strong>Given two strings <code>word1</code> and <code>word2</code>, return <em>the minimum number of <strong>steps</strong>required to make</em> <code>word1</code> <em>and</em> <code>word2</code> <em>the same</em>.</p><p>In one <strong>step</strong>, you can delete exactly one character in either string.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">minDistance</span><span class="hljs-params">(word1 <span class="hljs-type">string</span>, word2 <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(word1)<br>    n := <span class="hljs-built_in">len</span>(word2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>        dp[i][<span class="hljs-number">0</span>] = i<br>    &#125;<br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt;= n; j++ &#123;<br>        dp[<span class="hljs-number">0</span>][j] = j<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> word1[i<span class="hljs-number">-1</span>] != word2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = min(dp[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>, min(dp[i][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">2</span>))<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br></code></pre></td></tr></table></figure><p>dp[i] [j]ï¼šä»¥i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1ï¼Œå’Œä»¥j-1ä½ç»“å°¾çš„å­—ç¬¦ä¸²word2ï¼Œæƒ³è¦è¾¾åˆ°ç›¸ç­‰ï¼Œæ‰€éœ€è¦åˆ é™¤å…ƒç´ çš„æœ€å°‘æ¬¡æ•°ã€‚</p><ul><li>å½“word1[i - 1] ä¸ word2[j - 1]ç›¸åŒçš„æ—¶å€™</li><li>å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™</li></ul><p>å½“word1[i - 1] ä¸ word2[j - 1]ç›¸åŒçš„æ—¶å€™ï¼Œdp[i] [j] = dp[i - 1] [j - 1];</p><p>å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š</p><p>æƒ…å†µä¸€ï¼šåˆ word1[i - 1]ï¼Œæœ€å°‘æ“ä½œæ¬¡æ•°ä¸ºdp[i - 1] [j] + 1</p><p>æƒ…å†µäºŒï¼šåˆ word2[j - 1]ï¼Œæœ€å°‘æ“ä½œæ¬¡æ•°ä¸ºdp[i] [j - 1] + 1</p><p>æƒ…å†µä¸‰ï¼šåŒæ—¶åˆ word1[i - 1]å’Œword2[j - 1]ï¼Œæ“ä½œçš„æœ€å°‘æ¬¡æ•°ä¸ºdp[i - 1] [j - 1] + 2</p><p>é‚£æœ€åå½“ç„¶æ˜¯å–æœ€å°å€¼ï¼Œæ‰€ä»¥å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™ï¼Œé€’æ¨å…¬å¼ï¼šdp[i] [j] = min({dp[i - 1] [j - 1] + 2, dp[i - 1] [j] + 1, dp[i] [j - 1] + 1});</p><p>å°éš¾ç‚¹ï¼Œåˆ é™¤word1[i-1]ä¸ºä»€ä¹ˆæ˜¯dp[i - 1] [j] + 1ï¼Œå› ä¸ºè¿™é“é¢˜å’Œä¸åŒçš„å­åºåˆ—ä¸åŒï¼Œä»–æ˜¯åˆ é™¤æ€ç»´æ˜¯åç€çš„ï¼Œæ‰€ä»¥åˆ é™¤ä¸€ä¸ªå…ƒç´ å°±æ˜¯ç›´æ¥ç”±è·³è¿‡jæ–¹å‘ï¼Œè®©i-1åŠ 1ã€‚è¿™é‡Œçš„åŠ å°±æ˜¯åˆ é™¤ä¸€ä¸ªå…ƒç´ </p><p><img src="https://img-blog.csdnimg.cn/20210714101750205.png" alt="583.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ1"></p><h2 id="11-32-ç¼–è¾‘è·ç¦»"><a href="#11-32-ç¼–è¾‘è·ç¦»" class="headerlink" title="11.32 ç¼–è¾‘è·ç¦»"></a>11.32 ç¼–è¾‘è·ç¦»</h2><p><strong>72. Edit Distance</strong></p><p><strong>Qï¼š</strong>Given two strings <code>word1</code> and <code>word2</code>, return <em>the minimum number of operations required to convert <code>word1</code> to <code>word2</code></em>.</p><p>You have the following three operations permitted on a word:</p><ul><li>Insert a character</li><li>Delete a character</li><li>Replace a character</li></ul><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">minDistance</span><span class="hljs-params">(word1 <span class="hljs-type">string</span>, word2 <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    m := <span class="hljs-built_in">len</span>(word1)<br>    n := <span class="hljs-built_in">len</span>(word2)<br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>) <br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= m; i++ &#123;<br>        dp[i][<span class="hljs-number">0</span>] = i<br>    &#125;<br>    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt;= n; j++ &#123;<br>        dp[<span class="hljs-number">0</span>][j] = j<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= m; i++ &#123;<br>        <span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt;= n; j++ &#123;<br>            <span class="hljs-keyword">if</span> word1[i<span class="hljs-number">-1</span>] == word2[j<span class="hljs-number">-1</span>] &#123;<br>                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][j] = min(dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>], min(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>])) + <span class="hljs-number">1</span> <span class="hljs-comment">// æ›¿æ¢ï¼Œåˆ é™¤i-1æ–¹å‘ï¼Œåˆ é™¤jæ–¹å‘</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">min</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a &lt; b &#123;<span class="hljs-keyword">return</span> a&#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-comment">// minçš„ä¸åŒå†™æ³•ï¼Œè¯­æ³•ç³–å†™æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">minDistance</span><span class="hljs-params">(word1 <span class="hljs-type">string</span>, word2 <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>m, n := <span class="hljs-built_in">len</span>(word1), <span class="hljs-built_in">len</span>(word2)<br>dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, m+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> dp &#123;<br>dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br>&#125;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; m+<span class="hljs-number">1</span>; i++ &#123;<br>dp[i][<span class="hljs-number">0</span>] = i <span class="hljs-comment">// word1[i] å˜æˆ word2[0], åˆ æ‰ word1[i], éœ€è¦ i éƒ¨æ“ä½œ</span><br>&#125;<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; n+<span class="hljs-number">1</span>; j++ &#123;<br>dp[<span class="hljs-number">0</span>][j] = j <span class="hljs-comment">// word1[0] å˜æˆ word2[j], æ’å…¥ word1[j]ï¼Œéœ€è¦ j éƒ¨æ“ä½œ</span><br>&#125;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; m+<span class="hljs-number">1</span>; i++ &#123;<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">1</span>; j &lt; n+<span class="hljs-number">1</span>; j++ &#123;<br><span class="hljs-keyword">if</span> word1[i<span class="hljs-number">-1</span>] == word2[j<span class="hljs-number">-1</span>] &#123;<br>dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]<br>&#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// Min(æ’å…¥ï¼Œåˆ é™¤ï¼Œæ›¿æ¢)</span><br>dp[i][j] = Min(dp[i][j<span class="hljs-number">-1</span>], dp[i<span class="hljs-number">-1</span>][j], dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]) + <span class="hljs-number">1</span><br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dp[m][n]<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Min</span><span class="hljs-params">(args ...<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>min := args[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> _, item := <span class="hljs-keyword">range</span> args &#123;<br><span class="hljs-keyword">if</span> item &lt; min &#123;<br>min = item<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> min<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ç¡®å®šé€’æ¨å…¬å¼çš„æ—¶å€™ï¼Œé¦–å…ˆè¦è€ƒè™‘æ¸…æ¥šç¼–è¾‘çš„å‡ ç§æ“ä½œï¼Œæ•´ç†å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">if (word1[i - 1] == word2[j - 1])<br>    ä¸æ“ä½œ<br>if (word1[i - 1] != word2[j - 1])<br>    å¢<br>    åˆ <br>    æ¢<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯å¦‚ä¸Š4ç§æƒ…å†µã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">if</span> (word1[i - <span class="hljs-number">1</span>] == word2[j - <span class="hljs-number">1</span>])<span class="hljs-string">` é‚£ä¹ˆè¯´æ˜ä¸ç”¨ä»»ä½•ç¼–è¾‘ï¼Œ`</span>dp[i][j]<span class="hljs-string">` å°±åº”è¯¥æ˜¯ `</span>dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<span class="hljs-string">`ï¼Œå³`</span>dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å¯èƒ½æœ‰åŒå­¦æœ‰ç‚¹ä¸æ˜ç™½ï¼Œä¸ºå•¥è¦å³<code>dp[i][j] = dp[i - 1][j - 1]</code>å‘¢ï¼Ÿ</p><p>é‚£ä¹ˆå°±åœ¨å›é¡¾ä¸Šé¢è®²è¿‡çš„<code>dp[i][j]</code>çš„å®šä¹‰ï¼Œ<code>word1[i - 1]</code> ä¸ <code>word2[j - 1]</code>ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç¼–è¾‘äº†ï¼Œä»¥ä¸‹æ ‡i-2ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1å’Œä»¥ä¸‹æ ‡j-2ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²<code>word2</code>çš„æœ€è¿‘ç¼–è¾‘è·ç¦»<code>dp[i - 1][j - 1]</code>å°±æ˜¯ <code>dp[i][j]</code>äº†ã€‚</p><p>åœ¨ä¸‹é¢çš„è®²è§£ä¸­ï¼Œå¦‚æœå“ªé‡Œçœ‹ä¸æ‡‚ï¼Œå°±å›æƒ³ä¸€ä¸‹<code>dp[i][j]</code>çš„å®šä¹‰ï¼Œå°±æ˜ç™½äº†ã€‚</p><p><strong>åœ¨æ•´ä¸ªåŠ¨è§„çš„è¿‡ç¨‹ä¸­ï¼Œæœ€ä¸ºå…³é”®å°±æ˜¯æ­£ç¡®ç†è§£<code>dp[i][j]</code>çš„å®šä¹‰ï¼</strong></p><p><code>if (word1[i - 1] != word2[j - 1])</code>ï¼Œæ­¤æ—¶å°±éœ€è¦ç¼–è¾‘äº†ï¼Œå¦‚ä½•ç¼–è¾‘å‘¢ï¼Ÿ</p><ul><li>æ“ä½œä¸€ï¼šword1åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 2ä¸ºç»“å°¾çš„word1 ä¸ j-1ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚</li></ul><p>å³ <code>dp[i][j] = dp[i - 1][j] + 1;</code></p><ul><li>æ“ä½œäºŒï¼šword2åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„word1 ä¸ j-2ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚</li></ul><p>å³ <code>dp[i][j] = dp[i][j - 1] + 1;</code></p><p>è¿™é‡Œæœ‰åŒå­¦å‘ç°äº†ï¼Œæ€ä¹ˆéƒ½æ˜¯åˆ é™¤å…ƒç´ ï¼Œæ·»åŠ å…ƒç´ å»å“ªäº†ã€‚</p><p><strong>word2æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œç›¸å½“äºword1åˆ é™¤ä¸€ä¸ªå…ƒç´ </strong>ï¼Œä¾‹å¦‚ <code>word1 = &quot;ad&quot; ï¼Œword2 = &quot;a&quot;</code>ï¼Œ<code>word1</code>åˆ é™¤å…ƒç´ <code>&#39;d&#39;</code> å’Œ <code>word2</code>æ·»åŠ ä¸€ä¸ªå…ƒç´ <code>&#39;d&#39;</code>ï¼Œå˜æˆ<code>word1=&quot;a&quot;, word2=&quot;ad&quot;</code>ï¼Œ æœ€ç»ˆçš„æ“ä½œæ•°æ˜¯ä¸€æ ·ï¼ dpæ•°ç»„å¦‚ä¸‹å›¾æ‰€ç¤ºæ„çš„ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">           a                         a     d<br>  +-----+-----+             +-----+-----+-----+<br>  |  0  |  1  |             |  0  |  1  |  2  |<br>  +-----+-----+   ===&gt;      +-----+-----+-----+<br>a |  1  |  0  |           a |  1  |  0  |  1  |<br>  +-----+-----+             +-----+-----+-----+<br>d |  2  |  1  |<br>  +-----+-----+<br></code></pre></td></tr></table></figure><p>æ“ä½œä¸‰ï¼šæ›¿æ¢å…ƒç´ ï¼Œ<code>word1</code>æ›¿æ¢<code>word1[i - 1]</code>ï¼Œä½¿å…¶ä¸<code>word2[j - 1]</code>ç›¸åŒï¼Œæ­¤æ—¶ä¸ç”¨å¢åŠ å…ƒç´ ï¼Œé‚£ä¹ˆä»¥ä¸‹æ ‡<code>i-2</code>ä¸ºç»“å°¾çš„<code>word1</code> ä¸ <code>j-2</code>ä¸ºç»“å°¾çš„<code>word2</code>çš„æœ€è¿‘ç¼–è¾‘è·ç¦» åŠ ä¸Šä¸€ä¸ªæ›¿æ¢å…ƒç´ çš„æ“ä½œã€‚</p><p>å³ <code>dp[i][j] = dp[i - 1][j - 1] + 1;</code></p><p>ç»¼ä¸Šï¼Œå½“ <code>if (word1[i - 1] != word2[j - 1])</code> æ—¶å–æœ€å°çš„ï¼Œå³ï¼š<code>dp[i][j] = min(&#123;dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]&#125;) + 1;</code></p><p>é€’å½’å…¬å¼ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (word1[i - <span class="hljs-number">1</span>] == word2[j - <span class="hljs-number">1</span>]) &#123;<br>    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>    dp[i][j] = <span class="hljs-built_in">min</span>(&#123;dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]&#125;) + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210114162113131.jpg" alt="72.ç¼–è¾‘è·ç¦»"></p><h2 id="11-33-å›æ–‡å­ä¸²"><a href="#11-33-å›æ–‡å­ä¸²" class="headerlink" title="11.33 å›æ–‡å­ä¸²"></a>11.33 å›æ–‡å­ä¸²</h2><p><strong>647. Palindromic Substrings</strong></p><p><strong>Qï¼š</strong>Given a string <code>s</code>, return <em>the number of <strong>palindromic substrings</strong> in it</em>.</p><p>A string is a <strong>palindrome</strong> when it reads the same backward as forward.</p><p>A <strong>substring</strong> is a contiguous sequence of characters within the string.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">countSubstrings</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    res:=<span class="hljs-number">0</span><br>    dp:=<span class="hljs-built_in">make</span>([][]<span class="hljs-type">bool</span>,<span class="hljs-built_in">len</span>(s))<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>(s);i++&#123;<br>        dp[i]=<span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>,<span class="hljs-built_in">len</span>(s))<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-built_in">len</span>(s)<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>        <span class="hljs-keyword">for</span> j:=i;j&lt;<span class="hljs-built_in">len</span>(s);j++&#123;<br>            <span class="hljs-keyword">if</span> s[i]==s[j]&#123;<br>                <span class="hljs-keyword">if</span> j-i&lt;=<span class="hljs-number">1</span>&#123;<br>                    res++<br>                    dp[i][j]=<span class="hljs-literal">true</span><br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> dp[i+<span class="hljs-number">1</span>][j<span class="hljs-number">-1</span>]&#123;<br>                    res++<br>                    dp[i][j]=<span class="hljs-literal">true</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ç¡®å®šé€’æ¨å…¬å¼æ—¶ï¼Œå°±è¦åˆ†æå¦‚ä¸‹å‡ ç§æƒ…å†µã€‚</p><p>æ•´ä½“ä¸Šæ˜¯ä¸¤ç§ï¼Œå°±æ˜¯s[i]ä¸s[j]ç›¸ç­‰ï¼Œs[i]ä¸s[j]ä¸ç›¸ç­‰è¿™ä¸¤ç§ã€‚</p><p>å½“s[i]ä¸s[j]ä¸ç›¸ç­‰ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œdp[i][j]ä¸€å®šæ˜¯falseã€‚</p><p>å½“s[i]ä¸s[j]ç›¸ç­‰æ—¶ï¼Œè¿™å°±å¤æ‚ä¸€äº›äº†ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ</p><ul><li>æƒ…å†µä¸€ï¼šä¸‹æ ‡i ä¸ jç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚aï¼Œå½“ç„¶æ˜¯å›æ–‡å­ä¸²</li><li>æƒ…å†µäºŒï¼šä¸‹æ ‡i ä¸ jç›¸å·®ä¸º1ï¼Œä¾‹å¦‚aaï¼Œä¹Ÿæ˜¯å›æ–‡å­ä¸²</li><li>æƒ…å†µä¸‰ï¼šä¸‹æ ‡ï¼ši ä¸ jç›¸å·®å¤§äº1çš„æ—¶å€™ï¼Œä¾‹å¦‚cabacï¼Œæ­¤æ—¶s[i]ä¸s[j]å·²ç»ç›¸åŒäº†ï¼Œæˆ‘ä»¬çœ‹iåˆ°jåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹abaæ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆabaçš„åŒºé—´å°±æ˜¯ i+1 ä¸ j-1åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹dp[i + 1] [j - 1]æ˜¯å¦ä¸ºtrueã€‚</li></ul><h2 id="11-34-æœ€é•¿å›æ–‡å­åºåˆ—"><a href="#11-34-æœ€é•¿å›æ–‡å­åºåˆ—" class="headerlink" title="11.34 æœ€é•¿å›æ–‡å­åºåˆ—"></a>11.34 æœ€é•¿å›æ–‡å­åºåˆ—</h2><p><strong>516. Longest Palindromic Subsequence</strong></p><p><strong>Qï¼š</strong>Given a string <code>s</code>, find <em>the longest palindromic <strong>subsequence</strong>â€˜s length in</em> <code>s</code>.</p><p>A <strong>subsequence</strong> is a sequence that can be derived from another sequence by deleting some or no elements without changing the order of the remaining elements.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">longestPalindromeSubseq</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>size := <span class="hljs-built_in">len</span>(s)<br>max := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> a &gt; b &#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br>dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">int</span>, size)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; size; i++ &#123;<br>dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, size)<br>dp[i][i] = <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-keyword">for</span> i := size - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br><span class="hljs-keyword">for</span> j := i + <span class="hljs-number">1</span>; j &lt; size; j++ &#123;<br><span class="hljs-keyword">if</span> s[i] == s[j] &#123;<br>dp[i][j] = dp[i+<span class="hljs-number">1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">2</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>dp[i][j] = max(dp[i][j<span class="hljs-number">-1</span>], dp[i+<span class="hljs-number">1</span>][j])<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][size<span class="hljs-number">-1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="é¢å¤–è¡¥å……"><a href="#é¢å¤–è¡¥å……" class="headerlink" title="é¢å¤–è¡¥å……"></a>é¢å¤–è¡¥å……</h1><p>ç®—æ³•æ—¶é—´å¤æ‚åº¦</p><p><img src="https://images0.cnblogs.com/i/608996/201408/141025088894028.png" alt="img"></p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="1-æ—‹è½¬æ•°ç»„"><a href="#1-æ—‹è½¬æ•°ç»„" class="headerlink" title="1. æ—‹è½¬æ•°ç»„"></a>1. æ—‹è½¬æ•°ç»„</h3><p><strong>189. Rotate Array</strong></p><p><strong>Qï¼šGiven an array, rotate the array to the right by <code>k</code> steps, where <code>k</code> is non-negative.</strong></p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">rotate</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, k <span class="hljs-type">int</span>)</span></span>  &#123;<br>    k = k % <span class="hljs-built_in">len</span>(nums)<br>    reverse(nums)<br>    reverse(nums[:k])<br>    reverse(nums[k:])<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverse</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span>&#123;<br>    l:=<span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;l/<span class="hljs-number">2</span>;i++&#123;<br>        nums[i], nums[l<span class="hljs-number">-1</span>-i] = nums[l<span class="hljs-number">-1</span>-i], nums[i]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹æ­¥éª¤å°±å¯ä»¥<strong>å·¦æ—‹è½¬</strong>å­—ç¬¦ä¸²ï¼š</p><ol><li>åè½¬åŒºé—´ä¸ºå‰nçš„å­ä¸²</li><li>åè½¬åŒºé—´ä¸ºnåˆ°æœ«å°¾çš„å­ä¸²</li><li>åè½¬æ•´ä¸ªå­—ç¬¦ä¸²</li></ol><p>æœ¬é¢˜æ˜¯<strong>å³æ—‹è½¬</strong>ï¼Œå…¶å®å°±æ˜¯åè½¬çš„é¡ºåºæ”¹åŠ¨ä¸€ä¸‹ï¼Œä¼˜å…ˆåè½¬æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åè½¬æ•´ä¸ªå­—ç¬¦ä¸²</li><li>åè½¬åŒºé—´ä¸ºå‰kçš„å­ä¸²</li><li>åè½¬åŒºé—´ä¸ºkåˆ°æœ«å°¾çš„å­ä¸²</li></ol><p>å³æ—‹è½¬ä¸ºäº†å°†å³è¾¹çš„å…ƒç´ æ”¾åˆ°å·¦è¾¹éœ€è¦å…ˆé•œåƒä¸€ä¸‹æ‰€æœ‰çš„å…ƒç´ ï¼Œç„¶åæˆ‘åè½¬éœ€è¦ç§»åŠ¨çš„å‰kä¸ªå…ƒç´ ï¼Œå‰©ä¸‹çš„å…ƒç´ ç”±äºè¢«é•œåƒäº†æˆ‘ä»ç„¶éœ€è¦åè½¬ã€‚</p><p>å·¦æ—‹è½¬å°±æ˜¯å…ˆåè½¬è¦ç§»åŠ¨çš„å·¦è¾¹ä½æ•°ï¼Œå†åè½¬å³è¾¹çš„ï¼Œæœ€ååè½¬å…¨éƒ¨ï¼Œå’Œä¸Šè¿°ä¸åŒçš„åœ¨äºä»–ä»¬åè½¬è¿‡åè¦å»çš„åœ°æ–¹ä¸ä¸€æ ·ï¼Œå·¦æ—‹è½¬çš„æœ€å·¦è¾¹ä½ç½®ï¼Œåè½¬è¿‡åä¸åœ¨æœ€å³è¾¹ï¼Œè€Œæ˜¯åœ¨ä¸­é—´çš„å³è¾¹ã€‚</p><h3 id="2-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸å¤ªä¼šï¼Œè¦å†çœ‹ï¼‰"><a href="#2-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸å¤ªä¼šï¼Œè¦å†çœ‹ï¼‰" class="headerlink" title="2. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸å¤ªä¼šï¼Œè¦å†çœ‹ï¼‰"></a>2. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸å¤ªä¼šï¼Œè¦å†çœ‹ï¼‰</h3><p><strong>34. Find First and Last Position of Element in Sorted Array</strong></p><p><strong>Qï¼š</strong>Given an array of integers <code>nums</code> sorted in non-decreasing order, find the starting and ending position of a given <code>target</code> value.</p><p>If <code>target</code> is not found in the array, return <code>[-1, -1]</code>.</p><p>You must write an algorithm with <code>O(log n)</code> runtime complexity.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">searchRange</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>    leftBorder := getLeft(nums, target)<br>    rightBorder := getRight(nums, target)<br>    <span class="hljs-comment">// æƒ…å†µä¸€</span><br>    <span class="hljs-keyword">if</span> leftBorder == <span class="hljs-number">-2</span> || rightBorder == <span class="hljs-number">-2</span> &#123;<br>        <span class="hljs-keyword">return</span> []<span class="hljs-type">int</span>&#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;<br>    &#125;<br>    <span class="hljs-comment">// æƒ…å†µä¸‰</span><br>    <span class="hljs-keyword">if</span> rightBorder - leftBorder &gt; <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-keyword">return</span> []<span class="hljs-type">int</span>&#123;leftBorder + <span class="hljs-number">1</span>, rightBorder - <span class="hljs-number">1</span>&#125;<br>    &#125;<br>    <span class="hljs-comment">// æƒ…å†µäºŒ</span><br>    <span class="hljs-keyword">return</span> []<span class="hljs-type">int</span>&#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getLeft</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    left, right := <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span><br>    border := <span class="hljs-number">-2</span> <span class="hljs-comment">// è®°å½•borderæ²¡æœ‰è¢«èµ‹å€¼çš„æƒ…å†µï¼›è¿™é‡Œä¸èƒ½èµ‹å€¼-1ï¼Œtarget = num[0]æ—¶ï¼Œä¼šæ— æ³•åŒºåˆ†æƒ…å†µä¸€å’Œæƒ…å†µäºŒ</span><br>    <span class="hljs-keyword">for</span> left &lt;= right &#123; <span class="hljs-comment">// []é—­åŒºé—´</span><br>        mid := left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> nums[mid] &gt;= target &#123; <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªç­‰äºtargetçš„ä½ç½®</span><br>            right = mid - <span class="hljs-number">1</span><br>            border = right<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            left =  mid + <span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> border<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getRight</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    left, right := <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>    border := <span class="hljs-number">-2</span><br>    <span class="hljs-keyword">for</span> left &lt;= right &#123;<br>        mid := left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> nums[mid] &gt; target &#123; <br>            right = mid - <span class="hljs-number">1</span><br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºtargetçš„ä½ç½®</span><br>            left = mid + <span class="hljs-number">1</span><br>            border = left<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> border<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯»æ‰¾targetåœ¨æ•°ç»„é‡Œçš„å·¦å³è¾¹ç•Œï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ul><li>æƒ…å†µä¸€ï¼štarget åœ¨æ•°ç»„èŒƒå›´çš„å³è¾¹æˆ–è€…å·¦è¾¹ï¼Œä¾‹å¦‚æ•°ç»„{3, 4, 5}ï¼Œtargetä¸º2æˆ–è€…æ•°ç»„{3, 4, 5},targetä¸º6ï¼Œæ­¤æ—¶åº”è¯¥è¿”å›{-1, -1}</li><li>æƒ…å†µäºŒï¼štarget åœ¨æ•°ç»„èŒƒå›´ä¸­ï¼Œä¸”æ•°ç»„ä¸­ä¸å­˜åœ¨targetï¼Œä¾‹å¦‚æ•°ç»„{3,6,7},targetä¸º5ï¼Œæ­¤æ—¶åº”è¯¥è¿”å›{-1, -1}</li><li>æƒ…å†µä¸‰ï¼štarget åœ¨æ•°ç»„èŒƒå›´ä¸­ï¼Œä¸”æ•°ç»„ä¸­å­˜åœ¨targetï¼Œä¾‹å¦‚æ•°ç»„{3,6,7},targetä¸º6ï¼Œæ­¤æ—¶åº”è¯¥è¿”å›{1, 1}</li></ul><p>è¿™ä¸‰ç§æƒ…å†µéƒ½è€ƒè™‘åˆ°ï¼Œè¯´æ˜å°±æƒ³çš„å¾ˆæ¸…æ¥šäº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåœ¨å»å¯»æ‰¾å·¦è¾¹ç•Œï¼Œå’Œå³è¾¹ç•Œäº†ã€‚</p><h3 id="3-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#3-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="3. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>3. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h3><p><strong>24. Swap Nodes in Pairs</strong></p><p><strong>Qï¼š</strong>Given a linked list, swap every two adjacent nodes and return its head. You must solve the problem without modifying the values in the listâ€™s nodes (i.e., only nodes themselves may be changed.)</p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/swap_ex1.jpg" alt="img"></p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * type ListNode struct &#123;</span><br><span class="hljs-comment"> *     Val int</span><br><span class="hljs-comment"> *     Next *ListNode</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swapPairs</span><span class="hljs-params">(head *ListNode)</span></span> *ListNode &#123;<br>fakeHead := &amp;ListNode&#123;Val: <span class="hljs-number">0</span>, Next: head&#125;<br>curr := fakeHead<br><br><span class="hljs-keyword">for</span> curr.Next != <span class="hljs-literal">nil</span> &amp;&amp; curr.Next.Next != <span class="hljs-literal">nil</span> &#123;<br>        <br>next1 := curr.Next<br>next2 := curr.Next.Next<br>        next3 := curr.Next.Next.Next<br>        next1.Next = next3 <br>        <br><span class="hljs-comment">// curr.Next = next2 </span><br><span class="hljs-comment">// curr.Next.Next = next1 </span><br><span class="hljs-comment">// curr = curr.Next.Next </span><br>        next2.Next = next1<br>        curr.Next = next2 <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è¿æ¥fakeHeadç”¨çš„</span><br>        curr = next1 <span class="hljs-comment">// æ›´æ–°ä¸ºä¸‹ä¸€ç»„çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›¸å½“äºfakeHead</span><br>&#125;<br><br><span class="hljs-keyword">return</span> fakeHead.Next<br>&#125;<br><br><span class="hljs-comment">// é€’å½’ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swapPairs</span><span class="hljs-params">(head *ListNode)</span></span> *ListNode &#123;<br>    <span class="hljs-keyword">if</span> head == <span class="hljs-literal">nil</span> || head.Next == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> head<br>    &#125;<br>    next := head.Next<br>    head.Next = swapPairs(next.Next) <span class="hljs-comment">// è¿æ¥ä»¥2å·ä½ä¸ºå¤´èŠ‚ç‚¹çš„äº¤æ¢å¤„</span><br>    next.Next = head<br>    <span class="hljs-keyword">return</span> next<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–°æ€è·¯ï¼Œæˆ‘ä»¬å°†ä¸ç”¨preå’Œcurçš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬è¦å¤„ç†çš„æ‰€æœ‰èŠ‚ç‚¹ç”¨next1ã€next2â€¦è¿›è¡Œç¼–å·ï¼Œç„¶åå†è¿›è¡Œå¤„ç†ï¼Œä¸ªäººæ„Ÿè§‰æ€è·¯ä¼šæ›´åŠ æ¸…æ™°ä¸€äº›ã€‚</p><h3 id="4-é‡æ’é“¾è¡¨"><a href="#4-é‡æ’é“¾è¡¨" class="headerlink" title="4. é‡æ’é“¾è¡¨"></a>4. é‡æ’é“¾è¡¨</h3><p><strong>143. Reorder List</strong></p><p><strong>Qï¼š</strong>You are given the head of a singly linked-list. The list can be represented as:</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-symbol">L0</span> â†’ <span class="hljs-symbol">L1</span> â†’ â€¦ â†’ <span class="hljs-built_in">Ln</span> - <span class="hljs-number">1</span> â†’ <span class="hljs-built_in">Ln</span><br></code></pre></td></tr></table></figure><p><em>Reorder the list to be on the following form:</em></p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-symbol">L0</span> â†’ <span class="hljs-built_in">Ln</span> â†’ <span class="hljs-symbol">L1</span> â†’ <span class="hljs-built_in">Ln</span> - <span class="hljs-number">1</span> â†’ <span class="hljs-symbol">L2</span> â†’ <span class="hljs-built_in">Ln</span> - <span class="hljs-number">2</span> â†’ â€¦<br></code></pre></td></tr></table></figure><p>You may not modify the values in the listâ€™s nodes. Only nodes themselves may be changed.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reorderList</span><span class="hljs-params">(head *ListNode)</span></span>  &#123;<br>    <span class="hljs-keyword">var</span> slow=head<br>    <span class="hljs-keyword">var</span> fast=head<br>    <span class="hljs-keyword">for</span> fast!=<span class="hljs-literal">nil</span>&amp;&amp;fast.Next!=<span class="hljs-literal">nil</span>&#123;<br>        slow=slow.Next<br>        fast=fast.Next.Next<br>    &#125;  <span class="hljs-comment">//åŒæŒ‡é’ˆå°†é“¾è¡¨åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†</span><br>    <span class="hljs-keyword">var</span> right =<span class="hljs-built_in">new</span>(ListNode)<br>    <span class="hljs-keyword">for</span> slow!=<span class="hljs-literal">nil</span>&#123;<br>        temp:=slow.Next<br>        slow.Next=right.Next <span class="hljs-comment">// æŒ‡å‘ä¹‹å‰ä¿å­˜çš„å‰ä¸€ä¸ªå¤´</span><br>        right.Next=slow<br>        slow=temp<br>    &#125;  <span class="hljs-comment">//ç¿»è½¬é“¾è¡¨å³åŠéƒ¨åˆ†</span><br>    right=right.Next  <span class="hljs-comment">//rightä¸ºåè½¬åå¾—å³åŠéƒ¨åˆ†</span><br>    h:=head<br>    <span class="hljs-keyword">for</span> right.Next!=<span class="hljs-literal">nil</span>&#123;<br>        temp:=right.Next<br>        right.Next=h.Next<br>        h.Next=right<br>        h=h.Next.Next<br>        right=temp<br>    &#125; <span class="hljs-comment">//å°†å·¦å³ä¸¤éƒ¨åˆ†é‡æ–°ç»„åˆ</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨å¿«æ…¢æŒ‡é’ˆæ¥æ‰¾åˆ°ä¸€åŠçš„èµ·ç‚¹ä½ç½®ã€‚</p><p><img src="https://code-thinking.cdn.bcebos.com/pics/143.%E9%87%8D%E6%8E%92%E9%93%BE%E8%A1%A8.png" alt="img"></p><p>è¿™é‡Œçš„åè½¬å°±æ˜¯åè½¬é“¾è¡¨é‚£ä¸ªæµç¨‹ï¼Œrightå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ€»ç”¨çš„pre</p><p><code>right.Next!=nil</code>æ‰æœ‰ç»§ç»­ä¸‹å»çš„æ„ä¹‰</p><p>æ‰€æœ‰whileå¾ªç¯çš„åœ°æ–¹å°±æ˜¯è®©æˆ‘ä»¬æ€è€ƒä»€ä¹ˆæƒ…å†µä¸‹æ˜¯æœ‰æ„ä¹‰çš„</p><h2 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h2><h3 id="1-æ±‚æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ"><a href="#1-æ±‚æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ" class="headerlink" title="1. æ±‚æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ"></a>1. æ±‚æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ</h3><p><strong>129. Sum Root to Leaf Numbers</strong></p><p><strong>Qï¼š</strong>You are given the <code>root</code> of a binary tree containing digits from <code>0</code> to <code>9</code> only.</p><p>Each root-to-leaf path in the tree represents a number.</p><ul><li>For example, the root-to-leaf path <code>1 -&gt; 2 -&gt; 3</code> represents the number <code>123</code>.</li></ul><p>Return <em>the total sum of all root-to-leaf numbers</em>. Test cases are generated so that the answer will fit in a <strong>32-bit</strong> integer.</p><p>A <strong>leaf</strong> node is a node with no children.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(root *TreeNode)</span></span> <span class="hljs-type">int</span> &#123;<br>    sum := <span class="hljs-number">0</span><br>    dfs(root, root.Val, &amp;sum)<br>    <span class="hljs-keyword">return</span> sum<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(root *TreeNode, tmpSum <span class="hljs-type">int</span>, sum *<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> root.Left == <span class="hljs-literal">nil</span> &amp;&amp; root.Right == <span class="hljs-literal">nil</span> &#123;<br>        *sum += tmpSum<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>            dfs(root.Left, tmpSum*<span class="hljs-number">10</span> + root.Left.Val, sum)<br>        &#125;<br>        <span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>            dfs(root.Right, tmpSum*<span class="hljs-number">10</span> + root.Right.Val, sum)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡"><a href="#2-å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡" class="headerlink" title="2. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡"></a>2. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡</h3><p><strong>1382. Balance a Binary Search Tree</strong></p><p><strong>Qï¼š</strong>Given the <code>root</code> of a binary search tree, return <em>a <strong>balanced</strong> binary search tree with the same node values</em>. If there is more than one answer, return <strong>any of them</strong>.</p><p>A binary search tree is <strong>balanced</strong> if the depth of the two subtrees of every node never differs by more than <code>1</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">balanceBST</span><span class="hljs-params">(root *TreeNode)</span></span> *TreeNode &#123;<br>   <span class="hljs-comment">// äºŒå‰æœç´¢æ ‘ä¸­åºéå†å¾—åˆ°æœ‰åºæ•°ç»„</span><br>nums := []<span class="hljs-type">int</span>&#123;&#125;<br>   <span class="hljs-comment">// ä¸­åºé€’å½’éå†äºŒå‰æ ‘</span><br><span class="hljs-keyword">var</span> travel <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(node *TreeNode)</span></span><br>travel = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(node *TreeNode)</span></span> &#123;<br><span class="hljs-keyword">if</span> node == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>travel(node.Left)<br>nums = <span class="hljs-built_in">append</span>(nums, node.Val)<br>travel(node.Right)<br>&#125;<br><span class="hljs-comment">// äºŒåˆ†æ³•ä¿è¯å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡ä¸€ï¼ˆé¢˜ç›®è¦æ±‚è¿”å›çš„ä»æ˜¯äºŒå‰æœç´¢æ ‘ï¼‰</span><br><span class="hljs-keyword">var</span> buildTree <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, left, right <span class="hljs-type">int</span>)</span></span> *TreeNode<br>buildTree = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, left, right <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br><span class="hljs-keyword">if</span> left &gt; right &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br>mid := left + (right-left) &gt;&gt; <span class="hljs-number">1</span><br>root := &amp;TreeNode&#123;Val: nums[mid]&#125;<br>root.Left = buildTree(nums, left, mid<span class="hljs-number">-1</span>)<br>root.Right = buildTree(nums, mid+<span class="hljs-number">1</span>, right)<br><span class="hljs-keyword">return</span> root<br>&#125;<br>travel(root)<br><span class="hljs-keyword">return</span> buildTree(nums, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>1.å…ˆæ’åº</p><p>2.äºŒåˆ†æ³•æ’å…¥</p><h3 id="3-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ"><a href="#3-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ" class="headerlink" title="3. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ"></a>3. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</h3><p><strong>116. Populating Next Right Pointers in Each Node</strong></p><p><strong>Qï¼š</strong>You are given a <strong>perfect binary tree</strong> where all leaves are on the same level, and every parent has two children. The binary tree has the following definition:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">struct <span class="hljs-keyword">Node</span> <span class="hljs-title">&#123;</span><br><span class="hljs-title">  int</span> val;<br>  <span class="hljs-keyword">Node</span> <span class="hljs-title">*left</span>;<br>  <span class="hljs-keyword">Node</span> <span class="hljs-title">*right</span>;<br>  <span class="hljs-keyword">Node</span> <span class="hljs-title">*next</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Populate each next pointer to point to its next right node. If there is no next right node, the next pointer should be set to <code>NULL</code>.</p><p>Initially, all next pointers are set to <code>NULL</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// è¿­ä»£æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">connect</span><span class="hljs-params">(root *Node)</span></span> *Node &#123;<br>    <span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> root<br>    &#125;<br>    stack := <span class="hljs-built_in">make</span>([]*Node, <span class="hljs-number">0</span>)<br>    stack = <span class="hljs-built_in">append</span>(stack, root)<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(stack) &gt; <span class="hljs-number">0</span> &#123; <span class="hljs-comment">// å¦‚æœstacké‡Œé¢æœ‰å…ƒç´ çš„è¯</span><br>        n := <span class="hljs-built_in">len</span>(stack) <span class="hljs-comment">// è®°å½•å½“å‰å±‚èŠ‚ç‚¹ä¸ªæ•°</span><br>        <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>            node := stack[<span class="hljs-number">0</span>] <span class="hljs-comment">// ä¾æ¬¡å¼¹å‡ºèŠ‚ç‚¹</span><br>            stack = stack[<span class="hljs-number">1</span>:]<br>            <span class="hljs-keyword">if</span> i == n - <span class="hljs-number">1</span> &#123; <span class="hljs-comment">// å¦‚æœæ˜¯è¿™å±‚æœ€å³çš„èŠ‚ç‚¹ï¼ŒnextæŒ‡å‘nil</span><br>                node.Next = <span class="hljs-literal">nil</span> <br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                node.Next = stack[<span class="hljs-number">0</span>] <span class="hljs-comment">// å¦‚æœä¸æ˜¯æœ€å³çš„èŠ‚ç‚¹ï¼ŒnextæŒ‡å‘å³è¾¹çš„èŠ‚ç‚¹</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Left != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// å¦‚æœå­˜åœ¨å·¦å­èŠ‚ç‚¹ï¼Œæ”¾å…¥æ ˆä¸­</span><br>                stack = <span class="hljs-built_in">append</span>(stack, node.Left)<br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Right != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// å¦‚æœå­˜åœ¨å³å­èŠ‚ç‚¹ï¼Œæ”¾å…¥æ ˆä¸­</span><br>                stack = <span class="hljs-built_in">append</span>(stack, node.Right)<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> root<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶å·¦å­æ ‘æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘</p><p>å…¶å³å­æ ‘æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹nextçš„å·¦å­æ ‘</p><h2 id="å›æº¯ç®—æ³•"><a href="#å›æº¯ç®—æ³•" class="headerlink" title="å›æº¯ç®—æ³•"></a>å›æº¯ç®—æ³•</h2><h3 id="1-Nçš‡åII"><a href="#1-Nçš‡åII" class="headerlink" title="1. Nçš‡åII"></a>1. Nçš‡åII</h3><p><strong>52. N-Queens II</strong></p><p><strong>Qï¼š</strong>The <strong>n-queens</strong> puzzle is the problem of placing <code>n</code> queens on an <code>n x n</code>chessboard such that no two queens attack each other.</p><p>Given an integer <code>n</code>, return <em>the number of distinct solutions to the <strong>n-queens puzzle</strong></em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">totalNQueens</span><span class="hljs-params">(n <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>    idx := []<span class="hljs-type">int</span>&#123;&#125;<br>    res := <span class="hljs-number">0</span><br>    dfs(n, <span class="hljs-number">0</span>, idx, &amp;res)<br>    <span class="hljs-keyword">return</span> res<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(n, row <span class="hljs-type">int</span>, idx []<span class="hljs-type">int</span>, res *<span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">if</span> row == n &#123;<br>        *res++<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> col := <span class="hljs-number">0</span>; col &lt; n; col++ &#123;<br>        <span class="hljs-keyword">if</span> isValid(row, col, n, idx) &#123;<br>            idx = <span class="hljs-built_in">append</span>(idx, col)<br>            dfs(n, row + <span class="hljs-number">1</span>, idx, res)<br>            idx = idx[:<span class="hljs-built_in">len</span>(idx) - <span class="hljs-number">1</span>]<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValid</span><span class="hljs-params">(row, col, n <span class="hljs-type">int</span>, idx []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>    col45 := col<br>    col135 := col<br>    <span class="hljs-comment">// æ£€æŸ¥åˆ—</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(idx); i++ &#123;<br>        <span class="hljs-keyword">if</span> col == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-comment">// æ£€æŸ¥45Ëš</span><br>    <span class="hljs-keyword">for</span> i := row - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        col45++<br>        <span class="hljs-keyword">if</span> col45 == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-comment">// æ£€æŸ¥135Ëš</span><br>    <span class="hljs-keyword">for</span> i := row - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        col135--<br>        <span class="hljs-keyword">if</span> col135 == idx[i] &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>è·Ÿ8çš‡åä¸€æ ·ï¼ŒåŸæ¥æ˜¯æ˜¾ç¤ºæ£‹ç›˜ï¼Œç°åœ¨å°±æ˜¯ç»Ÿè®¡æ•°é‡ã€‚</p><h2 id="è´ªå¿ƒ"><a href="#è´ªå¿ƒ" class="headerlink" title="è´ªå¿ƒ"></a>è´ªå¿ƒ</h2><h3 id="1-Dota2-å‚è®®é™¢"><a href="#1-Dota2-å‚è®®é™¢" class="headerlink" title="1. Dota2 å‚è®®é™¢"></a>1. Dota2 å‚è®®é™¢</h3><p><strong>649. Dota2 Senate</strong></p><p><strong>Qï¼š</strong>In the world of Dota2, there are two parties: the Radiant and the Dire.</p><p>The Dota2 senate consists of senators coming from two parties. Now the Senate wants to decide on a change in the Dota2 game. The voting for this change is a round-based procedure. In each round, each senator can exercise <strong>one</strong> of the two rights:</p><ul><li><strong>Ban one senatorâ€™s right:</strong> A senator can make another senator lose all his rights in this and all the following rounds.</li><li><strong>Announce the victory:</strong> If this senator found the senators who still have rights to vote are all from the same party, he can announce the victory and decide on the change in the game.</li></ul><p>Given a string <code>senate</code> representing each senatorâ€™s party belonging. The character <code>&#39;R&#39;</code> and <code>&#39;D&#39;</code> represent the Radiant party and the Dire party. Then if there are <code>n</code> senators, the size of the given string will be <code>n</code>.</p><p>The round-based procedure starts from the first senator to the last senator in the given order. This procedure will last until the end of voting. All the senators who have lost their rights will be skipped during the procedure.</p><p>Suppose every senator is smart enough and will play the best strategy for his own party. Predict which party will finally announce the victory and change the Dota2 game. The output should be <code>&quot;Radiant&quot;</code> or <code>&quot;Dire&quot;</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">predictPartyVictory</span><span class="hljs-params">(senateStr <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br><span class="hljs-comment">// R = trueè¡¨ç¤ºæœ¬è½®å¾ªç¯ç»“æŸåï¼Œå­—ç¬¦ä¸²é‡Œä¾ç„¶æœ‰Rã€‚DåŒç†</span><br>R, D := <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span><br><span class="hljs-comment">// å½“flagå¤§äº0æ—¶ï¼ŒRåœ¨Då‰å‡ºç°ï¼ŒRå¯ä»¥æ¶ˆç­Dã€‚å½“flagå°äº0æ—¶ï¼ŒDåœ¨Rå‰å‡ºç°ï¼ŒDå¯ä»¥æ¶ˆç­R</span><br>flag := <span class="hljs-number">0</span><br><br>senate := []<span class="hljs-type">byte</span>(senateStr)<br><span class="hljs-keyword">for</span> R &amp;&amp; D &#123; <span class="hljs-comment">// ä¸€æ—¦Ræˆ–è€…Dä¸ºfalseï¼Œå°±ç»“æŸå¾ªç¯ï¼Œè¯´æ˜æœ¬è½®ç»“æŸååªå‰©ä¸‹Ræˆ–è€…Däº†</span><br>R = <span class="hljs-literal">false</span><br>D = <span class="hljs-literal">false</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(senate); i++ &#123;<br><span class="hljs-keyword">if</span> senate[i] == <span class="hljs-string">&#x27;R&#x27;</span> &#123;<br><span class="hljs-keyword">if</span> flag &lt; <span class="hljs-number">0</span>  &#123;<br> senate[i] = <span class="hljs-number">0</span>  <span class="hljs-comment">// æ¶ˆç­Rï¼ŒRæ­¤æ—¶ä¸ºfalse</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>R = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¦‚æœæ²¡è¢«æ¶ˆç­ï¼Œæœ¬è½®å¾ªç¯ç»“æŸæœ‰R</span><br>&#125;<br>flag++;<br>&#125;<br><span class="hljs-keyword">if</span> senate[i] == <span class="hljs-string">&#x27;D&#x27;</span> &#123;<br><span class="hljs-keyword">if</span> flag &gt; <span class="hljs-number">0</span> &#123;<br>senate[i] = <span class="hljs-number">0</span><br>&#125; <span class="hljs-keyword">else</span>  &#123;<br>D = <span class="hljs-literal">true</span><br>&#125;<br>flag--<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">// å¾ªç¯ç»“æŸä¹‹åï¼ŒRå’ŒDåªèƒ½æœ‰ä¸€ä¸ªä¸ºtrue</span><br><span class="hljs-keyword">if</span> R &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Radiant&quot;</span><br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dire&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚è¾“å…¥â€RRDDDâ€ï¼Œæ‰§è¡Œè¿‡ç¨‹åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p><ul><li>ç¬¬ä¸€è½®ï¼šsenate[0]çš„Ræ¶ˆç­senate[2]çš„Dï¼Œsenate[1]çš„Ræ¶ˆç­senate[3]çš„Dï¼Œsenate[4]çš„Dæ¶ˆç­senate[0]çš„Rï¼Œæ­¤æ—¶å‰©ä¸‹â€RDâ€ï¼Œç¬¬ä¸€è½®ç»“æŸï¼</li><li>ç¬¬äºŒè½®ï¼šsenate[0]çš„Ræ¶ˆç­senate[1]çš„Dï¼Œç¬¬äºŒè½®ç»“æŸ</li><li>ç¬¬ä¸‰è½®ï¼šåªæœ‰Räº†ï¼ŒRèƒœåˆ©</li></ul><h2 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><h3 id="1-æœ€é•¿å›æ–‡å­ä¸²"><a href="#1-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="1. æœ€é•¿å›æ–‡å­ä¸²"></a>1. æœ€é•¿å›æ–‡å­ä¸²</h3><p><strong>5. Longest Palindromic Substring</strong></p><p><strong>Qï¼š</strong>Given a string <code>s</code>, return <em>the longest palindromic substring</em> in <code>s</code>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">longestPalindrome</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>    maxLen := <span class="hljs-number">0</span><br>    left := <span class="hljs-number">0</span><br>    length := <span class="hljs-number">0</span><br>    dp := <span class="hljs-built_in">make</span>([][]<span class="hljs-type">bool</span>, <span class="hljs-built_in">len</span>(s))<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123;<br>        dp[i] = <span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>,<span class="hljs-built_in">len</span>(s))<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-built_in">len</span>(s)<span class="hljs-number">-1</span>; i &gt;= <span class="hljs-number">0</span>; i-- &#123;<br>        <span class="hljs-keyword">for</span> j := i; j &lt; <span class="hljs-built_in">len</span>(s); j++ &#123;<br>            <span class="hljs-keyword">if</span> s[i] == s[j]&#123;<br>                <span class="hljs-keyword">if</span> j-i &lt;= <span class="hljs-number">1</span>&#123;<br>                    length = j-i<br>                    dp[i][j]=<span class="hljs-literal">true</span><br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> dp[i+<span class="hljs-number">1</span>][j<span class="hljs-number">-1</span>]&#123; <span class="hljs-comment">// æ ¹æ®å‰ä¸€ä¸ªçŠ¶æ€æ¨å¯¼</span><br>                    length = j-i<br>                    dp[i][j]=<span class="hljs-literal">true</span><br>                &#125;<br>                fmt.Print(<span class="hljs-string">&quot;i: &quot;</span>)<br>                fmt.Println(i)<br>                fmt.Print(<span class="hljs-string">&quot;j: &quot;</span>)<br>                fmt.Println(j)<br>                fmt.Print(<span class="hljs-string">&quot;tmp_s: &quot;</span>)<br>                fmt.Println(s[i:j+<span class="hljs-number">1</span>])<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> length &gt; maxLen &#123;<br>            maxLen = length<br>            left = i<br>        &#125;<br>        fmt.Println(<span class="hljs-string">&quot;-----------&quot;</span>)<br>        fmt.Print(<span class="hljs-string">&quot;left: &quot;</span>)<br>        fmt.Println(left)<br>        fmt.Print(<span class="hljs-string">&quot;maxLen: &quot;</span>)<br>        fmt.Println(maxLen)<br>    &#125;<br>    <span class="hljs-keyword">return</span> s[left:left+maxLen+<span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•´ä½“ä¸Šæ˜¯ä¸¤ç§ï¼Œå°±æ˜¯s[i]ä¸s[j]ç›¸ç­‰ï¼Œs[i]ä¸s[j]ä¸ç›¸ç­‰è¿™ä¸¤ç§ã€‚</p><p>å½“s[i]ä¸s[j]ä¸ç›¸ç­‰ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œdp[i] [j]ä¸€å®šæ˜¯falseã€‚</p><p>å½“s[i]ä¸s[j]ç›¸ç­‰æ—¶ï¼Œè¿™å°±å¤æ‚ä¸€äº›äº†ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ</p><ul><li>æƒ…å†µä¸€ï¼šä¸‹æ ‡i ä¸ jç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚aï¼Œå½“ç„¶æ˜¯å›æ–‡å­ä¸²</li><li>æƒ…å†µäºŒï¼šä¸‹æ ‡i ä¸ jç›¸å·®ä¸º1ï¼Œä¾‹å¦‚aaï¼Œä¹Ÿæ˜¯æ–‡å­ä¸²</li><li>æƒ…å†µä¸‰ï¼šä¸‹æ ‡ï¼ši ä¸ jç›¸å·®å¤§äº1çš„æ—¶å€™ï¼Œä¾‹å¦‚cabacï¼Œæ­¤æ—¶s[i]ä¸s[j]å·²ç»ç›¸åŒäº†ï¼Œæˆ‘ä»¬çœ‹iåˆ°jåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹abaæ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆabaçš„åŒºé—´å°±æ˜¯ i+1 ä¸ j-1åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹dp[i + 1] [j - 1]æ˜¯å¦ä¸ºtrueã€‚</li></ul><p>éå†é¡ºåºå¯æœ‰æœ‰ç‚¹è®²ç©¶äº†ã€‚</p><p>é¦–å…ˆä»é€’æ¨å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œæƒ…å†µä¸‰æ˜¯æ ¹æ®dp[i + 1] [j - 1]æ˜¯å¦ä¸ºtrueï¼Œåœ¨å¯¹dp[i] [j]è¿›è¡Œèµ‹å€¼trueçš„ã€‚</p><p>dp[i + 1] [j - 1] åœ¨ dp[i] [j]çš„å·¦ä¸‹è§’ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210121171032473.jpg" alt="647.å›æ–‡å­ä¸²"></p><p>å¦‚æœè¿™çŸ©é˜µæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³éå†ï¼Œé‚£ä¹ˆä¼šç”¨åˆ°æ²¡æœ‰è®¡ç®—è¿‡çš„dp[i + 1] [j - 1]ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®ä¸ç¡®å®šæ˜¯ä¸æ˜¯å›æ–‡çš„åŒºé—´[i+1, j-1]ï¼Œæ¥åˆ¤æ–­äº†[i,j]æ˜¯ä¸æ˜¯å›æ–‡ï¼Œé‚£ç»“æœä¸€å®šæ˜¯ä¸å¯¹çš„ã€‚</p><p><strong>æ‰€ä»¥ä¸€å®šè¦ä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³éå†ï¼Œè¿™æ ·ä¿è¯dp[i + 1] [j - 1]éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„</strong>ã€‚</p><h3 id="2-æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°"><a href="#2-æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°" class="headerlink" title="2. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°"></a>2. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°</h3><p><strong>673. Number of Longest Increasing Subsequence</strong></p><p><strong>Qï¼š</strong>Given an integer array <code>nums</code>, return <em>the number of longest increasing subsequences.</em></p><p><strong>Notice</strong> that the sequence has to be <strong>strictly</strong> increasing.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findNumberOfLIS</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>size := <span class="hljs-built_in">len</span>(nums)<br><span class="hljs-keyword">if</span> size &lt;= <span class="hljs-number">1</span>  &#123;<br><span class="hljs-keyword">return</span> size<br>&#125;<br><br>dp := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, size);<br><span class="hljs-keyword">for</span> i, _ := <span class="hljs-keyword">range</span> dp &#123;<br>dp[i] = <span class="hljs-number">1</span><br>&#125;<br>count := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, size);<br><span class="hljs-keyword">for</span> i, _ := <span class="hljs-keyword">range</span> count &#123;<br>count[i] = <span class="hljs-number">1</span><br>&#125;<br><br>maxCount := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt; size; i++ &#123;<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; i; j++ &#123;<br><span class="hljs-keyword">if</span> nums[i] &gt; nums[j] &#123;<br><span class="hljs-keyword">if</span> dp[j] + <span class="hljs-number">1</span> &gt; dp[i] &#123;<br>dp[i] = dp[j] + <span class="hljs-number">1</span><br>count[i] = count[j] <span class="hljs-comment">// å¦‚æœé•¿åº¦å˜äº†é‚£ä¹ˆå°±æ˜¯æ–°çš„è§„æ ¼äº†</span><br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> dp[j] + <span class="hljs-number">1</span> == dp[i] &#123;<br>count[i] += count[j] <span class="hljs-comment">// åŒä¸€ä¸ªè§„æ ¼ï¼Œä¸åŒçš„ç»„åˆ</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> dp[i] &gt; maxCount &#123;<br>maxCount = dp[i] <span class="hljs-comment">// è®°å½•æœ€é•¿å­åºåˆ—çš„é•¿åº¦</span><br>&#125;<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-comment">// æ‰¾æœ€é•¿çš„</span><br>result := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; size; i++ &#123;<br><span class="hljs-keyword">if</span> maxCount == dp[i] &#123;<br>result += count[i]<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> result<br>&#125;<br></code></pre></td></tr></table></figure><p>å³ï¼šä½ç½®içš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ ç­‰äºjä»0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿å‡åºå­åºåˆ— + 1çš„æœ€å¤§å€¼ã€‚</p><p>æœ¬é¢˜å°±æ²¡é‚£ä¹ˆç®€å•äº†ï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä¸¤ä¸ªç»´åº¦ï¼Œä¸€ä¸ªæ˜¯dp[i]çš„æ›´æ–°ï¼Œä¸€ä¸ªæ˜¯count[i]çš„æ›´æ–°ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•æ›´æ–°count[i]å‘¢ï¼Ÿ</p><p>ä»¥nums[i]ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œæœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ä¸ºcount[i]ã€‚</p><p>é‚£ä¹ˆåœ¨nums[i] &gt; nums[j]å‰æä¸‹ï¼Œå¦‚æœåœ¨[0, i-1]çš„èŒƒå›´å†…ï¼Œæ‰¾åˆ°äº†jï¼Œä½¿å¾—dp[j] + 1 &gt; dp[i]ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªæ›´é•¿çš„é€’å¢å­åºåˆ—ã€‚</p><p>é‚£ä¹ˆä»¥jä¸ºç»“å°¾çš„å­ä¸²çš„æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ï¼Œå°±æ˜¯æœ€æ–°çš„ä»¥iä¸ºç»“å°¾çš„å­ä¸²çš„æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ï¼Œå³ï¼šcount[i] = count[j]ã€‚</p><p>åœ¨nums[i] &gt; nums[j]å‰æä¸‹ï¼Œå¦‚æœåœ¨[0, i-1]çš„èŒƒå›´å†…ï¼Œæ‰¾åˆ°äº†jï¼Œä½¿å¾—dp[j] + 1 == dp[i]ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸¤ä¸ªç›¸åŒé•¿åº¦çš„é€’å¢å­åºåˆ—ã€‚</p><p>é‚£ä¹ˆä»¥iä¸ºç»“å°¾çš„å­ä¸²çš„æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•° å°±åº”è¯¥åŠ ä¸Šä»¥jä¸ºç»“å°¾çš„å­ä¸²çš„æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ï¼Œå³ï¼šcount[i] += count[j];</p><h2 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a>å›¾è®º</h2><h3 id="1-é’¥åŒ™å’Œæˆ¿é—´"><a href="#1-é’¥åŒ™å’Œæˆ¿é—´" class="headerlink" title="1. é’¥åŒ™å’Œæˆ¿é—´"></a>1. é’¥åŒ™å’Œæˆ¿é—´</h3><p><strong>841. Keys and Rooms</strong></p><p><strong>Qï¼š</strong>There are <code>n</code> rooms labeled from <code>0</code> to <code>n - 1</code> and all the rooms are locked except for room <code>0</code>. Your goal is to visit all the rooms. However, you cannot enter a locked room without having its key.</p><p>When you visit a room, you may find a set of <strong>distinct keys</strong> in it. Each key has a number on it, denoting which room it unlocks, and you can take all of them with you to unlock the other rooms.</p><p>Given an array <code>rooms</code> where <code>rooms[i]</code> is the set of keys that you can obtain if you visited room <code>i</code>, return <code>true</code> <em>if you can visit <strong>all</strong> the rooms, or</em> <code>false</code><em>otherwise</em>.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dfs</span><span class="hljs-params">(key <span class="hljs-type">int</span>, rooms [][]<span class="hljs-type">int</span>, visited []<span class="hljs-type">bool</span> )</span></span> &#123;<br><span class="hljs-keyword">if</span> visited[key] &#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><br>visited[key] = <span class="hljs-literal">true</span><br>keys := rooms[key]<br><span class="hljs-keyword">for</span> _ , key := <span class="hljs-keyword">range</span> keys &#123;<br><span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢éå†</span><br>dfs(key, rooms, visited);<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canVisitAllRooms</span><span class="hljs-params">(rooms [][]<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>visited := <span class="hljs-built_in">make</span>([]<span class="hljs-type">bool</span>, <span class="hljs-built_in">len</span>(rooms));<br>dfs(<span class="hljs-number">0</span>, rooms, visited);<br><span class="hljs-comment">//æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(visited); i++ &#123;<br><span class="hljs-keyword">if</span> !visited[i] &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬é¢˜å…¶å®ç»™æˆ‘ä»¬æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ï¼Œ æ„è¯†åˆ°è¿™æ˜¯æœ‰å‘å›¾å¾ˆé‡è¦ï¼</p><p>å›¾ä¸­ç»™æˆ‘çš„ä¸¤ä¸ªç¤ºä¾‹ï¼š <code>[[1],[2],[3],[]]</code> <code>[[1,3],[3,0,1],[2],[0]]</code>ï¼Œç”»æˆå¯¹åº”çš„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220714101414.png" alt="img"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå›¾1çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œè€Œå›¾äºŒä¸­ï¼ŒèŠ‚ç‚¹2 æ˜¯å­¤ç«‹çš„ã€‚</p><p>è¿™å°±å¾ˆå®¹æ˜“è®©æˆ‘ä»¬æƒ³èµ·å²›å±¿é—®é¢˜ï¼Œåªè¦å‘ç°ç‹¬ç«‹çš„å²›ï¼Œå°±æ˜¯ä¸èƒ½è¿›å…¥æ‰€æœ‰æˆ¿é—´ã€‚</p><p>æ­¤æ—¶ä¹Ÿå®¹æ˜“æƒ³åˆ°ç”¨å¹¶æŸ¥é›†çš„æ–¹å¼å»è§£å†³ã€‚</p><p><strong>ä½†æœ¬é¢˜æ˜¯æœ‰å‘å›¾</strong>ï¼Œåœ¨æœ‰å‘å›¾ä¸­ï¼Œå³ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œä½†ä¾ç„¶ä¸å¯èƒ½ä»0å‡ºå‘éå†æ‰€æœ‰è¾¹ã€‚ ç»™å¤§å®¶ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p><p>å›¾3ï¼š[[5], [], [1, 3], [5]] ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220714102201.png" alt="img"></p><p>åœ¨å›¾3ä¸­ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼ŒèŠ‚ç‚¹0åªèƒ½åˆ°èŠ‚ç‚¹5ï¼Œç„¶åå°±å“ªä¹Ÿå»ä¸äº†äº†ã€‚</p><p>æ‰€ä»¥æœ¬é¢˜æ˜¯ä¸€ä¸ªæœ‰å‘å›¾æœç´¢å…¨è·¯å¾„çš„é—®é¢˜ã€‚ åªèƒ½ç”¨æ·±æœï¼ˆBFSï¼‰æˆ–è€…å¹¿æœï¼ˆDFSï¼‰æ¥æœã€‚</p><h3 id="2-å•è¯æ¥é¾™"><a href="#2-å•è¯æ¥é¾™" class="headerlink" title="2. å•è¯æ¥é¾™"></a>2. å•è¯æ¥é¾™</h3><p><strong>127. Word Ladder</strong></p><p><strong>Qï¼š</strong>A <strong>transformation sequence</strong> from word <code>beginWord</code> to word <code>endWord</code> using a dictionary <code>wordList</code> is a sequence of words <code>beginWord -&gt; s1 -&gt; s2 -&gt; ... -&gt; sk</code> such that:</p><ul><li>Every adjacent pair of words differs by a single letter.</li><li>Every <code>si</code> for <code>1 &lt;= i &lt;= k</code> is in <code>wordList</code>. Note that <code>beginWord</code> does not need to be in <code>wordList</code>.</li><li><code>sk == endWord</code></li></ul><p>Given two words, <code>beginWord</code> and <code>endWord</code>, and a dictionary <code>wordList</code>, return <em>the <strong>number of words</strong> in the <strong>shortest transformation sequence</strong> from</em><code>beginWord</code> <em>to</em> <code>endWord</code><em>, or</em> <code>0</code> <em>if no such sequence exists.</em></p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ladderLength</span><span class="hljs-params">(beginWord <span class="hljs-type">string</span>, endWord <span class="hljs-type">string</span>, wordList []<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>wordMap, que, depth := getWordMap(wordList, beginWord), []<span class="hljs-type">string</span>&#123;beginWord&#125;, <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(que) &gt; <span class="hljs-number">0</span> &#123;<br>depth++<br>qLen := <span class="hljs-built_in">len</span>(que)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; qLen; i++ &#123;<br>word := que[<span class="hljs-number">0</span>]<br>que = que[<span class="hljs-number">1</span>:]<br>candidates := getCandidates(word)<br><span class="hljs-keyword">for</span> _, candidate := <span class="hljs-keyword">range</span> candidates &#123;<br><span class="hljs-keyword">if</span> _, exist := wordMap[candidate]; exist &#123;<br><span class="hljs-keyword">if</span> candidate == endWord &#123;<br><span class="hljs-keyword">return</span> depth + <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-built_in">delete</span>(wordMap, candidate)<br>que = <span class="hljs-built_in">append</span>(que, candidate)<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getWordMap</span><span class="hljs-params">(wordList []<span class="hljs-type">string</span>, beginWord <span class="hljs-type">string</span>)</span></span> <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span> &#123;<br>wordMap := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>)<br><span class="hljs-keyword">for</span> i, word := <span class="hljs-keyword">range</span> wordList &#123;<br><span class="hljs-keyword">if</span> _, exist := wordMap[word]; !exist &#123;<br><span class="hljs-keyword">if</span> word != beginWord &#123;<br>wordMap[word] = i<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> wordMap<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getCandidates</span><span class="hljs-params">(word <span class="hljs-type">string</span>)</span></span> []<span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">var</span> res []<span class="hljs-type">string</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++ &#123;<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; <span class="hljs-built_in">len</span>(word); j++ &#123;<br><span class="hljs-keyword">if</span> word[j] != <span class="hljs-type">byte</span>(<span class="hljs-type">int</span>(<span class="hljs-string">&#x27;a&#x27;</span>)+i) &#123;<br>res = <span class="hljs-built_in">append</span>(res, word[:j]+<span class="hljs-type">string</span>(<span class="hljs-type">int</span>(<span class="hljs-string">&#x27;a&#x27;</span>)+i)+word[j+<span class="hljs-number">1</span>:])<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯æ±‚èµ·ç‚¹å’Œç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Œ<strong>è¿™é‡Œæ— å‘å›¾æ±‚æœ€çŸ­è·¯ï¼Œå¹¿æœæœ€ä¸ºåˆé€‚ï¼Œå¹¿æœåªè¦æœåˆ°äº†ç»ˆç‚¹ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯æœ€çŸ­çš„è·¯å¾„</strong>ã€‚å› ä¸ºå¹¿æœå°±æ˜¯ä»¥èµ·ç‚¹ä¸­å¿ƒå‘å››å‘¨æ‰©æ•£çš„æœç´¢ã€‚</p><ul><li>è¿™ä¸€é¢˜è¦æ±‚è¾“å‡ºä» <code>beginWord</code> å˜æ¢åˆ° <code>endWord</code> æœ€çŸ­å˜æ¢æ¬¡æ•°ã€‚å¯ä»¥ç”¨ BFSï¼Œä» <code>beginWord</code> å¼€å§‹å˜æ¢ï¼ŒæŠŠè¯¥å•è¯çš„æ¯ä¸ªå­—æ¯éƒ½ç”¨ <code>&#39;a&#39;~&#39;z&#39;</code> å˜æ¢ä¸€æ¬¡ï¼Œç”Ÿæˆçš„æ•°ç»„åˆ° <code>wordList</code> ä¸­æŸ¥æ‰¾ï¼Œè¿™é‡Œç”¨ Map æ¥è®°å½•æŸ¥æ‰¾ã€‚æ‰¾å¾—åˆ°å°±å…¥é˜Ÿåˆ—ï¼Œæ‰¾ä¸åˆ°å°±è¾“å‡º 0 ã€‚å…¥é˜Ÿä»¥åæŒ‰ç…§ BFS çš„ç®—æ³•ä¾æ¬¡éå†å®Œï¼Œå½“æ‰€æœ‰å•è¯éƒ½ <code>len(queue)&lt;=0</code> å‡ºé˜Ÿä»¥åï¼Œæ•´ä¸ªç¨‹åºç»“æŸã€‚</li><li>è¿™ä¸€é¢˜é¢˜ç›®ä¸­è™½ç„¶è¯´äº†è¦æ±‚æ‰¾åˆ°ä¸€æ¡æœ€çŸ­çš„è·¯å¾„ï¼Œä½†æ˜¯å®é™…ä¸Šæœ€çŸ­çš„è·¯å¾„çš„å¯»æ‰¾æ–¹æ³•å·²ç»å‘Šè¯‰ä½ äº†ï¼š<ol><li>æ¯æ¬¡åªå˜æ¢ä¸€ä¸ªå­—æ¯</li><li>æ¯æ¬¡å˜æ¢éƒ½å¿…é¡»åœ¨ <code>wordList</code> ä¸­<br>æ‰€ä»¥ä¸éœ€è¦å•ç‹¬è€ƒè™‘ä½•ç§æ–¹å¼æ˜¯æœ€çŸ­çš„ã€‚</li></ol></li></ul><p>ç›¸å½“äºä¸€ä¸ªä¸€ä¸ªçš„æ‰¾ï¼Œæ‰¾åˆ°ä¸€å±‚ï¼Œå°±ç­›é€‰æ‰€æœ‰çš„å¯èƒ½çš„ç»“æœï¼Œå†æ‰¾åˆ°å°±ä¸‹ä¸€å±‚ã€‚</p><h2 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h2><h3 id="1-å†—ä½™è¿æ¥"><a href="#1-å†—ä½™è¿æ¥" class="headerlink" title="1. å†—ä½™è¿æ¥"></a>1. å†—ä½™è¿æ¥</h3><p><strong>684. Redundant Connection</strong></p><p><strong>Qï¼š</strong>In this problem, a tree is an <strong>undirected graph</strong> that is connected and has no cycles.</p><p>You are given a graph that started as a tree with <code>n</code> nodes labeled from <code>1</code> to <code>n</code>, with one additional edge added. The added edge has two <strong>different</strong>vertices chosen from <code>1</code> to <code>n</code>, and was not an edge that already existed. The graph is represented as an array <code>edges</code> of length <code>n</code> where <code>edges[i] = [ai, bi]</code> indicates that there is an edge between nodes <code>ai</code> and <code>bi</code> in the graph.</p><p>Return <em>an edge that can be removed so that the resulting graph is a tree of</em> <code>n</code><em>nodes</em>. If there are multiple answers, return the answer that occurs last in the input.</p><p><strong>Aï¼š</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// å…¨å±€å˜é‡</span><br><span class="hljs-keyword">var</span> (<br>    n = <span class="hljs-number">1005</span> <span class="hljs-comment">// èŠ‚ç‚¹æ•°é‡3 åˆ° 1000</span><br>    father = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">1005</span>)<br>)<br><br><span class="hljs-comment">// å¹¶æŸ¥é›†åˆå§‹åŒ–</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ &#123;<br>father[i] = i<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// å¹¶æŸ¥é›†é‡Œå¯»æ ¹çš„è¿‡ç¨‹</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">find</span><span class="hljs-params">(u <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">if</span> u == father[u] &#123;<br><span class="hljs-keyword">return</span> u<br>&#125;<br>father[u] = find(father[u])<br><span class="hljs-keyword">return</span> father[u]<br>&#125;<br><br><span class="hljs-comment">// å°†v-&gt;u è¿™æ¡è¾¹åŠ å…¥å¹¶æŸ¥é›†</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">join</span><span class="hljs-params">(u, v <span class="hljs-type">int</span>)</span></span> &#123;<br>u = find(u)<br>v = find(v)<br><span class="hljs-keyword">if</span> u == v &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>father[v] = u<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­ u å’Œ væ˜¯å¦æ‰¾åˆ°åŒä¸€ä¸ªæ ¹ï¼Œæœ¬é¢˜ç”¨ä¸ä¸Š</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">same</span><span class="hljs-params">(u, v <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br>u = find(u)<br>v = find(v)<br><span class="hljs-keyword">return</span> u == v<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findRedundantConnection</span><span class="hljs-params">(edges [][]<span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> &#123;<br>initialize()<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(edges); i++ &#123;<br><span class="hljs-keyword">if</span> same(edges[i][<span class="hljs-number">0</span>], edges[i][<span class="hljs-number">1</span>]) &#123;<br><span class="hljs-keyword">return</span> edges[i]<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>join(edges[i][<span class="hljs-number">0</span>], edges[i][<span class="hljs-number">1</span>])<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> []<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¹¶æŸ¥é›†ä¸»è¦æœ‰ä¸‰ä¸ªåŠŸèƒ½ã€‚</p><ol><li>å¯»æ‰¾æ ¹èŠ‚ç‚¹ï¼Œå‡½æ•°ï¼šfind(int u)ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹æ˜¯å“ªä¸ª</li><li>å°†ä¸¤ä¸ªèŠ‚ç‚¹æ¥å…¥åˆ°åŒä¸€ä¸ªé›†åˆï¼Œå‡½æ•°ï¼šjoin(int u, int v)ï¼Œå°†ä¸¤ä¸ªèŠ‚ç‚¹è¿åœ¨åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Š</li><li>åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆï¼Œå‡½æ•°ï¼šsame(int u, int v)ï¼Œå°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹</li></ol><p>ç®€å•ä»‹ç»å¹¶æŸ¥é›†ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹è¿™é“é¢˜ç›®ã€‚</p><p>é¢˜ç›®è¯´æ˜¯æ— å‘å›¾ï¼Œè¿”å›ä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ï¼Œä½¿å¾—ç»“æœå›¾æ˜¯ä¸€ä¸ªæœ‰ç€Nä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œåˆ™è¿”å›äºŒç»´æ•°ç»„ä¸­æœ€åå‡ºç°çš„è¾¹ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä»å‰å‘åéå†æ¯ä¸€æ¡è¾¹ï¼Œè¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹å¦‚æœä¸åœ¨åŒä¸€ä¸ªé›†åˆï¼Œå°±åŠ å…¥é›†åˆï¼ˆå³ï¼šåŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼‰ã€‚</p><p>å¦‚æœè¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹å·²ç»å‡ºç°åœ¨åŒä¸€ä¸ªé›†åˆé‡Œï¼Œè¯´æ˜ç€è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹å·²ç»è¿åœ¨ä¸€èµ·äº†ï¼Œå¦‚æœå†åŠ å…¥è¿™æ¡è¾¹ä¸€å®šå°±å‡ºç°ç¯äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>algorithm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Study</title>
    <link href="/2022/04/20/SQL-Study/"/>
    <url>/2022/04/20/SQL-Study/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬ä¹¦å†™è§„èŒƒ"><a href="#åŸºæœ¬ä¹¦å†™è§„èŒƒ" class="headerlink" title="åŸºæœ¬ä¹¦å†™è§„èŒƒ"></a>åŸºæœ¬ä¹¦å†™è§„èŒƒ</h1><p>å¯¹äº SQL åˆå­¦è€…ï¼Œåœ¨å†™ SQL è¯­å¥æ—¶ï¼Œåªè¦éµå®ˆä¸‹é¢å‡ ä¸ªä¹¦å†™è§„åˆ™ï¼Œå°±å¯ä»¥é¿å…å¾ˆå¤šé”™è¯¯ã€‚è¿™äº›è§„åˆ™éƒ½éå¸¸ç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬æ¥é€ä¸€ä»‹ç»ã€‚</p><p><strong>SQL è¯­å¥è¦ä»¥åˆ†å·<code>;</code>ç»“å°¾</strong></p><p>åœ¨ RDBMS ï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰å½“ä¸­ï¼ŒSQL è¯­å¥æ˜¯é€æ¡æ‰§è¡Œçš„ï¼Œä¸€æ¡ SQL è¯­å¥ä»£è¡¨ç€æ•°æ®åº“çš„ä¸€ä¸ªæ“ä½œã€‚</p><p>æˆ‘ä»¬é€šå¸¸åœ¨å¥å­çš„å¥å°¾åŠ æ³¨æ ‡ç‚¹è¡¨ç¤ºè¿™å¥è¯ç»“æŸï¼Œä¸­æ–‡å¥å­ä»¥å¥å·<code>ã€‚</code>ç»“å°¾ï¼Œè‹±æ–‡ä»¥ç‚¹å·<code>.</code>ç»“å°¾ï¼Œè€Œ SQL è¯­å¥åˆ™ä½¿ç”¨è‹±æ–‡åˆ†å·<code>;</code>ç»“å°¾ã€‚</p><p><strong>SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™</strong></p><p>SQL ä¸åŒºåˆ†å…³é”®å­—çš„å¤§å°å†™ã€‚ä¾‹å¦‚ï¼Œä¸ç®¡å†™æˆ SELECT è¿˜æ˜¯ selectï¼Œè§£é‡Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚è¡¨åå’Œåˆ—åä¹Ÿæ˜¯å¦‚æ­¤ã€‚ï¼ˆä½†æ˜¯æ³¨æ„å­—ç¬¦ä¸²æ˜¯è¦åˆ†å¤§å°å†™çš„ï¼‰</p><p>æç¤ºï¼šå…³é”®å­—æ˜¯æ•°æ®åº“äº‹å…ˆå®šä¹‰çš„ï¼Œæœ‰ç‰¹åˆ«æ„ä¹‰çš„å•è¯ã€‚</p><p>è™½ç„¶å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½é€‰æ‹©å¤§å†™è¿˜æ˜¯å°å†™ï¼ˆæˆ–å¤§å°å†™æ··æ‚ï¼‰ï¼Œä½†ä¸ºäº†ç†è§£èµ·æ¥æ›´åŠ å®¹æ˜“ï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨ä»¥ä¸‹è§„åˆ™æ¥ä¹¦å†™ SQL è¯­å¥ã€‚</p><ul><li>å…³é”®å­—å¤§å†™</li><li>æ•°æ®åº“åã€è¡¨åå’Œåˆ—åç­‰å°å†™</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ’å…¥åˆ°è¡¨ä¸­çš„æ•°æ®æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚ä¾‹å¦‚ï¼Œå‘æ•°æ®åº“ä¸­æ’å…¥å•è¯ Computerã€COMPUTER æˆ– computerï¼Œè¿™ä¸‰ä¸ªæ˜¯ä¸ä¸€æ ·çš„æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/dbStudy.png" alt="dbStudy"></p><p>è‡ªå­¦ç½‘ç½‘å€ï¼š<a href="http://www.xuesql.cn/">http://www.xuesql.cn/</a></p><h1 id="ä¸€-SQLçš„SELECTä½¿ç”¨"><a href="#ä¸€-SQLçš„SELECTä½¿ç”¨" class="headerlink" title="ä¸€. SQLçš„SELECTä½¿ç”¨"></a>ä¸€. SQLçš„SELECTä½¿ç”¨</h1><h2 id="1-1-æ¡ä»¶æŸ¥è¯¢è¯­æ³•"><a href="#1-1-æ¡ä»¶æŸ¥è¯¢è¯­æ³•" class="headerlink" title="1.1 æ¡ä»¶æŸ¥è¯¢è¯­æ³•"></a>1.1 æ¡ä»¶æŸ¥è¯¢è¯­æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><pre><code class="hljs mysql"># æ¡ä»¶æŸ¥è¯¢è¯­æ³•<br>SELECT column, another_column, â€¦<br>FROM mytable<br>WHERE condition<br>    AND/OR another_condition<br>    AND/OR â€¦;<br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>Operatorï¼ˆæ“ä½œç¬¦ï¼‰</th><th>Conditionï¼ˆè§£é‡Šï¼‰</th><th>Exampleï¼ˆä¾‹å­ï¼‰</th></tr></thead><tbody><tr><td>=</td><td>Case sensitive exact string comparison (<em>notice the single equals</em>)å®Œå…¨ç­‰äº</td><td>col_name = â€œabcâ€</td></tr><tr><td>!= or &lt;&gt;</td><td>Case sensitive exact string inequality comparison ä¸ç­‰äº</td><td>col_name != â€œabcdâ€</td></tr><tr><td>LIKE</td><td>Case insensitive exact string comparison æ²¡æœ‰ç”¨é€šé…ç¬¦ç­‰ä»·äº =</td><td>col_name LIKE â€œABCâ€</td></tr><tr><td>NOT LIKE</td><td>Case insensitive exact string inequality comparison æ²¡æœ‰ç”¨é€šé…ç¬¦ç­‰ä»·äº !=</td><td>col_name NOT LIKEâ€ABCDâ€</td></tr><tr><td>%</td><td>Used anywhere in a string to match a sequence of zero or more characters (only with LIKE or NOT LIKE) é€šé…ç¬¦ï¼Œä»£è¡¨åŒ¹é…0ä¸ªä»¥ä¸Šçš„å­—ç¬¦</td><td>col_name LIKE â€œ%AT%â€ (matches â€œATâ€, â€œATTICâ€, â€œCATâ€ or even â€œBATSâ€) â€œ%AT%â€ ä»£è¡¨AT å‰åå¯ä»¥æœ‰ä»»æ„å­—ç¬¦</td></tr><tr><td>_</td><td>Used anywhere in a string to match a single character (only with LIKE or NOT LIKE) å’Œ% ç›¸ä¼¼ï¼Œä»£è¡¨1ä¸ªå­—ç¬¦</td><td>col_name LIKE â€œAN_â€ (matches â€œANDâ€, but not â€œANâ€)</td></tr><tr><td>IN (â€¦)</td><td>String exists in a list åœ¨åˆ—è¡¨</td><td>col_name IN (â€œAâ€, â€œBâ€, â€œCâ€)</td></tr></tbody></table></div><h2 id="1-2-DISTINCTè¯­æ³•"><a href="#1-2-DISTINCTè¯­æ³•" class="headerlink" title="1.2 DISTINCTè¯­æ³•"></a>1.2 DISTINCTè¯­æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># é€‰å–å‡ºå”¯ä¸€çš„ç»“æœçš„è¯­æ³•<br>SELECT DISTINCT column, another_column, â€¦<br>FROM mytable<br>WHERE condition(s);<br></code></pre></td></tr></table></figure><p>å› ä¸º <code>DISTINCT</code> è¯­æ³•ä¼šç›´æ¥åˆ é™¤é‡å¤çš„è¡Œï¼Œæˆ‘ä»¬è¿˜ä¼šå­¦ä¹  <code>GROUP BY</code> è¯­å¥ï¼Œ <code>GROUP BY</code> ä¹Ÿä¼šè¿”å›å”¯ä¸€çš„è¡Œï¼Œä¸è¿‡å¯ä»¥å¯¹å…·æœ‰ç›¸åŒçš„ å±æ€§å€¼çš„è¡Œåšä¸€äº›ç»Ÿè®¡è®¡ç®—ï¼Œæ¯”å¦‚ï¼šæ±‚å’Œã€‚</p><h2 id="1-3-ç»“æœæ’åº-Ordering-results"><a href="#1-3-ç»“æœæ’åº-Ordering-results" class="headerlink" title="1.3 ç»“æœæ’åº(Ordering results)"></a>1.3 ç»“æœæ’åº(Ordering results)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># ç»“æœæ’åºï¼ˆordered resultsï¼‰<br>SELECT column, another_column, â€¦<br>FROM mytable<br>WHERE condition(s)<br>ORDER BY column ASC/DESC;<br></code></pre></td></tr></table></figure><p><code>ORDER BY col_name</code> è¿™å¥è¯çš„æ„æ€å°±æ˜¯è®©ç»“æœæŒ‰ç…§ col_name åˆ—çš„å…·ä½“å€¼åš ASCå‡åº æˆ– DESC é™åºï¼Œå¯¹æ•°å­—æ¥è¯´å°±æ˜¯å‡åº 1ï¼Œ2ï¼Œ3ï¼Œâ€¦ æˆ–é™åº â€¦ 3,2,1ã€‚å¯¹äºæ–‡æœ¬åˆ—ï¼Œå‡åºå’Œé™åºæŒ‡çš„æ˜¯æŒ‰æ–‡æœ¬çš„å­—æ¯åºã€‚</p><h2 id="1-4-é€šè¿‡Limité€‰å–éƒ¨åˆ†ç»“æœ"><a href="#1-4-é€šè¿‡Limité€‰å–éƒ¨åˆ†ç»“æœ" class="headerlink" title="1.4 é€šè¿‡Limité€‰å–éƒ¨åˆ†ç»“æœ"></a>1.4 é€šè¿‡Limité€‰å–éƒ¨åˆ†ç»“æœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># limitedæŸ¥è¯¢<br>SELECT column, another_column, â€¦<br>FROM mytable<br>WHERE condition(s)<br>ORDER BY column ASC/DESC<br>LIMIT num_limit OFFSET num_offset;<br></code></pre></td></tr></table></figure><p><code>LIMIT</code> å’Œ <code>OFFSET</code> å­å¥é€šå¸¸å’Œ<code>ORDER BY</code> è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå½“æˆ‘ä»¬å¯¹æ•´ä¸ªç»“æœé›†æ’åºä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ <code>LIMIT</code>æ¥æŒ‡å®šåªè¿”å›å¤šå°‘è¡Œç»“æœ ,ç”¨ <code>OFFSET</code>æ¥æŒ‡å®šä»å“ªä¸€è¡Œå¼€å§‹è¿”å›ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ä»ä¸€æ¡é•¿ç»³å­å‰ªä¸‹ä¸€å°æ®µçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬é€šè¿‡ <code>OFFSET</code> æŒ‡å®šä»å“ªé‡Œå¼€å§‹å‰ªï¼Œç”¨ <code>LIMIT</code> æŒ‡å®šå‰ªä¸‹å¤šå°‘é•¿åº¦ã€‚</p><p>PSï¼šnum_offset æ˜¯ä»0å¼€å§‹çš„</p><h2 id="1-5-æ•°æ®åº“èŒƒå¼"><a href="#1-5-æ•°æ®åº“èŒƒå¼" class="headerlink" title="1.5 æ•°æ®åº“èŒƒå¼"></a>1.5 æ•°æ®åº“èŒƒå¼</h2><p>æ•°æ®åº“èŒƒå¼æ˜¯æ•°æ®è¡¨è®¾è®¡çš„è§„èŒƒï¼Œåœ¨èŒƒå¼è§„èŒƒä¸‹ï¼Œæ•°æ®åº“é‡Œæ¯ä¸ªè¡¨å­˜å‚¨çš„<strong>é‡å¤æ•°æ®é™åˆ°æœ€å°‘ï¼ˆè¿™æœ‰åŠ©äºæ•°æ®çš„ä¸€è‡´æ€§ç»´æŠ¤ï¼‰</strong>ï¼ŒåŒæ—¶åœ¨æ•°æ®åº“èŒƒå¼ä¸‹ï¼Œè¡¨å’Œè¡¨ä¹‹é—´ä¸å†æœ‰å¾ˆå¼ºçš„æ•°æ®è€¦åˆï¼Œå¯ä»¥ç‹¬ç«‹çš„å¢é•¿ (ie. æ¯”å¦‚æ±½è½¦å¼•æ“çš„å¢é•¿å’Œæ±½è½¦çš„å¢é•¿æ˜¯å®Œå…¨ç‹¬ç«‹çš„). èŒƒå¼å¸¦æ¥äº†å¾ˆå¤šå¥½å¤„ï¼Œä½†éšç€æ•°æ®è¡¨çš„åˆ†ç¦»ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦æŸ¥è¯¢å¤šä¸ªæ•°æ®å±æ€§æ—¶ï¼Œéœ€è¦æ›´å¤æ‚çš„SQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯æœ¬èŠ‚å¼€å§‹ä»‹ç»çš„å¤šè¡¨è¿æ¥æŠ€æœ¯ã€‚è¿™æ ·SQLçš„æ€§èƒ½ä¹Ÿä¼šé¢ä¸´æ›´å¤šçš„æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯å½“å¤§æ•°æ®é‡çš„è¡¨å¾ˆå¤šçš„æƒ…å†µä¸‹ã€‚</p><p>å¦‚æœä¸€ä¸ªå®ä½“ï¼ˆæ¯”å¦‚Dogï¼‰çš„å±æ€§æ•°æ®è¢«åˆ†æ•£åˆ°å¤šä¸ªæ•°æ®è¡¨ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦å­¦ä¹ å¦‚ä½•é€šè¿‡ <code>JOIN</code>è¿è¡¨æŠ€æœ¯æ¥æ•´åˆè¿™äº›æ•°æ®å¹¶æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„æ•°æ®é¡¹ã€‚</p><h2 id="1-6-ç”¨JOINsè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢"><a href="#1-6-ç”¨JOINsè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢" class="headerlink" title="1.6 ç”¨JOINsè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢"></a>1.6 ç”¨JOINsè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢</h2><p><code>ä¸»é”®(primary key)</code>, ä¸€èˆ¬å…³ç³»æ•°æ®è¡¨ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§åˆ—è®¾ç½®ä¸º <code>ä¸»é”®(primary key)</code>ã€‚ä¸»é”®æ˜¯å”¯ä¸€æ ‡è¯†ä¸€æ¡æ•°æ®çš„ï¼Œä¸ä¼šé‡å¤å¤ï¼ˆæƒ³è±¡ä½ çš„èº«ä»½è¯å·ç )ã€‚ä¸€ä¸ªæœ€å¸¸è§çš„ä¸»é”®å°±æ˜¯auto-incrementing integer(è‡ªå¢IDï¼Œæ¯å†™å…¥ä¸€è¡Œæ•°æ®ID+1, å½“ç„¶å­—ç¬¦ä¸²ï¼Œhashå€¼ç­‰åªè¦æ˜¯æ¯æ¡æ•°æ®æ˜¯å”¯ä¸€çš„ä¹Ÿå¯ä»¥è®¾ä¸ºä¸»é”®.</p><p>å€ŸåŠ©<code>ä¸»é”®(primary key)</code>ï¼ˆå½“ç„¶å…¶ä»–å”¯ä¸€æ€§çš„å±æ€§ä¹Ÿå¯ä»¥ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤ä¸ªè¡¨ä¸­å…·æœ‰ç›¸åŒ ä¸»é”®IDçš„æ•°æ®è¿æ¥èµ·æ¥ï¼ˆå› ä¸ºä¸€ä¸ªIDå¯ä»¥ç®€è¦çš„è¯†åˆ«ä¸€æ¡æ•°æ®ï¼Œæ‰€ä»¥è¿æ¥ä¹‹åè¿˜æ˜¯è¡¨è¾¾çš„åŒä¸€æ¡æ•°æ®ï¼‰ï¼ˆä½ å¯ä»¥æƒ³è±¡ä¸€ä¸ªå·¦å³è¿çº¿æ¸¸æˆï¼‰ã€‚å…·ä½“æˆ‘ä»¬ç”¨åˆ° <code>JOIN</code> å…³é”®å­—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ç”¨LEFT/RIGHT/FULL JOINs åšå¤šè¡¨æŸ¥è¯¢<br>SELECT column, another_column, â€¦<br>FROM mytable<br>INNER/LEFT/RIGHT/FULL JOIN another_table<br>    ON mytable.id = another_table.matching_id<br>WHERE condition(s)<br>ORDER BY column, â€¦ ASC/DESC<br>LIMIT num_limit OFFSET num_offset;<br></code></pre></td></tr></table></figure><p>PSï¼š<code>INNER JOIN</code> å¯ä»¥ç®€å†™åš <code>JOIN</code>. ä¸¤è€…æ˜¯ç›¸åŒçš„æ„æ€ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¼šç»§ç»­å†™ä½œ <code>INNER JOIN</code> ä»¥ä¾¿å’Œåé¢çš„ <code>LEFT JOIN</code>ï¼Œ <code>RIGHT JOIN</code>ç­‰ç›¸æ¯”è¾ƒã€‚(å†…è¿æ¥ï¼Œå·¦è¿æ¥ï¼Œå³è¿æ¥)</p><p>LEFT JOINï¼šå·¦è¾¹çš„å…¨éƒ¨å­˜åœ¨ï¼Œå³è¾¹çš„æœ‰ç¼ºå¤±å°±NULL</p><p>RIGHT JOINï¼šå³è¾¹çš„å…¨éƒ¨å­˜åœ¨ï¼Œå·¦è¾¹çš„æœ‰ç¼ºå¤±å°±NULL</p><h2 id="1-7-æŸ¥è¯¢æ¡ä»¶ä¸­å¤„ç†NULL"><a href="#1-7-æŸ¥è¯¢æ¡ä»¶ä¸­å¤„ç†NULL" class="headerlink" title="1.7 æŸ¥è¯¢æ¡ä»¶ä¸­å¤„ç†NULL"></a>1.7 æŸ¥è¯¢æ¡ä»¶ä¸­å¤„ç†NULL</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­å¤„ç† NULL<br>SELECT column, another_column, â€¦<br>FROM mytable<br>WHERE column IS/IS NOT NULL<br>AND/OR another_condition<br>AND/OR â€¦;<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­æ˜¯å¦ä¸ºNULL</p><h2 id="1-8-æŸ¥è¯¢ä¸­ä½¿ç”¨è¡¨è¾¾å¼"><a href="#1-8-æŸ¥è¯¢ä¸­ä½¿ç”¨è¡¨è¾¾å¼" class="headerlink" title="1.8 æŸ¥è¯¢ä¸­ä½¿ç”¨è¡¨è¾¾å¼"></a>1.8 æŸ¥è¯¢ä¸­ä½¿ç”¨è¡¨è¾¾å¼</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># åŒ…å«è¡¨è¾¾å¼çš„ä¾‹å­<br>SELECT  particle_speed / 2.0 AS half_particle_speed (å¯¹ç»“æœåšäº†ä¸€ä¸ªé™¤2ï¼‰<br>FROM physics_data<br>WHERE ABS(particle_position) * 10.0 &gt;500<br>            ï¼ˆæ¡ä»¶è¦æ±‚è¿™ä¸ªå±æ€§ç»å¯¹å€¼ä¹˜ä»¥10å¤§äº500ï¼‰;<br>         <br># ASä½¿ç”¨åˆ«å<br>SELECT col_expression AS expr_description, â€¦<br>FROM mytable;<br><br># å±æ€§åˆ—å’Œè¡¨å–åˆ«åçš„ä¾‹å­<br>SELECT column AS better_column_name, â€¦<br>FROM a_long_widgets_table_name AS mywidgets<br>INNER JOIN widget_sales<br>  ON mywidgets.id = widget_sales.widget_id;<br></code></pre></td></tr></table></figure><p><strong>e.gã€éš¾é¢˜ã€‘John Lasseterå¯¼æ¼”çš„æ¯éƒ¨ç”µå½±æ¯åˆ†é’Ÿå€¼å¤šå°‘é’±,å‘Šè¯‰æˆ‘æœ€é«˜çš„3ä¸ªç”µå½±åå’Œä»·å€¼å°±å¯ä»¥</strong> </p><p>Table: Movies(Read - Only)</p><div class="table-container"><table><thead><tr><th>Id</th><th>Title</th><th>Director</th><th>Year</th><th>Length_minutes</th></tr></thead><tbody><tr><td>1</td><td>Toy Story</td><td>John Lasseter</td><td>1995</td><td>81</td></tr><tr><td>2</td><td>A Bugâ€™s Life</td><td>John Lasseter</td><td>1998</td><td>95</td></tr><tr><td>3</td><td>Toy Story 2</td><td>John Lasseter</td><td>1999</td><td>93</td></tr><tr><td>4</td><td>Monsters, Inc.</td><td>Pete Docter</td><td>2001</td><td>92</td></tr><tr><td>5</td><td>Finding Nemo</td><td>Finding Nemo</td><td>2003</td><td>107</td></tr><tr><td>6</td><td>The Incredibles</td><td>Brad Bird</td><td>2004</td><td>116</td></tr><tr><td>7</td><td>Cars</td><td>John Lasseter</td><td>2006</td><td>117</td></tr><tr><td>8</td><td>Ratatouille</td><td>Brad Bird</td><td>2007</td><td>115</td></tr><tr><td>9</td><td>WALL-E</td><td>Andrew Stanton</td><td>2008</td><td>104</td></tr><tr><td>10</td><td>Up</td><td>Pete Docter</td><td>2009</td><td>101</td></tr><tr><td>11</td><td>Toy Story 3</td><td>Lee Unkrich</td><td>2010</td><td>103</td></tr><tr><td>12</td><td>Cars 2</td><td>John Lasseter</td><td>2011</td><td>120</td></tr><tr><td>13</td><td>Brave</td><td>Brenda Chapman</td><td>2012</td><td>102</td></tr><tr><td>14</td><td>Monsters University</td><td>Dan Scanlon</td><td>2013</td><td>110</td></tr></tbody></table></div><p>Table: Boxoffice(Read - Only)</p><div class="table-container"><table><thead><tr><th>Movie_id</th><th>Rating</th><th>Domestic_sales</th><th>International_sales</th></tr></thead><tbody><tr><td>5</td><td>8.2</td><td>380843261</td><td>555900000</td></tr><tr><td>14</td><td>7.4</td><td>268492764</td><td>475066843</td></tr><tr><td>8</td><td>8</td><td>206445654</td><td>417277164</td></tr><tr><td>12</td><td>6.4</td><td>191452396</td><td>368400000</td></tr><tr><td>3</td><td>7.9</td><td>245852179</td><td>239163000</td></tr><tr><td>6</td><td>8</td><td>261441092</td><td>370001000</td></tr><tr><td>9</td><td>8.5</td><td>223808164</td><td>297503696</td></tr><tr><td>11</td><td>8.4</td><td>415004880</td><td>648167031</td></tr><tr><td>1</td><td>8.3</td><td>191796233</td><td>170162503</td></tr><tr><td>7</td><td>7.2</td><td>244082982</td><td>217900167</td></tr><tr><td>10</td><td>8.3</td><td>293004164</td><td>438338580</td></tr><tr><td>4</td><td>8.1</td><td>289916256</td><td>272900000</td></tr><tr><td>2</td><td>7.2</td><td>162798565</td><td>200600000</td></tr><tr><td>13</td><td>7.2</td><td>237283207</td><td>301700000</td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># è¾“å‡ºå˜é‡ï¼ŒASç”¨æ¥èµ·åˆ«å<br>SELECT title, ((domestic_sales + international_sales) / length_minutes) AS sale_value FROM movies AS m<br><br># å†…è¿æ¥ä¸¤ä¸ªè¡¨ï¼ŒONé€šè¿‡ä»€ä¹ˆå±æ€§<br>INNER JOIN boxoffice AS b<br>ON m.id = b.movie_id<br><br># WHEREé€»è¾‘æ§åˆ¶åˆ¤æ–­<br>WHERE director = &quot;John Lasseter&quot;<br><br># ORDER BYæ’åº<br>ORDER BY sale_value DESC<br><br># LIMITé™åˆ¶ï¼ŒOFFSETè¡¨ç¤ºèµ·å§‹ä½ç½®<br>LIMIT 3 <br></code></pre></td></tr></table></figure><h2 id="1-9-å¸¸è§çš„ç»Ÿè®¡å‡½æ•°"><a href="#1-9-å¸¸è§çš„ç»Ÿè®¡å‡½æ•°" class="headerlink" title="1.9 å¸¸è§çš„ç»Ÿè®¡å‡½æ•°"></a>1.9 å¸¸è§çš„ç»Ÿè®¡å‡½æ•°</h2><p>ä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨ç»Ÿè®¡å‡½æ•°:</p><div class="table-container"><table><thead><tr><th>Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td><strong>COUNT(<em>*</em></strong>)<strong>, </strong>COUNT(<strong><em>column</em></strong>)**</td><td style="text-align:left">è®¡æ•°ï¼COUNT(*) ç»Ÿè®¡æ•°æ®è¡Œæ•°ï¼ŒCOUNT(column) ç»Ÿè®¡columnéNULLçš„è¡Œæ•°ã€‚</td></tr><tr><td><strong>MIN(*</strong>column<strong>*)</strong></td><td style="text-align:left">æ‰¾columnæœ€å°çš„ä¸€è¡Œã€‚</td></tr><tr><td><strong>MAX(*</strong>column<strong>*)</strong></td><td style="text-align:left">æ‰¾columnæœ€å¤§çš„ä¸€è¡Œã€‚</td></tr><tr><td><strong>AVG(*</strong>column*)</td><td style="text-align:left">å¯¹columnæ‰€æœ‰è¡Œå–å¹³å‡å€¼ã€‚</td></tr><tr><td><strong>SUM(*</strong>column<strong>*)</strong></td><td style="text-align:left">å¯¹columnæ‰€æœ‰è¡Œæ±‚å’Œã€‚</td></tr></tbody></table></div><p>åˆ†ç»„ç»Ÿè®¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># ç”¨åˆ†ç»„çš„æ–¹å¼ç»Ÿè®¡ï¼Œé€šè¿‡åˆ†ç»„çš„æ–¹å¼å¯¹å±€éƒ¨ç‰¹å¾è¿›è¡Œå¤„ç†<br>SELECT AGG_FUNC(column_or_expression) AS aggregate_description, â€¦<br>FROM mytable<br>WHERE constraint_expression<br>GROUP BY column;<br></code></pre></td></tr></table></figure><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„QueryæŸ¥è¯¢å·²ç»æœ‰ç‚¹å¤æ‚äº†ï¼Œä¸è¿‡è¿˜å¥½æˆ‘ä»¬å·²ç»åŸºæœ¬æŠŠæŸ¥è¯¢è¯­æ³•ä»‹ç»å®Œäº†ã€‚åœ¨ <code>GROUP BY</code> åˆ†ç»„è¯­æ³•ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ•°æ®åº“æ˜¯å…ˆå¯¹æ•°æ®åš<code>WHERE</code>ï¼Œç„¶åå¯¹ç»“æœåšåˆ†ç»„ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹åˆ†ç»„å®Œçš„æ•°æ®å†ç­›é€‰å‡ºå‡ æ¡å¦‚ä½•åŠï¼Ÿ ï¼ˆæƒ³ä¸€ä¸‹æŒ‰å¹´ä»½ç»Ÿè®¡ç”µå½±ç¥¨æˆ¿ï¼Œè¦ç­›é€‰å‡º&gt;100ä¸‡çš„å¹´ä»½ï¼Ÿï¼‰ </p><p>ä¸€ä¸ªä¸å¸¸ç”¨çš„è¯­æ³• <code>HAVING</code> è¯­æ³•å°†ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å¯ä»¥å¯¹åˆ†ç»„ä¹‹åçš„æ•°æ®å†åšSELECTç­›é€‰.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># ç”¨HAVINGè¿›è¡Œç­›é€‰ï¼Œè¿›è¡ŒGROUP BYä¹‹åçš„äºŒçº§åˆ†ç±»<br>SELECT group_by_column, AGG_FUNC(column_expression) AS aggregate_result_alias, â€¦<br>FROM mytable<br>WHERE condition<br>GROUP BY column<br>HAVING group_condition;<br></code></pre></td></tr></table></figure><p><strong>e.gã€éš¾é¢˜ã€‘æŒ‰è§’è‰²åˆ†ç»„ç®—å‡ºæ¯ä¸ªè§’è‰²æŒ‰æœ‰åŠå…¬å®¤å’Œæ²¡åŠå…¬å®¤çš„ç»Ÿè®¡äººæ•°(åˆ—å‡ºè§’è‰²ï¼Œæ•°é‡ï¼Œæœ‰æ— åŠå…¬å®¤,æ³¨æ„ä¸€ä¸ªè§’è‰²å¦‚æœéƒ¨åˆ†æœ‰åŠå…¬å®¤ï¼Œéƒ¨åˆ†æ²¡æœ‰éœ€åˆ†å¼€ç»Ÿè®¡ï¼‰</strong> </p><div class="table-container"><table><thead><tr><th>Role</th><th>Name</th><th>Building</th><th>Years_employed</th></tr></thead><tbody><tr><td>Engineer</td><td>Becky A.</td><td>1e</td><td>4</td></tr><tr><td>Engineer</td><td>Dan B.</td><td>1e</td><td>2</td></tr><tr><td>Engineer</td><td>Sharon F.</td><td>1e</td><td>6</td></tr><tr><td>Engineer</td><td>Dan M.</td><td>1e</td><td>4</td></tr><tr><td>Engineer</td><td>Malcom S.</td><td>1e</td><td>1</td></tr><tr><td>Artist</td><td>Tylar S.</td><td>2w</td><td>2</td></tr><tr><td>Artist</td><td>Sherman D.</td><td>2w</td><td>8</td></tr><tr><td>Artist</td><td>Jakob J.</td><td>2w</td><td>6</td></tr><tr><td>Artist</td><td>Lillia A.</td><td>2w</td><td>7</td></tr><tr><td>Artist</td><td>Brandon J.</td><td>2w</td><td>7</td></tr><tr><td>Manager</td><td>Scott K.</td><td>1e</td><td>9</td></tr><tr><td>Manager</td><td>Shirlee M.</td><td>1e</td><td>3</td></tr><tr><td>Manager</td><td>Daria O.</td><td>2w</td><td>6</td></tr><tr><td>Engineer</td><td>Yancy I.</td><td>null</td><td>0</td></tr><tr><td>Artist</td><td>Oliver P.</td><td>null</td><td>0</td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT count(*) as count,Role,building is not null as have_building<br>FROM employees <br>group by Role,building is not null<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå­¦åˆ°äº†GROUP BYå¯ä»¥è¿›è¡ŒäºŒçº§åˆ†ç±»ã€‚</p><h2 id="1-10-æ€»ç»“"><a href="#1-10-æ€»ç»“" class="headerlink" title="1.10 æ€»ç»“"></a>1.10 æ€»ç»“</h2><p>é›†åˆæ‰€æœ‰çš„æŸ¥è¯¢ç›¸å…³çš„è¯­æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># è¿™æ‰æ˜¯å®Œæ•´çš„SELECTæŸ¥è¯¢<br>SELECT DISTINCT column, AGG_FUNC(column_or_expression), â€¦<br>FROM mytable<br>    JOIN another_table<br>      ON mytable.column = another_table.column<br>    WHERE constraint_expression<br>    GROUP BY column<br>    HAVING constraint_expression<br>    ORDER BY column ASC/DESC<br>    LIMIT count OFFSET COUNT;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªæŸ¥è¯¢SQLçš„æ‰§è¡Œæ€»æ˜¯å…ˆä»æ•°æ®é‡ŒæŒ‰æ¡ä»¶é€‰å‡ºæ•°æ®ï¼Œç„¶åå¯¹è¿™äº›æ•°æ®å†æ¬¡åšä¸€äº›æ•´ç†å¤„ç†ï¼ŒæŒ‰è¦æ±‚è¿”å›æˆç»“æœï¼Œè®©ç»“æœå°½å¯èƒ½æ˜¯ç®€å•ç›´æ¥çš„ã€‚å› ä¸ºä¸€ä¸ªæŸ¥è¯¢SQLç”±å¾ˆå¤šéƒ¨åˆ†ç»„æˆï¼Œæ‰€ä»¥ææ¸…æ¥šè¿™äº›éƒ¨åˆ†çš„æ‰§è¡Œé¡ºåºè¿˜æŒºé‡è¦çš„ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬æ›´æ·±åˆ»çš„ç†è§£SQLæ‰§è¡Œè¿‡ç¨‹ã€‚</p><p><strong>â€¼ï¸æŸ¥è¯¢æ‰§è¡Œé¡ºåº</strong></p><h3 id="1-FROM-å’Œ-JOINs"><a href="#1-FROM-å’Œ-JOINs" class="headerlink" title="1. FROM å’Œ JOINs"></a>1. <code>FROM</code> å’Œ <code>JOIN</code>s</h3><p><code>FROM</code> æˆ– <code>JOIN</code>ä¼šç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œç¡®å®šä¸€ä¸ªæ•´ä½“çš„æ•°æ®èŒƒå›´. å¦‚æœè¦JOINä¸åŒè¡¨ï¼Œå¯èƒ½ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶Tableæ¥ç”¨äº ä¸‹é¢çš„è¿‡ç¨‹ã€‚æ€»ä¹‹ç¬¬ä¸€æ­¥å¯ä»¥ç®€å•ç†è§£ä¸ºç¡®å®šä¸€ä¸ªæ•°æ®æºè¡¨ï¼ˆå«ä¸´æ—¶è¡¨)</p><h3 id="2-WHERE"><a href="#2-WHERE" class="headerlink" title="2. WHERE"></a>2. <code>WHERE</code></h3><p>æˆ‘ä»¬ç¡®å®šäº†æ•°æ®æ¥æº <code>WHERE</code> è¯­å¥å°±å°†åœ¨è¿™ä¸ªæ•°æ®æºä¸­æŒ‰è¦æ±‚è¿›è¡Œæ•°æ®ç­›é€‰ï¼Œå¹¶ä¸¢å¼ƒä¸ç¬¦åˆè¦æ±‚çš„æ•°æ®è¡Œï¼Œæ‰€æœ‰çš„ç­›é€‰colå±æ€§ åªèƒ½æ¥è‡ª<code>FROM</code>åœˆå®šçš„è¡¨. ASåˆ«åè¿˜ä¸èƒ½åœ¨è¿™ä¸ªé˜¶æ®µä½¿ç”¨ï¼Œå› ä¸ºå¯èƒ½åˆ«åæ˜¯ä¸€ä¸ªè¿˜æ²¡æ‰§è¡Œçš„è¡¨è¾¾å¼</p><h3 id="3-GROUP-BY"><a href="#3-GROUP-BY" class="headerlink" title="3. GROUP BY"></a>3. <code>GROUP BY</code></h3><p>å¦‚æœä½ ç”¨äº† <code>GROUP BY</code> åˆ†ç»„ï¼Œé‚£<code>GROUP BY</code> å°†å¯¹ä¹‹å‰çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œç»Ÿè®¡ç­‰ï¼Œå¹¶å°†æ˜¯ç»“æœé›†ç¼©å°ä¸ºåˆ†ç»„æ•°.è¿™æ„å‘³ç€ å…¶ä»–çš„æ•°æ®åœ¨åˆ†ç»„åä¸¢å¼ƒ.</p><h3 id="4-HAVING"><a href="#4-HAVING" class="headerlink" title="4. HAVING"></a>4. <code>HAVING</code></h3><p>å¦‚æœä½ ç”¨äº† <code>GROUP BY</code> åˆ†ç»„, <code>HAVING</code> ä¼šåœ¨åˆ†ç»„å®Œæˆåå¯¹ç»“æœé›†å†æ¬¡ç­›é€‰ã€‚ASåˆ«åä¹Ÿä¸èƒ½åœ¨è¿™ä¸ªé˜¶æ®µä½¿ç”¨.</p><h3 id="5-SELECT"><a href="#5-SELECT" class="headerlink" title="5. SELECT"></a>5. <code>SELECT</code></h3><p>ç¡®å®šç»“æœä¹‹åï¼Œ<code>SELECT</code>ç”¨æ¥å¯¹ç»“æœcolç®€å•ç­›é€‰æˆ–è®¡ç®—ï¼Œå†³å®šè¾“å‡ºä»€ä¹ˆæ•°æ®.</p><h3 id="6-DISTINCT"><a href="#6-DISTINCT" class="headerlink" title="6. DISTINCT"></a>6. <code>DISTINCT</code></h3><p>å¦‚æœæ•°æ®è¡Œæœ‰é‡å¤<code>DISTINCT</code> å°†è´Ÿè´£æ’é‡.</p><h3 id="7-ORDER-BY"><a href="#7-ORDER-BY" class="headerlink" title="7. ORDER BY"></a>7. <code>ORDER BY</code></h3><p>åœ¨ç»“æœé›†ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œ<code>ORDER BY</code> å¯¹ç»“æœåšæ’åºã€‚å› ä¸º<code>SELECT</code>ä¸­çš„è¡¨è¾¾å¼å·²ç»æ‰§è¡Œå®Œäº†ã€‚æ­¤æ—¶å¯ä»¥ç”¨ASåˆ«å.</p><h3 id="8-LIMIT-OFFSET"><a href="#8-LIMIT-OFFSET" class="headerlink" title="8. LIMIT / OFFSET"></a>8. <code>LIMIT</code> / <code>OFFSET</code></h3><p>æœ€å <code>LIMIT</code> å’Œ <code>OFFSET</code> ä»æ’åºçš„ç»“æœä¸­æˆªå–éƒ¨åˆ†æ•°æ®.</p><p><strong>ç»“è®º</strong></p><p>ä¸æ˜¯æ¯ä¸€ä¸ªSQLè¯­å¥éƒ½è¦ç”¨åˆ°æ‰€æœ‰çš„å¥æ³•ï¼Œä½†çµæ´»è¿ç”¨ä»¥ä¸Šçš„å¥æ³•ç»„åˆå’Œæ·±åˆ»ç†è§£SQLæ‰§è¡ŒåŸç†å°†èƒ½åœ¨SQLå±‚é¢æ›´å¥½çš„è§£å†³æ•°æ®é—®é¢˜ï¼Œè€Œä¸ç”¨æŠŠé—®é¢˜ éƒ½æŠ›ç»™ç¨‹åºé€»è¾‘.</p><p>Tableï¼šMovies(Read - Only)</p><div class="table-container"><table><thead><tr><th>Id</th><th>Title</th><th>Director</th><th>Year</th><th>Length_minutes</th></tr></thead><tbody><tr><td>1</td><td>Toy Story</td><td>John Lasseter</td><td>1995</td><td>81</td></tr><tr><td>2</td><td>A Bugâ€™s Life</td><td>John Lasseter</td><td>1998</td><td>95</td></tr><tr><td>3</td><td>Toy Story 2</td><td>John Lasseter</td><td>1999</td><td>93</td></tr><tr><td>4</td><td>Monsters, Inc.</td><td>Pete Docter</td><td>2001</td><td>92</td></tr><tr><td>5</td><td>Finding Nemo</td><td>Finding Nemo</td><td>2003</td><td>107</td></tr><tr><td>6</td><td>The Incredibles</td><td>Brad Bird</td><td>2004</td><td>116</td></tr><tr><td>7</td><td>Cars</td><td>John Lasseter</td><td>2006</td><td>117</td></tr><tr><td>8</td><td>Ratatouille</td><td>Brad Bird</td><td>2007</td><td>115</td></tr><tr><td>9</td><td>WALL-E</td><td>Andrew Stanton</td><td>2008</td><td>104</td></tr><tr><td>10</td><td>Up</td><td>Pete Docter</td><td>2009</td><td>101</td></tr><tr><td>11</td><td>Toy Story 3</td><td>Lee Unkrich</td><td>2010</td><td>103</td></tr><tr><td>12</td><td>Cars 2</td><td>John Lasseter</td><td>2011</td><td>120</td></tr><tr><td>13</td><td>Brave</td><td>Brenda Chapman</td><td>2012</td><td>102</td></tr><tr><td>14</td><td>Monsters University</td><td>Dan Scanlon</td><td>2013</td><td>110</td></tr></tbody></table></div><p>Tableï¼šBoxoffice(Read - Only)</p><div class="table-container"><table><thead><tr><th>Movie_id</th><th>Rating</th><th>Domestic_sales</th><th>International_sales</th></tr></thead><tbody><tr><td>5</td><td>8.2</td><td>380843261</td><td>555900000</td></tr><tr><td>14</td><td>7.4</td><td>268492764</td><td>475066843</td></tr><tr><td>8</td><td>8</td><td>206445654</td><td>417277164</td></tr><tr><td>12</td><td>6.4</td><td>191452396</td><td>368400000</td></tr><tr><td>3</td><td>7.9</td><td>245852179</td><td>239163000</td></tr><tr><td>6</td><td>8</td><td>261441092</td><td>370001000</td></tr><tr><td>9</td><td>8.5</td><td>223808164</td><td>297503696</td></tr><tr><td>11</td><td>8.4</td><td>415004880</td><td>648167031</td></tr><tr><td>1</td><td>8.3</td><td>191796233</td><td>170162503</td></tr><tr><td>7</td><td>7.2</td><td>244082982</td><td>217900167</td></tr><tr><td>10</td><td>8.3</td><td>293004164</td><td>438338580</td></tr><tr><td>4</td><td>8.1</td><td>289916256</td><td>272900000</td></tr><tr><td>2</td><td>7.2</td><td>162798565</td><td>200600000</td></tr><tr><td>13</td><td>7.2</td><td>237283207</td><td>301700000</td></tr></tbody></table></div><p><strong>e.gã€éš¾é¢˜ã€‘æŒ‰å¯¼æ¼”åˆ†ç»„è®¡ç®—é”€å”®æ€»é¢,æ±‚å‡ºå¹³å‡é”€å”®é¢å† å†›ï¼ˆç»Ÿè®¡ç»“æœè¿‡æ»¤æ‰åªæœ‰å•éƒ¨ç”µå½±çš„å¯¼æ¼”ï¼Œåˆ—å‡ºå¯¼æ¼”åï¼Œæ€»é”€é‡ï¼Œç”µå½±æ•°é‡ï¼Œå¹³å‡é”€é‡) </strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM(domestic_sales + international_sales) sum_sale, director,COUNT(*) count, AVG(domestic_sales + international_sales) ave_sale FROM movies m<br>INNER JOIN boxoffice b<br>ON m.id = b.movie_id<br>GROUP BY director<br>HAVING count != 1<br>ORDER BY ave_sale DESC<br>LIMIT 1<br></code></pre></td></tr></table></figure><p><strong>Qï¼š</strong>ä¸ºä»€ä¹ˆwhereé‡Œé¢ä¸èƒ½count()è€Œhavingé‡Œé¢å¯ä»¥</p><p><strong>Aï¼š</strong>å› ä¸ºèšåˆå‡½æ•°æ˜¯åšç»Ÿè®¡ç”¨çš„ï¼Œæ‰€æœ‰çš„èšåˆæ–¹å¼ä½¿ç”¨éƒ½æ˜¯ï¼Œå‡½æ•°å(å­—æ®µ) å¯¹è¿™ä¸€ä¸ªå­—æ®µè¿›è¡Œèšåˆã€‚ä½†åœ¨mysqlå†…éƒ¨è¿è¡Œæœºåˆ¶ä¸­ï¼Œwhereåé¢è¿˜æ²¡æœ‰ç»“æœï¼Œåªæœ‰selectåé¢æ‰æœ‰ç»“æœé›†ã€‚æ‰€ä»¥èšåˆå‡½æ•°æ˜¯ä¸èƒ½æ”¾åœ¨whereåé¢,å´å¯ä»¥æ”¾åœ¨selectåé¢ã€‚</p><p><strong>e.gã€å˜æ€éš¾ã€‘æ‰¾å‡ºæ¯éƒ¨ç”µå½±å’Œå•éƒ¨ç”µå½±é”€å”®å† å†›ä¹‹é—´çš„é”€å”®å·®ï¼Œåˆ—å‡ºç”µå½±åï¼Œé”€å”®é¢å·®é¢</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT title,<br>(SELECT (Domestic_sales + International_sales) FROM movies m<br>JOIN boxoffice b<br>ON m.id = b.movie_id <br>ORDER BY(Domestic_sales+<br>International_sales) DESC <br>LIMIT 1)<br>  - (Domestic_sales+International_sales) as sale_diff<br>FROM movies m<br>LEFT JOIN boxoffice b<br>ON m.id = b.movie_id <br>ORDER BY sale_diff DESC<br></code></pre></td></tr></table></figure><p>SELECTæ˜¯å¯ä»¥åµŒå¥—çš„ï¼ŒSELECTæ˜¯è¾“å‡ºçš„è¡¨è¾¾å¼ã€‚</p><h1 id="äºŒ-æ•°æ®åº“åŸºæœ¬æ€§è´¨"><a href="#äºŒ-æ•°æ®åº“åŸºæœ¬æ€§è´¨" class="headerlink" title="äºŒ. æ•°æ®åº“åŸºæœ¬æ€§è´¨"></a>äºŒ. æ•°æ®åº“åŸºæœ¬æ€§è´¨</h1><h2 id="1-äº‹åŠ¡ï¼ˆTransactionï¼‰"><a href="#1-äº‹åŠ¡ï¼ˆTransactionï¼‰" class="headerlink" title="1. äº‹åŠ¡ï¼ˆTransactionï¼‰"></a>1. äº‹åŠ¡ï¼ˆTransactionï¼‰</h2><p>æ¦‚å¿µï¼šæ˜¯ç”±ä¸€ç»„SQLè¯­å¥ç»„æˆçš„ä¸€ä¸ªç¨‹åºæ‰§è¡Œå•å…ƒï¼ˆUnitï¼‰ï¼Œå®ƒéœ€è¦æ»¡è¶³ACIDç‰¹æ€§ã€‚<br><strong>ACIDï¼š</strong><br>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯å†åˆ†å‰²çš„å·¥ä½œå•å…ƒï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚\<br>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šæ•°æ®åº“äº‹åŠ¡ä¸èƒ½ç ´åå…³ç³»æ•°æ®çš„å®Œæ•´æ€§ä»¥åŠä¸šåŠ¡é€»è¾‘ä¸Šçš„ä¸€è‡´æ€§ã€‚\<br>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®æ—¶ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸åº”è¯¥å½±å“å…¶ä»–äº‹åŠ¡è¿è¡Œç»“æœã€‚\<br>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šåœ¨äº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡æ‰€å¯¹æ•°æ®åº“æ‰€ä½œçš„æ›´æ”¹ä¾¿æŒä¹…çš„ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­ï¼Œå¹¶ä¸ä¼šè¢«å›æ»šã€‚</p><p><strong>Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰ï¼š</strong></p><p>Redo Logè®°å½•çš„æ˜¯ç‰©ç†æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯ç£ç›˜æ•°æ®çš„ä¿®æ”¹ã€‚<br>ç”¨æ¥ä¿è¯æœåŠ¡å´©æºƒåï¼Œä»èƒ½æŠŠäº‹åŠ¡ä¸­å˜æ›´çš„æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚ </p><p>å¦‚æœæ²¡æœ‰Redo Logçš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ </p><p>ä¿®æ”¹æ•°æ®çš„è¿‡ç¨‹å°±å˜æˆè¿™æ ·äº†ï¼š </p><ol><li>ä»ç£ç›˜åŠ è½½æ•°æ®åˆ°å†…å­˜ </li><li>åœ¨å†…å­˜ä¸­ä¿®æ”¹æ•°æ® </li><li>æŠŠæ–°æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜</li></ol><p><img src="https://uploadfiles.nowcoder.com/images/20220623/662287616_1655986216392/66115853BADB7271963A156CA74C77C4" alt="img"></p><p>è¿™æ ·åšï¼Œä¼šæœ‰ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚ </p><ol><li>InnoDBåœ¨ç£ç›˜ä¸­å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯é¡µï¼Œå¯èƒ½æœ¬æ¬¡ä¿®æ”¹åªå˜æ›´ä¸€é¡µä¸­å‡ ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯éœ€è¦åˆ·æ–°æ•´é¡µçš„æ•°æ®ï¼Œå°±å¾ˆæµªè´¹èµ„æºã€‚ </li><li>ä¸€ä¸ªäº‹åŠ¡å¯èƒ½ä¿®æ”¹äº†å¤šé¡µä¸­çš„æ•°æ®ï¼Œé¡µä¹‹é—´åˆæ˜¯ä¸è¿ç»­çš„ï¼Œå°±ä¼šäº§ç”ŸéšæœºIOï¼Œæ€§èƒ½æ›´å·®ã€‚ </li></ol><p>æ‰€ä»¥ä¸ºäº†æé«˜å†™å…¥æ€§èƒ½ï¼Œäºæ˜¯å°±å¼•å…¥äº†Redo Logã€‚ </p><p>çœ‹ä¸€ä¸‹å¼•å…¥Redo Logåä¿®æ”¹æµç¨‹ï¼š </p><ol><li>ä»ç£ç›˜åŠ è½½æ•°æ®åˆ°å†…å­˜ </li><li>åœ¨å†…å­˜ä¸­ä¿®æ”¹æ•°æ® </li><li>æŠŠæ–°æ•°æ®å†™åˆ°<strong>Redo Log Buffer</strong>ä¸­ </li><li>æŠŠ<strong>Redo Log Buffer</strong>ä¸­æ•°æ®æŒä¹…åŒ–åˆ°<strong>Redo Log</strong>æ–‡ä»¶ä¸­ </li><li>æŠŠ<strong>Redo Log</strong>æ–‡ä»¶ä¸­æ•°æ®æŒä¹…åŒ–åˆ°æ•°æ®åº“ç£ç›˜ä¸­</li></ol><p><img src="https://uploadfiles.nowcoder.com/images/20220623/662287616_1655986226028/5708D19E4669F6A45620337CF900C548" alt="img"></p><p><strong>Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰ï¼š</strong></p><p>Undo Logè®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼Œç”¨æ¥å›æ»šäº‹åŠ¡æ—¶ï¼Œæ¢å¤åˆ°ä¿®æ”¹å‰çš„æ•°æ®ã€‚ </p><p>æ¯”å¦‚ï¼šå½“æˆ‘ä»¬æ‰§è¡Œä¸€æ¡insertè¯­å¥æ—¶ï¼ŒUndo Logå°±è®°å½•ä¸€æ¡ç›¸åçš„deleteè¯­å¥ã€‚ </p><p>åŠ å…¥Undo Logä¹‹åçš„ä¿®æ”¹æµç¨‹å°±æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220623/662287616_1655986232575/816A79F9839780944D5BE8A640D681F2" alt="img"></p><p><strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ŒMulti-Version Concurrency Controlï¼‰ï¼š</strong></p><p>è®°å½•çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„æ•°æ®å¿«ç…§ï¼Œç”¨æ¥å®ç°ä¸åŒäº‹åŠ¡ä¹‹é—´æ•°æ®çš„éš”ç¦»æ€§ã€‚ </p><p>æåˆ°éš”ç¦»æ€§ï¼Œä¸€å®šè¦è¯´ä¸€ä¸‹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚ </p><p>è¯´äº‹åŠ¡éš”ç¦»çº§åˆ«ä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆè¯´ä¸€ä¸‹å¹¶å‘äº‹åŠ¡äº§ç”Ÿçš„é—®é¢˜ï¼š </p><p><strong>è„è¯»ï¼š</strong> ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚ </p><p><strong>ä¸å¯é‡å¤è¯»ï¼š</strong> å¤šæ¬¡è¯»å–ç›¸åŒçš„æ•°æ®ï¼Œå¾—åˆ°çš„ç»“æœé›†ä¸ä¸€è‡´ï¼Œå³è¯»åˆ°å…¶ä»–äº‹åŠ¡æäº¤åçš„æ•°æ®ã€‚ </p><p><strong>å¹»è¯»ï¼š</strong> ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶ï¼Œå¤šæ¬¡è¯»å–çš„ç»“æœä¸ä¸€è‡´ï¼Œå³è¯»åˆ°å…¶ä»–äº‹åŠ¡æäº¤åçš„æ•°æ®ã€‚ </p><p><strong>ä¸å¯é‡å¤è¯»ä¸å¹»è¯»çš„åŒºåˆ«æ˜¯ï¼š</strong> ä¸å¯é‡å¤è¯»æ˜¯è¯»åˆ°äº†å…¶ä»–äº‹åŠ¡æ‰§è¡Œupdateã€deleteåçš„æ•°æ®ï¼Œè€Œå¹»è¯»æ˜¯è¯»åˆ°å…¶ä»–äº‹åŠ¡æ‰§è¡Œinsertåçš„æ•°æ®ã€‚ </p><p><strong>éš”ç¦»çº§åˆ«</strong></p><p><strong>Read UnCommittedï¼ˆè¯»æœªæäº¤ï¼‰ï¼š</strong> è¯»åˆ°å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚ </p><p><strong>Read Committedï¼ˆè¯»å·²æäº¤ï¼‰ï¼š</strong> è¯»åˆ°å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®ï¼Œè§£å†³äº†è„è¯»ï¼Œä¼šå‡ºç°ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚ </p><p><strong>Repeatable Readï¼ˆå¯é‡å¤è¯»ï¼‰ï¼š</strong> ç›¸åŒçš„æ•°æ®ï¼Œå¤šæ¬¡è¯»å–åˆ°çš„ç»“æœé›†ä¸€è‡´ã€‚è§£å†³äº†ä¸å¯é‡å¤è¯»ï¼Œè¿˜æ˜¯ä¼šå‡ºç°å¹»è¯»ã€‚ </p><p><strong>Serializableï¼ˆä¸²è¡ŒåŒ–ï¼‰ï¼š</strong> æ‰€æœ‰äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œè§£å†³äº†å¹»è¯»ã€‚ </p><p>å†è°ˆMVCCï¼š </p><p>MVCCè§£å†³äº†è¯»å†™å†²çªï¼Œå®ç°äº†è¯»å†™å¹¶è¡Œï¼Œæå‡äº†äº‹åŠ¡çš„æ€§èƒ½ã€‚ </p><p>ç”±äºRead UnCommittedéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡éƒ½è¯»å–æœ€æ–°çš„æ•°æ®ã€‚è€ŒSerializableéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹æ‰€æœ‰è¯»å–æ•°æ®éƒ½åŠ é”ã€‚è¿™ä¸¤ç§éš”ç¦»çº§ä¸éœ€è¦MVCCï¼Œæ‰€ä»¥MVCCåªåœ¨Read Committedå’ŒRepeatable Readä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹èµ·ä½œç”¨ã€‚ </p><p>MVCCçš„å®ç°æ–¹å¼é€šè¿‡ä¸¤ä¸ªéšè—åˆ—trx_idï¼ˆæœ€è¿‘ä¸€æ¬¡æäº¤äº‹åŠ¡çš„IDï¼‰å’Œroll_pointerï¼ˆä¸Šä¸ªç‰ˆæœ¬çš„åœ°å€ï¼‰ï¼Œå»ºç«‹ä¸€ä¸ªç‰ˆæœ¬é“¾ã€‚å¹¶åœ¨äº‹åŠ¡ä¸­è¯»å–çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªReadViewï¼ˆè¯»è§†å›¾ï¼‰ï¼Œåœ¨Read Committedéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡è¯»å–éƒ½ä¼šç”Ÿæˆä¸€ä¸ªè¯»è§†å›¾ï¼Œè€Œåœ¨Repeatable Readéš”ç¦»çº§åˆ«ä¸‹ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡è¯»å–æ—¶ç”Ÿæˆä¸€ä¸ªè¯»è§†å›¾ã€‚ </p><p>å› ä¸º<strong>å¯é‡å¤è¯»</strong>ç›´æ¥åœ¨å¼€å¯äº‹åŠ¡çš„æ—¶å€™å°±é”ä½äº†æŸä¸€è¡Œï¼Œåˆ«çš„äººæ ¹æœ¬è¯»ä¸äº†ï¼Œæ‰€ä»¥å°±ç”Ÿæˆä¸€ä¸ªè¯»è§†å›¾ï¼Œæ¥è®°å½•ä»–çš„ä¿®æ”¹ã€‚</p><p><img src="https://uploadfiles.nowcoder.com/images/20220623/662287616_1655986240370/3D78F006E535818D637B7C33BADB13AB" alt="img"></p><p>InnoDBå¦‚ä½•è§£å†³å¹»è¯»çš„ï¼Ÿ </p><p>å…ˆæ™®åŠä¸€ä¸‹å¿«ç…§è¯»å’Œå½“å‰è¯»ã€‚ </p><p><strong>å½“å‰è¯»ï¼š</strong> è¯»å–æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡ŒåŠ é”ã€‚ </p><p>ä¾‹å¦‚ï¼šinsertã€updateã€deleteã€select for update </p><p><strong>å¿«ç…§è¯»ï¼š</strong> è¯»å–æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œä¸å¯¹æ•°æ®åŠ é”ã€‚ </p><p>ä¾‹å¦‚ï¼šselect </p><p>åœ¨å½“å‰è¯»çš„æƒ…å†µä¸‹ï¼Œæ˜¯é€šè¿‡åŠ é”æ¥è§£å†³å¹»è¯»ã€‚ </p><p>åœ¨å¿«ç…§è¯»çš„æƒ…å†µä¸‹ï¼Œæ˜¯é€šè¿‡MVCCæ¥è§£å†³å¹»è¯»ã€‚</p><h2 id="2-å¹¶å‘ä¸€è‡´æ€§é—®é¢˜"><a href="#2-å¹¶å‘ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="2. å¹¶å‘ä¸€è‡´æ€§é—®é¢˜"></a>2. å¹¶å‘ä¸€è‡´æ€§é—®é¢˜</h2><p>åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œäº‹åŠ¡çš„éš”ç¦»æ€§å¾ˆéš¾ä¿è¯ï¼Œå› æ­¤ä¼šå‡ºç°å¾ˆå¤šå¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚</p><h3 id="2-1-ä¸¢å¤±ä¿®æ”¹"><a href="#2-1-ä¸¢å¤±ä¿®æ”¹" class="headerlink" title="2.1 ä¸¢å¤±ä¿®æ”¹"></a>2.1 ä¸¢å¤±ä¿®æ”¹</h3><p>T1äº‹åŠ¡å’ŒT2äº‹åŠ¡åŒæ—¶è¿›è¡Œæ›´æ–°æ“ä½œåŒä¸€ä¸ªæ•°æ®ï¼ŒT1åœ¨å‰ï¼ŒT2åœ¨åï¼ŒT2çš„ä¿®æ”¹è¦†ç›–äº†T1çš„ä¿®æ”¹ã€‚</p><h3 id="2-2-è¯»è„æ•°æ®"><a href="#2-2-è¯»è„æ•°æ®" class="headerlink" title="2.2 è¯»è„æ•°æ®"></a>2.2 è¯»è„æ•°æ®</h3><p>è¯»è„æ•°æ®æŒ‡åœ¨ä¸åŒçš„äº‹åŠ¡ä¸‹ï¼Œå½“å‰äº‹åŠ¡å¯ä»¥è¯»åˆ°å¦å¤–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šT1 ä¿®æ”¹ä¸€ä¸ªæ•°æ®ä½†æœªæäº¤ï¼ŒT2 éšåè¯»å–è¿™ä¸ªæ•°æ®ã€‚å¦‚æœ T1 æ’¤é”€äº†è¿™æ¬¡ä¿®æ”¹ï¼Œé‚£ä¹ˆ T2 è¯»å–çš„æ•°æ®æ˜¯è„æ•°æ®ã€‚</p><h3 id="2-3-ä¸å¯é‡å¤è¯»"><a href="#2-3-ä¸å¯é‡å¤è¯»" class="headerlink" title="2.3 ä¸å¯é‡å¤è¯»"></a>2.3 ä¸å¯é‡å¤è¯»</h3><p>ä¸å¯é‡å¤è¯»æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®é›†åˆã€‚åœ¨è¿™ä¸€äº‹åŠ¡è¿˜æœªç»“æŸå‰ï¼Œå¦ä¸€äº‹åŠ¡ä¹Ÿè®¿é—®äº†è¯¥åŒä¸€æ•°æ®é›†åˆå¹¶åšäº†ä¿®æ”¹ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹ï¼Œç¬¬ä¸€æ¬¡äº‹åŠ¡çš„ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼šT2 è¯»å–ä¸€ä¸ªæ•°æ®ï¼ŒT1 å¯¹è¯¥æ•°æ®åšäº†ä¿®æ”¹ã€‚å¦‚æœ T2 å†æ¬¡è¯»å–è¿™ä¸ªæ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚</p><h3 id="2-4-å¹»è¯»"><a href="#2-4-å¹»è¯»" class="headerlink" title="2.4 å¹»è¯»"></a>2.4 å¹»è¯»</h3><p>å¹»è¯»æœ¬è´¨ä¸Šä¹Ÿå±äºä¸å¯é‡å¤è¯»çš„æƒ…å†µï¼ŒT1 è¯»å–æŸä¸ªèŒƒå›´çš„æ•°æ®ï¼ŒT2 åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°çš„æ•°æ®ï¼ŒT1 å†æ¬¡è¯»å–è¿™ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚ä¸ä¸å¯é‡å¤è¯»ä¸åŒçš„æ˜¯ï¼Œå‰è€…æ˜¯è¯»äº†æ›´æ–°çš„æ•°æ®å†…å®¹ï¼Œåè€…æ˜¯è¯»äº†æ›´æ–°çš„æ•°æ®é¡¹</p><h2 id="3-å°é”"><a href="#3-å°é”" class="headerlink" title="3. å°é”"></a>3. å°é”</h2><h3 id="3-1-å°é”ç±»å‹"><a href="#3-1-å°é”ç±»å‹" class="headerlink" title="3.1 å°é”ç±»å‹"></a>3.1 å°é”ç±»å‹</h3><h4 id="3-1-1-è¯»å†™é”"><a href="#3-1-1-è¯»å†™é”" class="headerlink" title="3.1.1 è¯»å†™é”"></a>3.1.1 è¯»å†™é”</h4><ul><li>äº’æ–¥é”ï¼ˆExclusiveï¼‰ï¼Œç®€å†™ä¸º X é”ï¼Œåˆç§°å†™é”ã€‚</li><li>å…±äº«é”ï¼ˆSharedï¼‰ï¼Œç®€å†™ä¸º S é”ï¼Œåˆç§°è¯»é”ã€‚<br>æœ‰ä¸¤ä¸ªè§„å®šï¼š<br>1ï¼‰T æ‹¿åˆ° X é”çš„æ—¶å€™ï¼Œå…¶ä»–çš„è¯»å†™æ•°æ®çš„è¯·æ±‚éƒ½è¦éš”ç¦»ã€‚<br>2ï¼‰T æ‹¿åˆ° S é”çš„æ—¶å€™ï¼Œå…¶ä»–çš„æ›´æ–°æ•°æ®çš„è¯·æ±‚éƒ½è¦éš”ç¦»ã€‚</li></ul><p>XSé”å…¼å®¹å…³ç³»<br>|      | X    | S    |<br>| â€”â€” | â€”â€” | â€”â€” |<br>| X    | âŒ    | âŒ    |<br>| S    | âŒ    | âœ…    |</p><h4 id="3-1-2-æ„å‘é”"><a href="#3-1-2-æ„å‘é”" class="headerlink" title="3.1.2 æ„å‘é”"></a>3.1.2 æ„å‘é”</h4><p>åœ¨Tå¯¹æ•°æ®åŠ å…¥Xé”æˆ–è€…Sé”ä¹‹å‰è¦æ‹¿åˆ°æ„å‘é”ï¼Œç¡®è®¤æ²¡æœ‰åˆ«çš„äº‹åŠ¡å¯¹æ•°æ®è¡¨å’ŒæŸè¡Œæ•°æ®è¿›è¡Œæ“ä½œæ„å‘ã€‚</p><h2 id="4-éš”ç¦»çº§åˆ«"><a href="#4-éš”ç¦»çº§åˆ«" class="headerlink" title="4. éš”ç¦»çº§åˆ«"></a>4. éš”ç¦»çº§åˆ«</h2><h3 id="4-1-æœªæäº¤è¯»ï¼ˆREAD-UNCOMMITTEDï¼‰"><a href="#4-1-æœªæäº¤è¯»ï¼ˆREAD-UNCOMMITTEDï¼‰" class="headerlink" title="4.1 æœªæäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰"></a>4.1 æœªæäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰</h3><p>äº‹åŠ¡ä¸­çš„ä¿®æ”¹ï¼Œå³ä½¿æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ã€‚</p><h3 id="4-2-æäº¤è¯»ï¼ˆREAD-COMMITTEDï¼‰"><a href="#4-2-æäº¤è¯»ï¼ˆREAD-COMMITTEDï¼‰" class="headerlink" title="4.2 æäº¤è¯»ï¼ˆREAD COMMITTEDï¼‰"></a>4.2 æäº¤è¯»ï¼ˆREAD COMMITTEDï¼‰</h3><p>ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å·²ç»æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æäº¤ä¹‹å‰å¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚è§£å†³è„è¯»ã€‚</p><h3 id="4-3-å¯é‡å¤è¯»ï¼ˆREPEATABLE-READï¼‰"><a href="#4-3-å¯é‡å¤è¯»ï¼ˆREPEATABLE-READï¼‰" class="headerlink" title="4.3 å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰"></a>4.3 å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</h3><p>ä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚è§£å†³ä¸å¯é‡å¤è¯»ï¼Œè„è¯»ã€‚</p><h3 id="4-4-å¯åºåˆ—åŒ–ï¼ˆSERIALIZABLEï¼‰"><a href="#4-4-å¯åºåˆ—åŒ–ï¼ˆSERIALIZABLEï¼‰" class="headerlink" title="4.4 å¯åºåˆ—åŒ–ï¼ˆSERIALIZABLEï¼‰"></a>4.4 å¯åºåˆ—åŒ–ï¼ˆSERIALIZABLEï¼‰</h3><p>å¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œçš„æ‰§è¡Œï¼Œå¹¶ä¸”é€šè¿‡é”æ¥è§„å®šåŒä¸€æ—¶é—´æ‰§è¡Œçš„äº‹åŠ¡åªæœ‰ä¸€ä¸ªï¼Œè§„å®šå¥½äº†æ‰§è¡Œçš„ç§©åºã€‚è§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</p><p>éš”ç¦»çº§åˆ«èƒ½è§£å†³çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜</p><div class="table-container"><table><thead><tr><th></th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>æœªæäº¤è¯»</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td>æäº¤è¯»</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td>å¯é‡å¤è¯»</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td>å¯åºåˆ—åŒ–</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr></tbody></table></div><h2 id="5-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶MVCC"><a href="#5-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶MVCC" class="headerlink" title="5. å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶MVCC"></a>5. å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶MVCC</h2><p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMulti-Version Concurrency Control, MVCCï¼‰æ˜¯ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“å®ç°éš”ç¦»çº§åˆ«çš„ä¸€ç§å…·ä½“æ–¹å¼ï¼Œç”¨äºå®ç°æäº¤è¯»å’Œå¯é‡å¤è¯»è¿™ä¸¤ç§éš”ç¦»çº§åˆ«ã€‚è€Œæœªæäº¤è¯»éš”ç¦»çº§åˆ«æ€»æ˜¯è¯»å–æœ€æ–°çš„æ•°æ®è¡Œï¼Œè¦æ±‚å¾ˆä½ï¼Œæ— éœ€ä½¿ç”¨ MVCCã€‚å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«éœ€è¦å¯¹æ‰€æœ‰è¯»å–çš„è¡Œéƒ½åŠ é”ï¼Œå•çº¯ä½¿ç”¨ MVCC æ— æ³•å®ç°ã€‚</p><p><strong>MVCC</strong>(Multi Version Concurrency Controlçš„ç®€ç§°)ï¼Œä»£è¡¨<strong>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</strong>ã€‚</p><p>MVCCæœ€å¤§çš„ä¼˜åŠ¿ï¼š<strong>è¯»ä¸åŠ é”ï¼Œè¯»å†™ä¸å†²çª</strong>ã€‚è¯»å†™ä¸å†²çªæ˜¯éå¸¸é‡è¦çš„ï¼Œæå¤§çš„å¢åŠ äº†ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚<strong>MVCCæœºåˆ¶ä¹Ÿæ˜¯ä¹è§‚é”çš„ä¸€ç§ä½“ç°ã€‚</strong></p><p><strong>åŸºæœ¬æ€æƒ³</strong></p><p>åœ¨å°é”ä¸€èŠ‚ä¸­æåˆ°ï¼ŒåŠ é”èƒ½è§£å†³å¤šä¸ªäº‹åŠ¡åŒæ—¶æ‰§è¡Œæ—¶å‡ºç°çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚åœ¨å®é™…åœºæ™¯ä¸­è¯»æ“ä½œå¾€å¾€å¤šäºå†™æ“ä½œï¼Œå› æ­¤åˆå¼•å…¥äº†è¯»å†™é”æ¥é¿å…ä¸å¿…è¦çš„åŠ é”æ“ä½œï¼Œä¾‹å¦‚è¯»å’Œè¯»æ²¡æœ‰äº’æ–¥å…³ç³»ã€‚è¯»å†™é”ä¸­è¯»å’Œå†™æ“ä½œä»ç„¶æ˜¯äº’æ–¥çš„ï¼Œè€Œ MVCC åˆ©ç”¨äº†å¤šç‰ˆæœ¬çš„æ€æƒ³ï¼Œå†™æ“ä½œæ›´æ–°æœ€æ–°çš„ç‰ˆæœ¬å¿«ç…§ï¼Œè€Œè¯»æ“ä½œå»è¯»æ—§ç‰ˆæœ¬å¿«ç…§ï¼Œæ²¡æœ‰äº’æ–¥å…³ç³»ï¼Œè¿™ä¸€ç‚¹å’Œ CopyOnWrite ç±»ä¼¼ã€‚</p><p>åœ¨ MVCC ä¸­äº‹åŠ¡çš„ä¿®æ”¹æ“ä½œï¼ˆDELETEã€INSERTã€UPDATEï¼‰ä¼šä¸ºæ•°æ®è¡Œæ–°å¢ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ã€‚</p><p>è„è¯»å’Œä¸å¯é‡å¤è¯»æœ€æ ¹æœ¬çš„åŸå› æ˜¯äº‹åŠ¡è¯»å–åˆ°å…¶å®ƒäº‹åŠ¡æœªæäº¤çš„ä¿®æ”¹ã€‚åœ¨äº‹åŠ¡è¿›è¡Œè¯»å–æ“ä½œæ—¶ï¼Œä¸ºäº†è§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»é—®é¢˜ï¼ŒMVCC è§„å®šåªèƒ½è¯»å–å·²ç»æäº¤çš„å¿«ç…§ã€‚å½“ç„¶ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–è‡ªèº«æœªæäº¤çš„å¿«ç…§ï¼Œè¿™ä¸ç®—æ˜¯è„è¯»ã€‚</p><h1 id="ä¸‰-æ•°æ®åº“çš„åŸç†"><a href="#ä¸‰-æ•°æ®åº“çš„åŸç†" class="headerlink" title="ä¸‰. æ•°æ®åº“çš„åŸç†"></a>ä¸‰. æ•°æ®åº“çš„åŸç†</h1><h2 id="ä¸€ã€ç´¢å¼•ä¼˜åŒ–"><a href="#ä¸€ã€ç´¢å¼•ä¼˜åŒ–" class="headerlink" title="ä¸€ã€ç´¢å¼•ä¼˜åŒ–"></a>ä¸€ã€ç´¢å¼•ä¼˜åŒ–</h2><h3 id="1-ç‹¬ç«‹çš„åˆ—"><a href="#1-ç‹¬ç«‹çš„åˆ—" class="headerlink" title="1. ç‹¬ç«‹çš„åˆ—"></a>1. ç‹¬ç«‹çš„åˆ—</h3><p>åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œç´¢å¼•åˆ—ä¸èƒ½æ˜¯è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸èƒ½æ˜¯å‡½æ•°çš„å‚æ•°ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</p><p>ä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ä¸èƒ½ä½¿ç”¨ actor_id åˆ—çš„ç´¢å¼•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT actor_id FROM sakila.actor WHERE actor_id + 1 = 5;<br></code></pre></td></tr></table></figure><h3 id="2-å¤šåˆ—ç´¢å¼•"><a href="#2-å¤šåˆ—ç´¢å¼•" class="headerlink" title="2. å¤šåˆ—ç´¢å¼•"></a>2. å¤šåˆ—ç´¢å¼•</h3><p>åœ¨éœ€è¦ä½¿ç”¨å¤šä¸ªåˆ—ä½œä¸ºæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨å¤šåˆ—ç´¢å¼•æ¯”ä½¿ç”¨å¤šä¸ªå•åˆ—ç´¢å¼•æ€§èƒ½æ›´å¥½ã€‚ä¾‹å¦‚ä¸‹é¢çš„è¯­å¥ä¸­ï¼Œæœ€å¥½æŠŠ actor_id å’Œ film_id è®¾ç½®ä¸ºå¤šåˆ—ç´¢å¼•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT film_id, actor_ id FROM sakila.film_actor<br>WHERE actor_id = 1 AND film_id = 1;<br></code></pre></td></tr></table></figure><h3 id="3-ç´¢å¼•åˆ—çš„é¡ºåº"><a href="#3-ç´¢å¼•åˆ—çš„é¡ºåº" class="headerlink" title="3. ç´¢å¼•åˆ—çš„é¡ºåº"></a>3. ç´¢å¼•åˆ—çš„é¡ºåº</h3><p>è®©é€‰æ‹©æ€§æœ€å¼ºçš„ç´¢å¼•åˆ—æ”¾åœ¨å‰é¢ã€‚</p><p>ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯æŒ‡ï¼šä¸é‡å¤çš„ç´¢å¼•å€¼å’Œè®°å½•æ€»æ•°çš„æ¯”å€¼ã€‚æœ€å¤§å€¼ä¸º 1ï¼Œæ­¤æ—¶æ¯ä¸ªè®°å½•éƒ½æœ‰å”¯ä¸€çš„ç´¢å¼•ä¸å…¶å¯¹åº”ã€‚é€‰æ‹©æ€§è¶Šé«˜ï¼Œæ¯ä¸ªè®°å½•çš„åŒºåˆ†åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿè¶Šé«˜ã€‚</p><p>ä¾‹å¦‚ä¸‹é¢æ˜¾ç¤ºçš„ç»“æœä¸­ customer_id çš„é€‰æ‹©æ€§æ¯” staff_id æ›´é«˜ï¼Œå› æ­¤æœ€å¥½æŠŠ customer_id åˆ—æ”¾åœ¨å¤šåˆ—ç´¢å¼•çš„å‰é¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT COUNT(DISTINCT staff_id)/COUNT(*) AS staff_id_selectivity,<br>COUNT(DISTINCT customer_id)/COUNT(*) AS customer_id_selectivity,<br>COUNT(*)<br>FROM payment;<br>   staff_id_selectivity: 0.0001<br>customer_id_selectivity: 0.0373<br>               COUNT(*): 16049<br></code></pre></td></tr></table></figure><h3 id="4-å‰ç¼€ç´¢å¼•"><a href="#4-å‰ç¼€ç´¢å¼•" class="headerlink" title="4. å‰ç¼€ç´¢å¼•"></a>4. å‰ç¼€ç´¢å¼•</h3><p>å¯¹äº BLOBã€TEXT å’Œ VARCHAR ç±»å‹çš„åˆ—ï¼Œå¿…é¡»ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œåªç´¢å¼•å¼€å§‹çš„éƒ¨åˆ†å­—ç¬¦ã€‚</p><p>å‰ç¼€é•¿åº¦çš„é€‰å–éœ€è¦æ ¹æ®ç´¢å¼•é€‰æ‹©æ€§æ¥ç¡®å®šã€‚</p><h3 id="5-è¦†ç›–ç´¢å¼•"><a href="#5-è¦†ç›–ç´¢å¼•" class="headerlink" title="5. è¦†ç›–ç´¢å¼•"></a>5. è¦†ç›–ç´¢å¼•</h3><p>ç´¢å¼•åŒ…å«æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ã€‚</p><p>å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>ç´¢å¼•é€šå¸¸è¿œå°äºæ•°æ®è¡Œçš„å¤§å°ï¼Œåªè¯»å–ç´¢å¼•èƒ½å¤§å¤§å‡å°‘æ•°æ®è®¿é—®é‡ã€‚</li><li>ä¸€äº›å­˜å‚¨å¼•æ“ï¼ˆä¾‹å¦‚ MyISAMï¼‰åœ¨å†…å­˜ä¸­åªç¼“å­˜ç´¢å¼•ï¼Œè€Œæ•°æ®ä¾èµ–äºæ“ä½œç³»ç»Ÿæ¥ç¼“å­˜ã€‚å› æ­¤ï¼Œåªè®¿é—®ç´¢å¼•å¯ä»¥ä¸ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼ˆé€šå¸¸æ¯”è¾ƒè´¹æ—¶ï¼‰ã€‚</li><li>å¯¹äº InnoDB å¼•æ“ï¼Œè‹¥è¾…åŠ©ç´¢å¼•èƒ½å¤Ÿè¦†ç›–æŸ¥è¯¢ï¼Œåˆ™æ— éœ€è®¿é—®ä¸»ç´¢å¼•</li></ul><h2 id="äºŒã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"><a href="#äºŒã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="äºŒã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"></a>äºŒã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–</h2><h3 id="ä½¿ç”¨-Explain-è¿›è¡Œåˆ†æ"><a href="#ä½¿ç”¨-Explain-è¿›è¡Œåˆ†æ" class="headerlink" title="ä½¿ç”¨ Explain è¿›è¡Œåˆ†æ"></a>ä½¿ç”¨ Explain è¿›è¡Œåˆ†æ</h3><p>Explain ç”¨æ¥åˆ†æ SELECT æŸ¥è¯¢è¯­å¥ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡åˆ†æ Explain ç»“æœæ¥ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ã€‚</p><p>æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰ï¼š</p><ul><li>select_type : æŸ¥è¯¢ç±»å‹ï¼Œæœ‰ç®€å•æŸ¥è¯¢ã€è”åˆæŸ¥è¯¢ã€å­æŸ¥è¯¢ç­‰</li><li>key : ä½¿ç”¨çš„ç´¢å¼•</li><li>rows : æ‰«æçš„è¡Œæ•°</li></ul><h3 id="ä¼˜åŒ–æ•°æ®è®¿é—®"><a href="#ä¼˜åŒ–æ•°æ®è®¿é—®" class="headerlink" title="ä¼˜åŒ–æ•°æ®è®¿é—®"></a>ä¼˜åŒ–æ•°æ®è®¿é—®</h3><h4 id="1-å‡å°‘è¯·æ±‚çš„æ•°æ®é‡"><a href="#1-å‡å°‘è¯·æ±‚çš„æ•°æ®é‡" class="headerlink" title="1. å‡å°‘è¯·æ±‚çš„æ•°æ®é‡"></a>1. å‡å°‘è¯·æ±‚çš„æ•°æ®é‡</h4><ul><li>åªè¿”å›å¿…è¦çš„åˆ—ï¼šæœ€å¥½ä¸è¦ä½¿ç”¨ SELECT * è¯­å¥ã€‚</li><li>åªè¿”å›å¿…è¦çš„è¡Œï¼šä½¿ç”¨ LIMIT è¯­å¥æ¥é™åˆ¶è¿”å›çš„æ•°æ®ã€‚</li><li>ç¼“å­˜é‡å¤æŸ¥è¯¢çš„æ•°æ®ï¼šä½¿ç”¨ç¼“å­˜å¯ä»¥é¿å…åœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œç‰¹åˆ«åœ¨è¦æŸ¥è¯¢çš„æ•°æ®ç»å¸¸è¢«é‡å¤æŸ¥è¯¢æ—¶ï¼Œç¼“å­˜å¸¦æ¥çš„æŸ¥è¯¢æ€§èƒ½æå‡å°†ä¼šæ˜¯éå¸¸æ˜æ˜¾çš„ã€‚</li></ul><p><strong>å‡†ç¡®è‡ªå·±æŸ¥è¯¢çš„å†…å®¹ï¼</strong></p><h4 id="2-å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°"><a href="#2-å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°" class="headerlink" title="2. å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°"></a>2. å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°</h4><p>æœ€æœ‰æ•ˆçš„æ–¹å¼æ˜¯ä½¿ç”¨ç´¢å¼•æ¥è¦†ç›–æŸ¥è¯¢ã€‚</p><h2 id="ä¸‰ã€é‡æ„æŸ¥è¯¢æ–¹å¼"><a href="#ä¸‰ã€é‡æ„æŸ¥è¯¢æ–¹å¼" class="headerlink" title="ä¸‰ã€é‡æ„æŸ¥è¯¢æ–¹å¼"></a>ä¸‰ã€é‡æ„æŸ¥è¯¢æ–¹å¼</h2><h3 id="1-åˆ‡åˆ†å¤§æŸ¥è¯¢"><a href="#1-åˆ‡åˆ†å¤§æŸ¥è¯¢" class="headerlink" title="1. åˆ‡åˆ†å¤§æŸ¥è¯¢"></a>1. åˆ‡åˆ†å¤§æŸ¥è¯¢</h3><p>ä¸€ä¸ªå¤§æŸ¥è¯¢å¦‚æœä¸€æ¬¡æ€§æ‰§è¡Œçš„è¯ï¼Œå¯èƒ½ä¸€æ¬¡é”ä½å¾ˆå¤šæ•°æ®ã€å æ»¡æ•´ä¸ªäº‹åŠ¡æ—¥å¿—ã€è€—å°½ç³»ç»Ÿèµ„æºã€é˜»å¡å¾ˆå¤šå°çš„ä½†é‡è¦çš„æŸ¥è¯¢ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> messages <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">create</span> &lt; DATE_SUB(NOW(), INTERVAL <span class="hljs-number">3</span> MONTH);<br>rows_affected = 0<br>do &#123;<br>    rows_affected = do_query(<br>    &quot;<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> messages <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">create</span>  &lt; DATE_SUB(NOW(), INTERVAL <span class="hljs-number">3</span> MONTH) <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10000</span><span class="hljs-string">&quot;)</span><br><span class="hljs-string">&#125; while rows_affected &gt; 0</span><br></code></pre></td></tr></table></figure><h3 id="2-åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢"><a href="#2-åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢" class="headerlink" title="2. åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢"></a>2. åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢</h3><p>å°†ä¸€ä¸ªå¤§è¿æ¥æŸ¥è¯¢åˆ†è§£æˆå¯¹æ¯ä¸€ä¸ªè¡¨è¿›è¡Œä¸€æ¬¡å•è¡¨æŸ¥è¯¢ï¼Œç„¶ååœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œå…³è”ï¼Œè¿™æ ·åšçš„å¥½å¤„æœ‰ï¼š</p><ul><li>è®©ç¼“å­˜æ›´é«˜æ•ˆã€‚å¯¹äºè¿æ¥æŸ¥è¯¢ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªæŸ¥è¯¢ç¼“å­˜å°±æ— æ³•ä½¿ç”¨ã€‚è€Œåˆ†è§£åçš„å¤šä¸ªæŸ¥è¯¢ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œå¯¹å…¶å®ƒè¡¨çš„æŸ¥è¯¢ç¼“å­˜ä¾ç„¶å¯ä»¥ä½¿ç”¨ã€‚</li><li>åˆ†è§£æˆå¤šä¸ªå•è¡¨æŸ¥è¯¢ï¼Œè¿™äº›å•è¡¨æŸ¥è¯¢çš„ç¼“å­˜ç»“æœæ›´å¯èƒ½è¢«å…¶å®ƒæŸ¥è¯¢ä½¿ç”¨åˆ°ï¼Œä»è€Œå‡å°‘å†—ä½™è®°å½•çš„æŸ¥è¯¢ã€‚</li><li>å‡å°‘é”ç«äº‰ï¼›</li><li>åœ¨åº”ç”¨å±‚è¿›è¡Œè¿æ¥ï¼Œå¯ä»¥æ›´å®¹æ˜“å¯¹æ•°æ®åº“è¿›è¡Œæ‹†åˆ†ï¼Œä»è€Œæ›´å®¹æ˜“åšåˆ°é«˜æ€§èƒ½å’Œå¯ä¼¸ç¼©ã€‚</li><li>æŸ¥è¯¢æœ¬èº«æ•ˆç‡ä¹Ÿå¯èƒ½ä¼šæœ‰æ‰€æå‡ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨ IN() ä»£æ›¿è¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥è®© MySQL æŒ‰ç…§ ID é¡ºåºè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™å¯èƒ½æ¯”éšæœºçš„è¿æ¥è¦æ›´é«˜æ•ˆã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM tag<br>JOIN tag_post ON tag_post.tag_id=tag.id<br>JOIN post ON tag_post.post_id=post.id<br>WHERE tag.tag=&#x27;mysql&#x27;;<br>SELECT * FROM tag WHERE tag=&#x27;mysql&#x27;;<br>SELECT * FROM tag_post WHERE tag_id=1234;<br>SELECT * FROM post WHERE post.id IN (123,456,567,9098,8904);<br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>0ã€å¦‚æœè¯­å¥æ˜¯<code>select * from T where ID=500</code>ï¼Œå³<strong>ä¸»é”®æŸ¥è¯¢</strong>æ–¹å¼ï¼Œåˆ™åªéœ€è¦æœç´¢IDè¿™æ£µB+æ ‘ï¼›</p><p>å¦‚æœè¯­å¥æ˜¯<code>select * from T where k=5</code>ï¼Œå³<strong>æ™®é€šç´¢å¼•</strong>æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™éœ€è¦å…ˆæœç´¢kç´¢å¼•æ ‘ï¼Œå¾—åˆ°IDçš„å€¼ä¸º500ï¼Œå†åˆ°IDç´¢å¼•æ ‘æœç´¢ä¸€æ¬¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå›è¡¨ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºäºéä¸»é”®ç´¢å¼•çš„æŸ¥è¯¢éœ€è¦å¤šæ‰«æä¸€æ£µç´¢å¼•æ ‘ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ä¸­åº”è¯¥å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢ã€‚</p><p>1ã€èƒ½å¤šåˆ—ç´¢å¼•å°±å¤šåˆ—ç´¢å¼•</p><p>2ã€æŠŠé€‰æ‹©æ€§é«˜çš„æ”¾å‰é¢ã€‚ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯æŒ‡ï¼šä¸é‡å¤çš„ç´¢å¼•å€¼å’Œè®°å½•æ€»æ•°çš„æ¯”å€¼ã€‚æœ€å¤§å€¼ä¸º 1ï¼Œæ­¤æ—¶æ¯ä¸ªè®°å½•éƒ½æœ‰å”¯ä¸€çš„ç´¢å¼•ä¸å…¶å¯¹åº”ã€‚é€‰æ‹©æ€§è¶Šé«˜ï¼Œæ¯ä¸ªè®°å½•çš„åŒºåˆ†åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿè¶Šé«˜ã€‚</p><p>3ã€ç´¢å¼•ä½¿ç”¨æ¡ä»¶ï¼š</p><ul><li>å¯¹äºéå¸¸å°çš„è¡¨ã€å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç®€å•çš„å…¨è¡¨æ‰«ææ¯”å»ºç«‹ç´¢å¼•æ›´é«˜æ•ˆï¼›</li><li>å¯¹äºä¸­åˆ°å¤§å‹çš„è¡¨ï¼Œç´¢å¼•å°±éå¸¸æœ‰æ•ˆï¼›</li><li>ä½†æ˜¯å¯¹äºç‰¹å¤§å‹çš„è¡¨ï¼Œå»ºç«‹å’Œç»´æŠ¤ç´¢å¼•çš„ä»£ä»·å°†ä¼šéšä¹‹å¢é•¿ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨åˆ°ä¸€ç§æŠ€æœ¯å¯ä»¥ç›´æ¥åŒºåˆ†å‡ºéœ€è¦æŸ¥è¯¢çš„ä¸€ç»„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€æ¡è®°å½•ä¸€æ¡è®°å½•åœ°åŒ¹é…ï¼Œä¾‹å¦‚å¯ä»¥ä½¿ç”¨åˆ†åŒºæŠ€æœ¯ã€‚</li></ul><h1 id="å››ã€åŸºç¡€ç¯‡"><a href="#å››ã€åŸºç¡€ç¯‡" class="headerlink" title="å››ã€åŸºç¡€ç¯‡"></a>å››ã€åŸºç¡€ç¯‡</h1><h2 id="é€šç”¨è¯­æ³•åŠåˆ†ç±»"><a href="#é€šç”¨è¯­æ³•åŠåˆ†ç±»" class="headerlink" title="é€šç”¨è¯­æ³•åŠåˆ†ç±»"></a>é€šç”¨è¯­æ³•åŠåˆ†ç±»</h2><ul><li>DDL: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ã€è¡¨ã€å­—æ®µï¼‰</li><li>DML: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</li><li>DQL: æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</li><li>DCL: æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„æ§åˆ¶æƒé™</li></ul><h3 id="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"><a href="#DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰" class="headerlink" title="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"></a>DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h3><p>æ•°æ®å®šä¹‰è¯­è¨€</p><h4 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h4><p>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š<br><code>SHOW DATABASES;</code><br>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š<br><code>SELECT DATABASE();</code><br>åˆ›å»ºæ•°æ®åº“ï¼š<br><code>CREATE DATABASE [ IF NOT EXISTS ] æ•°æ®åº“å [ DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™ ];</code><br>åˆ é™¤æ•°æ®åº“ï¼š<br><code>DROP DATABASE [ IF EXISTS ] æ•°æ®åº“å;</code><br>ä½¿ç”¨æ•°æ®åº“ï¼š<br><code>USE æ•°æ®åº“å;</code></p><h5 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>UTF8å­—ç¬¦é›†é•¿åº¦ä¸º3å­—èŠ‚ï¼Œæœ‰äº›ç¬¦å·å 4å­—èŠ‚ï¼Œæ‰€ä»¥æ¨èç”¨utf8mb4å­—ç¬¦é›†</li></ul><h4 id="è¡¨æ“ä½œ"><a href="#è¡¨æ“ä½œ" class="headerlink" title="è¡¨æ“ä½œ"></a>è¡¨æ“ä½œ</h4><p>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š<br><code>SHOW TABLES;</code><br>æŸ¥è¯¢è¡¨ç»“æ„ï¼š<br><code>DESC è¡¨å;</code><br>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ï¼š<br><code>SHOW CREATE TABLE è¡¨å;</code></p><p>åˆ›å»ºè¡¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE è¡¨å(<br>å­—æ®µ1 å­—æ®µ1ç±»å‹ [COMMENT å­—æ®µ1æ³¨é‡Š],<br>å­—æ®µ2 å­—æ®µ2ç±»å‹ [COMMENT å­—æ®µ2æ³¨é‡Š],<br>å­—æ®µ3 å­—æ®µ3ç±»å‹ [COMMENT å­—æ®µ3æ³¨é‡Š],<br>...<br>å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š]<br>)[ COMMENT è¡¨æ³¨é‡Š ];<br></code></pre></td></tr></table></figure><p><strong>æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å·</strong></p><p>æ·»åŠ å­—æ®µï¼š<br><code>ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br>ä¾‹ï¼š<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT &#39;æ˜µç§°&#39;;</code></p><p>ä¿®æ”¹æ•°æ®ç±»å‹ï¼š<br><code>ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);</code><br>ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š<br><code>ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br>ä¾‹ï¼šå°†empè¡¨çš„nicknameå­—æ®µä¿®æ”¹ä¸ºusernameï¼Œç±»å‹ä¸ºvarchar(30)<br><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT &#39;æ˜µç§°&#39;;</code></p><p>åˆ é™¤å­—æ®µï¼š<br><code>ALTER TABLE è¡¨å DROP å­—æ®µå;</code></p><p>ä¿®æ”¹è¡¨åï¼š<br><code>ALTER TABLE è¡¨å RENAME TO æ–°è¡¨å</code></p><p>åˆ é™¤è¡¨ï¼š<br><code>DROP TABLE [IF EXISTS] è¡¨å;</code><br>åˆ é™¤è¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ï¼š<br><code>TRUNCATE TABLE è¡¨å;</code></p><h3 id="DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰"><a href="#DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰" class="headerlink" title="DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰"></a>DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰</h3><h4 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h4><p>æŒ‡å®šå­—æ®µï¼š<br><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...);</code><br>å…¨éƒ¨å­—æ®µï¼š<br><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...);</code></p><p>æ‰¹é‡æ·»åŠ æ•°æ®ï¼š<br><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code><br><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code></p><h5 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»å‹æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­</li><li>æ’å…¥çš„æ•°æ®å¤§å°åº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…</li></ul><h4 id="æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a href="#æ›´æ–°å’Œåˆ é™¤æ•°æ®" class="headerlink" title="æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a>æ›´æ–°å’Œåˆ é™¤æ•°æ®</h4><p>ä¿®æ”¹æ•°æ®ï¼š<br><code>UPDATE è¡¨å SET å­—æ®µå1 = å€¼1, å­—æ®µå2 = å€¼2, ... [ WHERE æ¡ä»¶ ];</code><br>ä¾‹ï¼š<br><code>UPDATE emp SET name = &#39;Jack&#39; WHERE id = 1;</code></p><p>åˆ é™¤æ•°æ®ï¼š<br><code>DELETE FROM è¡¨å [ WHERE æ¡ä»¶ ];</code></p><h3 id="DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰"><a href="#DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰" class="headerlink" title="DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰"></a>DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰</h3><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>å­—æ®µåˆ—è¡¨<br>FROM<br>è¡¨åå­—æ®µ<br>WHERE<br>æ¡ä»¶åˆ—è¡¨<br>GROUP BY<br>åˆ†ç»„å­—æ®µåˆ—è¡¨<br>HAVING<br>åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨<br>ORDER BY<br>æ’åºå­—æ®µåˆ—è¡¨<br>LIMIT<br>åˆ†é¡µå‚æ•°<br></code></pre></td></tr></table></figure><h4 id="åŸºç¡€æŸ¥è¯¢"><a href="#åŸºç¡€æŸ¥è¯¢" class="headerlink" title="åŸºç¡€æŸ¥è¯¢"></a>åŸºç¡€æŸ¥è¯¢</h4><p>æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼š<br><code>SELECT å­—æ®µ1, å­—æ®µ2, å­—æ®µ3, ... FROM è¡¨å;</code><br><code>SELECT * FROM è¡¨å;</code></p><p>è®¾ç½®åˆ«åï¼š<br><code>SELECT å­—æ®µ1 [ AS åˆ«å1 ], å­—æ®µ2 [ AS åˆ«å2 ], å­—æ®µ3 [ AS åˆ«å3 ], ... FROM è¡¨å;</code><br><code>SELECT å­—æ®µ1 [ åˆ«å1 ], å­—æ®µ2 [ åˆ«å2 ], å­—æ®µ3 [ åˆ«å3 ], ... FROM è¡¨å;</code></p><p>å»é™¤é‡å¤è®°å½•ï¼š<br><code>SELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨å;</code></p><p>è½¬ä¹‰ï¼š<br><code>SELECT * FROM è¡¨å WHERE name LIKE &#39;/_å¼ ä¸‰&#39; ESCAPE &#39;/&#39;</code><br>/ ä¹‹åçš„_ä¸ä½œä¸ºé€šé…ç¬¦</p><h4 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨;</code></p><p>æ¡ä»¶ï¼š</p><div class="table-container"><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>BETWEEN â€¦ AND â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆå«æœ€å°ã€æœ€å¤§å€¼ï¼‰</td></tr><tr><td>IN(â€¦)</td><td>åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>LIKE å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>IS NULL</td><td>æ˜¯NULL</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>AND æˆ– &amp;&amp;</td><td>å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰</td></tr><tr><td>OR æˆ– &#124;&#124;</td><td>æˆ–è€…ï¼ˆå¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰</td></tr><tr><td>NOT æˆ– !</td><td>éï¼Œä¸æ˜¯</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- å¹´é¾„ç­‰äº30<br>select * from employee where age = 30;<br>-- å¹´é¾„å°äº30<br>select * from employee where age &lt; 30;<br>-- å°äºç­‰äº<br>select * from employee where age &lt;= 30;<br>-- æ²¡æœ‰èº«ä»½è¯<br>select * from employee where idcard is null or idcard = &#x27;&#x27;;<br>-- æœ‰èº«ä»½è¯<br>select * from employee where idcard;<br>select * from employee where idcard is not null;<br>-- ä¸ç­‰äº<br>select * from employee where age != 30;<br>-- å¹´é¾„åœ¨20åˆ°30ä¹‹é—´<br>select * from employee where age between 20 and 30;<br>select * from employee where age &gt;= 20 and age &lt;= 30;<br>-- ä¸‹é¢è¯­å¥ä¸æŠ¥é”™ï¼Œä½†æŸ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯<br>select * from employee where age between 30 and 20;<br>-- æ€§åˆ«ä¸ºå¥³ä¸”å¹´é¾„å°äº30<br>select * from employee where age &lt; 30 and gender = &#x27;å¥³&#x27;;<br>-- å¹´é¾„ç­‰äº25æˆ–30æˆ–35<br>select * from employee where age = 25 or age = 30 or age = 35;<br>select * from employee where age in (25, 30, 35);<br>-- å§“åä¸ºä¸¤ä¸ªå­—<br>select * from employee where name like &#x27;__&#x27;;<br>-- èº«ä»½è¯æœ€åä¸ºX<br>select * from employee where idcard like &#x27;%X&#x27;;<br></code></pre></td></tr></table></figure><h4 id="èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰"><a href="#èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰" class="headerlink" title="èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰"></a>èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰</h4><p>å¸¸è§èšåˆå‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table></div><p>è¯­æ³•ï¼š<br><code>SELECT èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) FROM è¡¨å;</code><br>ä¾‹ï¼š<br><code>SELECT count(id) from employee where workaddress = &quot;å¹¿ä¸œçœ&quot;;</code></p><h4 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å [ WHERE æ¡ä»¶ ] GROUP BY åˆ†ç»„å­—æ®µå [ HAVING åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶ ];</code></p><p>where å’Œ having çš„åŒºåˆ«ï¼š</p><ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ä¸å‚ä¸åˆ†ç»„ï¼›havingæ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå“ªä¸ªæ˜¯ç”·å“ªä¸ªæ˜¯å¥³ï¼‰<br>select count(*) from employee group by gender;<br>-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡<br>select gender, count(*) from employee group by gender;<br>-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„<br>select gender, avg(age) from employee group by gender;<br>-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„<br>select workaddress, count(*) from employee where age &lt; 45 group by workaddress;<br>-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ï¼Œè·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€<br>select workaddress, count(*) address_count from employee where age &lt; 45 group by workaddress having address_count &gt;= 3;<br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-2"><a href="#æ³¨æ„äº‹é¡¹-2" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having</li><li>åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li></ul><h4 id="æ’åºæŸ¥è¯¢"><a href="#æ’åºæŸ¥è¯¢" class="headerlink" title="æ’åºæŸ¥è¯¢"></a>æ’åºæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1, å­—æ®µ2 æ’åºæ–¹å¼2;</code></p><p>æ’åºæ–¹å¼ï¼š</p><ul><li>ASC: å‡åºï¼ˆé»˜è®¤ï¼‰</li><li>DESC: é™åº</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ ¹æ®å¹´é¾„å‡åºæ’åº<br>SELECT * FROM employee ORDER BY age ASC;<br>SELECT * FROM employee ORDER BY age;<br>-- ä¸¤å­—æ®µæ’åºï¼Œæ ¹æ®å¹´é¾„å‡åºæ’åºï¼Œå…¥èŒæ—¶é—´é™åºæ’åº<br>SELECT * FROM employee ORDER BY age ASC, entrydate DESC;<br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-3"><a href="#æ³¨æ„äº‹é¡¹-3" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><p>å¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº</p><h4 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•°;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œå±•ç¤º10æ¡<br>SELECT * FROM employee LIMIT 0, 10;<br>-- æŸ¥è¯¢ç¬¬äºŒé¡µ<br>SELECT * FROM employee LIMIT 10, 10;<br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-4"><a href="#æ³¨æ„äº‹é¡¹-4" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰ * æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°ï¼ŒMySQLæ˜¯LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ LIMIT 10</li></ul><h4 id="DQLæ‰§è¡Œé¡ºåº"><a href="#DQLæ‰§è¡Œé¡ºåº" class="headerlink" title="DQLæ‰§è¡Œé¡ºåº"></a>DQLæ‰§è¡Œé¡ºåº</h4><p>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT</p><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><h4 id="ç®¡ç†ç”¨æˆ·"><a href="#ç®¡ç†ç”¨æˆ·" class="headerlink" title="ç®¡ç†ç”¨æˆ·"></a>ç®¡ç†ç”¨æˆ·</h4><p>æŸ¥è¯¢ç”¨æˆ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USER mysql;<br>SELECT * FROM user;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·:<br><code>CREATE USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39; IDENTIFIED BY &#39;å¯†ç &#39;;</code></p><p>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š<br><code>ALTER USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39; IDENTIFIED WITH mysql_native_password BY &#39;æ–°å¯†ç &#39;;</code></p><p>åˆ é™¤ç”¨æˆ·ï¼š<br><code>DROP USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºç”¨æˆ·testï¼Œåªèƒ½åœ¨å½“å‰ä¸»æœºlocalhostè®¿é—®<br>create user &#x27;test&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;<br>-- åˆ›å»ºç”¨æˆ·testï¼Œèƒ½åœ¨ä»»æ„ä¸»æœºè®¿é—®<br>create user &#x27;test&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;<br>create user &#x27;test&#x27; identified by &#x27;123456&#x27;;<br>-- ä¿®æ”¹å¯†ç <br>alter user &#x27;test&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;1234&#x27;;<br>-- åˆ é™¤ç”¨æˆ·<br>drop user &#x27;test&#x27;@&#x27;localhost&#x27;;<br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-5"><a href="#æ³¨æ„äº‹é¡¹-5" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé…</li></ul><h4 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h4><p>å¸¸ç”¨æƒé™ï¼š</p><div class="table-container"><table><thead><tr><th>æƒé™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>æ‰€æœ‰æƒé™</td></tr><tr><td>SELECT</td><td>æŸ¥è¯¢æ•°æ®</td></tr><tr><td>INSERT</td><td>æ’å…¥æ•°æ®</td></tr><tr><td>UPDATE</td><td>ä¿®æ”¹æ•°æ®</td></tr><tr><td>DELETE</td><td>åˆ é™¤æ•°æ®</td></tr><tr><td>ALTER</td><td>ä¿®æ”¹è¡¨</td></tr><tr><td>DROP</td><td>åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾</td></tr><tr><td>CREATE</td><td>åˆ›å»ºæ•°æ®åº“/è¡¨</td></tr></tbody></table></div><p>æ›´å¤šæƒé™è¯·çœ‹<a href="#æƒé™ä¸€è§ˆè¡¨" title="æƒé™ä¸€è§ˆè¡¨">æƒé™ä¸€è§ˆè¡¨</a></p><p>æŸ¥è¯¢æƒé™ï¼š<br><code>SHOW GRANTS FOR &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>æˆäºˆæƒé™ï¼š<br><code>GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>æ’¤é”€æƒé™ï¼š<br><code>REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><h5 id="æ³¨æ„äº‹é¡¹-6"><a href="#æ³¨æ„äº‹é¡¹-6" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš”</li><li>æˆæƒæ—¶ï¼Œæ•°æ®åº“åå’Œè¡¨åå¯ä»¥ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰</li></ul><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul><li>å­—ç¬¦ä¸²å‡½æ•°</li><li>æ•°å€¼å‡½æ•°</li><li>æ—¥æœŸå‡½æ•°</li><li>æµç¨‹å‡½æ•°</li></ul><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, â€¦, sn)</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†s1, s2, â€¦, snæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>LOWER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™</td></tr><tr><td>UPPER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™</td></tr><tr><td>LPAD(str, n, pad)</td><td>å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>RPAD(str, n, pad)</td><td>å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>TRIM(str)</td><td>å»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²</td></tr></tbody></table></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ‹¼æ¥<br>SELECT CONCAT(&#x27;Hello&#x27;, &#x27;World&#x27;);<br>-- å°å†™<br>SELECT LOWER(&#x27;Hello&#x27;);<br>-- å¤§å†™<br>SELECT UPPER(&#x27;Hello&#x27;);<br>-- å·¦å¡«å……<br>SELECT LPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);<br>-- å³å¡«å……<br>SELECT RPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);<br>-- å»é™¤ç©ºæ ¼<br>SELECT TRIM(&#x27; Hello World &#x27;);<br>-- åˆ‡ç‰‡ï¼ˆèµ·å§‹ç´¢å¼•ä¸º1ï¼‰<br>SELECT SUBSTRING(&#x27;Hello World&#x27;, 1, 5);<br></code></pre></td></tr></table></figure><h3 id="æ•°å€¼å‡½æ•°"><a href="#æ•°å€¼å‡½æ•°" class="headerlink" title="æ•°å€¼å‡½æ•°"></a>æ•°å€¼å‡½æ•°</h3><p>å¸¸è§å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>FLOOR(x)</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>MOD(x, y)</td><td>è¿”å›x/yçš„æ¨¡</td></tr><tr><td>RAND()</td><td>è¿”å›0~1å†…çš„éšæœºæ•°</td></tr><tr><td>ROUND(x, y)</td><td>æ±‚å‚æ•°xçš„å››èˆäº”å…¥å€¼ï¼Œä¿ç•™yä½å°æ•°</td></tr></tbody></table></div><h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CURDATE()</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME()</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>NOW()</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>YEAR(date)</td><td>è·å–æŒ‡å®šdateçš„å¹´ä»½</td></tr><tr><td>MONTH(date)</td><td>è·å–æŒ‡å®šdateçš„æœˆä»½</td></tr><tr><td>DAY(date)</td><td>è·å–æŒ‡å®šdateçš„æ—¥æœŸ</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>è¿”å›èµ·å§‹æ—¶é—´date1å’Œç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•°</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- DATE_ADD<br>SELECT DATE_ADD(NOW(), INTERVAL 70 YEAR);<br></code></pre></td></tr></table></figure><h3 id="æµç¨‹å‡½æ•°"><a href="#æµç¨‹å‡½æ•°" class="headerlink" title="æµç¨‹å‡½æ•°"></a>æµç¨‹å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>å¦‚æœvalueä¸ºtrueï¼Œåˆ™è¿”å›tï¼Œå¦åˆ™è¿”å›f</td></tr><tr><td>IFNULL(value1, value2)</td><td>å¦‚æœvalue1ä¸ä¸ºç©ºï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœval1ä¸ºtrueï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœexprçš„å€¼ç­‰äºval1ï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select<br>name,<br>(case when age &gt; 30 then &#x27;ä¸­å¹´&#x27; else &#x27;é’å¹´&#x27; end)<br>from employee;<br>select<br>name,<br>(case workaddress when &#x27;åŒ—äº¬å¸‚&#x27; then &#x27;ä¸€çº¿åŸå¸‚&#x27; when &#x27;ä¸Šæµ·å¸‚&#x27; then &#x27;ä¸€çº¿åŸå¸‚&#x27; else &#x27;äºŒçº¿åŸå¸‚&#x27; end) as &#x27;å·¥ä½œåœ°å€&#x27;<br>from employee;<br></code></pre></td></tr></table></figure><h2 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h2><p>åˆ†ç±»ï¼š</p><div class="table-container"><table><thead><tr><th>çº¦æŸ</th><th>æè¿°</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>UNIQUE</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€</td><td>PRIMARY KEY</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>DEFAULT</td></tr><tr><td>æ£€æŸ¥çº¦æŸï¼ˆ8.0.1ç‰ˆæœ¬åï¼‰</td><td>ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶</td><td>CHECK</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>FOREIGN KEY</td></tr></tbody></table></div><p>çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚</p><h3 id="å¸¸ç”¨çº¦æŸ"><a href="#å¸¸ç”¨çº¦æŸ" class="headerlink" title="å¸¸ç”¨çº¦æŸ"></a>å¸¸ç”¨çº¦æŸ</h3><div class="table-container"><table><thead><tr><th>çº¦æŸæ¡ä»¶</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®</td><td>PRIMARY KEY</td></tr><tr><td>è‡ªåŠ¨å¢é•¿</td><td>AUTO_INCREMENT</td></tr><tr><td>ä¸ä¸ºç©º</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€</td><td>UNIQUE</td></tr><tr><td>é€»è¾‘æ¡ä»¶</td><td>CHECK</td></tr><tr><td>é»˜è®¤å€¼</td><td>DEFAULT</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table user(<br>id int primary key auto_increment,<br>name varchar(10) not null unique,<br>age int check(age &gt; 0 and age &lt; 120),<br>status char(1) default &#x27;1&#x27;,<br>gender char(1)<br>);<br></code></pre></td></tr></table></figure><h3 id="å¤–é”®çº¦æŸ"><a href="#å¤–é”®çº¦æŸ" class="headerlink" title="å¤–é”®çº¦æŸ"></a>å¤–é”®çº¦æŸ</h3><p>æ·»åŠ å¤–é”®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE è¡¨å(<br>å­—æ®µå å­—æ®µç±»å‹,<br>...<br>[CONSTRAINT] [å¤–é”®åç§°] FOREIGN KEY(å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å)<br>);<br>ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å);<br><br>-- ä¾‹å­<br>alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);<br></code></pre></td></tr></table></figure><p>åˆ é™¤å¤–é”®ï¼š<br><code>ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®å;</code></p><h4 id="åˆ é™¤-æ›´æ–°è¡Œä¸º"><a href="#åˆ é™¤-æ›´æ–°è¡Œä¸º" class="headerlink" title="åˆ é™¤/æ›´æ–°è¡Œä¸º"></a>åˆ é™¤/æ›´æ–°è¡Œä¸º</h4><div class="table-container"><table><thead><tr><th>è¡Œä¸º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NO ACTION</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸RESTRICTä¸€è‡´ï¼‰</td></tr><tr><td>RESTRICT</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸NO ACTIONä¸€è‡´ï¼‰</td></tr><tr><td>CASCADE</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•</td></tr><tr><td>SET NULL</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸ºnullï¼‰</td></tr><tr><td>SET DEFAULT</td><td>çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodbä¸æ”¯æŒï¼‰</td></tr></tbody></table></div><p>æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼š<br><code>ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) ON UPDATE è¡Œä¸º ON DELETE è¡Œä¸º;</code></p><h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><h3 id="å¤šè¡¨å…³ç³»"><a href="#å¤šè¡¨å…³ç³»" class="headerlink" title="å¤šè¡¨å…³ç³»"></a>å¤šè¡¨å…³ç³»</h3><ul><li>ä¸€å¯¹å¤šï¼ˆå¤šå¯¹ä¸€ï¼‰</li><li>å¤šå¯¹å¤š</li><li>ä¸€å¯¹ä¸€</li></ul><h4 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šéƒ¨é—¨ä¸å‘˜å·¥<br>å…³ç³»ï¼šä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨<br>å®ç°ï¼šåœ¨<strong>å¤šçš„</strong>ä¸€æ–¹å»ºç«‹å¤–é”®ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”®</p><h4 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹<br>å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®<br>å®ç°ï¼š<strong>å»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨</strong>ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®</p><h4 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h4><p>æ¡ˆä¾‹ï¼šç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…<br>å…³ç³»ï¼šä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤šç”¨äºå•è¡¨æ‹†åˆ†ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡<br>å®ç°ï¼š<strong>åœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®</strong>ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„ï¼ˆUNIQUEï¼‰</p><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><p>åˆå¹¶æŸ¥è¯¢ï¼ˆç¬›å¡å°”ç§¯ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç»„åˆç»“æœï¼‰ï¼š<br><code>select * from employee, dept;</code></p><blockquote><p>ç¬›å¡å°”ç§¯ï¼šä¸¤ä¸ªé›†åˆAé›†åˆå’ŒBé›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼ˆåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼‰</p></blockquote><p>æ¶ˆé™¤æ— æ•ˆç¬›å¡å°”ç§¯ï¼š<br><code>select * from employee, dept where employee.dept = dept.id;</code></p><h3 id="å†…è¿æ¥æŸ¥è¯¢"><a href="#å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="å†…è¿æ¥æŸ¥è¯¢"></a>å†…è¿æ¥æŸ¥è¯¢</h3><p>å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ†</p><p>éšå¼å†…è¿æ¥ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1, è¡¨2 WHERE æ¡ä»¶ ...;</code></p><p>æ˜¾å¼å†…è¿æ¥ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ...;</code></p><p>æ˜¾å¼æ€§èƒ½æ¯”éšå¼é«˜</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŠå…³è”çš„éƒ¨é—¨çš„åç§°<br>-- éšå¼<br>select e.name, d.name from employee as e, dept as d where e.dept = d.id;<br>-- æ˜¾å¼<br>select e.name, d.name from employee as e inner join dept as d on e.dept = d.id;<br></code></pre></td></tr></table></figure><h3 id="å¤–è¿æ¥æŸ¥è¯¢"><a href="#å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="å¤–è¿æ¥æŸ¥è¯¢"></a>å¤–è¿æ¥æŸ¥è¯¢</h3><p>å·¦å¤–è¿æ¥ï¼š<br>æŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 LEFT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code><br>ç›¸å½“äºæŸ¥è¯¢è¡¨1çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†æ•°æ®</p><p>å³å¤–è¿æ¥ï¼š<br>æŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 RIGHT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- å·¦<br>select e.*, d.name from employee as e left outer join dept as d on e.dept = d.id;<br>select d.name, e.* from dept d left outer join emp e on e.dept = d.id;  -- è¿™æ¡è¯­å¥ä¸ä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ ·<br>-- å³<br>select d.name, e.* from employee as e right outer join dept as d on e.dept = d.id;<br></code></pre></td></tr></table></figure><p>å·¦è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰deptçš„employeeï¼Œå³è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰employeeçš„dept</p><h3 id="è‡ªè¿æ¥æŸ¥è¯¢"><a href="#è‡ªè¿æ¥æŸ¥è¯¢" class="headerlink" title="è‡ªè¿æ¥æŸ¥è¯¢"></a>è‡ªè¿æ¥æŸ¥è¯¢</h3><p>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</p><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A åˆ«åA JOIN è¡¨A åˆ«åB ON æ¡ä»¶ ...;</code></p><p>è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢å‘˜å·¥åŠå…¶æ‰€å±é¢†å¯¼çš„åå­—<br>select a.name, b.name from employee a, employee b where a.manager = b.id;<br>-- æ²¡æœ‰é¢†å¯¼çš„ä¹ŸæŸ¥è¯¢å‡ºæ¥<br>select a.name, b.name from employee a left join employee b on a.manager = b.id;<br></code></pre></td></tr></table></figure><h3 id="è”åˆæŸ¥è¯¢-union-union-all"><a href="#è”åˆæŸ¥è¯¢-union-union-all" class="headerlink" title="è”åˆæŸ¥è¯¢ union, union all"></a>è”åˆæŸ¥è¯¢ union, union all</h3><p>æŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›†</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A ...<br>UNION [ALL]<br>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨B ...<br></code></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹-7"><a href="#æ³¨æ„äº‹é¡¹-7" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><ul><li>UNION ALL ä¼šæœ‰é‡å¤ç»“æœï¼ŒUNION ä¸ä¼š</li><li><strong>è”åˆæŸ¥è¯¢</strong>æ¯”ä½¿ç”¨oræ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ</li></ul><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><p>SQLè¯­å¥ä¸­åµŒå¥—SELECTè¯­å¥ï¼Œç§°è°“åµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚<br><code>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</code><br><strong>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ª</strong></p><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰</li><li>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰</li><li>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰</li><li>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰</li></ul><p>æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š</p><ul><li>WHERE ä¹‹å</li><li>FROM ä¹‹å</li><li>SELECT ä¹‹å</li></ul><h4 id="æ ‡é‡å­æŸ¥è¯¢"><a href="#æ ‡é‡å­æŸ¥è¯¢" class="headerlink" title="æ ‡é‡å­æŸ¥è¯¢"></a>æ ‡é‡å­æŸ¥è¯¢</h4><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ã€‚<br>å¸¸ç”¨æ“ä½œç¬¦ï¼š- &lt; &gt; &gt; &gt;= &lt; &lt;=</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢é”€å”®éƒ¨æ‰€æœ‰å‘˜å·¥<br>select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;;<br>-- æ ¹æ®é”€å”®éƒ¨éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯<br>select * from employee where dept = 4;<br>-- åˆå¹¶ï¼ˆå­æŸ¥è¯¢ï¼‰<br>select * from employee where dept = (select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;);<br><br>-- æŸ¥è¯¢xxxå…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯<br>select * from employee where entrydate &gt; (select entrydate from employee where name = &#x27;xxx&#x27;);<br></code></pre></td></tr></table></figure><h4 id="åˆ—å­æŸ¥è¯¢"><a href="#åˆ—å­æŸ¥è¯¢" class="headerlink" title="åˆ—å­æŸ¥è¯¢"></a>åˆ—å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ã€‚</p><p>å¸¸ç”¨æ“ä½œç¬¦ï¼š</p><div class="table-container"><table><thead><tr><th>æ“ä½œç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>IN</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>NOT IN</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…</td></tr><tr><td>ANY</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯</td></tr><tr><td>SOME</td><td>ä¸ANYç­‰åŒï¼Œä½¿ç”¨SOMEçš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ANY</td></tr><tr><td>ALL</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢é”€å”®éƒ¨å’Œå¸‚åœºéƒ¨çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯<br>select * from employee where dept in (select id from dept where name = &#x27;é”€å”®éƒ¨&#x27; or name = &#x27;å¸‚åœºéƒ¨&#x27;);<br>-- æŸ¥è¯¢æ¯”è´¢åŠ¡éƒ¨æ‰€æœ‰äººå·¥èµ„éƒ½é«˜çš„å‘˜å·¥ä¿¡æ¯<br>select * from employee where salary &gt; all(select salary from employee where dept = (select id from dept where name = &#x27;è´¢åŠ¡éƒ¨&#x27;));<br>-- æŸ¥è¯¢æ¯”ç ”å‘éƒ¨ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯<br>select * from employee where salary &gt; any (select salary from employee where dept = (select id from dept where name = &#x27;ç ”å‘éƒ¨&#x27;));<br></code></pre></td></tr></table></figure><h4 id="è¡Œå­æŸ¥è¯¢"><a href="#è¡Œå­æŸ¥è¯¢" class="headerlink" title="è¡Œå­æŸ¥è¯¢"></a>è¡Œå­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ã€‚<br>å¸¸ç”¨æ“ä½œç¬¦ï¼š=, &lt;, &gt;, IN, NOT IN</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢ä¸xxxçš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯<br>select * from employee where (salary, manager) = (12500, 1);<br>select * from employee where (salary, manager) = (select salary, manager from employee where name = &#x27;xxx&#x27;);<br></code></pre></td></tr></table></figure><h4 id="è¡¨å­æŸ¥è¯¢"><a href="#è¡¨å­æŸ¥è¯¢" class="headerlink" title="è¡¨å­æŸ¥è¯¢"></a>è¡¨å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—<br>å¸¸ç”¨æ“ä½œç¬¦ï¼šIN</p><p>æ»¡è¶³INä¸­å…¶ä¸­ä¸€æ¡å°±å¯ä»¥æŸ¥è¯¢åˆ°ç»“æœ</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢ä¸xxx1ï¼Œxxx2çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥<br>select * from employee where (job, salary) in (select job, salary from employee where name = &#x27;xxx1&#x27; or name = &#x27;xxx2&#x27;);<br>-- æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯2006-01-01ä¹‹åçš„å‘˜å·¥ï¼ŒåŠå…¶éƒ¨é—¨ä¿¡æ¯<br>select e.*, d.* from (select * from employee where entrydate &gt; &#x27;2006-01-01&#x27;) as e left join dept as d on e.dept = d.id;<br></code></pre></td></tr></table></figure><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><p>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 1. æŸ¥è¯¢å¼ ä¸‰è´¦æˆ·ä½™é¢<br>select * from account where name = &#x27;å¼ ä¸‰&#x27;;<br>-- 2. å°†å¼ ä¸‰è´¦æˆ·ä½™é¢-1000<br>update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;<br>-- æ­¤è¯­å¥å‡ºé”™åå¼ ä¸‰é’±å‡å°‘ä½†æ˜¯æå››é’±æ²¡æœ‰å¢åŠ <br>æ¨¡æ‹Ÿsqlè¯­å¥é”™è¯¯<br>-- 3. å°†æå››è´¦æˆ·ä½™é¢+1000<br>update account set money = money + 1000 where name = &#x27;æå››&#x27;;<br><br>-- æŸ¥çœ‹äº‹åŠ¡æäº¤æ–¹å¼<br>SELECT @@AUTOCOMMIT;<br>-- è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼ï¼Œ1ä¸ºè‡ªåŠ¨æäº¤ï¼Œ0ä¸ºæ‰‹åŠ¨æäº¤ï¼Œè¯¥è®¾ç½®åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆ<br>SET @@AUTOCOMMIT = 0;<br>-- æäº¤äº‹åŠ¡<br>COMMIT;<br>-- å›æ»šäº‹åŠ¡<br>ROLLBACK;<br><br>-- è®¾ç½®æ‰‹åŠ¨æäº¤åä¸Šé¢ä»£ç æ”¹ä¸ºï¼š<br>select * from account where name = &#x27;å¼ ä¸‰&#x27;;<br>update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;<br>update account set money = money + 1000 where name = &#x27;æå››&#x27;;<br>commit;<br></code></pre></td></tr></table></figure><p>æ“ä½œæ–¹å¼äºŒï¼š</p><p>å¼€å¯äº‹åŠ¡ï¼š<br><code>START TRANSACTION æˆ– BEGIN TRANSACTION;</code><br>æäº¤äº‹åŠ¡ï¼š<br><code>COMMIT;</code><br>å›æ»šäº‹åŠ¡ï¼š<br><code>ROLLBACK;</code></p><p>æ“ä½œå®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">start transaction;<br>select * from account where name = &#x27;å¼ ä¸‰&#x27;;<br>update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;<br>update account set money = money + 1000 where name = &#x27;æå››&#x27;;<br>commit;<br></code></pre></td></tr></table></figure><h3 id="å››å¤§ç‰¹æ€§ACID"><a href="#å››å¤§ç‰¹æ€§ACID" class="headerlink" title="å››å¤§ç‰¹æ€§ACID"></a>å››å¤§ç‰¹æ€§ACID</h3><ul><li>åŸå­æ€§(Atomicity)ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œä½†æ„¿ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</li><li>ä¸€è‡´æ€§(Consistency)ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€</li><li>éš”ç¦»æ€§(Isolation)ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œ</li><li>æŒä¹…æ€§(Durability)ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„</li></ul><h3 id="å¹¶å‘äº‹åŠ¡"><a href="#å¹¶å‘äº‹åŠ¡" class="headerlink" title="å¹¶å‘äº‹åŠ¡"></a>å¹¶å‘äº‹åŠ¡</h3><div class="table-container"><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>è„è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®</td></tr><tr><td>ä¸å¯é‡å¤è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ</td></tr><tr><td>å¹»è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œï¼Œä½†æ˜¯å†æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨</td></tr></tbody></table></div><blockquote><p>è¿™ä¸‰ä¸ªé—®é¢˜çš„è¯¦ç»†æ¼”ç¤ºï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd</a> </p></blockquote><p>å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</p><div class="table-container"><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Read committed</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Repeatable Read(é»˜è®¤)</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>Serializable</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table></div><ul><li>âˆšè¡¨ç¤ºåœ¨å½“å‰éš”ç¦»çº§åˆ«ä¸‹è¯¥é—®é¢˜ä¼šå‡ºç°</li><li>Serializable æ€§èƒ½æœ€ä½ï¼›Read uncommitted æ€§èƒ½æœ€é«˜ï¼Œæ•°æ®å®‰å…¨æ€§æœ€å·®</li></ul><p>æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br><code>SELECT @@TRANSACTION_ISOLATION;</code><br>è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br><code>SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;;</code><br>SESSION æ˜¯ä¼šè¯çº§åˆ«ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒGLOBAL è¡¨ç¤ºå¯¹æ‰€æœ‰ä¼šè¯æœ‰æ•ˆ</p><h1 id="äº”ã€è¿›é˜¶ç¯‡"><a href="#äº”ã€è¿›é˜¶ç¯‡" class="headerlink" title="äº”ã€è¿›é˜¶ç¯‡"></a>äº”ã€è¿›é˜¶ç¯‡</h1><h2 id="å­˜å‚¨å¼•æ“"><a href="#å­˜å‚¨å¼•æ“" class="headerlink" title="å­˜å‚¨å¼•æ“"></a>å­˜å‚¨å¼•æ“</h2><p>MySQLä½“ç³»ç»“æ„ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/MySQLä½“ç³»ç»“æ„_20220315034329549927.png" alt="ç»“æ„å›¾" title="ç»“æ„å›¾"><br><img src="https://dhc.pythonanywhere.com/media/editor/MySQLä½“ç³»ç»“æ„å±‚çº§å«ä¹‰_20220315034359342837.png" alt="å±‚çº§æè¿°" title="å±‚çº§æè¿°"></p><p>å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯åŸºäºåº“çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¡¨å¼•æ“ã€‚<br>é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBã€‚</p><p>ç›¸å…³æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢å»ºè¡¨è¯­å¥<br>show create table account;<br>-- å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“<br>CREATE TABLE è¡¨å(<br>...<br>) ENGINE=INNODB;<br>-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“<br>show engines;<br></code></pre></td></tr></table></figure><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB æ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“ï¼Œåœ¨ MySQL 5.5 ä¹‹åï¼ŒInnoDB æ˜¯é»˜è®¤çš„ MySQL å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>DML æ“ä½œéµå¾ª ACID æ¨¡å‹ï¼Œæ”¯æŒ<strong>äº‹åŠ¡</strong></li><li><strong>è¡Œçº§é”</strong>ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½</li><li>æ”¯æŒ<strong>å¤–é”®</strong>çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.ibd: xxxä»£è¡¨è¡¨åï¼ŒInnoDB å¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆfrmã€sdiï¼‰ã€æ•°æ®å’Œç´¢å¼•ã€‚</li></ul><p>å‚æ•°ï¼šinnodb_file_per_tableï¼Œå†³å®šå¤šå¼ è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´è¿˜æ˜¯æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´</p><p>çŸ¥è¯†ç‚¹ï¼š</p><p>æŸ¥çœ‹ Mysql å˜é‡ï¼š<br><code>show variables like &#39;innodb_file_per_table&#39;;</code></p><p>ä»idbæ–‡ä»¶æå–è¡¨ç»“æ„æ•°æ®ï¼š<br>ï¼ˆåœ¨cmdè¿è¡Œï¼‰<br><code>ibd2sdi xxx.ibd</code></p><p>InnoDB é€»è¾‘å­˜å‚¨ç»“æ„ï¼š<br><img src="https://dhc.pythonanywhere.com/media/editor/é€»è¾‘å­˜å‚¨ç»“æ„_20220316030616590001.png" alt="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„" title="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„"></p><p><strong>è¡Œ</strong>å°±æ˜¯ä¸€è¡Œæ•°æ®ï¼Œ<strong>é¡µ</strong>å°±æ˜¯æ•°æ®è¡¨ï¼Œ<strong>åŒº</strong>å°±æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œ<strong>æ®µ</strong>å°±æ˜¯å¤šä¸ªæ•°æ®åº“</p><h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>MyISAM æ˜¯ MySQL æ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®</li><li>æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”</li><li>è®¿é—®é€Ÿåº¦å¿«</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li><li>xxx.MYD: å­˜å‚¨æ•°æ®</li><li>xxx.MYI: å­˜å‚¨ç´¢å¼•</li></ul><h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><p>Memory å¼•æ“çš„è¡¨æ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå—ç¡¬ä»¶é—®é¢˜ã€æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿«</li><li>hashç´¢å¼•ï¼ˆé»˜è®¤ï¼‰</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li></ul><h3 id="å­˜å‚¨å¼•æ“ç‰¹ç‚¹"><a href="#å­˜å‚¨å¼•æ“ç‰¹ç‚¹" class="headerlink" title="å­˜å‚¨å¼•æ“ç‰¹ç‚¹"></a>å­˜å‚¨å¼•æ“ç‰¹ç‚¹</h3><div class="table-container"><table><thead><tr><th>ç‰¹ç‚¹</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>å­˜å‚¨é™åˆ¶</td><td>64TB</td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr><tr><td>é”æœºåˆ¶</td><td>è¡Œé”</td><td>è¡¨é”</td><td>è¡¨é”</td></tr><tr><td>B+treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>-</td><td>-</td><td>æ”¯æŒ</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ”¯æŒï¼ˆ5.6ç‰ˆæœ¬ä¹‹åï¼‰</td><td>æ”¯æŒ</td><td>-</td></tr><tr><td>ç©ºé—´ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>N/A</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td><td>ä½</td><td>é«˜</td><td>é«˜</td></tr><tr><td>æ”¯æŒå¤–é”®</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr></tbody></table></div><h3 id="å­˜å‚¨å¼•æ“çš„é€‰æ‹©"><a href="#å­˜å‚¨å¼•æ“çš„é€‰æ‹©" class="headerlink" title="å­˜å‚¨å¼•æ“çš„é€‰æ‹©"></a>å­˜å‚¨å¼•æ“çš„é€‰æ‹©</h3><p>åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚</p><ul><li>InnoDB: å¦‚æœåº”ç”¨å¯¹äº‹ç‰©çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œåˆ™ InnoDB æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©</li><li>MyISAM: å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚</li><li>Memory: å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜ã€‚Memory çš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§</li></ul><p>ç”µå•†ä¸­çš„è¶³è¿¹å’Œè¯„è®ºé€‚åˆä½¿ç”¨ MyISAM å¼•æ“ï¼Œç¼“å­˜é€‚åˆä½¿ç”¨ Memory å¼•æ“ã€‚</p><h2 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h2><h3 id="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"><a href="#æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡" class="headerlink" title="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"></a>æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡</h3><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ INSERT, UPDATE, DELETE, SELECT è®¿é—®é¢‘æ¬¡ï¼š<br><code>SHOW GLOBAL STATUS LIKE &#39;Com_______&#39;;</code> æˆ–è€… <code>SHOW SESSION STATUS LIKE &#39;Com_______&#39;;</code><br>ä¾‹ï¼š<code>show global status like &#39;Com_______&#39;</code></p><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—"></a>æ…¢æŸ¥è¯¢æ—¥å¿—</h3><p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤10ç§’ï¼‰çš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚<br>MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p><div class="code-wrapper"><pre><code class="hljs"># å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³slow_query_log=1# è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—long_query_time=2</code></pre></div><p>æ›´æ”¹åè®°å¾—é‡å¯MySQLæœåŠ¡ï¼Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š/var/lib/mysql/localhost-slow.log</p><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³çŠ¶æ€ï¼š<br><code>show variables like &#39;slow_query_log&#39;;</code></p><h3 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h3><p>show profile èƒ½åœ¨åšSQLä¼˜åŒ–æ—¶å¸®æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åœ¨å“ªé‡Œã€‚é€šè¿‡ have_profiling å‚æ•°ï¼Œèƒ½çœ‹åˆ°å½“å‰ MySQL æ˜¯å¦æ”¯æŒ profile æ“ä½œï¼š<br><code>SELECT @@have_profiling;</code><br>profiling é»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡setè¯­å¥åœ¨session/globalçº§åˆ«å¼€å¯ profilingï¼š<br><code>SET profiling = 1;</code><br>æŸ¥çœ‹æ‰€æœ‰è¯­å¥çš„è€—æ—¶ï¼š<br><code>show profiles;</code><br>æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼š<br><code>show profile for query query_id;</code><br>æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥CPUçš„ä½¿ç”¨æƒ…å†µ<br><code>show profile cpu for query query_id;</code></p><h3 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h3><p>EXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQL å¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨ SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚<br>è¯­æ³•ï¼š</p><div class="code-wrapper"><pre><code class="hljs"># ç›´æ¥åœ¨selectè¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­— explain / descEXPLAIN SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å HWERE æ¡ä»¶;</code></pre></div><p>EXPLAIN å„å­—æ®µå«ä¹‰ï¼š</p><ul><li>idï¼šselect æŸ¥è¯¢çš„åºåˆ—å·ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œ select å­å¥æˆ–è€…æ“ä½œè¡¨çš„é¡ºåºï¼ˆidç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›idä¸åŒï¼Œå€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼‰</li><li>select_typeï¼šè¡¨ç¤º SELECT çš„ç±»å‹ï¼Œå¸¸è§å–å€¼æœ‰ SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸é€‚ç”¨è¡¨è¿æ¥æˆ–è€…å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆSELECT/WHEREä¹‹ååŒ…å«äº†å­æŸ¥è¯¢ï¼‰ç­‰</li><li>typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸º NULLã€systemã€constã€eq_refã€refã€rangeã€indexã€all</li><li>possible_keyï¼šå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª</li><li>Keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•</li><li>Key_lenï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½</li><li>rowsï¼šMySQLè®¤ä¸ºå¿…é¡»è¦æ‰§è¡Œçš„è¡Œæ•°ï¼Œåœ¨InnoDBå¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„</li><li>filteredï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œæ•°å éœ€è¯»å–è¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼Œfilteredçš„å€¼è¶Šå¤§è¶Šå¥½</li></ul><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><p>ç´¢å¼•æ˜¯å¸®åŠ© MySQL <strong>é«˜æ•ˆè·å–æ•°æ®</strong>çš„<strong>æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰</strong>ã€‚åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥è¯¢ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p><p>ä¼˜ç¼ºç‚¹ï¼š</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„</li><li>ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†é™ä½äº†æ›´æ–°çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ INSERTã€UPDATEã€DELETE</li></ul><h3 id="ç´¢å¼•ç»“æ„"><a href="#ç´¢å¼•ç»“æ„" class="headerlink" title="ç´¢å¼•ç»“æ„"></a>ç´¢å¼•ç»“æ„</h3><div class="table-container"><table><thead><tr><th>ç´¢å¼•ç»“æ„</th><th>æè¿°</th></tr></thead><tbody><tr><td>B+Tree</td><td>æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒB+æ ‘ç´¢å¼•</td></tr><tr><td>Hash</td><td>åº•å±‚æ•°æ®ç»“æ„æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œåªæœ‰ç²¾ç¡®åŒ¹é…ç´¢å¼•åˆ—çš„æŸ¥è¯¢æ‰æœ‰æ•ˆï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢</td></tr><tr><td>R-Tree(ç©ºé—´ç´¢å¼•)</td><td>ç©ºé—´ç´¢å¼•æ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘</td></tr><tr><td>Full-Text(å…¨æ–‡ç´¢å¼•)</td><td>æ˜¯ä¸€ç§é€šè¿‡å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¿«é€ŸåŒ¹é…æ–‡æ¡£çš„æ–¹å¼ï¼Œç±»ä¼¼äº Lucene, Solr, ES</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>ç´¢å¼•</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>B+Treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>R-Treeç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Full-text</td><td>5.6ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table></div><h4 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h4><p><img src="https://dhc.pythonanywhere.com/media/editor/äºŒå‰æ ‘_20220316153214227108.png" alt="äºŒå‰æ ‘" title="äºŒå‰æ ‘"></p><p>äºŒå‰æ ‘çš„ç¼ºç‚¹å¯ä»¥ç”¨çº¢é»‘æ ‘æ¥è§£å†³ï¼š<br><img src="https://dhc.pythonanywhere.com/media/editor/çº¢é»‘æ ‘_20220316163142686602.png" alt="çº¢é»‘æ ‘" title="çº¢é»‘æ ‘"><br>çº¢é»‘æ ‘ä¹Ÿå­˜åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ B-Tree ç»“æ„ã€‚<br>B-Tree (å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘) ä»¥ä¸€æ£µæœ€å¤§åº¦æ•°ï¼ˆmax-degreeï¼ŒæŒ‡ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼‰ä¸º5ï¼ˆ5é˜¶ï¼‰çš„ b-tree ä¸ºä¾‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨4ä¸ªkeyï¼Œ5ä¸ªæŒ‡é’ˆï¼‰</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B-Treeç»“æ„_20220316163813441163.png" alt="B-Treeç»“æ„" title="B-Treeç»“æ„"></p><blockquote><p>B-Tree çš„æ•°æ®æ’å…¥è¿‡ç¨‹åŠ¨ç”»å‚ç…§ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68</a><br>æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p></blockquote><h4 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B+Tree"></a>B+Tree</h4><p>ç»“æ„å›¾ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B+Treeç»“æ„å›¾_20220316170700591277.png" alt="B+Treeç»“æ„å›¾" title="B+Treeç»“æ„å›¾"></p><blockquote><p>æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html">https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</a></p></blockquote><p>ä¸ B-Tree çš„åŒºåˆ«ï¼š</p><ul><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹</li><li>å¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨</li></ul><p>MySQL ç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„ B+Tree è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸ B+Tree çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„ B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚</p><p><img src="https://dhc.pythonanywhere.com/media/editor/ç»“æ„å›¾_20220316171730865611.png" alt="MySQL B+Tree ç»“æ„å›¾" title="MySQL B+Tree ç»“æ„å›¾"></p><h4 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h4><p>å“ˆå¸Œç´¢å¼•å°±æ˜¯é‡‡ç”¨ä¸€å®šçš„hashç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„hashå€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨hashè¡¨ä¸­ã€‚<br>å¦‚æœä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç›¸åŒçš„æ§½ä½ä¸Šï¼Œä»–ä»¬å°±äº§ç”Ÿäº†hashå†²çªï¼ˆä¹Ÿç§°ä¸ºhashç¢°æ’ï¼‰ï¼Œå¯ä»¥é€šè¿‡é“¾è¡¨æ¥è§£å†³ã€‚</p><p><img src="https://dhc.pythonanywhere.com/media/editor/Hashç´¢å¼•åŸç†å›¾_20220317143226150679.png" alt="Hashç´¢å¼•åŸç†å›¾" title="Hashç´¢å¼•åŸç†å›¾"></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>Hashç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=ã€inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetwwnã€&gt;ã€&lt;ã€â€¦ï¼‰</li><li>æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ</li><li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢å°±å¯ä»¥äº†ï¼Œæ•ˆç‡é€šå¸¸è¦é«˜äº B+Tree ç´¢å¼•</li></ul><p>å­˜å‚¨å¼•æ“æ”¯æŒï¼š</p><ul><li>Memory</li><li>InnoDB: å…·æœ‰è‡ªé€‚åº”hashåŠŸèƒ½ï¼Œhashç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“æ ¹æ® B+Tree ç´¢å¼•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ„å»ºçš„</li></ul><h4 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h4><ol><li>ä¸ºä»€ä¹ˆ InnoDB å­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨ B+Tree ç´¢å¼•ç»“æ„ï¼Ÿ</li></ol><ul><li>ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œå±‚çº§æ›´å°‘ï¼Œæœç´¢æ•ˆç‡é«˜</li><li>å¯¹äº B-Treeï¼Œæ— è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´ä¸€é¡µä¸­å­˜å‚¨çš„é”®å€¼å‡å°‘ï¼ŒæŒ‡é’ˆä¹Ÿè·Ÿç€å‡å°‘ï¼Œè¦åŒæ ·ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´æ€§èƒ½é™ä½</li><li>ç›¸å¯¹äº Hash ç´¢å¼•ï¼ŒB+Tree æ”¯æŒèŒƒå›´åŒ¹é…åŠæ’åºæ“ä½œ</li></ul><h3 id="ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼•åˆ†ç±»</h3><div class="table-container"><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>é’ˆå¯¹äºè¡¨ä¸­ä¸»é”®åˆ›å»ºçš„ç´¢å¼•</td><td>é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåªèƒ½æœ‰ä¸€ä¸ª</td><td>PRIMARY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>UNIQUE</td></tr><tr><td>å¸¸è§„ç´¢å¼•</td><td>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td></td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>å…¨æ–‡ç´¢å¼•æŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>FULLTEXT</td></tr></tbody></table></div><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ ¹æ®ç´¢å¼•çš„å­˜å‚¨å½¢å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><div class="table-container"><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>èšé›†ç´¢å¼•(Clustered Index)</td><td>å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾ä¸€å—ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®</td><td>å¿…é¡»æœ‰ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ª</td></tr><tr><td>äºŒçº§ç´¢å¼•(Secondary Index)</td><td>å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”®</td><td>å¯ä»¥å­˜åœ¨å¤šä¸ª</td></tr></tbody></table></div><p>æ¼”ç¤ºå›¾ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/åŸç†å›¾_20220318194454880073.png" alt="å¤§è‡´åŸç†" title="å¤§è‡´åŸç†"><br><img src="https://dhc.pythonanywhere.com/media/editor/æ¼”ç¤ºå›¾_20220319215403721066.png" alt="æ¼”ç¤ºå›¾" title="æ¼”ç¤ºå›¾"></p><p>èšé›†ç´¢å¼•é€‰å–è§„åˆ™ï¼š</p><ul><li>å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•</li><li>å¦‚æœä¸å­˜åœ¨ä¸»é”®ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€(UNIQUE)ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–æ²¡æœ‰åˆé€‚çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ InnoDB ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª rowid ä½œä¸ºéšè—çš„èšé›†ç´¢å¼•</li></ul><h4 id="æ€è€ƒé¢˜"><a href="#æ€è€ƒé¢˜" class="headerlink" title="æ€è€ƒé¢˜"></a>æ€è€ƒé¢˜</h4><p>1. ä»¥ä¸‹ SQL è¯­å¥ï¼Œå“ªä¸ªæ‰§è¡Œæ•ˆç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from user where id = 10;<br>select * from user where name = &#x27;Arm&#x27;;<br>-- å¤‡æ³¨ï¼šidä¸ºä¸»é”®ï¼Œnameå­—æ®µåˆ›å»ºçš„æœ‰ç´¢å¼•<br></code></pre></td></tr></table></figure><p>ç­”ï¼šç¬¬ä¸€æ¡è¯­å¥ï¼Œå› ä¸ºç¬¬äºŒæ¡éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›¸å½“äºä¸¤ä¸ªæ­¥éª¤ã€‚</p><p>2. InnoDB ä¸»é”®ç´¢å¼•çš„ B+Tree é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ</p><p>ç­”ï¼šå‡è®¾ä¸€è¡Œæ•°æ®å¤§å°ä¸º1kï¼Œä¸€é¡µä¸­å¯ä»¥å­˜å‚¨16è¡Œè¿™æ ·çš„æ•°æ®ã€‚InnoDB çš„æŒ‡é’ˆå ç”¨6ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œä¸»é”®å‡è®¾ä¸ºbigintï¼Œå ç”¨å­—èŠ‚æ•°ä¸º8.<br>å¯å¾—å…¬å¼ï¼š<code>n * 8 + (n + 1) * 6 = 16 * 1024</code>ï¼Œå…¶ä¸­ 8 è¡¨ç¤º bigint å ç”¨çš„å­—èŠ‚æ•°ï¼Œn è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡ï¼Œ(n + 1) è¡¨ç¤ºæŒ‡é’ˆæ•°é‡ï¼ˆæ¯”keyå¤šä¸€ä¸ªï¼‰ã€‚ç®—å‡ºnçº¦ä¸º1170ã€‚</p><p>å¦‚æœæ ‘çš„é«˜åº¦ä¸º2ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 16 = 18736</code>ï¼›<br>å¦‚æœæ ‘çš„é«˜åº¦ä¸º3ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 1171 * 16 = 21939856</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ†è¡¨ï¼Œæ¶‰åŠè¿ç»´ç¯‡çŸ¥è¯†ã€‚</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>åˆ›å»ºç´¢å¼•ï¼š<br><code>CREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (index_col_name, ...);</code><br>å¦‚æœä¸åŠ  CREATE åé¢ä¸åŠ ç´¢å¼•ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯å¸¸è§„ç´¢å¼•</p><p>æŸ¥çœ‹ç´¢å¼•ï¼š<br><code>SHOW INDEX FROM table_name;</code></p><p>åˆ é™¤ç´¢å¼•ï¼š<br><code>DROP INDEX index_name ON table_name;</code></p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- nameå­—æ®µä¸ºå§“åå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å¯èƒ½ä¼šé‡å¤ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºç´¢å¼•<br>create index idx_user_name on tb_user(name);<br>-- phoneæ‰‹æœºå·å­—æ®µçš„å€¼éç©ºï¼Œä¸”å”¯ä¸€ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•<br>create unique index idx_user_phone on tb_user (phone);<br>-- ä¸ºprofession, age, statusåˆ›å»ºè”åˆç´¢å¼•<br>create index idx_user_pro_age_stat on tb_user(profession, age, status);<br>-- ä¸ºemailå»ºç«‹åˆé€‚çš„ç´¢å¼•æ¥æå‡æŸ¥è¯¢æ•ˆç‡<br>create index idx_user_email on tb_user(email);<br><br>-- åˆ é™¤ç´¢å¼•<br>drop index idx_user_email on tb_user;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è§„åˆ™"><a href="#ä½¿ç”¨è§„åˆ™" class="headerlink" title="ä½¿ç”¨è§„åˆ™"></a>ä½¿ç”¨è§„åˆ™</h3><h4 id="æœ€å·¦å‰ç¼€æ³•åˆ™"><a href="#æœ€å·¦å‰ç¼€æ³•åˆ™" class="headerlink" title="æœ€å·¦å‰ç¼€æ³•åˆ™"></a>æœ€å·¦å‰ç¼€æ³•åˆ™</h4><p>å¦‚æœç´¢å¼•å…³è”äº†å¤šåˆ—ï¼ˆè”åˆç´¢å¼•ï¼‰ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚<br>å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†éƒ¨åˆ†å¤±æ•ˆï¼ˆåé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆï¼‰ã€‚</p><p>è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;, &gt;ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚å¯ä»¥ç”¨&gt;=æˆ–è€…&lt;=æ¥è§„é¿ç´¢å¼•å¤±æ•ˆé—®é¢˜ã€‚</p><h4 id="ç´¢å¼•å¤±æ•ˆæƒ…å†µ"><a href="#ç´¢å¼•å¤±æ•ˆæƒ…å†µ" class="headerlink" title="ç´¢å¼•å¤±æ•ˆæƒ…å†µ"></a>ç´¢å¼•å¤±æ•ˆæƒ…å†µ</h4><ol><li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where substring(phone, 10, 2) = &#39;15&#39;;</code></li><li>å­—ç¬¦ä¸²ç±»å‹å­—æ®µä½¿ç”¨æ—¶ï¼Œä¸åŠ å¼•å·ï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where phone = 17799990015;</code>ï¼Œæ­¤å¤„phoneçš„å€¼æ²¡æœ‰åŠ å¼•å·</li><li>æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œå¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•ä¸ä¼šæ˜¯å¤±æ•ˆï¼›å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where profession like &#39;%å·¥ç¨‹&#39;;</code>ï¼Œå‰åéƒ½æœ‰ % ä¹Ÿä¼šå¤±æ•ˆã€‚</li><li>ç”¨ or åˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœ or å…¶ä¸­ä¸€ä¸ªæ¡ä»¶çš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚</li><li>å¦‚æœ MySQL è¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚</li></ol><h4 id="SQL-æç¤º"><a href="#SQL-æç¤º" class="headerlink" title="SQL æç¤º"></a>SQL æç¤º</h4><p>æ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨SQLè¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ç´¢å¼•ï¼š<br><code>explain select * from tb_user use index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br>ä¸ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br><code>explain select * from tb_user ignore index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br>å¿…é¡»ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br><code>explain select * from tb_user force index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code></p><p>use æ˜¯å»ºè®®ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç´¢å¼• MySQL è¿˜ä¼šè‡ªå·±æƒè¡¡è¿è¡Œé€Ÿåº¦å»æ›´æ”¹ï¼Œforceå°±æ˜¯æ— è®ºå¦‚ä½•éƒ½å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</p><h4 id="è¦†ç›–ç´¢å¼•-amp-å›è¡¨æŸ¥è¯¢"><a href="#è¦†ç›–ç´¢å¼•-amp-å›è¡¨æŸ¥è¯¢" class="headerlink" title="è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢"></a>è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢</h4><p>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿”å›çš„åˆ—ï¼Œåœ¨è¯¥ç´¢å¼•ä¸­å·²ç»å…¨éƒ¨èƒ½æ‰¾åˆ°ï¼‰ï¼Œå‡å°‘ select *ã€‚</p><p>explain ä¸­ extra å­—æ®µå«ä¹‰ï¼š<br><code>using index condition</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®<br><code>using where; using index;</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨æŸ¥è¯¢</p><p>å¦‚æœåœ¨èšé›†ç´¢å¼•ä¸­ç›´æ¥èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡Œï¼Œåˆ™ç›´æ¥è¿”å›è¡Œæ•°æ®ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼Œå“ªæ€•æ˜¯select *ï¼›å¦‚æœåœ¨è¾…åŠ©ç´¢å¼•ä¸­æ‰¾èšé›†ç´¢å¼•ï¼Œå¦‚<code>select id, name from xxx where name=&#39;xxx&#39;;</code>ï¼Œä¹Ÿåªéœ€è¦é€šè¿‡è¾…åŠ©ç´¢å¼•(name)æŸ¥æ‰¾åˆ°å¯¹åº”çš„idï¼Œè¿”å›nameå’Œnameç´¢å¼•å¯¹åº”çš„idå³å¯ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼›å¦‚æœæ˜¯é€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾å…¶ä»–å­—æ®µï¼Œåˆ™éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå¦‚<code>select id, name, gender from xxx where name=&#39;xxx&#39;;</code></p><p>æ‰€ä»¥å°½é‡ä¸è¦ç”¨<code>select *</code>ï¼Œå®¹æ˜“å‡ºç°å›è¡¨æŸ¥è¯¢ï¼Œé™ä½æ•ˆç‡ï¼Œé™¤éæœ‰è”åˆç´¢å¼•åŒ…å«äº†æ‰€æœ‰å­—æ®µ</p><p>é¢è¯•é¢˜ï¼šä¸€å¼ è¡¨ï¼Œæœ‰å››ä¸ªå­—æ®µï¼ˆid, username, password, statusï¼‰ï¼Œç”±äºæ•°æ®é‡å¤§ï¼Œéœ€è¦å¯¹ä»¥ä¸‹SQLè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ‰æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼š<br><code>select id, username, password from tb_user where username=&#39;itcast&#39;;</code></p><p>è§£ï¼šç»™usernameå’Œpasswordå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›´æ¥è¦†ç›–ç´¢å¼•</p><h4 id="å‰ç¼€ç´¢å¼•"><a href="#å‰ç¼€ç´¢å¼•" class="headerlink" title="å‰ç¼€ç´¢å¼•"></a>å‰ç¼€ç´¢å¼•</h4><p>å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarchar, textç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜IOï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œæ­¤æ—¶å¯ä»¥åªé™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚</p><p>è¯­æ³•ï¼š<code>create index idx_xxxx on table_name(columnn(n));</code><br>å‰ç¼€é•¿åº¦ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•çš„é€‰æ‹©æ€§æ¥å†³å®šï¼Œè€Œé€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆåŸºæ•°ï¼‰å’Œæ•°æ®è¡¨çš„è®°å½•æ€»æ•°çš„æ¯”å€¼ï¼Œç´¢å¼•é€‰æ‹©æ€§è¶Šé«˜åˆ™æŸ¥è¯¢æ•ˆç‡è¶Šé«˜ï¼Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯1ï¼Œè¿™æ˜¯æœ€å¥½çš„ç´¢å¼•é€‰æ‹©æ€§ï¼Œæ€§èƒ½ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚<br>æ±‚é€‰æ‹©æ€§å…¬å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select count(distinct email) / count(*) from tb_user;<br>select count(distinct substring(email, 1, 5)) / count(*) from tb_user;<br></code></pre></td></tr></table></figure><p>show index é‡Œé¢çš„sub_partå¯ä»¥çœ‹åˆ°æ¥å–çš„é•¿åº¦</p><h4 id="å•åˆ—ç´¢å¼•-amp-è”åˆç´¢å¼•"><a href="#å•åˆ—ç´¢å¼•-amp-è”åˆç´¢å¼•" class="headerlink" title="å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•"></a>å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•</h4><p>å•åˆ—ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—<br>è”åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—<br>åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œè€ƒè™‘é’ˆå¯¹äºæŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•æ—¶ï¼Œå»ºè®®å»ºç«‹è”åˆç´¢å¼•ï¼Œè€Œéå•åˆ—ç´¢å¼•ã€‚</p><p>å•åˆ—ç´¢å¼•æƒ…å†µï¼š<br><code>explain select id, phone, name from tb_user where phone = &#39;17799990010&#39; and name = &#39;éŸ©ä¿¡&#39;;</code><br>è¿™å¥åªä¼šç”¨åˆ°phoneç´¢å¼•å­—æ®µ</p><h5 id="æ³¨æ„äº‹é¡¹-8"><a href="#æ³¨æ„äº‹é¡¹-8" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šæ¡ä»¶è”åˆæŸ¥è¯¢æ—¶ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè¯„ä¼°å“ªä¸ªå­—æ®µçš„ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œä¼šé€‰æ‹©è¯¥ç´¢å¼•å®Œæˆæœ¬æ¬¡æŸ¥è¯¢</li></ul><h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><ol><li>é’ˆå¯¹äºæ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„è¡¨å»ºç«‹ç´¢å¼•</li><li>é’ˆå¯¹äºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhereï¼‰ã€æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroup byï¼‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼Œå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå­—æ®µé•¿åº¦è¾ƒé•¿ï¼Œå¯ä»¥é’ˆå¯¹äºå­—æ®µçš„ç‰¹ç‚¹ï¼Œå»ºç«‹å‰ç¼€ç´¢å¼•</li><li>å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å•åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ï¼Œè”åˆç´¢å¼•å¾ˆå¤šæ—¶å€™å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>è¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•ç»“æ„çš„ä»£ä»·å°±è¶Šå¤§ï¼Œä¼šå½±å“å¢åˆ æ”¹çš„æ•ˆç‡</li><li>å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜å‚¨NULLå€¼ï¼Œè¯·åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨NOT NULLçº¦æŸå®ƒã€‚å½“ä¼˜åŒ–å™¨çŸ¥é“æ¯åˆ—æ˜¯å¦åŒ…å«NULLå€¼æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°ç¡®å®šå“ªä¸ªç´¢å¼•æœ€æœ‰æ•ˆåœ°ç”¨äºæŸ¥è¯¢</li></ol><h2 id="SQL-ä¼˜åŒ–"><a href="#SQL-ä¼˜åŒ–" class="headerlink" title="SQL ä¼˜åŒ–"></a>SQL ä¼˜åŒ–</h2><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>æ™®é€šæ’å…¥ï¼š</p><ol><li>é‡‡ç”¨æ‰¹é‡æ’å…¥ï¼ˆä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¸å»ºè®®è¶…è¿‡1000æ¡ï¼‰</li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡</li><li>ä¸»é”®é¡ºåºæ’å…¥</li></ol><p>å¤§æ‰¹é‡æ’å…¥ï¼š<br>å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤æ’å…¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° --local-infileï¼ˆè¿™ä¸€è¡Œåœ¨bash/cmdç•Œé¢è¾“å…¥ï¼‰<br>mysql --local-infile -u root -p<br># è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º1ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³<br>set global local_infile = 1;<br>select @@local_infile;<br># æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­<br>load data local infile &#x27;/root/sql1.log&#x27; into table &#x27;tb_user&#x27; fields terminated by &#x27;,&#x27; lines terminated by &#x27;\n&#x27;;<br></code></pre></td></tr></table></figure><h3 id="ä¸»é”®ä¼˜åŒ–"><a href="#ä¸»é”®ä¼˜åŒ–" class="headerlink" title="ä¸»é”®ä¼˜åŒ–"></a>ä¸»é”®ä¼˜åŒ–</h3><p>æ•°æ®ç»„ç»‡æ–¹å¼ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆIndex organized table, IOTï¼‰</p><p>é¡µåˆ†è£‚ï¼šé¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥å¡«å……100%ï¼Œæ¯ä¸ªé¡µåŒ…å«äº†2-Nè¡Œæ•°æ®ï¼ˆå¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œæº¢å‡ºï¼‰ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚<br>é¡µåˆå¹¶ï¼šå½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚å½“é¡µä¸­åˆ é™¤çš„è®°å½•åˆ°è¾¾ MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚</p><p>MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š</p><blockquote><p>æ–‡å­—è¯´æ˜ä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘é‡Œçš„PPTæ¼”ç¤ºè¿‡ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90</a></p></blockquote><p>ä¸»é”®è®¾è®¡åŸåˆ™ï¼š</p><ul><li>æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦</li><li>æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ AUTO_INCREMENT è‡ªå¢ä¸»é”®</li><li>å°½é‡ä¸è¦ä½¿ç”¨ UUID åšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–çš„è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å·</li><li>ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹</li></ul><h3 id="order-byä¼˜åŒ–"><a href="#order-byä¼˜åŒ–" class="headerlink" title="order byä¼˜åŒ–"></a>order byä¼˜åŒ–</h3><ol><li>Using filesortï¼šé€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒº sort buffer ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å« FileSort æ’åº</li><li>Using indexï¼šé€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜</li></ol><p>å¦‚æœorder byå­—æ®µå…¨éƒ¨ä½¿ç”¨å‡åºæ’åºæˆ–è€…é™åºæ’åºï¼Œåˆ™éƒ½ä¼šèµ°ç´¢å¼•ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå­—æ®µå‡åºæ’åºï¼Œå¦ä¸€ä¸ªå­—æ®µé™åºæ’åºï¼Œåˆ™ä¸ä¼šèµ°ç´¢å¼•ï¼Œexplainçš„extraä¿¡æ¯æ˜¾ç¤ºçš„æ˜¯<code>Using index, Using filesort</code>ï¼Œå¦‚æœè¦ä¼˜åŒ–æ‰Using filesortï¼Œåˆ™éœ€è¦å¦å¤–å†åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå¦‚ï¼š<code>create index idx_user_age_phone_ad on tb_user(age asc, phone desc);</code>ï¼Œæ­¤æ—¶ä½¿ç”¨<code>select id, age, phone from tb_user order by age asc, phone desc;</code>ä¼šå…¨éƒ¨èµ°ç´¢å¼•</p><p>æ€»ç»“ï¼š</p><ul><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰</li><li>å¦‚æœä¸å¯é¿å…å‡ºç°filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å° sort_buffer_sizeï¼ˆé»˜è®¤256kï¼‰</li></ul><h3 id="group-byä¼˜åŒ–"><a href="#group-byä¼˜åŒ–" class="headerlink" title="group byä¼˜åŒ–"></a>group byä¼˜åŒ–</h3><ul><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡</li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ul><p>å¦‚ç´¢å¼•ä¸º<code>idx_user_pro_age_stat</code>ï¼Œåˆ™å¥å¼å¯ä»¥æ˜¯<code>select ... where profession order by age</code>ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™</p><h3 id="limitä¼˜åŒ–"><a href="#limitä¼˜åŒ–" class="headerlink" title="limitä¼˜åŒ–"></a>limitä¼˜åŒ–</h3><p>å¸¸è§çš„é—®é¢˜å¦‚<code>limit 2000000, 10</code>ï¼Œæ­¤æ—¶éœ€è¦ MySQL æ’åºå‰2000000æ¡è®°å½•ï¼Œä½†ä»…ä»…è¿”å›2000000 - 2000010çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚<br>ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æ­¤è¯­å¥è€—æ—¶å¾ˆé•¿<br>select * from tb_sku limit 9000000, 10;<br>-- é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å¿«é€Ÿåº¦ï¼Œç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è¿›è¡Œæ’åºåŠæŸ¥è¯¢<br>select id from tb_sku order by id limit 9000000, 10;<br>-- ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º MySQL ä¸æ”¯æŒ in é‡Œé¢ä½¿ç”¨ limit<br>-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);<br>-- é€šè¿‡è¿è¡¨æŸ¥è¯¢å³å¯å®ç°ç¬¬ä¸€å¥çš„æ•ˆæœï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°ç¬¬äºŒå¥çš„é€Ÿåº¦<br>select * from tb_sku as s, (select id from tb_sku order by id limit 9000000, 10) as a where s.id = a.id;<br></code></pre></td></tr></table></figure><h3 id="countä¼˜åŒ–"><a href="#countä¼˜åŒ–" class="headerlink" title="countä¼˜åŒ–"></a>countä¼˜åŒ–</h3><p>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆå‰ææ˜¯ä¸é€‚ç”¨whereï¼‰ï¼›<br>InnoDB åœ¨æ‰§è¡Œ count(*) æ—¶ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯è®¡è®¡æ•°ã€‚<br>ä¼˜åŒ–æ–¹æ¡ˆï¼šè‡ªå·±è®¡æ•°ï¼Œå¦‚åˆ›å»ºkey-valueè¡¨å­˜å‚¨åœ¨å†…å­˜æˆ–ç¡¬ç›˜ï¼Œæˆ–è€…æ˜¯ç”¨redis</p><p>countçš„å‡ ç§ç”¨æ³•ï¼š</p><ul><li>å¦‚æœcountå‡½æ•°çš„å‚æ•°ï¼ˆcounté‡Œé¢å†™çš„é‚£ä¸ªå­—æ®µï¼‰ä¸æ˜¯NULLï¼ˆå­—æ®µå€¼ä¸ä¸ºNULLï¼‰ï¼Œç´¯è®¡å€¼å°±åŠ ä¸€ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼</li><li>ç”¨æ³•ï¼šcount(*)ã€count(ä¸»é”®)ã€count(å­—æ®µ)ã€count(1)</li><li>count(ä¸»é”®)è·Ÿcount(*)ä¸€æ ·ï¼Œå› ä¸ºä¸»é”®ä¸èƒ½ä¸ºç©ºï¼›count(å­—æ®µ)åªè®¡ç®—å­—æ®µå€¼ä¸ä¸ºNULLçš„è¡Œï¼›count(1)å¼•æ“ä¼šä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ª1ï¼Œç„¶åå°±countè¿™ä¸ª1ï¼Œè¿”å›ç»“æœä¹Ÿè·Ÿcount(*)ä¸€æ ·ï¼›count(null)è¿”å›0</li></ul><p>å„ç§ç”¨æ³•çš„æ€§èƒ½ï¼š</p><ul><li>count(ä¸»é”®)ï¼šInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯è¡Œçš„ä¸»é”®idå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºç©ºï¼‰</li><li>count(å­—æ®µ)ï¼šæ²¡æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullï¼Œè®¡æ•°ç´¯åŠ ï¼›æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(1)ï¼šInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€å±‚ï¼Œæ”¾ä¸€ä¸ªæ•°å­— 1 è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(*)ï¼šInnoDB å¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li></ul><p>æŒ‰æ•ˆç‡æ’åºï¼šcount(å­—æ®µ) &lt; count(ä¸»é”®) &lt; count(1) &lt; count(*)ï¼Œæ‰€ä»¥å°½é‡ä½¿ç”¨ count(*)</p><h3 id="updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰"><a href="#updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰" class="headerlink" title="updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰"></a>updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰</h3><p>InnoDB çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚</p><p>å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼š<br><code>update student set no = &#39;123&#39; where id = 1;</code>ï¼Œè¿™å¥ç”±äºidæœ‰ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”è¿™ä¸€è¡Œï¼›<br><code>update student set no = &#39;123&#39; where name = &#39;test&#39;;</code>ï¼Œè¿™å¥ç”±äºnameæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´å¼ è¡¨éƒ½é”ä½è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè§£å†³æ–¹æ³•æ˜¯ç»™nameå­—æ®µæ·»åŠ ç´¢å¼•</p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h3 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h3><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>å–å€¼èŒƒå›´</th><th>å¤§å°</th></tr></thead><tbody><tr><td>TINYINT</td><td>-128ã€œ127</td><td>1ä¸ªå­—èŠ‚</td></tr><tr><td>SMALLINT</td><td>-32768ã€œ32767</td><td>2ä¸ªå®‡èŠ‚</td></tr><tr><td>MEDIUMINT</td><td>-8388608ã€œ8388607</td><td>3ä¸ªå­—èŠ‚</td></tr><tr><td>INT (INTEGHR)</td><td>-2147483648ã€œ2147483647</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>BIGINT</td><td>-9223372036854775808ã€œ9223372036854775807</td><td>8ä¸ªå­—èŠ‚</td></tr></tbody></table></div><p>æ— ç¬¦å·åœ¨æ•°æ®ç±»å‹ååŠ  unsigned å…³é”®å­—ã€‚</p><h3 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h3><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>FLOAT</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>4 ä¸ªå­—èŠ‚</td></tr><tr><td>DOUBLE</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>DECIMAL (M, D)ï¼ŒDEC</td><td>å‹ç¼©çš„â€œä¸¥æ ¼â€å®šç‚¹æ•°</td><td>M+2 ä¸ªå­—èŠ‚</td></tr></tbody></table></div><h3 id="æ—¥æœŸå’Œæ—¶é—´"><a href="#æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´"></a>æ—¥æœŸå’Œæ—¶é—´</h3><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>æ—¥æœŸæ ¼å¼</th><th>æ—¥æœŸèŒƒå›´</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 ä¸ªå­—èŠ‚</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 ä¸ªå­—èŠ‚</td></tr></tbody></table></div><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>å›ºå®šé•¿åº¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚ï¼Œ1&lt;=M&lt;=255</td></tr><tr><td>VARCHAR(M)</td><td>å˜é•¿éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt; = Må’Œ 1&lt;=M&lt;=255</td></tr><tr><td>TINYTEXT</td><td>éå¸¸å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>TEXT</td><td>å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+2å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMTEXT</td><td>ä¸­ç­‰å¤§å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+3å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGTEXT</td><td>å¤§çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+4å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr><tr><td>ENUM</td><td>æšä¸¾ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæšä¸¾å­—ç¬¦ä¸²å€¼</td><td>1æˆ–2ä¸ªå­—èŠ‚ï¼Œå–å†³äºæšä¸¾å€¼çš„æ•°ç›® (æœ€å¤§å€¼ä¸º65535)</td></tr><tr><td>SET</td><td>ä¸€ä¸ªè®¾ç½®ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥æœ‰é›¶ä¸ªæˆ– å¤šä¸ªSETæˆå‘˜</td><td>1ã€2ã€3ã€4æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºé›†åˆ æˆå‘˜çš„æ•°é‡ï¼ˆæœ€å¤š64ä¸ªæˆå‘˜ï¼‰</td></tr></tbody></table></div><h3 id="äºŒè¿›åˆ¶ç±»å‹"><a href="#äºŒè¿›åˆ¶ç±»å‹" class="headerlink" title="äºŒè¿›åˆ¶ç±»å‹"></a>äºŒè¿›åˆ¶ç±»å‹</h3><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>BIT(M)</td><td>ä½å­—æ®µç±»å‹</td><td>å¤§çº¦ (M+7)/8 å­—èŠ‚</td></tr><tr><td>BINARY(M)</td><td>å›ºå®šé•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚</td></tr><tr><td>VARBINARY (M)</td><td>å¯å˜é•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M+1 å­—èŠ‚</td></tr><tr><td>TINYBLOB (M)</td><td>éå¸¸å°çš„BLOB</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>BLOB (M)</td><td>å° BLOB</td><td>L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMBLOB (M)</td><td>ä¸­ç­‰å¤§å°çš„BLOB</td><td>L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGBLOB (M)</td><td>éå¸¸å¤§çš„BLOB</td><td>L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr></tbody></table></div><h1 id="å…­ã€æƒé™ä¸€è§ˆè¡¨"><a href="#å…­ã€æƒé™ä¸€è§ˆè¡¨" class="headerlink" title="å…­ã€æƒé™ä¸€è§ˆè¡¨"></a>å…­ã€æƒé™ä¸€è§ˆè¡¨</h1><blockquote><p>å…·ä½“æƒé™çš„ä½œç”¨è¯¦è§<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>GRANT å’Œ REVOKE å…è®¸çš„é™æ€æƒé™</p><div class="table-container"><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Grant Table Column</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_all"><code>ALL [PRIVILEGES]</code></a></td><td style="text-align:left">Synonym for â€œall privilegesâ€</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter"><code>ALTER</code></a></td><td style="text-align:left"><code>Alter_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter-routine"><code>ALTER ROUTINE</code></a></td><td style="text-align:left"><code>Alter_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create"><code>CREATE</code></a></td><td style="text-align:left"><code>Create_priv</code></td><td style="text-align:left">Databases, tables, or indexes</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-role"><code>CREATE ROLE</code></a></td><td style="text-align:left"><code>Create_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-routine"><code>CREATE ROUTINE</code></a></td><td style="text-align:left"><code>Create_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-tablespace"><code>CREATE TABLESPACE</code></a></td><td style="text-align:left"><code>Create_tablespace_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-temporary-tables"><code>CREATE TEMPORARY TABLES</code></a></td><td style="text-align:left"><code>Create_tmp_table_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-user"><code>CREATE USER</code></a></td><td style="text-align:left"><code>Create_user_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-view"><code>CREATE VIEW</code></a></td><td style="text-align:left"><code>Create_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_delete"><code>DELETE</code></a></td><td style="text-align:left"><code>Delete_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop"><code>DROP</code></a></td><td style="text-align:left"><code>Drop_priv</code></td><td style="text-align:left">Databases, tables, or views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop-role"><code>DROP ROLE</code></a></td><td style="text-align:left"><code>Drop_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_event"><code>EVENT</code></a></td><td style="text-align:left"><code>Event_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_execute"><code>EXECUTE</code></a></td><td style="text-align:left"><code>Execute_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_file"><code>FILE</code></a></td><td style="text-align:left"><code>File_priv</code></td><td style="text-align:left">File access on server host</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_grant-option"><code>GRANT OPTION</code></a></td><td style="text-align:left"><code>Grant_priv</code></td><td style="text-align:left">Databases, tables, or stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index"><code>INDEX</code></a></td><td style="text-align:left"><code>Index_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_insert"><code>INSERT</code></a></td><td style="text-align:left"><code>Insert_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables"><code>LOCK TABLES</code></a></td><td style="text-align:left"><code>Lock_tables_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_process"><code>PROCESS</code></a></td><td style="text-align:left"><code>Process_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_proxy"><code>PROXY</code></a></td><td style="text-align:left">See <code>proxies_priv</code> table</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references"><code>REFERENCES</code></a></td><td style="text-align:left"><code>References_priv</code></td><td style="text-align:left">Databases or tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a></td><td style="text-align:left"><code>Reload_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a></td><td style="text-align:left"><code>Repl_client_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a></td><td style="text-align:left"><code>Repl_slave_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select"><code>SELECT</code></a></td><td style="text-align:left"><code>Select_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a></td><td style="text-align:left"><code>Show_db_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-view"><code>SHOW VIEW</code></a></td><td style="text-align:left"><code>Show_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown"><code>SHUTDOWN</code></a></td><td style="text-align:left"><code>Shutdown_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super"><code>SUPER</code></a></td><td style="text-align:left"><code>Super_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_trigger"><code>TRIGGER</code></a></td><td style="text-align:left"><code>Trigger_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_update"><code>UPDATE</code></a></td><td style="text-align:left"><code>Update_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_usage"><code>USAGE</code></a></td><td style="text-align:left">Synonym for â€œno privilegesâ€</td><td style="text-align:left">Server administration</td></tr></tbody></table></div><p>GRANT å’Œ REVOKE å…è®¸çš„åŠ¨æ€æƒé™</p><div class="table-container"><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_application-password-admin"><code>APPLICATION_PASSWORD_ADMIN</code></a></td><td style="text-align:left">Dual password administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-abort-exempt"><code>AUDIT_ABORT_EXEMPT</code></a></td><td style="text-align:left">Allow queries blocked by audit log filter</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-admin"><code>AUDIT_ADMIN</code></a></td><td style="text-align:left">Audit log administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_authentication-policy-admin"><code>AUTHENTICATION_POLICY_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_backup-admin"><code>BACKUP_ADMIN</code></a></td><td style="text-align:left">Backup administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-admin"><code>BINLOG_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-encryption-admin"><code>BINLOG_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_clone-admin"><code>CLONE_ADMIN</code></a></td><td style="text-align:left">Clone administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_connection-admin"><code>CONNECTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_encryption-key-admin"><code>ENCRYPTION_KEY_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-admin"><code>FIREWALL_ADMIN</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-exempt"><code>FIREWALL_EXEMPT</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-user"><code>FIREWALL_USER</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-optimizer-costs"><code>FLUSH_OPTIMIZER_COSTS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-status"><code>FLUSH_STATUS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-tables"><code>FLUSH_TABLES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-user-resources"><code>FLUSH_USER_RESOURCES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-admin"><code>GROUP_REPLICATION_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-stream"><code>GROUP_REPLICATION_STREAM</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_innodb-redo-log-archive"><code>INNODB_REDO_LOG_ARCHIVE</code></a></td><td style="text-align:left">Redo log archiving administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_ndb-stored-user"><code>NDB_STORED_USER</code></a></td><td style="text-align:left">NDB Cluster</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_passwordless-user-admin"><code>PASSWORDLESS_USER_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_persist-ro-variables-admin"><code>PERSIST_RO_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-applier"><code>REPLICATION_APPLIER</code></a></td><td style="text-align:left"><code>PRIVILEGE_CHECKS_USER</code> for a replication channel</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave-admin"><code>REPLICATION_SLAVE_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-admin"><code>RESOURCE_GROUP_ADMIN</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-user"><code>RESOURCE_GROUP_USER</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_role-admin"><code>ROLE_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_session-variables-admin"><code>SESSION_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_set-user-id"><code>SET_USER_ID</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-routine"><code>SHOW_ROUTINE</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-user"><code>SYSTEM_USER</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-variables-admin"><code>SYSTEM_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_table-encryption-admin"><code>TABLE_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_version-token-admin"><code>VERSION_TOKEN_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_xa-recover-admin"><code>XA_RECOVER_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr></tbody></table></div><p><strong>å°æŠ€å·§</strong></p><ol><li>åœ¨SQLè¯­å¥ä¹‹ååŠ ä¸Š<code>\G</code>ä¼šå°†ç»“æœçš„è¡¨æ ¼å½¢å¼è½¬æ¢æˆè¡Œæ–‡æœ¬å½¢å¼</li><li>æŸ¥çœ‹Mysqlæ•°æ®åº“å ç”¨ç©ºé—´ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT table_schema &quot;Database Name&quot;<br>     , SUM(data_length + index_length) / (1024 * 1024) &quot;Database Size in MB&quot;<br>FROM information_schema.TABLES<br>GROUP BY table_schema;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>data base</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer Systems: A Programmerâ€˜s Perspective</title>
    <link href="/2022/04/15/Computer-Systems-A-Programmer-s-Perspective/"/>
    <url>/2022/04/15/Computer-Systems-A-Programmer-s-Perspective/</url>
    
    <content type="html"><![CDATA[<h1 id="Chapter-1-A-Tour-of-Computer-System"><a href="#Chapter-1-A-Tour-of-Computer-System" class="headerlink" title="Chapter 1: A Tour of Computer System"></a>Chapter 1: A Tour of Computer System</h1><p><strong>ç”±ä¸€ä¸ªhelloworldçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸæ¥æ¼”ç¤º</strong></p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/The-Compilation-System.png" alt="The-Compilation-System"></p><p><strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç†è§£ç¼–è¯‘ç³»ç»Ÿï¼Ÿ</strong></p><p>1âƒ£ï¸ Optimizing program performance(ä¼˜åŒ–ç¨‹åºæ€§èƒ½)</p><p>e.g. ä¸€ä¸ªswitchè¯­å¥æ˜¯ä¸æ˜¯è¦æ¯”ä¸€è¿ä¸²çš„if-elseè¦é«˜æ•ˆçš„å¤šï¼Ÿ</p><p>2âƒ£ï¸ Understanding link-time errors(ç†è§£é“¾æ¥æ—¶å‡ºç°çš„é”™è¯¯)</p><p>e.g. é™æ€å˜é‡å’Œå…¨å±€å˜é‡çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>3âƒ£ï¸ Avoiding security holes(é¿å…å®‰å…¨æ¼æ´)</p><p>e.g. ç¼“å†²åŒºæº¢å‡ºé”™è¯¯äº§ç”Ÿï¼Ÿ</p><p><strong>è®¡ç®—æœºç¡¬ä»¶ç»„æˆç³»ç»Ÿä»¥åŠå®Œæˆhello worldç¨‹åºçš„ç¡¬ä»¶å¤„ç†è¿‡ç¨‹</strong></p><p>PC(Program Count)ï¼šç¨‹åºè®¡æ•°å™¨ï¼Œå¤§å°ä¸ºä¸€ä¸ªå­—çš„å­˜å‚¨åŒºåŸŸã€‚32ä½ç³»ç»Ÿä¸­ï¼Œ1 word = 4 byteï¼Œ64ä½ç³»ç»Ÿä¸­ï¼Œ1 word = 8byteã€‚</p><p>Register fileï¼šå¯„å­˜å™¨ã€‚</p><p>ALUï¼šå¤„ç†å™¨ã€‚</p><p>Bus interfaceï¼šæ€»çº¿ã€‚</p><p>Diskï¼šç£ç›˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/STEP1-INPUT.png" alt="STEP1-INPUT"></p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/STEP2-DMA.png" alt="STEP2-DMA"></p><p>DMAæŠ€æœ¯ï¼šæ•°æ®å¯ä»¥ä¸ç»è¿‡å¤„ç†å™¨ï¼Œç›´æ¥ä»ç£ç›˜æŠµè¾¾å†…å­˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/STEP3-Display.png" alt="STEP3-Display"></p><p>tipsï¼š1âƒ£ï¸ å¤§å®¹é‡çš„è®¾å¤‡ä¼šæ¯”å°å®¹é‡è®¾å¤‡è¿è¡Œé€Ÿåº¦æ›´æ…¢ã€‚2âƒ£ï¸ è¿è¡Œé€Ÿåº¦æ›´å¿«çš„è®¾å¤‡æ¯”ä½é€Ÿè®¾å¤‡æ›´è´µã€‚</p><p>e.g. å†…å­˜è™½å°ä½†ä»·æ ¼å’Œå¤–å­˜çš„ä»·æ ¼å·®ä¸å¤šã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/Memory%20Hierarchy.png" alt="Memory Hierarchy"></p><p>L1ã€L2ã€L3ä¸ºæˆ‘ä»¬å¸¸è¯´çš„ä¸‰çº§ç¼“å­˜ã€‚</p><p><strong>æ“ä½œç³»ç»Ÿåœ¨åº”ç”¨ç¨‹åºå’Œç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„è§’è‰²</strong></p><h4 id=""><a href="#" class="headerlink" title=""></a><img src="https://cdn.jsdelivr.net/gh/PanYuHaa/PicGo/img/The%20Operating%20System%20Manages%20Hardware.png" alt="The Operating System Manages Hardware"></h4><p>1âƒ£ï¸ é˜²æ­¢ç¡¬ä»¶è¢«å¤±æ§çš„åº”ç”¨ç¨‹åºæ»¥ç”¨</p><p>2âƒ£ï¸ æ“ä½œç³»ç»Ÿæä¾›ç»Ÿä¸€çš„æœºåˆ¶æ¥æ§åˆ¶è¿™äº›å¤æ‚çš„åº•å±‚ç¡¬ä»¶</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><h2 id="1-1-ä¿¡æ¯å°±æ˜¯ä½-ä¸Šä¸‹æ–‡"><a href="#1-1-ä¿¡æ¯å°±æ˜¯ä½-ä¸Šä¸‹æ–‡" class="headerlink" title="1.1 ä¿¡æ¯å°±æ˜¯ä½ + ä¸Šä¸‹æ–‡"></a>1.1 ä¿¡æ¯å°±æ˜¯ä½ + ä¸Šä¸‹æ–‡</h2><p>1âƒ£ï¸ <strong>ä½•ä¸ºä¸Šä¸‹æ–‡ï¼Ÿ</strong></p><p>ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œä»»åŠ¡æ‰€éœ€è¦çš„ç›¸å…³ä¿¡æ¯ã€‚è¿™ä¸ªä»»åŠ¡å¯ä»¥æ˜¯ä¸€æ®µä»£ç ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªå‡½æ•°ã€‚å½“è¿™ä¸ªâ€œä»»åŠ¡â€ï¼Œç›¸å…³ä¿¡æ¯éœ€è¦ä¿å­˜ä¸‹æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨Contextæ¥è®°å½•äº†ã€‚</p><h2 id="1-2-ç¨‹åºè¢«å…¶ä»–ç¨‹åºç¿»è¯‘æˆä¸åŒçš„æ ¼å¼"><a href="#1-2-ç¨‹åºè¢«å…¶ä»–ç¨‹åºç¿»è¯‘æˆä¸åŒçš„æ ¼å¼" class="headerlink" title="1.2 ç¨‹åºè¢«å…¶ä»–ç¨‹åºç¿»è¯‘æˆä¸åŒçš„æ ¼å¼"></a>1.2 ç¨‹åºè¢«å…¶ä»–ç¨‹åºç¿»è¯‘æˆä¸åŒçš„æ ¼å¼</h2><p>1âƒ£ï¸<strong>GNUæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>GNUæ˜¯é¡¹ç›®å¼€å‘å·¥å…·å®ƒåŒ…å«äº†ï¼šEMACSç¼–è¯‘å™¨ã€GCCç¼–è¯‘å™¨ã€GDBè°ƒè¯•å™¨ã€æ±‡ç¼–å™¨ã€é“¾æ¥å™¨ã€å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·ä»¥åŠå…¶å®ƒä¸€äº›éƒ¨ä»¶ã€‚ç›®å‰éšç€å‘å±•å·²ç»æ”¯æŒè®¸å¤šä¸åŒçš„è¯­è¨€äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Computer Base</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSAPP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer</title>
    <link href="/2022/04/12/%E5%89%91%E6%8C%87offer/"/>
    <url>/2022/04/12/%E5%89%91%E6%8C%87offer/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°ç»„ä¸çŸ©é˜µ"><a href="#æ•°ç»„ä¸çŸ©é˜µ" class="headerlink" title="æ•°ç»„ä¸çŸ©é˜µ"></a>æ•°ç»„ä¸çŸ©é˜µ</h1><h2 id="3-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—"><a href="#3-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—" class="headerlink" title="3. æ•°ç»„ä¸­é‡å¤çš„æ•°å­—"></a>3. æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</h2><h2 id="4-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"><a href="#4-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾" class="headerlink" title="4. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"></a>4. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</h2><p><strong>æè¿°</strong></p><p>åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„arrayä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ </p><p>[[1,2,8,9],<br>[2,4,9,12],<br>[4,7,10,13],<br>[6,8,11,15]] </p><p>ç»™å®š target = 7ï¼Œè¿”å› trueã€‚ </p><p>ç»™å®š target = 3ï¼Œè¿”å› falseã€‚</p><p><strong>æ€è·¯</strong></p><p>(1)å¯¹äºæ•°ç»„ arr [row] [col] çš„rowå’Œcolï¼Œæˆ‘ä»¬æ˜¯æŒ‰å…ˆè¡Œååˆ—æ¥çœ‹çš„ã€‚ç”¨äºŒç»´æ•°ç»„ä¸¾ä¾‹ï¼Œarr.length è¡¨ç¤ºçš„æ˜¯rowçš„é•¿åº¦ï¼Œarr[0].length è¡¨ç¤ºçš„æ˜¯åˆ—çš„é•¿åº¦ã€‚</p><p>(2)è¿™ç§é—®é¢˜çš„é€šå¸¸æ€è·¯ä¸€èˆ¬æ˜¯åŒå¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦è‡ªç„¶åˆ°è¾¾äº†o(n^2)ï¼Œæ‰€ä»¥æœ€ç›´æ¥çš„ä¼˜åŒ–æ–¹å¼å°±æ˜¯é™ä½æ—¶é—´å¤æ‚åº¦ï¼ŒæŠŠäºŒç»´æ•°ç»„çš„å¤„ç†å±•å¹³å˜æˆä¸€å›´çš„åœ°å›¾ç„¶åé€šè¿‡æ’åºçš„è§„å¾‹æ¥æ‰¾åˆ°çªç ´å£ã€‚</p><p><strong>è§£æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">Find</span><span class="hljs-params">(<span class="hljs-type">int</span> target, <span class="hljs-type">int</span> [][] array)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> array[<span class="hljs-number">0</span>].length - <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> search;<br>      <br><span class="hljs-comment">//ä¸è¶Šç•Œçš„æƒ…å†µä¸‹search</span><br>    <span class="hljs-keyword">while</span>(row &lt;= (array.length - <span class="hljs-number">1</span>) &amp;&amp; col &gt;= <span class="hljs-number">0</span>)&#123;<br>        search = array[row][col]; <span class="hljs-comment">// åˆå§‹åŒ–</span><br>        <span class="hljs-keyword">if</span>(search == target)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(search &gt; target)&#123;<br>            col--;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(search &lt; target)&#123;<br>            row++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-æ›¿æ¢ç©ºæ ¼"><a href="#5-æ›¿æ¢ç©ºæ ¼" class="headerlink" title="5. æ›¿æ¢ç©ºæ ¼"></a>5. æ›¿æ¢ç©ºæ ¼</h2><p><strong>æè¿°</strong></p><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²sä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸ºWe Are Happy.åˆ™ç»è¿‡æ›¿æ¢ä¹‹åçš„å­—ç¬¦ä¸²ä¸ºWe%20Are%20Happyã€‚</p><p><strong>æ€è·¯</strong></p><p>æœ€å…ˆå­¦ä¼šçš„æ˜¯åˆ†æ¸…æ¥šString, StringBuffer, StringBuilderã€‚</p><p>æ“ä½œ<strong>å°‘é‡çš„æ•°æ®</strong>:é€‚ç”¨String</p><p><strong>å•çº¿ç¨‹</strong>æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œ<strong>å¤§é‡æ•°æ®</strong>:é€‚ç”¨StringBuilder(çº¿ç¨‹ä¸å®‰å…¨)</p><p><strong>å¤šçº¿ç¨‹</strong>æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œ<strong>å¤§é‡æ•°æ®</strong>:é€‚ç”¨StringBuffer(çº¿ç¨‹å®‰å…¨)</p><p>Stringé•¿åº¦ä¸å¯å˜ï¼Œå…¶ä½™ä¸¤ä¸ªé•¿åº¦å¯å˜ï¼Œé»˜è®¤é•¿åº¦ä¸º16</p><p>å®é™…ä¸Šæ˜¯å®ç°äº†javaä¸­String.replace(String1, String2)çš„åŠŸèƒ½</p><p><strong>è§£æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">replaceSpace</span> <span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-comment">//å¦‚æœæœ¬æ¥å°±æ˜¯ç©ºå­—ç¬¦ä¸²é‚£æˆ‘ä»¬è¿”å›å°±å¥½ã€‚</span><br>        <span class="hljs-keyword">if</span>(s==<span class="hljs-literal">null</span> || s.length()==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> s;<br>        <span class="hljs-comment">//ä½¿ç”¨StringBuilderåœ¨éå†è¿‡ç¨‹ä¸­æ„å»ºæ–°çš„å­—ç¬¦ä¸²ã€‚</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-type">char</span> <span class="hljs-variable">blank</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27; &#x27;</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;s.length();i++)&#123;<br>            <span class="hljs-keyword">if</span>(s.charAt(i)!=blank)<br>                builder.append(s.charAt(i));<br>            <span class="hljs-keyword">else</span><br>                builder.append(<span class="hljs-string">&quot;%20&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> builder.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="29-é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"><a href="#29-é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ" class="headerlink" title="29. é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"></a>29. é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</h2><p><strong>æè¿°</strong></p><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—</p><p><strong>æ€è·¯</strong></p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸æ–­åœ°æ”¶ç¼©çŸ©é˜µçš„è¾¹ç•Œï¼Œç¡®å®šè¾¹ç•Œï¼Œé”ä¸€åŠ¨ä¸€<br>å®šä¹‰å››ä¸ªå˜é‡ä»£è¡¨èŒƒå›´ï¼Œupã€downã€leftã€right</p><ol><li>å‘å³èµ°å­˜å…¥æ•´è¡Œçš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥è¡Œå†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨ä¸Šè¾¹ç•Œçš„ up åŠ ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨ä¸‹è¾¹ç•Œçš„ down äº¤é”™ </li><li>å‘ä¸‹èµ°å­˜å…¥æ•´åˆ—çš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥åˆ—å†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨å³è¾¹ç•Œçš„ right å‡ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨å·¦è¾¹ç•Œçš„ left äº¤é”™ </li><li>å‘å·¦èµ°å­˜å…¥æ•´è¡Œçš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥è¡Œå†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨ä¸‹è¾¹ç•Œçš„ down å‡ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨ä¸Šè¾¹ç•Œçš„ up äº¤é”™ </li><li>å‘ä¸Šèµ°å­˜å…¥æ•´åˆ—çš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥åˆ—å†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨å·¦è¾¹ç•Œçš„ left åŠ ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨å³è¾¹ç•Œçš„ right äº¤é”™</li></ol><p><strong>è§£æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ArrayList&lt;Integer&gt; <span class="hljs-title function_">printMatrix</span><span class="hljs-params">(<span class="hljs-type">int</span> [][] matrix)</span> &#123;<br>        ArrayList&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">if</span>(matrix == <span class="hljs-literal">null</span> || matrix.length == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].length == <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> list;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">up</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">down</span> <span class="hljs-operator">=</span> matrix.length-<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> matrix[<span class="hljs-number">0</span>].length-<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-comment">// æœ€ä¸Šé¢ä¸€è¡Œ</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> left; col &lt;= right; col++)&#123;<br>                list.add(matrix[up][col]);<br>            &#125;<br>            <span class="hljs-comment">// å‘ä¸‹é€¼è¿‘</span><br>            up++;<br>            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span><br>            <span class="hljs-keyword">if</span>(up &gt; down)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-comment">// æœ€å³è¾¹ä¸€è¡Œ</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> up; row &lt;= down; row++)&#123;<br>                list.add(matrix[row][right]);<br>            &#125;<br>            <span class="hljs-comment">// å‘å·¦é€¼è¿‘</span><br>            right--;<br>            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span><br>            <span class="hljs-keyword">if</span>(left &gt; right)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-comment">// æœ€ä¸‹é¢ä¸€è¡Œ</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> right; col &gt;= left; col--)&#123;<br>                list.add(matrix[down][col]);<br>            &#125;<br>            <span class="hljs-comment">// å‘ä¸Šé€¼è¿‘</span><br>            down--;<br>            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span><br>            <span class="hljs-keyword">if</span>(up &gt; down)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-comment">// æœ€å·¦è¾¹ä¸€è¡Œ</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> down; row &gt;= up; row--)&#123;<br>                list.add(matrix[row][left]);<br>            &#125;<br>            <span class="hljs-comment">// å‘å³é€¼è¿‘</span><br>            left++;<br>            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span><br>            <span class="hljs-keyword">if</span>(left &gt; right)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> list;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="50-ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ä½ç½®"><a href="#50-ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ä½ç½®" class="headerlink" title="50. ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ä½ç½®"></a>50. ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ä½ç½®</h2><p><strong>æè¿°</strong></p><p>åœ¨ä¸€ä¸ªé•¿ä¸º å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦,å¹¶è¿”å›å®ƒçš„ä½ç½®, å¦‚æœæ²¡æœ‰åˆ™è¿”å› -1ï¼ˆéœ€è¦åŒºåˆ†å¤§å°å†™ï¼‰ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰</p><p><strong>æ€è·¯</strong></p><p>1ã€ç”¨indexOfå’ŒlastIndexOfæ¥å®ç°ï¼Œè‹¥æ‰¾åˆ°ç›´æ¥è¿”å›ä¸‹æ ‡ï¼Œè‹¥æ²¡æ‰¾åˆ°è¿”å›-1ï¼ŒindexOfä¸ºæœ€å…ˆå‡ºç°çš„ä½ç½®ï¼ŒlastIndexOfä¸ºæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</p><p>2ã€ç”¨Mapï¼ŒMapä¸­çš„é›†åˆï¼Œå…ƒç´ æ˜¯æˆå¯¹å­˜åœ¨çš„(ç†è§£ä¸ºå¤«å¦»)ã€‚æ¯ä¸ªå…ƒç´ ç”±é”®ä¸å€¼ä¸¤éƒ¨åˆ†ç»„æˆï¼Œé€šè¿‡é”®å¯ä»¥æ‰¾å¯¹æ‰€å¯¹åº”çš„å€¼ã€‚</p><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMapä¸­çš„é›†åˆä¸èƒ½åŒ…å«é‡å¤çš„é”®ï¼Œå€¼å¯ä»¥é‡å¤ï¼›æ¯ä¸ªé”®åªèƒ½å¯¹åº”ä¸€ä¸ªå€¼ã€‚</li><li>Mapä¸­å¸¸ç”¨çš„é›†åˆä¸ºHashMapé›†åˆã€LinkedHashMapé›†åˆã€‚</li></ul><p><strong>è§£æ³•1</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">FirstNotRepeatingChar</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++) &#123;                    <span class="hljs-keyword">if</span>(str.indexOf(str.charAt(i)) != str.lastIndexOf(str.charAt(i)))<br>                <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">return</span> i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£æ³•2</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">FirstNotRepeatingChar</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-comment">//ArrayList list=new ArrayList;</span><br>        java.util.HashMap&lt;Character,Integer&gt; map=<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.HashMap&lt;&gt;();<br>        <span class="hljs-type">char</span> [] arr=str.toCharArray();<br>        <span class="hljs-comment">//æŠŠæ•°ç»„ä¸­çš„å€¼æ·»åŠ åˆ°mapé›†åˆä¸­ï¼Œå¹¶ä¸”è®°å½•å‡ºç°çš„æ¬¡æ•°</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;arr.length;i++)&#123;<br>            <span class="hljs-comment">//containsKeyè¿”å›å¸ƒå°”ç±»å‹</span><br>             <span class="hljs-keyword">if</span>(!map.containsKey(arr[i]))&#123;<br>                 map.put(arr[i],<span class="hljs-number">1</span>);<br>             &#125;<span class="hljs-keyword">else</span>&#123;<br>                 <span class="hljs-type">int</span> count=map.get(arr[i]);<br>                <span class="hljs-comment">//replaceæ›¿æ¢çš„æ˜¯valueè€Œä¸æ˜¯keyï¼Œkeyæ˜¯å”¯ä¸€çš„</span><br>                 map.replace(arr[i],count+<span class="hljs-number">1</span>);<br>             &#125;<br>         &#125;<br>        <span class="hljs-comment">//æ ¹æ®mapé›†åˆä¸­çš„keyï¼Œå¯»æ‰¾valueï¼Œè¿”å›ç¬¬ä¸€ä¸ªå‡ºç°ç¬¬ä¸€æ¬¡çš„å€¼ï¼Œè¿”å›i</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;arr.length;i++)&#123;<br>            <span class="hljs-keyword">if</span>(map.get(arr[i])==<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-keyword">return</span> i;<br>            &#125;<br>        &#125;      <br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>algorithm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡offer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/04/12/hello-world/"/>
    <url>/2022/04/12/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
